{
    "active_lock_reason": null,
    "assignee": {
        "avatar_url": "https://avatars.githubusercontent.com/u/6366270?v=4",
        "events_url": "https://api.github.com/users/zchee/events{/privacy}",
        "followers_url": "https://api.github.com/users/zchee/followers",
        "following_url": "https://api.github.com/users/zchee/following{/other_user}",
        "gists_url": "https://api.github.com/users/zchee/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/zchee",
        "id": 6366270,
        "login": "zchee",
        "node_id": "MDQ6VXNlcjYzNjYyNzA=",
        "organizations_url": "https://api.github.com/users/zchee/orgs",
        "received_events_url": "https://api.github.com/users/zchee/received_events",
        "repos_url": "https://api.github.com/users/zchee/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/zchee/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zchee/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/zchee"
    },
    "assignees": [
        {
            "avatar_url": "https://avatars.githubusercontent.com/u/6366270?v=4",
            "events_url": "https://api.github.com/users/zchee/events{/privacy}",
            "followers_url": "https://api.github.com/users/zchee/followers",
            "following_url": "https://api.github.com/users/zchee/following{/other_user}",
            "gists_url": "https://api.github.com/users/zchee/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/zchee",
            "id": 6366270,
            "login": "zchee",
            "node_id": "MDQ6VXNlcjYzNjYyNzA=",
            "organizations_url": "https://api.github.com/users/zchee/orgs",
            "received_events_url": "https://api.github.com/users/zchee/received_events",
            "repos_url": "https://api.github.com/users/zchee/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/zchee/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zchee/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/zchee"
        }
    ],
    "author_association": "MEMBER",
    "body": "@zchee   I can confirm my lua code can works well. \r\n\r\n```go\r\nfunc (c *Command) LspInstall(p *plugin.Plugin) ([]string, error) {\r\n\tuserConfig := make([]string, 0)\r\n\tgetUserConfig := \"require('lspmeta').get_user_config_server()\"\r\n\tif err := c.nvim.ExecLua(getUserConfig, userConfig); err != nil {\r\n\t\treturn nil, err\r\n\t}\r\n\treturn userConfig, nil\r\n}\r\n```\r\n\r\n lua code \r\n```lua\r\nfunction lspmeta.get_user_config_server()\r\n  local lspconfig = npcall(require,'lspconfig')\r\n  if not lspconfig then\r\n    -- check the packer exist\r\n    if next(packer_plugins) ~= nil then\r\n      vim.cmd [[packadd nvim-lspconfig]]\r\n      lspconfig = require('lspconfig')\r\n    else\r\n      return\r\n    end\r\n  end\r\n\r\n  local configs = require('lspconfig/configs')\r\n  return vim.tbl_keys(configs)\r\nend\r\n```",
    "closed_at": "2023-07-16T04:10:14Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "@glepnir Thanks! will check it.",
            "created_at": "2021-03-05T08:56:06Z",
            "html_url": "https://github.com/neovim/go-client/issues/104#issuecomment-791270598",
            "id": 791270598,
            "issue_url": "https://api.github.com/repos/neovim/go-client/issues/104",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc5MTI3MDU5OA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/go-client/issues/comments/791270598/reactions"
            },
            "updated_at": "2021-03-05T08:56:06Z",
            "url": "https://api.github.com/repos/neovim/go-client/issues/comments/791270598",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6366270?v=4",
                "events_url": "https://api.github.com/users/zchee/events{/privacy}",
                "followers_url": "https://api.github.com/users/zchee/followers",
                "following_url": "https://api.github.com/users/zchee/following{/other_user}",
                "gists_url": "https://api.github.com/users/zchee/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zchee",
                "id": 6366270,
                "login": "zchee",
                "node_id": "MDQ6VXNlcjYzNjYyNzA=",
                "organizations_url": "https://api.github.com/users/zchee/orgs",
                "received_events_url": "https://api.github.com/users/zchee/received_events",
                "repos_url": "https://api.github.com/users/zchee/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zchee/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zchee/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zchee"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "take code form test file. also hangup. @zchee  cc\r\n\r\n![Untitled](https://user-images.githubusercontent.com/41671631/110629616-50e7f100-81df-11eb-916c-ba7e5f0b5941.gif)\r\n",
            "created_at": "2021-03-10T12:29:57Z",
            "html_url": "https://github.com/neovim/go-client/issues/104#issuecomment-795346838",
            "id": 795346838,
            "issue_url": "https://api.github.com/repos/neovim/go-client/issues/104",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc5NTM0NjgzOA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/go-client/issues/comments/795346838/reactions"
            },
            "updated_at": "2021-03-10T14:52:54Z",
            "url": "https://api.github.com/repos/neovim/go-client/issues/comments/795346838",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "any update for this issue?",
            "created_at": "2021-03-12T08:38:26Z",
            "html_url": "https://github.com/neovim/go-client/issues/104#issuecomment-797330063",
            "id": 797330063,
            "issue_url": "https://api.github.com/repos/neovim/go-client/issues/104",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc5NzMzMDA2Mw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/go-client/issues/comments/797330063/reactions"
            },
            "updated_at": "2021-03-12T08:38:33Z",
            "url": "https://api.github.com/repos/neovim/go-client/issues/comments/797330063",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@glepnir I'd dig this issue but not yet solved...",
            "created_at": "2021-03-14T12:09:14Z",
            "html_url": "https://github.com/neovim/go-client/issues/104#issuecomment-798896217",
            "id": 798896217,
            "issue_url": "https://api.github.com/repos/neovim/go-client/issues/104",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc5ODg5NjIxNw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/go-client/issues/comments/798896217/reactions"
            },
            "updated_at": "2021-03-14T12:09:14Z",
            "url": "https://api.github.com/repos/neovim/go-client/issues/comments/798896217",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6366270?v=4",
                "events_url": "https://api.github.com/users/zchee/events{/privacy}",
                "followers_url": "https://api.github.com/users/zchee/followers",
                "following_url": "https://api.github.com/users/zchee/following{/other_user}",
                "gists_url": "https://api.github.com/users/zchee/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zchee",
                "id": 6366270,
                "login": "zchee",
                "node_id": "MDQ6VXNlcjYzNjYyNzA=",
                "organizations_url": "https://api.github.com/users/zchee/orgs",
                "received_events_url": "https://api.github.com/users/zchee/received_events",
                "repos_url": "https://api.github.com/users/zchee/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zchee/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zchee/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zchee"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@glepnir Could you post Go side minimal code?\r\n\r\nIt's doesn't work at least my local.\r\n```go\r\nfunc (c *Command) LspInstall(p *plugin.Plugin) ([]string, error) {\r\n\tuserConfig := make([]string, 0)\r\n\tgetUserConfig := \"require('lspmeta').get_user_config_server()\"\r\n\tif err := c.nvim.ExecLua(getUserConfig, userConfig); err != nil {\r\n\t\treturn nil, err\r\n\t}\r\n\treturn userConfig, nil\r\n}\r\n```",
            "created_at": "2021-03-16T14:41:34Z",
            "html_url": "https://github.com/neovim/go-client/issues/104#issuecomment-800318074",
            "id": 800318074,
            "issue_url": "https://api.github.com/repos/neovim/go-client/issues/104",
            "node_id": "MDEyOklzc3VlQ29tbWVudDgwMDMxODA3NA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/go-client/issues/comments/800318074/reactions"
            },
            "updated_at": "2021-03-16T14:41:34Z",
            "url": "https://api.github.com/repos/neovim/go-client/issues/comments/800318074",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6366270?v=4",
                "events_url": "https://api.github.com/users/zchee/events{/privacy}",
                "followers_url": "https://api.github.com/users/zchee/followers",
                "following_url": "https://api.github.com/users/zchee/following{/other_user}",
                "gists_url": "https://api.github.com/users/zchee/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zchee",
                "id": 6366270,
                "login": "zchee",
                "node_id": "MDQ6VXNlcjYzNjYyNzA=",
                "organizations_url": "https://api.github.com/users/zchee/orgs",
                "received_events_url": "https://api.github.com/users/zchee/received_events",
                "repos_url": "https://api.github.com/users/zchee/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zchee/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zchee/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zchee"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "hmm it can't work for you because you does not have lua function right?   check my second image. it use the go test code from `go-client`",
            "created_at": "2021-03-16T14:44:18Z",
            "html_url": "https://github.com/neovim/go-client/issues/104#issuecomment-800320423",
            "id": 800320423,
            "issue_url": "https://api.github.com/repos/neovim/go-client/issues/104",
            "node_id": "MDEyOklzc3VlQ29tbWVudDgwMDMyMDQyMw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/go-client/issues/comments/800320423/reactions"
            },
            "updated_at": "2021-03-16T14:44:18Z",
            "url": "https://api.github.com/repos/neovim/go-client/issues/comments/800320423",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Hi @glepnir @zchee I was facing a similar issue and found out that the issue was due to the `--embed` flag not being set. Because `--embed` flag was not set, the RPC call to `nvim_exec_lua` was hanging.\r\n\r\nA small, working lua example is:\r\n```go\r\nfunc hello(args []string) (int, error) {\r\n\tnv, err := nvim.NewChildProcess(\r\n                 ChildProcessArgs(\"--embed\") // we need to start `nvim` with this flag. In the unit tests this was set, but not in the example above\r\n        )\r\n\tif err != nil {\r\n\t\treturn 0, err\r\n\t}\r\n\r\n\tvar result int\r\n\tprogram := \"local a, b = ... return a + b\"\r\n\r\n\tif err := nv.ExecLua(program, &result, 1, 2); err != nil {\r\n\t\treturn result, err\r\n\t}\r\n\r\n\treturn result, nil\r\n}\r\n\r\nfunc main() {\r\n\tplugin.Main(func(p *plugin.Plugin) error {\r\n\t\tp.HandleFunction(&plugin.FunctionOptions{Name: \"Hello\"}, hello)\r\n\t\treturn nil\r\n\t})\r\n}\r\n```\r\n\r\nThere was another issue #155 where setting the `--embed` flag also helped with the panic issues. Given it is easy to overlook setting the `--embed` flag, one way to fix this is to set `--embed` flag by default. I've done so in this MR #161 , and allowed users to overwrite this behavior with another option.\r\n\r\nPlease help review and let me know what you think about this solution. Thanks! \r\n\r\n\r\nhttps://github.com/neovim/go-client/assets/1814687/4b3df875-66cf-4fa4-af3e-f1e678755a1a\r\n\r\n",
            "created_at": "2023-07-14T20:03:18Z",
            "html_url": "https://github.com/neovim/go-client/issues/104#issuecomment-1636356913",
            "id": 1636356913,
            "issue_url": "https://api.github.com/repos/neovim/go-client/issues/104",
            "node_id": "IC_kwDOAZWux85hiNMx",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/go-client/issues/comments/1636356913/reactions"
            },
            "updated_at": "2023-07-15T09:09:10Z",
            "url": "https://api.github.com/repos/neovim/go-client/issues/comments/1636356913",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1814687?v=4",
                "events_url": "https://api.github.com/users/9Y5/events{/privacy}",
                "followers_url": "https://api.github.com/users/9Y5/followers",
                "following_url": "https://api.github.com/users/9Y5/following{/other_user}",
                "gists_url": "https://api.github.com/users/9Y5/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/9Y5",
                "id": 1814687,
                "login": "9Y5",
                "node_id": "MDQ6VXNlcjE4MTQ2ODc=",
                "organizations_url": "https://api.github.com/users/9Y5/orgs",
                "received_events_url": "https://api.github.com/users/9Y5/received_events",
                "repos_url": "https://api.github.com/users/9Y5/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/9Y5/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/9Y5/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/9Y5"
            }
        }
    ],
    "comments": 7,
    "comments_url": "https://api.github.com/repos/neovim/go-client/issues/104/comments",
    "created_at": "2021-03-05T08:15:43Z",
    "events_url": "https://api.github.com/repos/neovim/go-client/issues/104/events",
    "html_url": "https://github.com/neovim/go-client/issues/104",
    "id": 822859083,
    "labels": [
        {
            "color": "159818",
            "default": true,
            "description": null,
            "id": 147452370,
            "name": "help wanted",
            "node_id": "MDU6TGFiZWwxNDc0NTIzNzA=",
            "url": "https://api.github.com/repos/neovim/go-client/labels/help%20wanted"
        },
        {
            "color": "1d76db",
            "default": false,
            "description": "",
            "id": 1146384604,
            "name": "area/nvim",
            "node_id": "MDU6TGFiZWwxMTQ2Mzg0NjA0",
            "url": "https://api.github.com/repos/neovim/go-client/labels/area/nvim"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/go-client/issues/104/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU4MjI4NTkwODM=",
    "number": 104,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 1,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/neovim/go-client/issues/104/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/go-client",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/go-client/issues/104/timeline",
    "title": "ExecLua function will cause neovim hangup",
    "updated_at": "2023-07-16T04:10:14Z",
    "url": "https://api.github.com/repos/neovim/go-client/issues/104",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
        "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
        "followers_url": "https://api.github.com/users/glepnir/followers",
        "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
        "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/glepnir",
        "id": 41671631,
        "login": "glepnir",
        "node_id": "MDQ6VXNlcjQxNjcxNjMx",
        "organizations_url": "https://api.github.com/users/glepnir/orgs",
        "received_events_url": "https://api.github.com/users/glepnir/received_events",
        "repos_url": "https://api.github.com/users/glepnir/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/glepnir"
    }
}