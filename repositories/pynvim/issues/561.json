{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "I am new to pynvim and I'm trying to replicate the use of LSP related commands using pynvim but I'm not able to determine how to get it to return the outputs of each commands. Below is a small repro for anyone to use:\r\n\r\nI start a nvim instance using `NVIM_LISTEN_ADDRESS=/tmp/nvim nvim` in a different terminal\r\n\r\n```python\r\nimport pynvim\r\n\r\n# Create a python API session attached to unix domain socket created above:\r\nnvim = pynvim.attach('socket', path='/tmp/nvim')\r\n\r\nnvim.chdir(\"root-path-to-my-system/oraladder\") # the github repo is: https://github.com/ubitux/oraladder\r\n# We clear the buffer and load a new file in it.\r\nnvim.command(\"bd!\")\r\nnvim.command(\"e laddertools/test_glicko.py\")\r\nprint(nvim.current.buffer[:])  # --> this works perfectly\r\n\r\nnvim.current.window.cursor = (17, 17)\r\nprint(f\"Cursor is at: {nvim.current.window.cursor}\")\r\nprint(f\"Current line: {nvim.current.line}\")\r\n\r\nnvim.exec_lua(\"vim.lsp.buf.definition()\", async_=True)  \r\n# after this I should get some indication that the symbol was resolved but the cursor and line doesn't change when I try to print \r\n# them but when I go and see the attached UI, I can notice that it has resolved the reference to the correct file.\r\nprint(f\"Cursor is at: {nvim.current.window.cursor}\")\r\nprint(f\"Current line: {nvim.current.line}\")\r\nprint(f\"The buffer becomes: {nvim.current.buffer[:]}\")\r\n```\r\n\r\nCan anyone help as to how I can get these outputs from pynvim?",
    "closed_at": "2024-02-12T13:40:21Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "> ```python\r\n> nvim.exec_lua(\"vim.lsp.buf.definition()\", async_=True)  \r\n> # after this I should get some indication that the symbol was resolved but the cursor and line doesn't change when I try to print \r\n> # them but when I go and see the attached UI, I can notice that it has resolved the reference to the correct file.\r\n> print(f\"Cursor is at: {nvim.current.window.cursor}\")\r\n> ```\r\n\r\nYou specified `async_=True`, so of course the behavior won't be synchronous.",
            "created_at": "2024-02-12T13:40:21Z",
            "html_url": "https://github.com/neovim/pynvim/issues/561#issuecomment-1938700501",
            "id": 1938700501,
            "issue_url": "https://api.github.com/repos/neovim/pynvim/issues/561",
            "node_id": "IC_kwDOASpKTs5zjjjV",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/pynvim/issues/comments/1938700501/reactions"
            },
            "updated_at": "2024-02-12T13:40:21Z",
            "url": "https://api.github.com/repos/neovim/pynvim/issues/comments/1938700501",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "Ah, sorry for that. I used `async_ = False` only but I was observing the same behaviour",
            "created_at": "2024-02-12T16:17:42Z",
            "html_url": "https://github.com/neovim/pynvim/issues/561#issuecomment-1939056483",
            "id": 1939056483,
            "issue_url": "https://api.github.com/repos/neovim/pynvim/issues/561",
            "node_id": "IC_kwDOASpKTs5zk6dj",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/pynvim/issues/comments/1939056483/reactions"
            },
            "updated_at": "2024-02-12T16:17:42Z",
            "url": "https://api.github.com/repos/neovim/pynvim/issues/comments/1939056483",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/137069472?v=4",
                "events_url": "https://api.github.com/users/m-anish-gupta/events{/privacy}",
                "followers_url": "https://api.github.com/users/m-anish-gupta/followers",
                "following_url": "https://api.github.com/users/m-anish-gupta/following{/other_user}",
                "gists_url": "https://api.github.com/users/m-anish-gupta/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/m-anish-gupta",
                "id": 137069472,
                "login": "m-anish-gupta",
                "node_id": "U_kgDOCCuDoA",
                "organizations_url": "https://api.github.com/users/m-anish-gupta/orgs",
                "received_events_url": "https://api.github.com/users/m-anish-gupta/received_events",
                "repos_url": "https://api.github.com/users/m-anish-gupta/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/m-anish-gupta/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/m-anish-gupta/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/m-anish-gupta"
            }
        },
        {
            "author_association": "NONE",
            "body": "Here's the output log for reference:\r\n```\r\n['import pytest', 'from .rankings.glicko import RankingGlicko, _RatingGlicko', '', 'import numpy', '', '', 'def test_glicko():', '    # Based on example from https://www.glicko.net/glicko/glicko2.pdf', '    me = _RatingGlicko(1500, 200, .06)', '    opponents = [', '        _RatingGlicko(1400, 30, .06),', '        _RatingGlicko(1550, 100, .06),', '        _RatingGlicko(1700, 300, .06),', '    ]', '    outcomes = [1, 0, 0]  # I won, then lost two', '', '    new_rating = RankingGlicko.compute_new_rating(', '        me, opponents, outcomes, tau=0.5, eps=1e-6', '    )', '', '    numpy.testing.assert_almost_equal(1464.06, new_rating.r, decimal=2)', '    numpy.testing.assert_almost_equal(151.52, new_rating.RD, decimal=2)', '    numpy.testing.assert_almost_equal(0.05999, new_rating.std, decimal=5)', '', '', 'def test_glicko_empty_period_will_increase_RD():', '    me = _RatingGlicko(1500, 345, std=1.0)', '    opponents = outcomes = []', '    new_rating = RankingGlicko.compute_new_rating(me, opponents, outcomes)', '    assert new_rating.RD == 350', '    assert new_rating.r == me.r  # should remain unchanged... Only increase RD']\r\nCursor is at: (17, 17)\r\nCurrent line:     new_rating = RankingGlicko.compute_new_rating(\r\nCursor is at: (17, 17)\r\nCurrent line:     new_rating = RankingGlicko.compute_new_rating(\r\nThe buffer becomes: ['import pytest', 'from .rankings.glicko import RankingGlicko, _RatingGlicko', '', 'import numpy', '', '', 'def test_glicko():', '    # Based on example from https://www.glicko.net/glicko/glicko2.pdf', '    me = _RatingGlicko(1500, 200, .06)', '    opponents = [', '        _RatingGlicko(1400, 30, .06),', '        _RatingGlicko(1550, 100, .06),', '        _RatingGlicko(1700, 300, .06),', '    ]', '    outcomes = [1, 0, 0]  # I won, then lost two', '', '    new_rating = RankingGlicko.compute_new_rating(', '        me, opponents, outcomes, tau=0.5, eps=1e-6', '    )', '', '    numpy.testing.assert_almost_equal(1464.06, new_rating.r, decimal=2)', '    numpy.testing.assert_almost_equal(151.52, new_rating.RD, decimal=2)', '    numpy.testing.assert_almost_equal(0.05999, new_rating.std, decimal=5)', '', '', 'def test_glicko_empty_period_will_increase_RD():', '    me = _RatingGlicko(1500, 345, std=1.0)', '    opponents = outcomes = []', '    new_rating = RankingGlicko.compute_new_rating(me, opponents, outcomes)', '    assert new_rating.RD == 350', '    assert new_rating.r == me.r  # should remain unchanged... Only increase RD']\r\n```\r\n\r\nAfter the invocation too the buffer and the cursor positions dont change in the sdk whereas in the connected UI I can see the new file opened and the cursor is at the resolved class reference. ",
            "created_at": "2024-02-12T16:19:53Z",
            "html_url": "https://github.com/neovim/pynvim/issues/561#issuecomment-1939066763",
            "id": 1939066763,
            "issue_url": "https://api.github.com/repos/neovim/pynvim/issues/561",
            "node_id": "IC_kwDOASpKTs5zk8-L",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/pynvim/issues/comments/1939066763/reactions"
            },
            "updated_at": "2024-02-12T16:19:53Z",
            "url": "https://api.github.com/repos/neovim/pynvim/issues/comments/1939066763",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/137069472?v=4",
                "events_url": "https://api.github.com/users/m-anish-gupta/events{/privacy}",
                "followers_url": "https://api.github.com/users/m-anish-gupta/followers",
                "following_url": "https://api.github.com/users/m-anish-gupta/following{/other_user}",
                "gists_url": "https://api.github.com/users/m-anish-gupta/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/m-anish-gupta",
                "id": 137069472,
                "login": "m-anish-gupta",
                "node_id": "U_kgDOCCuDoA",
                "organizations_url": "https://api.github.com/users/m-anish-gupta/orgs",
                "received_events_url": "https://api.github.com/users/m-anish-gupta/received_events",
                "repos_url": "https://api.github.com/users/m-anish-gupta/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/m-anish-gupta/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/m-anish-gupta/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/m-anish-gupta"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/neovim/pynvim/issues/561/comments",
    "created_at": "2024-02-12T11:09:24Z",
    "events_url": "https://api.github.com/repos/neovim/pynvim/issues/561/events",
    "html_url": "https://github.com/neovim/pynvim/issues/561",
    "id": 2129904369,
    "labels": [
        {
            "color": "e6e6e6",
            "default": true,
            "description": "",
            "id": 97892281,
            "name": "question",
            "node_id": "MDU6TGFiZWw5Nzg5MjI4MQ==",
            "url": "https://api.github.com/repos/neovim/pynvim/labels/question"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/pynvim/issues/561/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOASpKTs5-88Lx",
    "number": 561,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/pynvim/issues/561/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/pynvim",
    "state": "closed",
    "state_reason": "not_planned",
    "timeline_url": "https://api.github.com/repos/neovim/pynvim/issues/561/timeline",
    "title": "Access output of lua commands",
    "updated_at": "2024-02-12T16:19:54Z",
    "url": "https://api.github.com/repos/neovim/pynvim/issues/561",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/137069472?v=4",
        "events_url": "https://api.github.com/users/m-anish-gupta/events{/privacy}",
        "followers_url": "https://api.github.com/users/m-anish-gupta/followers",
        "following_url": "https://api.github.com/users/m-anish-gupta/following{/other_user}",
        "gists_url": "https://api.github.com/users/m-anish-gupta/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/m-anish-gupta",
        "id": 137069472,
        "login": "m-anish-gupta",
        "node_id": "U_kgDOCCuDoA",
        "organizations_url": "https://api.github.com/users/m-anish-gupta/orgs",
        "received_events_url": "https://api.github.com/users/m-anish-gupta/received_events",
        "repos_url": "https://api.github.com/users/m-anish-gupta/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/m-anish-gupta/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/m-anish-gupta/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/m-anish-gupta"
    }
}