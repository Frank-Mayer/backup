{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/29050/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/29050/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/29050"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/29050"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/29050/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/29050"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/c2f160cc4057be3bf92a0580a4cef09b87dcddde"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 5599,
            "forks_count": 5599,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1777,
            "open_issues_count": 1777,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2024-09-16T10:33:35Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 285944,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 81723,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2024-09-17T01:51:52Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 81723,
            "watchers_count": 81723,
            "web_commit_signoff_required": false
        },
        "sha": "f55767afe28a7d90421b97af88e18e2828ed9c01",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim"
        }
    },
    "body": "Fixes neovim/neovim#29048\r\n\r\nProblem: When an lsp client is stopped, the client will only clear the diagnostics for the attached buffers but not the unattached buffers.\r\nSolution: Reset the diagnostics for the whole namespace rather than for only the attached buffers.\r\n",
    "closed_at": "2024-05-30T06:59:23Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29050#discussion_r1616350579"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29050"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1616350579"
                }
            },
            "author_association": "MEMBER",
            "body": "why doesn't this work? surely the purpose (at least) of creating a per-client namespace is to be able to clear or reset the related diagnostics without a bunch of extra code.\r\n\r\n",
            "commit_id": "c2f160cc4057be3bf92a0580a4cef09b87dcddde",
            "created_at": "2024-05-27T19:44:22Z",
            "diff_hunk": "@@ -401,7 +402,6 @@ local function on_client_exit(code, signal, client_id)\n         })\n       end\n \n-      local namespace = vim.lsp.diagnostic.get_namespace(client_id)\n       vim.diagnostic.reset(namespace, bufnr)",
            "html_url": "https://github.com/neovim/neovim/pull/29050#discussion_r1616350579",
            "id": 1616350579,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5gV41z",
            "original_commit_id": "ccb7b2b1cb760d08d90610a3e7efda7a6798121c",
            "original_line": 405,
            "original_position": 13,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": null,
            "pull_request_review_id": 2081403642,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29050",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1616350579/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-05-27T19:44:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1616350579",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29050#discussion_r1616535794"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29050"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1616535794"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Actually, I think you are correct. I reread the docs for vim.diagnostic.reset and it does say when the buffer number is omitted, diagnostics are removed for all buffers. I will test if that works as that would be much cleaner.  ",
            "commit_id": "c2f160cc4057be3bf92a0580a4cef09b87dcddde",
            "created_at": "2024-05-28T03:31:36Z",
            "diff_hunk": "@@ -401,7 +402,6 @@ local function on_client_exit(code, signal, client_id)\n         })\n       end\n \n-      local namespace = vim.lsp.diagnostic.get_namespace(client_id)\n       vim.diagnostic.reset(namespace, bufnr)",
            "html_url": "https://github.com/neovim/neovim/pull/29050#discussion_r1616535794",
            "id": 1616535794,
            "in_reply_to_id": 1616350579,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5gWmDy",
            "original_commit_id": "ccb7b2b1cb760d08d90610a3e7efda7a6798121c",
            "original_line": 405,
            "original_position": 13,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": null,
            "pull_request_review_id": 2081673267,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29050",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1616535794/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-05-28T03:31:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1616535794",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51029315?v=4",
                "events_url": "https://api.github.com/users/crwebb85/events{/privacy}",
                "followers_url": "https://api.github.com/users/crwebb85/followers",
                "following_url": "https://api.github.com/users/crwebb85/following{/other_user}",
                "gists_url": "https://api.github.com/users/crwebb85/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/crwebb85",
                "id": 51029315,
                "login": "crwebb85",
                "node_id": "MDQ6VXNlcjUxMDI5MzE1",
                "organizations_url": "https://api.github.com/users/crwebb85/orgs",
                "received_events_url": "https://api.github.com/users/crwebb85/received_events",
                "repos_url": "https://api.github.com/users/crwebb85/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/crwebb85/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/crwebb85/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/crwebb85"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29050#discussion_r1616549445"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29050"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1616549445"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "You were correct vim.diagnostic.reset does have the ability to clear all diagnostics on the namespace without needing to manually iterate over all the buffers. I cleaned up the code with that fix.",
            "commit_id": "c2f160cc4057be3bf92a0580a4cef09b87dcddde",
            "created_at": "2024-05-28T04:02:25Z",
            "diff_hunk": "@@ -401,7 +402,6 @@ local function on_client_exit(code, signal, client_id)\n         })\n       end\n \n-      local namespace = vim.lsp.diagnostic.get_namespace(client_id)\n       vim.diagnostic.reset(namespace, bufnr)",
            "html_url": "https://github.com/neovim/neovim/pull/29050#discussion_r1616549445",
            "id": 1616549445,
            "in_reply_to_id": 1616350579,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5gWpZF",
            "original_commit_id": "ccb7b2b1cb760d08d90610a3e7efda7a6798121c",
            "original_line": 405,
            "original_position": 13,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": null,
            "pull_request_review_id": 2081692494,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29050",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1616549445/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-05-28T04:02:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1616549445",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51029315?v=4",
                "events_url": "https://api.github.com/users/crwebb85/events{/privacy}",
                "followers_url": "https://api.github.com/users/crwebb85/followers",
                "following_url": "https://api.github.com/users/crwebb85/following{/other_user}",
                "gists_url": "https://api.github.com/users/crwebb85/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/crwebb85",
                "id": 51029315,
                "login": "crwebb85",
                "node_id": "MDQ6VXNlcjUxMDI5MzE1",
                "organizations_url": "https://api.github.com/users/crwebb85/orgs",
                "received_events_url": "https://api.github.com/users/crwebb85/received_events",
                "repos_url": "https://api.github.com/users/crwebb85/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/crwebb85/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/crwebb85/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/crwebb85"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29050#discussion_r1618903737"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29050"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1618903737"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I don't think you need a separate `vim.schedule` for this, it can go in the callback further down.",
            "commit_id": "c2f160cc4057be3bf92a0580a4cef09b87dcddde",
            "created_at": "2024-05-29T13:35:56Z",
            "diff_hunk": "@@ -411,6 +409,11 @@ local function on_client_exit(code, signal, client_id)\n     end)\n   end\n \n+  vim.schedule(function()\n+    local namespace = vim.lsp.diagnostic.get_namespace(client_id)\n+    vim.diagnostic.reset(namespace)\n+  end)",
            "html_url": "https://github.com/neovim/neovim/pull/29050#discussion_r1618903737",
            "id": 1618903737,
            "line": 413,
            "node_id": "PRRC_kwDOAPphoM5gfoK5",
            "original_commit_id": "b87ab765fdab9509aa1126ed48b672ae3e08869e",
            "original_line": 413,
            "original_position": 16,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": 28,
            "pull_request_review_id": 2085445760,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29050",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1618903737/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-05-29T13:36:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1618903737",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/943597?v=4",
                "events_url": "https://api.github.com/users/icholy/events{/privacy}",
                "followers_url": "https://api.github.com/users/icholy/followers",
                "following_url": "https://api.github.com/users/icholy/following{/other_user}",
                "gists_url": "https://api.github.com/users/icholy/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/icholy",
                "id": 943597,
                "login": "icholy",
                "node_id": "MDQ6VXNlcjk0MzU5Nw==",
                "organizations_url": "https://api.github.com/users/icholy/orgs",
                "received_events_url": "https://api.github.com/users/icholy/received_events",
                "repos_url": "https://api.github.com/users/icholy/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/icholy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/icholy/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/icholy"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29050#discussion_r1619157516"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29050"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619157516"
                }
            },
            "author_association": "MEMBER",
            "body": "I think the above vim.schedule and loop could also be inverted:\r\n\r\n```lua\r\n  vim.schedule(function()\r\n    for bufnr in pairs(client.attached_buffers) do\r\n      if client and client.attached_buffers[bufnr] then\r\n        api.nvim_exec_autocmds('LspDetach', {\r\n          buffer = bufnr,\r\n          modeline = false,\r\n          data = { client_id = client_id },\r\n        })\r\n      end\r\n\r\n      client.attached_buffers[bufnr] = nil\r\n\r\n      if #lsp.get_clients({ bufnr = bufnr, _uninitialized = true }) == 0 then\r\n        reset_defaults(bufnr)\r\n      end\r\n    end\r\n    local namespace = vim.lsp.diagnostic.get_namespace(client_id)\r\n    vim.diagnostic.reset(namespace)\r\n  end)\r\n```",
            "commit_id": "c2f160cc4057be3bf92a0580a4cef09b87dcddde",
            "created_at": "2024-05-29T16:13:39Z",
            "diff_hunk": "@@ -411,6 +409,11 @@ local function on_client_exit(code, signal, client_id)\n     end)\n   end\n \n+  vim.schedule(function()\n+    local namespace = vim.lsp.diagnostic.get_namespace(client_id)\n+    vim.diagnostic.reset(namespace)\n+  end)",
            "html_url": "https://github.com/neovim/neovim/pull/29050#discussion_r1619157516",
            "id": 1619157516,
            "in_reply_to_id": 1618903737,
            "line": 413,
            "node_id": "PRRC_kwDOAPphoM5ggmIM",
            "original_commit_id": "b87ab765fdab9509aa1126ed48b672ae3e08869e",
            "original_line": 413,
            "original_position": 16,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": 28,
            "pull_request_review_id": 2085858191,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29050",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619157516/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-05-29T16:13:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619157516",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38700?v=4",
                "events_url": "https://api.github.com/users/mfussenegger/events{/privacy}",
                "followers_url": "https://api.github.com/users/mfussenegger/followers",
                "following_url": "https://api.github.com/users/mfussenegger/following{/other_user}",
                "gists_url": "https://api.github.com/users/mfussenegger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mfussenegger",
                "id": 38700,
                "login": "mfussenegger",
                "node_id": "MDQ6VXNlcjM4NzAw",
                "organizations_url": "https://api.github.com/users/mfussenegger/orgs",
                "received_events_url": "https://api.github.com/users/mfussenegger/received_events",
                "repos_url": "https://api.github.com/users/mfussenegger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mfussenegger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mfussenegger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mfussenegger"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29050#discussion_r1619161065"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29050"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619161065"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "@icholy Good point. I moved it to the other `vim.schedule`.",
            "commit_id": "c2f160cc4057be3bf92a0580a4cef09b87dcddde",
            "created_at": "2024-05-29T16:16:26Z",
            "diff_hunk": "@@ -411,6 +409,11 @@ local function on_client_exit(code, signal, client_id)\n     end)\n   end\n \n+  vim.schedule(function()\n+    local namespace = vim.lsp.diagnostic.get_namespace(client_id)\n+    vim.diagnostic.reset(namespace)\n+  end)",
            "html_url": "https://github.com/neovim/neovim/pull/29050#discussion_r1619161065",
            "id": 1619161065,
            "in_reply_to_id": 1618903737,
            "line": 413,
            "node_id": "PRRC_kwDOAPphoM5ggm_p",
            "original_commit_id": "b87ab765fdab9509aa1126ed48b672ae3e08869e",
            "original_line": 413,
            "original_position": 16,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": 28,
            "pull_request_review_id": 2085864558,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29050",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619161065/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-05-29T16:25:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619161065",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51029315?v=4",
                "events_url": "https://api.github.com/users/crwebb85/events{/privacy}",
                "followers_url": "https://api.github.com/users/crwebb85/followers",
                "following_url": "https://api.github.com/users/crwebb85/following{/other_user}",
                "gists_url": "https://api.github.com/users/crwebb85/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/crwebb85",
                "id": 51029315,
                "login": "crwebb85",
                "node_id": "MDQ6VXNlcjUxMDI5MzE1",
                "organizations_url": "https://api.github.com/users/crwebb85/orgs",
                "received_events_url": "https://api.github.com/users/crwebb85/received_events",
                "repos_url": "https://api.github.com/users/crwebb85/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/crwebb85/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/crwebb85/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/crwebb85"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29050#discussion_r1619189443"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29050"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619189443"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "@mfussenegger actually, I like that better but I have to questions if I do that I should probaly also combine it with the final vim.schedule like this\r\n\r\n```lua\r\n  vim.schedule(function()\r\n    for bufnr in pairs(client.attached_buffers) do\r\n      if client and client.attached_buffers[bufnr] then\r\n        api.nvim_exec_autocmds('LspDetach', {\r\n          buffer = bufnr,\r\n          modeline = false,\r\n          data = { client_id = client_id },\r\n        })\r\n      end\r\n\r\n      client.attached_buffers[bufnr] = nil\r\n\r\n      if #lsp.get_clients({ bufnr = bufnr, _uninitialized = true }) == 0 then\r\n        reset_defaults(bufnr)\r\n      end\r\n    end\r\n    local namespace = vim.lsp.diagnostic.get_namespace(client_id)\r\n    vim.diagnostic.reset(namespace)\r\n\r\n    all_clients[client_id] = nil\r\n\r\n    -- Client can be absent if executable starts, but initialize fails\r\n    -- init/attach won't have happened\r\n    if client then\r\n      changetracking.reset(client)\r\n    end\r\n    if code ~= 0 or (signal ~= 0 and signal ~= 15) then\r\n      local msg = string.format(\r\n        'Client %s quit with exit code %s and signal %s. Check log for errors: %s',\r\n        name,\r\n        code,\r\n        signal,\r\n        lsp.get_log_path()\r\n      )\r\n      vim.notify(msg, vim.log.levels.WARN)\r\n    end\r\n  end)\r\n``` \r\nI will check to see if that change passes the tests. If there isn't any reason we shouldn't combine all of these `vim.schedule`s, I will go ahead and make that change. \r\n\r\n",
            "commit_id": "c2f160cc4057be3bf92a0580a4cef09b87dcddde",
            "created_at": "2024-05-29T16:39:14Z",
            "diff_hunk": "@@ -411,6 +409,11 @@ local function on_client_exit(code, signal, client_id)\n     end)\n   end\n \n+  vim.schedule(function()\n+    local namespace = vim.lsp.diagnostic.get_namespace(client_id)\n+    vim.diagnostic.reset(namespace)\n+  end)",
            "html_url": "https://github.com/neovim/neovim/pull/29050#discussion_r1619189443",
            "id": 1619189443,
            "in_reply_to_id": 1618903737,
            "line": 413,
            "node_id": "PRRC_kwDOAPphoM5ggt7D",
            "original_commit_id": "b87ab765fdab9509aa1126ed48b672ae3e08869e",
            "original_line": 413,
            "original_position": 16,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": 28,
            "pull_request_review_id": 2085915556,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29050",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619189443/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-05-29T16:39:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619189443",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51029315?v=4",
                "events_url": "https://api.github.com/users/crwebb85/events{/privacy}",
                "followers_url": "https://api.github.com/users/crwebb85/followers",
                "following_url": "https://api.github.com/users/crwebb85/following{/other_user}",
                "gists_url": "https://api.github.com/users/crwebb85/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/crwebb85",
                "id": 51029315,
                "login": "crwebb85",
                "node_id": "MDQ6VXNlcjUxMDI5MzE1",
                "organizations_url": "https://api.github.com/users/crwebb85/orgs",
                "received_events_url": "https://api.github.com/users/crwebb85/received_events",
                "repos_url": "https://api.github.com/users/crwebb85/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/crwebb85/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/crwebb85/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/crwebb85"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29050#discussion_r1619192734"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29050"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619192734"
                }
            },
            "author_association": "MEMBER",
            "body": "Afaik the split into at least two schedule's is important to ensure the `LspDetach` events finished processing before the remainder of the cleanup runs.",
            "commit_id": "c2f160cc4057be3bf92a0580a4cef09b87dcddde",
            "created_at": "2024-05-29T16:41:51Z",
            "diff_hunk": "@@ -411,6 +409,11 @@ local function on_client_exit(code, signal, client_id)\n     end)\n   end\n \n+  vim.schedule(function()\n+    local namespace = vim.lsp.diagnostic.get_namespace(client_id)\n+    vim.diagnostic.reset(namespace)\n+  end)",
            "html_url": "https://github.com/neovim/neovim/pull/29050#discussion_r1619192734",
            "id": 1619192734,
            "in_reply_to_id": 1618903737,
            "line": 413,
            "node_id": "PRRC_kwDOAPphoM5gguue",
            "original_commit_id": "b87ab765fdab9509aa1126ed48b672ae3e08869e",
            "original_line": 413,
            "original_position": 16,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": 28,
            "pull_request_review_id": 2085920442,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29050",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619192734/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-05-29T16:41:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619192734",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38700?v=4",
                "events_url": "https://api.github.com/users/mfussenegger/events{/privacy}",
                "followers_url": "https://api.github.com/users/mfussenegger/followers",
                "following_url": "https://api.github.com/users/mfussenegger/following{/other_user}",
                "gists_url": "https://api.github.com/users/mfussenegger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mfussenegger",
                "id": 38700,
                "login": "mfussenegger",
                "node_id": "MDQ6VXNlcjM4NzAw",
                "organizations_url": "https://api.github.com/users/mfussenegger/orgs",
                "received_events_url": "https://api.github.com/users/mfussenegger/received_events",
                "repos_url": "https://api.github.com/users/mfussenegger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mfussenegger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mfussenegger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mfussenegger"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29050#discussion_r1619204860"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29050"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619204860"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Although reading this comment before the last vim.schedule makes me wonder if combining with the last vim.schedule could break autocommands using LspDetach. Any thoughts on if that is a possibility?\r\n\r\n```  \r\n -- Schedule the deletion of the client object so that it exists in the execution of LspDetach\r\n  -- autocommands\r\n```",
            "commit_id": "c2f160cc4057be3bf92a0580a4cef09b87dcddde",
            "created_at": "2024-05-29T16:51:56Z",
            "diff_hunk": "@@ -411,6 +409,11 @@ local function on_client_exit(code, signal, client_id)\n     end)\n   end\n \n+  vim.schedule(function()\n+    local namespace = vim.lsp.diagnostic.get_namespace(client_id)\n+    vim.diagnostic.reset(namespace)\n+  end)",
            "html_url": "https://github.com/neovim/neovim/pull/29050#discussion_r1619204860",
            "id": 1619204860,
            "in_reply_to_id": 1618903737,
            "line": 413,
            "node_id": "PRRC_kwDOAPphoM5ggxr8",
            "original_commit_id": "b87ab765fdab9509aa1126ed48b672ae3e08869e",
            "original_line": 413,
            "original_position": 16,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": 28,
            "pull_request_review_id": 2085939832,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29050",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619204860/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-05-29T16:52:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619204860",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51029315?v=4",
                "events_url": "https://api.github.com/users/crwebb85/events{/privacy}",
                "followers_url": "https://api.github.com/users/crwebb85/followers",
                "following_url": "https://api.github.com/users/crwebb85/following{/other_user}",
                "gists_url": "https://api.github.com/users/crwebb85/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/crwebb85",
                "id": 51029315,
                "login": "crwebb85",
                "node_id": "MDQ6VXNlcjUxMDI5MzE1",
                "organizations_url": "https://api.github.com/users/crwebb85/orgs",
                "received_events_url": "https://api.github.com/users/crwebb85/received_events",
                "repos_url": "https://api.github.com/users/crwebb85/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/crwebb85/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/crwebb85/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/crwebb85"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29050#discussion_r1619220052"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29050"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619220052"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "> I will check to see if that change passes the tests.\r\n\r\nChanging the code to below does pass the existing tests but I am still a bit concerned about if LspDetach autocommands will have access to the client so I am going to test it with my `minimal_init.lua` to see if it is actually safe. If it isn't I will switch to @mfussenegger original suggestion.\r\n\r\n```lua\r\n--- @param code integer\r\n--- @param signal integer\r\n--- @param client_id integer\r\nlocal function on_client_exit(code, signal, client_id)\r\n  local client = all_clients[client_id]\r\n\r\n  -- Schedule the deletion of the client object so that it exists in the execution of LspDetach\r\n  -- autocommands\r\n  vim.schedule(function()\r\n    for bufnr in pairs(client.attached_buffers) do\r\n      if client and client.attached_buffers[bufnr] then\r\n        api.nvim_exec_autocmds('LspDetach', {\r\n          buffer = bufnr,\r\n          modeline = false,\r\n          data = { client_id = client_id },\r\n        })\r\n      end\r\n\r\n      client.attached_buffers[bufnr] = nil\r\n\r\n      if #lsp.get_clients({ bufnr = bufnr, _uninitialized = true }) == 0 then\r\n        reset_defaults(bufnr)\r\n      end\r\n    end\r\n\r\n    local namespace = vim.lsp.diagnostic.get_namespace(client_id)\r\n    vim.diagnostic.reset(namespace)\r\n\r\n    local name = client.name or 'unknown'\r\n\r\n    all_clients[client_id] = nil\r\n\r\n    -- Client can be absent if executable starts, but initialize fails\r\n    -- init/attach won't have happened\r\n    if client then\r\n      changetracking.reset(client)\r\n    end\r\n    if code ~= 0 or (signal ~= 0 and signal ~= 15) then\r\n      local msg = string.format(\r\n        'Client %s quit with exit code %s and signal %s. Check log for errors: %s',\r\n        name,\r\n        code,\r\n        signal,\r\n        lsp.get_log_path()\r\n      )\r\n      vim.notify(msg, vim.log.levels.WARN)\r\n    end\r\n  end)\r\nend\r\n```",
            "commit_id": "c2f160cc4057be3bf92a0580a4cef09b87dcddde",
            "created_at": "2024-05-29T17:05:03Z",
            "diff_hunk": "@@ -411,6 +409,11 @@ local function on_client_exit(code, signal, client_id)\n     end)\n   end\n \n+  vim.schedule(function()\n+    local namespace = vim.lsp.diagnostic.get_namespace(client_id)\n+    vim.diagnostic.reset(namespace)\n+  end)",
            "html_url": "https://github.com/neovim/neovim/pull/29050#discussion_r1619220052",
            "id": 1619220052,
            "in_reply_to_id": 1618903737,
            "line": 413,
            "node_id": "PRRC_kwDOAPphoM5gg1ZU",
            "original_commit_id": "b87ab765fdab9509aa1126ed48b672ae3e08869e",
            "original_line": 413,
            "original_position": 16,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": 28,
            "pull_request_review_id": 2085971645,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29050",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619220052/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-05-29T17:27:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619220052",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51029315?v=4",
                "events_url": "https://api.github.com/users/crwebb85/events{/privacy}",
                "followers_url": "https://api.github.com/users/crwebb85/followers",
                "following_url": "https://api.github.com/users/crwebb85/following{/other_user}",
                "gists_url": "https://api.github.com/users/crwebb85/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/crwebb85",
                "id": 51029315,
                "login": "crwebb85",
                "node_id": "MDQ6VXNlcjUxMDI5MzE1",
                "organizations_url": "https://api.github.com/users/crwebb85/orgs",
                "received_events_url": "https://api.github.com/users/crwebb85/received_events",
                "repos_url": "https://api.github.com/users/crwebb85/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/crwebb85/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/crwebb85/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/crwebb85"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29050#discussion_r1619239759"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29050"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619239759"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I added the below LspDetach autocmd to my `minimal_init.lua` and got the same response \"Client lua_ls is stopped\" for the version of neovim with my code changes and also my unmodified version neovim on my system, so I believe it is a safe change.\r\n```lua\r\nvim.api.nvim_create_autocmd(\"LspDetach\", {\r\n\tgroup = vim.api.nvim_create_augroup(\"lsp_detach\", { clear = true }),\r\n\tdesc = \"lsp on_detach\",\r\n\tcallback = function(event)\r\n\t\tvim.notify(\"Detached Lsp client \" .. event.data.client_id)\r\n\t\tlocal client = vim.lsp.get_client_by_id(event.data.client_id)\r\n\r\n\t\tif client == nil then\r\n\t\t\tvim.notify(\"Client is nil\")\r\n\t\telseif client.is_stopped() then\r\n\t\t\tvim.notify(\"Client \" .. client.name .. \" is stopped\")\r\n\t\telse\r\n\t\t\tvim.notify(\"Client \" .. client.name .. \" is not stopped\")\r\n\t\tend\r\n\tend,\r\n})\r\n```",
            "commit_id": "c2f160cc4057be3bf92a0580a4cef09b87dcddde",
            "created_at": "2024-05-29T17:23:01Z",
            "diff_hunk": "@@ -411,6 +409,11 @@ local function on_client_exit(code, signal, client_id)\n     end)\n   end\n \n+  vim.schedule(function()\n+    local namespace = vim.lsp.diagnostic.get_namespace(client_id)\n+    vim.diagnostic.reset(namespace)\n+  end)",
            "html_url": "https://github.com/neovim/neovim/pull/29050#discussion_r1619239759",
            "id": 1619239759,
            "in_reply_to_id": 1618903737,
            "line": 413,
            "node_id": "PRRC_kwDOAPphoM5gg6NP",
            "original_commit_id": "b87ab765fdab9509aa1126ed48b672ae3e08869e",
            "original_line": 413,
            "original_position": 16,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": 28,
            "pull_request_review_id": 2086003666,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29050",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619239759/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-05-29T17:23:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619239759",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51029315?v=4",
                "events_url": "https://api.github.com/users/crwebb85/events{/privacy}",
                "followers_url": "https://api.github.com/users/crwebb85/followers",
                "following_url": "https://api.github.com/users/crwebb85/following{/other_user}",
                "gists_url": "https://api.github.com/users/crwebb85/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/crwebb85",
                "id": 51029315,
                "login": "crwebb85",
                "node_id": "MDQ6VXNlcjUxMDI5MzE1",
                "organizations_url": "https://api.github.com/users/crwebb85/orgs",
                "received_events_url": "https://api.github.com/users/crwebb85/received_events",
                "repos_url": "https://api.github.com/users/crwebb85/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/crwebb85/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/crwebb85/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/crwebb85"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29050#discussion_r1619258723"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29050"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619258723"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I want to test one more thing but will need to test it after work so I will convert this back to a draft PR.",
            "commit_id": "c2f160cc4057be3bf92a0580a4cef09b87dcddde",
            "created_at": "2024-05-29T17:39:23Z",
            "diff_hunk": "@@ -411,6 +409,11 @@ local function on_client_exit(code, signal, client_id)\n     end)\n   end\n \n+  vim.schedule(function()\n+    local namespace = vim.lsp.diagnostic.get_namespace(client_id)\n+    vim.diagnostic.reset(namespace)\n+  end)",
            "html_url": "https://github.com/neovim/neovim/pull/29050#discussion_r1619258723",
            "id": 1619258723,
            "in_reply_to_id": 1618903737,
            "line": 413,
            "node_id": "PRRC_kwDOAPphoM5gg-1j",
            "original_commit_id": "b87ab765fdab9509aa1126ed48b672ae3e08869e",
            "original_line": 413,
            "original_position": 16,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": 28,
            "pull_request_review_id": 2086033495,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29050",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619258723/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-05-29T17:39:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619258723",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51029315?v=4",
                "events_url": "https://api.github.com/users/crwebb85/events{/privacy}",
                "followers_url": "https://api.github.com/users/crwebb85/followers",
                "following_url": "https://api.github.com/users/crwebb85/following{/other_user}",
                "gists_url": "https://api.github.com/users/crwebb85/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/crwebb85",
                "id": 51029315,
                "login": "crwebb85",
                "node_id": "MDQ6VXNlcjUxMDI5MzE1",
                "organizations_url": "https://api.github.com/users/crwebb85/orgs",
                "received_events_url": "https://api.github.com/users/crwebb85/received_events",
                "repos_url": "https://api.github.com/users/crwebb85/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/crwebb85/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/crwebb85/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/crwebb85"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29050#discussion_r1619289279"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29050"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619289279"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "> Afaik the split into at least two schedule's is important to ensure the LspDetach events finished processing before the remainder of the cleanup runs.\r\n\r\n@mfussenegger I think it should be fine because `nvim_exec_autocmds` invokes those callback synchronously.",
            "commit_id": "c2f160cc4057be3bf92a0580a4cef09b87dcddde",
            "created_at": "2024-05-29T18:06:20Z",
            "diff_hunk": "@@ -411,6 +409,11 @@ local function on_client_exit(code, signal, client_id)\n     end)\n   end\n \n+  vim.schedule(function()\n+    local namespace = vim.lsp.diagnostic.get_namespace(client_id)\n+    vim.diagnostic.reset(namespace)\n+  end)",
            "html_url": "https://github.com/neovim/neovim/pull/29050#discussion_r1619289279",
            "id": 1619289279,
            "in_reply_to_id": 1618903737,
            "line": 413,
            "node_id": "PRRC_kwDOAPphoM5ghGS_",
            "original_commit_id": "b87ab765fdab9509aa1126ed48b672ae3e08869e",
            "original_line": 413,
            "original_position": 16,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": 28,
            "pull_request_review_id": 2086082118,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29050",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619289279/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-05-29T18:06:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619289279",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/943597?v=4",
                "events_url": "https://api.github.com/users/icholy/events{/privacy}",
                "followers_url": "https://api.github.com/users/icholy/followers",
                "following_url": "https://api.github.com/users/icholy/following{/other_user}",
                "gists_url": "https://api.github.com/users/icholy/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/icholy",
                "id": 943597,
                "login": "icholy",
                "node_id": "MDQ6VXNlcjk0MzU5Nw==",
                "organizations_url": "https://api.github.com/users/icholy/orgs",
                "received_events_url": "https://api.github.com/users/icholy/received_events",
                "repos_url": "https://api.github.com/users/icholy/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/icholy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/icholy/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/icholy"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29050#discussion_r1619330438"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29050"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619330438"
                }
            },
            "author_association": "MEMBER",
            "body": "I'd still keep at least two schedule's for the backport to 0.10 to avoid risking a regression.\r\nWe can follow up with a refactor that puts all in one for 0.11",
            "commit_id": "c2f160cc4057be3bf92a0580a4cef09b87dcddde",
            "created_at": "2024-05-29T18:42:23Z",
            "diff_hunk": "@@ -411,6 +409,11 @@ local function on_client_exit(code, signal, client_id)\n     end)\n   end\n \n+  vim.schedule(function()\n+    local namespace = vim.lsp.diagnostic.get_namespace(client_id)\n+    vim.diagnostic.reset(namespace)\n+  end)",
            "html_url": "https://github.com/neovim/neovim/pull/29050#discussion_r1619330438",
            "id": 1619330438,
            "in_reply_to_id": 1618903737,
            "line": 413,
            "node_id": "PRRC_kwDOAPphoM5ghQWG",
            "original_commit_id": "b87ab765fdab9509aa1126ed48b672ae3e08869e",
            "original_line": 413,
            "original_position": 16,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": 28,
            "pull_request_review_id": 2086152731,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29050",
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619330438/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-05-29T18:42:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619330438",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38700?v=4",
                "events_url": "https://api.github.com/users/mfussenegger/events{/privacy}",
                "followers_url": "https://api.github.com/users/mfussenegger/followers",
                "following_url": "https://api.github.com/users/mfussenegger/following{/other_user}",
                "gists_url": "https://api.github.com/users/mfussenegger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mfussenegger",
                "id": 38700,
                "login": "mfussenegger",
                "node_id": "MDQ6VXNlcjM4NzAw",
                "organizations_url": "https://api.github.com/users/mfussenegger/orgs",
                "received_events_url": "https://api.github.com/users/mfussenegger/received_events",
                "repos_url": "https://api.github.com/users/mfussenegger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mfussenegger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mfussenegger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mfussenegger"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29050#discussion_r1619638762"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29050"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619638762"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Sounds good. I updated it to just use two schedules and moved the diagnostic reset up to the top one as it makes more since to be with that section of the code.",
            "commit_id": "c2f160cc4057be3bf92a0580a4cef09b87dcddde",
            "created_at": "2024-05-30T00:37:09Z",
            "diff_hunk": "@@ -411,6 +409,11 @@ local function on_client_exit(code, signal, client_id)\n     end)\n   end\n \n+  vim.schedule(function()\n+    local namespace = vim.lsp.diagnostic.get_namespace(client_id)\n+    vim.diagnostic.reset(namespace)\n+  end)",
            "html_url": "https://github.com/neovim/neovim/pull/29050#discussion_r1619638762",
            "id": 1619638762,
            "in_reply_to_id": 1618903737,
            "line": 413,
            "node_id": "PRRC_kwDOAPphoM5gibnq",
            "original_commit_id": "b87ab765fdab9509aa1126ed48b672ae3e08869e",
            "original_line": 413,
            "original_position": 16,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": 28,
            "pull_request_review_id": 2086889584,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29050",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619638762/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-05-30T00:37:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1619638762",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51029315?v=4",
                "events_url": "https://api.github.com/users/crwebb85/events{/privacy}",
                "followers_url": "https://api.github.com/users/crwebb85/followers",
                "following_url": "https://api.github.com/users/crwebb85/following{/other_user}",
                "gists_url": "https://api.github.com/users/crwebb85/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/crwebb85",
                "id": 51029315,
                "login": "crwebb85",
                "node_id": "MDQ6VXNlcjUxMDI5MzE1",
                "organizations_url": "https://api.github.com/users/crwebb85/orgs",
                "received_events_url": "https://api.github.com/users/crwebb85/received_events",
                "repos_url": "https://api.github.com/users/crwebb85/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/crwebb85/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/crwebb85/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/crwebb85"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29050#discussion_r1620116809"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29050"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1620116809"
                }
            },
            "author_association": "MEMBER",
            "body": "I think this `vim.schedule` hack (?) should be commented, briefly talking about why we needed to defer its execution.",
            "commit_id": "c2f160cc4057be3bf92a0580a4cef09b87dcddde",
            "created_at": "2024-05-30T07:20:33Z",
            "diff_hunk": "@@ -411,6 +409,11 @@ local function on_client_exit(code, signal, client_id)\n     end)\n   end\n \n+  vim.schedule(function()\n+    local namespace = vim.lsp.diagnostic.get_namespace(client_id)\n+    vim.diagnostic.reset(namespace)\n+  end)",
            "html_url": "https://github.com/neovim/neovim/pull/29050#discussion_r1620116809",
            "id": 1620116809,
            "in_reply_to_id": 1618903737,
            "line": 413,
            "node_id": "PRRC_kwDOAPphoM5gkQVJ",
            "original_commit_id": "b87ab765fdab9509aa1126ed48b672ae3e08869e",
            "original_line": 413,
            "original_position": 16,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": 28,
            "pull_request_review_id": 2087433783,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29050",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1620116809/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-05-30T07:20:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1620116809",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1009873?v=4",
                "events_url": "https://api.github.com/users/wookayin/events{/privacy}",
                "followers_url": "https://api.github.com/users/wookayin/followers",
                "following_url": "https://api.github.com/users/wookayin/following{/other_user}",
                "gists_url": "https://api.github.com/users/wookayin/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/wookayin",
                "id": 1009873,
                "login": "wookayin",
                "node_id": "MDQ6VXNlcjEwMDk4NzM=",
                "organizations_url": "https://api.github.com/users/wookayin/orgs",
                "received_events_url": "https://api.github.com/users/wookayin/received_events",
                "repos_url": "https://api.github.com/users/wookayin/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/wookayin/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/wookayin/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/wookayin"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29050#discussion_r1620697366"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29050"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1620697366"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "@wookayin I think we can just make a followup PR right now to combine it all into one `vim.schedule` instead. @crwebb85 are you interested in doing that? \r\n\r\n**edit:** or are you referring the usage of `vim.schedule` in this function all-together?",
            "commit_id": "c2f160cc4057be3bf92a0580a4cef09b87dcddde",
            "created_at": "2024-05-30T13:15:34Z",
            "diff_hunk": "@@ -411,6 +409,11 @@ local function on_client_exit(code, signal, client_id)\n     end)\n   end\n \n+  vim.schedule(function()\n+    local namespace = vim.lsp.diagnostic.get_namespace(client_id)\n+    vim.diagnostic.reset(namespace)\n+  end)",
            "html_url": "https://github.com/neovim/neovim/pull/29050#discussion_r1620697366",
            "id": 1620697366,
            "in_reply_to_id": 1618903737,
            "line": 413,
            "node_id": "PRRC_kwDOAPphoM5gmeEW",
            "original_commit_id": "b87ab765fdab9509aa1126ed48b672ae3e08869e",
            "original_line": 413,
            "original_position": 16,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp.lua",
            "position": 28,
            "pull_request_review_id": 2088250755,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29050",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1620697366/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-05-30T13:16:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1620697366",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/943597?v=4",
                "events_url": "https://api.github.com/users/icholy/events{/privacy}",
                "followers_url": "https://api.github.com/users/icholy/followers",
                "following_url": "https://api.github.com/users/icholy/following{/other_user}",
                "gists_url": "https://api.github.com/users/icholy/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/icholy",
                "id": 943597,
                "login": "icholy",
                "node_id": "MDQ6VXNlcjk0MzU5Nw==",
                "organizations_url": "https://api.github.com/users/icholy/orgs",
                "received_events_url": "https://api.github.com/users/icholy/received_events",
                "repos_url": "https://api.github.com/users/icholy/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/icholy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/icholy/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/icholy"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "> the client will only clear the diagnostics for the attached buffers but not the unattached buffers.\r\n\r\nwhy would unattached buffers have diagnostics? and if they do, why aren't those diagnostics linked to the per-client namespace?",
            "created_at": "2024-05-27T19:45:15Z",
            "html_url": "https://github.com/neovim/neovim/pull/29050#issuecomment-2133982143",
            "id": 2133982143,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29050",
            "node_id": "IC_kwDOAPphoM5_Mfu_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2133982143/reactions"
            },
            "updated_at": "2024-05-27T19:45:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2133982143",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Do you by chance use a server that supports pull diagnostics? I could imagine the problem you're facing is due to lsp using two namespaces per client. One for push diagnostic, one for pull. Only one gets cleared",
            "created_at": "2024-05-27T20:38:41Z",
            "html_url": "https://github.com/neovim/neovim/pull/29050#issuecomment-2134026511",
            "id": 2134026511,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29050",
            "node_id": "IC_kwDOAPphoM5_MqkP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2134026511/reactions"
            },
            "updated_at": "2024-05-27T20:38:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2134026511",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38700?v=4",
                "events_url": "https://api.github.com/users/mfussenegger/events{/privacy}",
                "followers_url": "https://api.github.com/users/mfussenegger/followers",
                "following_url": "https://api.github.com/users/mfussenegger/following{/other_user}",
                "gists_url": "https://api.github.com/users/mfussenegger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mfussenegger",
                "id": 38700,
                "login": "mfussenegger",
                "node_id": "MDQ6VXNlcjM4NzAw",
                "organizations_url": "https://api.github.com/users/mfussenegger/orgs",
                "received_events_url": "https://api.github.com/users/mfussenegger/received_events",
                "repos_url": "https://api.github.com/users/mfussenegger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mfussenegger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mfussenegger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mfussenegger"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "The main reason that the lsp can have diagnostics without the buffer attached is that many lsps find all diagnostics for the workspace (or can be configured to do so). You normally don't open all the workspace files in the buffer, so diagnostics need a bufnr to be asigned to. From digging into the code, it seems to me that when the lsp reports a diagnostic for an unopened buffer, the bufnr gets reserved for if you later open the file and that bufnr is what is used in the diagnostic cache.\n\nThe other reason I have had diagnostics for an unattached buffer was that I closed the buffer to clean up my buf list. This triggers an unattach, but the client correctly keeps the diagnostics in the diagnostics cache. ",
            "created_at": "2024-05-28T04:00:31Z",
            "html_url": "https://github.com/neovim/neovim/pull/29050#issuecomment-2134304904",
            "id": 2134304904,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29050",
            "node_id": "IC_kwDOAPphoM5_NuiI",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2134304904/reactions"
            },
            "updated_at": "2024-05-28T11:33:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2134304904",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51029315?v=4",
                "events_url": "https://api.github.com/users/crwebb85/events{/privacy}",
                "followers_url": "https://api.github.com/users/crwebb85/followers",
                "following_url": "https://api.github.com/users/crwebb85/following{/other_user}",
                "gists_url": "https://api.github.com/users/crwebb85/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/crwebb85",
                "id": 51029315,
                "login": "crwebb85",
                "node_id": "MDQ6VXNlcjUxMDI5MzE1",
                "organizations_url": "https://api.github.com/users/crwebb85/orgs",
                "received_events_url": "https://api.github.com/users/crwebb85/received_events",
                "repos_url": "https://api.github.com/users/crwebb85/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/crwebb85/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/crwebb85/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/crwebb85"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> Do you by chance use a server that supports pull diagnostics? I could imagine the problem you're facing is due to lsp using two namespaces per client. One for push diagnostic, one for pull. Only one gets cleared\r\n\r\nI believe the lsp's that I have experienced this with are push diagnostics and it didn't seem from my testing that it was using two different namespaces. The LSPs I have confirmed this behavior with include lua-language-server and omnisharp. Although, I can only get lua-language-server to consistently find workspace diagnostics when I have a .luarc.json file. ",
            "created_at": "2024-05-28T04:17:44Z",
            "html_url": "https://github.com/neovim/neovim/pull/29050#issuecomment-2134316688",
            "id": 2134316688,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29050",
            "node_id": "IC_kwDOAPphoM5_NxaQ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2134316688/reactions"
            },
            "updated_at": "2024-05-28T12:05:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2134316688",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51029315?v=4",
                "events_url": "https://api.github.com/users/crwebb85/events{/privacy}",
                "followers_url": "https://api.github.com/users/crwebb85/followers",
                "following_url": "https://api.github.com/users/crwebb85/following{/other_user}",
                "gists_url": "https://api.github.com/users/crwebb85/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/crwebb85",
                "id": 51029315,
                "login": "crwebb85",
                "node_id": "MDQ6VXNlcjUxMDI5MzE1",
                "organizations_url": "https://api.github.com/users/crwebb85/orgs",
                "received_events_url": "https://api.github.com/users/crwebb85/received_events",
                "repos_url": "https://api.github.com/users/crwebb85/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/crwebb85/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/crwebb85/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/crwebb85"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "If the LSP returns a diagnostic for an unloaded file, an unlisted buffer is created https://github.com/neovim/neovim/blob/8ba73f0e4cc6c82032a348a1d6c8d794ed150fd7/runtime/lua/vim/lsp/diagnostic.lua#L241\r\n\r\nSince the client never attaches to these buffers, the current logic doesn't clear them either.\r\n\r\n@mfussenegger I think that the push/pull separation is orthogonal to this issue.",
            "created_at": "2024-05-28T14:52:38Z",
            "html_url": "https://github.com/neovim/neovim/pull/29050#issuecomment-2135433232",
            "id": 2135433232,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29050",
            "node_id": "IC_kwDOAPphoM5_SCAQ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2135433232/reactions"
            },
            "updated_at": "2024-05-28T15:02:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2135433232",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/943597?v=4",
                "events_url": "https://api.github.com/users/icholy/events{/privacy}",
                "followers_url": "https://api.github.com/users/icholy/followers",
                "following_url": "https://api.github.com/users/icholy/following{/other_user}",
                "gists_url": "https://api.github.com/users/icholy/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/icholy",
                "id": 943597,
                "login": "icholy",
                "node_id": "MDQ6VXNlcjk0MzU5Nw==",
                "organizations_url": "https://api.github.com/users/icholy/orgs",
                "received_events_url": "https://api.github.com/users/icholy/received_events",
                "repos_url": "https://api.github.com/users/icholy/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/icholy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/icholy/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/icholy"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@crwebb85 you have a failing test.",
            "created_at": "2024-05-28T15:21:58Z",
            "html_url": "https://github.com/neovim/neovim/pull/29050#issuecomment-2135505538",
            "id": 2135505538,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29050",
            "node_id": "IC_kwDOAPphoM5_STqC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2135505538/reactions"
            },
            "updated_at": "2024-05-28T15:21:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2135505538",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/943597?v=4",
                "events_url": "https://api.github.com/users/icholy/events{/privacy}",
                "followers_url": "https://api.github.com/users/icholy/followers",
                "following_url": "https://api.github.com/users/icholy/following{/other_user}",
                "gists_url": "https://api.github.com/users/icholy/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/icholy",
                "id": 943597,
                "login": "icholy",
                "node_id": "MDQ6VXNlcjk0MzU5Nw==",
                "organizations_url": "https://api.github.com/users/icholy/orgs",
                "received_events_url": "https://api.github.com/users/icholy/received_events",
                "repos_url": "https://api.github.com/users/icholy/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/icholy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/icholy/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/icholy"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> @crwebb85 you have a failing test.\r\n\r\nI took a quick look during lunch but nothing obvious stuck out to me so I will setup a debugger later tonight to see why the test fails. ",
            "created_at": "2024-05-28T16:59:23Z",
            "html_url": "https://github.com/neovim/neovim/pull/29050#issuecomment-2135724405",
            "id": 2135724405,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29050",
            "node_id": "IC_kwDOAPphoM5_TJF1",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2135724405/reactions"
            },
            "updated_at": "2024-05-28T16:59:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2135724405",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51029315?v=4",
                "events_url": "https://api.github.com/users/crwebb85/events{/privacy}",
                "followers_url": "https://api.github.com/users/crwebb85/followers",
                "following_url": "https://api.github.com/users/crwebb85/following{/other_user}",
                "gists_url": "https://api.github.com/users/crwebb85/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/crwebb85",
                "id": 51029315,
                "login": "crwebb85",
                "node_id": "MDQ6VXNlcjUxMDI5MzE1",
                "organizations_url": "https://api.github.com/users/crwebb85/orgs",
                "received_events_url": "https://api.github.com/users/crwebb85/received_events",
                "repos_url": "https://api.github.com/users/crwebb85/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/crwebb85/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/crwebb85/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/crwebb85"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Successfully created backport PR for `release-0.10`:\n- #29091",
            "created_at": "2024-05-30T06:59:54Z",
            "html_url": "https://github.com/neovim/neovim/pull/29050#issuecomment-2138815661",
            "id": 2138815661,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29050",
            "node_id": "IC_kwDOAPphoM5_e7yt",
            "performed_via_github_app": {
                "client_id": "Iv1.05c79e9ad1f6bdfa",
                "created_at": "2018-07-30T09:30:17Z",
                "description": "Automate your workflow from idea to production",
                "events": [
                    "branch_protection_rule",
                    "check_run",
                    "check_suite",
                    "create",
                    "delete",
                    "deployment",
                    "deployment_status",
                    "discussion",
                    "discussion_comment",
                    "fork",
                    "gollum",
                    "issues",
                    "issue_comment",
                    "label",
                    "merge_group",
                    "milestone",
                    "page_build",
                    "project",
                    "project_card",
                    "project_column",
                    "public",
                    "pull_request",
                    "pull_request_review",
                    "pull_request_review_comment",
                    "push",
                    "registry_package",
                    "release",
                    "repository",
                    "repository_dispatch",
                    "status",
                    "watch",
                    "workflow_dispatch",
                    "workflow_run"
                ],
                "external_url": "https://help.github.com/en/actions",
                "html_url": "https://github.com/apps/github-actions",
                "id": 15368,
                "name": "GitHub Actions",
                "node_id": "MDM6QXBwMTUzNjg=",
                "owner": {
                    "avatar_url": "https://avatars.githubusercontent.com/u/9919?v=4",
                    "events_url": "https://api.github.com/users/github/events{/privacy}",
                    "followers_url": "https://api.github.com/users/github/followers",
                    "following_url": "https://api.github.com/users/github/following{/other_user}",
                    "gists_url": "https://api.github.com/users/github/gists{/gist_id}",
                    "gravatar_id": "",
                    "html_url": "https://github.com/github",
                    "id": 9919,
                    "login": "github",
                    "node_id": "MDEyOk9yZ2FuaXphdGlvbjk5MTk=",
                    "organizations_url": "https://api.github.com/users/github/orgs",
                    "received_events_url": "https://api.github.com/users/github/received_events",
                    "repos_url": "https://api.github.com/users/github/repos",
                    "site_admin": false,
                    "starred_url": "https://api.github.com/users/github/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/github/subscriptions",
                    "type": "Organization",
                    "url": "https://api.github.com/users/github"
                },
                "permissions": {
                    "actions": "write",
                    "administration": "read",
                    "attestations": "write",
                    "checks": "write",
                    "contents": "write",
                    "deployments": "write",
                    "discussions": "write",
                    "issues": "write",
                    "merge_queues": "write",
                    "metadata": "read",
                    "packages": "write",
                    "pages": "write",
                    "pull_requests": "write",
                    "repository_hooks": "write",
                    "repository_projects": "write",
                    "security_events": "write",
                    "statuses": "write",
                    "vulnerability_alerts": "read"
                },
                "slug": "github-actions",
                "updated_at": "2024-04-10T20:33:16Z"
            },
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2138815661/reactions"
            },
            "updated_at": "2024-05-30T06:59:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2138815661",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
                "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
                "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
                "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
                "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/apps/github-actions",
                "id": 41898282,
                "login": "github-actions[bot]",
                "node_id": "MDM6Qm90NDE4OTgyODI=",
                "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
                "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
                "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
                "type": "Bot",
                "url": "https://api.github.com/users/github-actions%5Bbot%5D"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Git push to origin failed for release-0.10 with exitcode 1",
            "created_at": "2024-05-30T07:01:16Z",
            "html_url": "https://github.com/neovim/neovim/pull/29050#issuecomment-2138817647",
            "id": 2138817647,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29050",
            "node_id": "IC_kwDOAPphoM5_e8Rv",
            "performed_via_github_app": {
                "client_id": "Iv1.05c79e9ad1f6bdfa",
                "created_at": "2018-07-30T09:30:17Z",
                "description": "Automate your workflow from idea to production",
                "events": [
                    "branch_protection_rule",
                    "check_run",
                    "check_suite",
                    "create",
                    "delete",
                    "deployment",
                    "deployment_status",
                    "discussion",
                    "discussion_comment",
                    "fork",
                    "gollum",
                    "issues",
                    "issue_comment",
                    "label",
                    "merge_group",
                    "milestone",
                    "page_build",
                    "project",
                    "project_card",
                    "project_column",
                    "public",
                    "pull_request",
                    "pull_request_review",
                    "pull_request_review_comment",
                    "push",
                    "registry_package",
                    "release",
                    "repository",
                    "repository_dispatch",
                    "status",
                    "watch",
                    "workflow_dispatch",
                    "workflow_run"
                ],
                "external_url": "https://help.github.com/en/actions",
                "html_url": "https://github.com/apps/github-actions",
                "id": 15368,
                "name": "GitHub Actions",
                "node_id": "MDM6QXBwMTUzNjg=",
                "owner": {
                    "avatar_url": "https://avatars.githubusercontent.com/u/9919?v=4",
                    "events_url": "https://api.github.com/users/github/events{/privacy}",
                    "followers_url": "https://api.github.com/users/github/followers",
                    "following_url": "https://api.github.com/users/github/following{/other_user}",
                    "gists_url": "https://api.github.com/users/github/gists{/gist_id}",
                    "gravatar_id": "",
                    "html_url": "https://github.com/github",
                    "id": 9919,
                    "login": "github",
                    "node_id": "MDEyOk9yZ2FuaXphdGlvbjk5MTk=",
                    "organizations_url": "https://api.github.com/users/github/orgs",
                    "received_events_url": "https://api.github.com/users/github/received_events",
                    "repos_url": "https://api.github.com/users/github/repos",
                    "site_admin": false,
                    "starred_url": "https://api.github.com/users/github/starred{/owner}{/repo}",
                    "subscriptions_url": "https://api.github.com/users/github/subscriptions",
                    "type": "Organization",
                    "url": "https://api.github.com/users/github"
                },
                "permissions": {
                    "actions": "write",
                    "administration": "read",
                    "attestations": "write",
                    "checks": "write",
                    "contents": "write",
                    "deployments": "write",
                    "discussions": "write",
                    "issues": "write",
                    "merge_queues": "write",
                    "metadata": "read",
                    "packages": "write",
                    "pages": "write",
                    "pull_requests": "write",
                    "repository_hooks": "write",
                    "repository_projects": "write",
                    "security_events": "write",
                    "statuses": "write",
                    "vulnerability_alerts": "read"
                },
                "slug": "github-actions",
                "updated_at": "2024-04-10T20:33:16Z"
            },
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2138817647/reactions"
            },
            "updated_at": "2024-05-30T07:01:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2138817647",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
                "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
                "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
                "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
                "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/apps/github-actions",
                "id": 41898282,
                "login": "github-actions[bot]",
                "node_id": "MDM6Qm90NDE4OTgyODI=",
                "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
                "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
                "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
                "type": "Bot",
                "url": "https://api.github.com/users/github-actions%5Bbot%5D"
            }
        },
        {
            "author_association": "NONE",
            "body": "Doesn't the LSP spec put the oweness on the LSP server to clear the diagnostics (by sending an empty array of diagnostics to the associated file URI of which, you want to clear)? ",
            "created_at": "2024-09-13T07:47:59Z",
            "html_url": "https://github.com/neovim/neovim/pull/29050#issuecomment-2348266676",
            "id": 2348266676,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29050",
            "node_id": "IC_kwDOAPphoM6L97S0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2348266676/reactions"
            },
            "updated_at": "2024-09-13T07:48:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2348266676",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11134428?v=4",
                "events_url": "https://api.github.com/users/TilakMaddy/events{/privacy}",
                "followers_url": "https://api.github.com/users/TilakMaddy/followers",
                "following_url": "https://api.github.com/users/TilakMaddy/following{/other_user}",
                "gists_url": "https://api.github.com/users/TilakMaddy/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/TilakMaddy",
                "id": 11134428,
                "login": "TilakMaddy",
                "node_id": "MDQ6VXNlcjExMTM0NDI4",
                "organizations_url": "https://api.github.com/users/TilakMaddy/orgs",
                "received_events_url": "https://api.github.com/users/TilakMaddy/received_events",
                "repos_url": "https://api.github.com/users/TilakMaddy/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/TilakMaddy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/TilakMaddy/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/TilakMaddy"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Doesn't the LSP spec put the oweness on the LSP server to clear the diagnostics (by sending an empty array of diagnostics to the associated file URI of which, you want to clear)?\r\n\r\nI think that this depends on the diagnostics model (push versus pull diagnostics).",
            "created_at": "2024-09-13T15:22:50Z",
            "html_url": "https://github.com/neovim/neovim/pull/29050#issuecomment-2349212402",
            "id": 2349212402,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29050",
            "node_id": "IC_kwDOAPphoM6MBiLy",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2349212402/reactions"
            },
            "updated_at": "2024-09-13T15:22:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2349212402",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
                "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
                "followers_url": "https://api.github.com/users/MariaSolOs/followers",
                "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
                "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MariaSolOs",
                "id": 62502207,
                "login": "MariaSolOs",
                "node_id": "MDQ6VXNlcjYyNTAyMjA3",
                "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
                "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
                "repos_url": "https://api.github.com/users/MariaSolOs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MariaSolOs"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/29050/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/29050/commits",
    "created_at": "2024-05-27T19:34:39Z",
    "diff_url": "https://github.com/neovim/neovim/pull/29050.diff",
    "draft": false,
    "head": {
        "label": "crwebb85:reset-lsp-diagnostic-v2",
        "ref": "reset-lsp-diagnostic-v2",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/crwebb85/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/crwebb85/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/crwebb85/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/crwebb85/neovim/branches{/branch}",
            "clone_url": "https://github.com/crwebb85/neovim.git",
            "collaborators_url": "https://api.github.com/repos/crwebb85/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/crwebb85/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/crwebb85/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/crwebb85/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/crwebb85/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/crwebb85/neovim/contributors",
            "created_at": "2024-05-12T12:46:55Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/crwebb85/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/crwebb85/neovim/downloads",
            "events_url": "https://api.github.com/repos/crwebb85/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/crwebb85/neovim/forks",
            "full_name": "crwebb85/neovim",
            "git_commits_url": "https://api.github.com/repos/crwebb85/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/crwebb85/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/crwebb85/neovim/git/tags{/sha}",
            "git_url": "git://github.com/crwebb85/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/crwebb85/neovim/hooks",
            "html_url": "https://github.com/crwebb85/neovim",
            "id": 799536202,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/crwebb85/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/crwebb85/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/crwebb85/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/crwebb85/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/crwebb85/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/crwebb85/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/crwebb85/neovim/merges",
            "milestones_url": "https://api.github.com/repos/crwebb85/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "R_kgDOL6f0Sg",
            "notifications_url": "https://api.github.com/repos/crwebb85/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51029315?v=4",
                "events_url": "https://api.github.com/users/crwebb85/events{/privacy}",
                "followers_url": "https://api.github.com/users/crwebb85/followers",
                "following_url": "https://api.github.com/users/crwebb85/following{/other_user}",
                "gists_url": "https://api.github.com/users/crwebb85/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/crwebb85",
                "id": 51029315,
                "login": "crwebb85",
                "node_id": "MDQ6VXNlcjUxMDI5MzE1",
                "organizations_url": "https://api.github.com/users/crwebb85/orgs",
                "received_events_url": "https://api.github.com/users/crwebb85/received_events",
                "repos_url": "https://api.github.com/users/crwebb85/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/crwebb85/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/crwebb85/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/crwebb85"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/crwebb85/neovim/pulls{/number}",
            "pushed_at": "2024-05-30T00:12:07Z",
            "releases_url": "https://api.github.com/repos/crwebb85/neovim/releases{/id}",
            "size": 266128,
            "ssh_url": "git@github.com:crwebb85/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/crwebb85/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/crwebb85/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/crwebb85/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/crwebb85/neovim/subscription",
            "svn_url": "https://github.com/crwebb85/neovim",
            "tags_url": "https://api.github.com/repos/crwebb85/neovim/tags",
            "teams_url": "https://api.github.com/repos/crwebb85/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/crwebb85/neovim/git/trees{/sha}",
            "updated_at": "2024-05-27T16:27:10Z",
            "url": "https://api.github.com/repos/crwebb85/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "c2f160cc4057be3bf92a0580a4cef09b87dcddde",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/51029315?v=4",
            "events_url": "https://api.github.com/users/crwebb85/events{/privacy}",
            "followers_url": "https://api.github.com/users/crwebb85/followers",
            "following_url": "https://api.github.com/users/crwebb85/following{/other_user}",
            "gists_url": "https://api.github.com/users/crwebb85/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/crwebb85",
            "id": 51029315,
            "login": "crwebb85",
            "node_id": "MDQ6VXNlcjUxMDI5MzE1",
            "organizations_url": "https://api.github.com/users/crwebb85/orgs",
            "received_events_url": "https://api.github.com/users/crwebb85/received_events",
            "repos_url": "https://api.github.com/users/crwebb85/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/crwebb85/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/crwebb85/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/crwebb85"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/29050",
    "id": 1890666867,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29050",
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        },
        {
            "color": "0052CC",
            "default": false,
            "description": "",
            "id": 6959860626,
            "name": "ci:backport release-0.10",
            "node_id": "LA_kwDOAPphoM8AAAABntcLkg",
            "url": "https://api.github.com/repos/neovim/neovim/labels/ci:backport%20release-0.10"
        }
    ],
    "locked": false,
    "merge_commit_sha": "025c87441502cf570bad7b71f40bc6fe88989297",
    "merged_at": "2024-05-30T06:59:23Z",
    "milestone": null,
    "node_id": "PR_kwDOAPphoM5wsUlz",
    "number": 29050,
    "patch_url": "https://github.com/neovim/neovim/pull/29050.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/29050/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/c2f160cc4057be3bf92a0580a4cef09b87dcddde",
    "title": "fix(lsp): clear lsp client diagnostics",
    "updated_at": "2024-09-13T15:22:51Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/29050",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/51029315?v=4",
        "events_url": "https://api.github.com/users/crwebb85/events{/privacy}",
        "followers_url": "https://api.github.com/users/crwebb85/followers",
        "following_url": "https://api.github.com/users/crwebb85/following{/other_user}",
        "gists_url": "https://api.github.com/users/crwebb85/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/crwebb85",
        "id": 51029315,
        "login": "crwebb85",
        "node_id": "MDQ6VXNlcjUxMDI5MzE1",
        "organizations_url": "https://api.github.com/users/crwebb85/orgs",
        "received_events_url": "https://api.github.com/users/crwebb85/received_events",
        "repos_url": "https://api.github.com/users/crwebb85/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/crwebb85/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/crwebb85/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/crwebb85"
    }
}