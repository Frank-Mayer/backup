{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/29552/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/29552/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/29552"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/29552"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/29552/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/65934874a083c4d865b3dffa4498ad0e6b8b0f0b"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "FIRST_TIME_CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 5495,
            "forks_count": 5495,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1766,
            "open_issues_count": 1766,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2024-07-08T22:41:26Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 277808,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 79943,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2024-07-09T01:46:42Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 79943,
            "watchers_count": 79943,
            "web_commit_signoff_required": false
        },
        "sha": "12c9791e0fef7ee0d6cf6d3b828caa488d6347ea",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim"
        }
    },
    "body": "As discussed in #7189, this PR suggests adding the code from [my prototype `spellfile.nvim`](https://github.com/cuducos/spellfile.nvim) to handle the download of missing spell files with Lua.\r\n\r\nThe major advantage is dropping the dependency of `netrw` for downloading spell files.\r\n\r\nThis PR is very raw, mostly for asking for help. \r\n\r\nIn tests, how do I “import” the new module?\r\n\r\nWhen it was a plugin named `spellfile_nvim` it was  `require'spellfile_nvim` — now… I left `local spellfile = require('spellfile')` but I am sure it does not work.",
    "closed_at": null,
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1664860632"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1664860632"
                }
            },
            "author_association": "MEMBER",
            "body": "This should be moved to runtime/lua/spellfile.lua",
            "commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "created_at": "2024-07-03T22:04:32Z",
            "diff_hunk": "",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1664860632",
            "id": 1664860632,
            "line": 1,
            "node_id": "PRRC_kwDOAPphoM5jO8HY",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 1,
            "original_position": 1,
            "original_start_line": null,
            "path": "runtime/autoload/spellfile.lua",
            "position": 1,
            "pull_request_review_id": 2157562615,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1664860632/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "file",
            "updated_at": "2024-07-03T22:04:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1664860632",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1664860763"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1664860763"
                }
            },
            "author_association": "MEMBER",
            "body": "Why is this file removed? This PR shouldn't affect any of the tests in this file.",
            "commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "created_at": "2024-07-03T22:04:46Z",
            "diff_hunk": "",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1664860763",
            "id": 1664860763,
            "line": 1,
            "node_id": "PRRC_kwDOAPphoM5jO8Jb",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 1,
            "original_position": 1,
            "original_start_line": null,
            "path": "test/old/testdir/test_spellfile.vim",
            "position": 1,
            "pull_request_review_id": 2157563250,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1664860763/reactions"
            },
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "subject_type": "file",
            "updated_at": "2024-07-03T22:12:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1664860763",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1664861425"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1664861425"
                }
            },
            "author_association": "MEMBER",
            "body": "This should be moved to test/functional",
            "commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "created_at": "2024-07-03T22:05:55Z",
            "diff_hunk": "",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1664861425",
            "id": 1664861425,
            "line": 1,
            "node_id": "PRRC_kwDOAPphoM5jO8Tx",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 1,
            "original_position": 1,
            "original_start_line": null,
            "path": "test/unit/spellfile_spec.lua",
            "position": 1,
            "pull_request_review_id": 2157566720,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1664861425/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "file",
            "updated_at": "2024-07-03T22:05:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1664861425",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1664862659"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1664862659"
                }
            },
            "author_association": "MEMBER",
            "body": "?",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-03T22:08:14Z",
            "diff_hunk": "@@ -0,0 +1,10 @@\n+require('spellfile').setup()\n+\n+vim.api.nvim_create_autocmd('SpellFileMissing', {\n+  callback = function()\n+    local lang = vim.api.nvim_exec2('echo &spelllang', { output = true })\n+    require('spellfile').load_file(lang.output)\n+  end,\n+})\n+\n+return { answer = 42 }",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1664862659",
            "id": 1664862659,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jO8nD",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 10,
            "original_position": 10,
            "original_start_line": null,
            "path": "runtime/plugin/spellfile.lua",
            "position": null,
            "pull_request_review_id": 2157572900,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1664862659/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-03T22:08:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1664862659",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1664863198"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1664863198"
                }
            },
            "author_association": "MEMBER",
            "body": "Remove this line. It loads the module even when it's not needed, and doesn't achieve anything.",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-03T22:09:05Z",
            "diff_hunk": "@@ -0,0 +1,10 @@\n+require('spellfile').setup()",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1664863198",
            "id": 1664863198,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jO8ve",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 1,
            "original_position": 1,
            "original_start_line": null,
            "path": "runtime/plugin/spellfile.lua",
            "position": null,
            "pull_request_review_id": 2157575240,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1664863198/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-03T22:19:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1664863198",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1665362155"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1665362155"
                }
            },
            "author_association": "MEMBER",
            "body": "No need to expose all these functions (and in fact the configuration). And `setup()` is a definite non-starter!\r\n\r\nAlso, you may want to wait for #29327.",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-04T08:45:56Z",
            "diff_hunk": "@@ -0,0 +1,137 @@\n+local M = {}",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1665362155",
            "id": 1665362155,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jQ2jr",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 1,
            "original_position": 1,
            "original_start_line": null,
            "path": "runtime/autoload/spellfile.lua",
            "position": null,
            "pull_request_review_id": 2158349525,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1665362155/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-04T08:46:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1665362155",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1665365853"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1665365853"
                }
            },
            "author_association": "MEMBER",
            "body": "`vim.bo.spelllang` (ideally using `args.bufnr` from the callback argument)",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-04T08:48:33Z",
            "diff_hunk": "@@ -0,0 +1,10 @@\n+require('spellfile').setup()\n+\n+vim.api.nvim_create_autocmd('SpellFileMissing', {\n+  callback = function()\n+    local lang = vim.api.nvim_exec2('echo &spelllang', { output = true })",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1665365853",
            "id": 1665365853,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jQ3dd",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 5,
            "original_position": 5,
            "original_start_line": null,
            "path": "runtime/plugin/spellfile.lua",
            "position": null,
            "pull_request_review_id": 2158355046,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1665365853/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-04T08:48:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1665365853",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1665372032"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1665372032"
                }
            },
            "author_association": "MEMBER",
            "body": "use `vim.system` instead (if you don't want to wait for `vim.download`). No need to support `wget`, and `curl` support needs a healthcheck (see the existing `ripgrep` one; make sure to print the full output of `curl -v`).",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-04T08:52:58Z",
            "diff_hunk": "@@ -0,0 +1,137 @@\n+local M = {}\n+\n+M.config = {\n+  url = 'https://ftp.nluug.nl/pub/vim/runtime/spell',\n+  encoding = vim.o.encoding,\n+  rtp = vim.opt.rtp:get(),\n+}\n+\n+M.done = {}\n+\n+M.setup = function(opts)\n+  M.done = {}\n+  M.config = vim.tbl_extend('force', M.config, opts or {})\n+end\n+\n+M.directory_choices = function()\n+  local options = {}\n+  for _, dir in ipairs(M.config.rtp) do\n+    local spell = dir .. '/spell'\n+    if vim.fn.isdirectory(spell) == 1 then\n+      table.insert(options, spell)\n+    end\n+  end\n+  return options\n+end\n+\n+M.choose_directory = function()\n+  local options = M.directory_choices()\n+  if #options == 0 then\n+    vim.notify('No spell directory found in the runtimepath')\n+    return\n+  elseif #options == 1 then\n+    return options[1]\n+  end\n+\n+  local prompt = {}\n+  for idx, dir in pairs(options) do\n+    table.insert(prompt, string.format('%d: %s', idx, dir))\n+  end\n+  local choice = vim.fn.inputlist(prompt)\n+  if choice <= 0 or choice > #options then\n+    return\n+  end\n+\n+  return options[choice]\n+end\n+\n+M.exists = function(file_name)\n+  local is_file = function(pth)\n+    local stat = vim.loop.fs_stat(pth)\n+    return stat ~= nil and stat.type ~= nil and stat.type == 'file'\n+  end\n+\n+  for _, dir in pairs(M.directory_choices()) do\n+    if is_file(dir .. '/' .. file_name) then\n+      return true\n+    end\n+  end\n+  return false\n+end\n+\n+M.parse = function(lang)\n+  local code = string.sub(lang:lower(), 1, 2)\n+\n+  local encoding = vim.bo.fileencoding\n+  if encoding == '' then\n+    encoding = M.config.encoding\n+  end\n+  if encoding == 'iso-8859-1' then\n+    encoding = 'latin1'\n+  end\n+\n+  local files = {\n+    string.format('%s.%s.spl', code, encoding),\n+    string.format('%s.%s.sug', code, encoding),\n+  }\n+  local missing = {}\n+  for _, name in ipairs(files) do\n+    if not M.exists(name) then\n+      table.insert(missing, name)\n+    end\n+  end\n+\n+  return {\n+    files = missing,\n+    key = string.format('%s.%s', code, encoding),\n+    lang = code,\n+    encoding = encoding,\n+  }\n+end\n+\n+M.download = function(data)\n+  local prompt =\n+    string.format('No spell file found for %s in %s. Download it? [y/N] ', data.lang, data.encoding)\n+  if vim.fn.input(prompt):lower() ~= 'y' then\n+    return\n+  end\n+  local dir = M.choose_directory()\n+  if dir == nil then\n+    return\n+  end\n+\n+  for _, name in ipairs(data.files) do\n+    local url = M.config.url .. '/' .. name\n+    local pth = dir .. '/' .. name\n+    local cmd = ''\n+    if vim.fn.executable('curl') == 1 then\n+      cmd = string.format('curl -fLo %s %s', pth, url)\n+    elseif vim.fn.executable('wget') == 1 then\n+      cmd = string.format('wget -O %s %s', pth, url)\n+    else\n+      vim.notify('No curl or wget found. Please install one of them.')\n+      return\n+    end\n+\n+    vim.notify(string.format('\\nDownloading %s...', name))\n+    vim.fn.system(cmd)",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1665372032",
            "id": 1665372032,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jQ4-A",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 117,
            "original_position": 117,
            "original_start_line": null,
            "path": "runtime/autoload/spellfile.lua",
            "position": null,
            "pull_request_review_id": 2158364754,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1665372032/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-04T08:52:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1665372032",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1665372453"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1665372453"
                }
            },
            "author_association": "MEMBER",
            "body": "use `vim.ui.input()` instead",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-04T08:53:17Z",
            "diff_hunk": "@@ -0,0 +1,137 @@\n+local M = {}\n+\n+M.config = {\n+  url = 'https://ftp.nluug.nl/pub/vim/runtime/spell',\n+  encoding = vim.o.encoding,\n+  rtp = vim.opt.rtp:get(),\n+}\n+\n+M.done = {}\n+\n+M.setup = function(opts)\n+  M.done = {}\n+  M.config = vim.tbl_extend('force', M.config, opts or {})\n+end\n+\n+M.directory_choices = function()\n+  local options = {}\n+  for _, dir in ipairs(M.config.rtp) do\n+    local spell = dir .. '/spell'\n+    if vim.fn.isdirectory(spell) == 1 then\n+      table.insert(options, spell)\n+    end\n+  end\n+  return options\n+end\n+\n+M.choose_directory = function()\n+  local options = M.directory_choices()\n+  if #options == 0 then\n+    vim.notify('No spell directory found in the runtimepath')\n+    return\n+  elseif #options == 1 then\n+    return options[1]\n+  end\n+\n+  local prompt = {}\n+  for idx, dir in pairs(options) do\n+    table.insert(prompt, string.format('%d: %s', idx, dir))\n+  end\n+  local choice = vim.fn.inputlist(prompt)\n+  if choice <= 0 or choice > #options then\n+    return\n+  end\n+\n+  return options[choice]\n+end\n+\n+M.exists = function(file_name)\n+  local is_file = function(pth)\n+    local stat = vim.loop.fs_stat(pth)\n+    return stat ~= nil and stat.type ~= nil and stat.type == 'file'\n+  end\n+\n+  for _, dir in pairs(M.directory_choices()) do\n+    if is_file(dir .. '/' .. file_name) then\n+      return true\n+    end\n+  end\n+  return false\n+end\n+\n+M.parse = function(lang)\n+  local code = string.sub(lang:lower(), 1, 2)\n+\n+  local encoding = vim.bo.fileencoding\n+  if encoding == '' then\n+    encoding = M.config.encoding\n+  end\n+  if encoding == 'iso-8859-1' then\n+    encoding = 'latin1'\n+  end\n+\n+  local files = {\n+    string.format('%s.%s.spl', code, encoding),\n+    string.format('%s.%s.sug', code, encoding),\n+  }\n+  local missing = {}\n+  for _, name in ipairs(files) do\n+    if not M.exists(name) then\n+      table.insert(missing, name)\n+    end\n+  end\n+\n+  return {\n+    files = missing,\n+    key = string.format('%s.%s', code, encoding),\n+    lang = code,\n+    encoding = encoding,\n+  }\n+end\n+\n+M.download = function(data)\n+  local prompt =\n+    string.format('No spell file found for %s in %s. Download it? [y/N] ', data.lang, data.encoding)\n+  if vim.fn.input(prompt):lower() ~= 'y' then",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1665372453",
            "id": 1665372453,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jQ5El",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 95,
            "original_position": 95,
            "original_start_line": null,
            "path": "runtime/autoload/spellfile.lua",
            "position": null,
            "pull_request_review_id": 2158365461,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1665372453/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-04T08:53:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1665372453",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1665375184"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1665375184"
                }
            },
            "author_association": "MEMBER",
            "body": "prefer `vim.fs` functions for iterating",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-04T08:55:11Z",
            "diff_hunk": "@@ -0,0 +1,137 @@\n+local M = {}\n+\n+M.config = {\n+  url = 'https://ftp.nluug.nl/pub/vim/runtime/spell',\n+  encoding = vim.o.encoding,\n+  rtp = vim.opt.rtp:get(),\n+}\n+\n+M.done = {}\n+\n+M.setup = function(opts)\n+  M.done = {}\n+  M.config = vim.tbl_extend('force', M.config, opts or {})\n+end\n+\n+M.directory_choices = function()\n+  local options = {}\n+  for _, dir in ipairs(M.config.rtp) do\n+    local spell = dir .. '/spell'\n+    if vim.fn.isdirectory(spell) == 1 then\n+      table.insert(options, spell)\n+    end\n+  end\n+  return options\n+end\n+\n+M.choose_directory = function()\n+  local options = M.directory_choices()\n+  if #options == 0 then\n+    vim.notify('No spell directory found in the runtimepath')\n+    return\n+  elseif #options == 1 then\n+    return options[1]\n+  end\n+\n+  local prompt = {}\n+  for idx, dir in pairs(options) do\n+    table.insert(prompt, string.format('%d: %s', idx, dir))\n+  end\n+  local choice = vim.fn.inputlist(prompt)\n+  if choice <= 0 or choice > #options then\n+    return\n+  end\n+\n+  return options[choice]\n+end\n+\n+M.exists = function(file_name)\n+  local is_file = function(pth)\n+    local stat = vim.loop.fs_stat(pth)\n+    return stat ~= nil and stat.type ~= nil and stat.type == 'file'\n+  end\n+\n+  for _, dir in pairs(M.directory_choices()) do",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1665375184",
            "id": 1665375184,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jQ5vQ",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 54,
            "original_position": 54,
            "original_start_line": null,
            "path": "runtime/autoload/spellfile.lua",
            "position": null,
            "pull_request_review_id": 2158369751,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1665375184/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-04T08:55:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1665375184",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1665375380"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1665375380"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n    local stat = vim.uv.fs_stat(pth)\r\n```",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-04T08:55:18Z",
            "diff_hunk": "@@ -0,0 +1,137 @@\n+local M = {}\n+\n+M.config = {\n+  url = 'https://ftp.nluug.nl/pub/vim/runtime/spell',\n+  encoding = vim.o.encoding,\n+  rtp = vim.opt.rtp:get(),\n+}\n+\n+M.done = {}\n+\n+M.setup = function(opts)\n+  M.done = {}\n+  M.config = vim.tbl_extend('force', M.config, opts or {})\n+end\n+\n+M.directory_choices = function()\n+  local options = {}\n+  for _, dir in ipairs(M.config.rtp) do\n+    local spell = dir .. '/spell'\n+    if vim.fn.isdirectory(spell) == 1 then\n+      table.insert(options, spell)\n+    end\n+  end\n+  return options\n+end\n+\n+M.choose_directory = function()\n+  local options = M.directory_choices()\n+  if #options == 0 then\n+    vim.notify('No spell directory found in the runtimepath')\n+    return\n+  elseif #options == 1 then\n+    return options[1]\n+  end\n+\n+  local prompt = {}\n+  for idx, dir in pairs(options) do\n+    table.insert(prompt, string.format('%d: %s', idx, dir))\n+  end\n+  local choice = vim.fn.inputlist(prompt)\n+  if choice <= 0 or choice > #options then\n+    return\n+  end\n+\n+  return options[choice]\n+end\n+\n+M.exists = function(file_name)\n+  local is_file = function(pth)\n+    local stat = vim.loop.fs_stat(pth)",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1665375380",
            "id": 1665375380,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jQ5yU",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 50,
            "original_position": 50,
            "original_start_line": null,
            "path": "runtime/autoload/spellfile.lua",
            "position": null,
            "pull_request_review_id": 2158370035,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1665375380/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-04T08:55:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1665375380",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1666012768"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666012768"
                }
            },
            "author_association": "NONE",
            "body": "Great, fixed in c3fa93625",
            "commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "created_at": "2024-07-04T19:10:04Z",
            "diff_hunk": "",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1666012768",
            "id": 1666012768,
            "in_reply_to_id": 1664860632,
            "line": 1,
            "node_id": "PRRC_kwDOAPphoM5jTVZg",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 1,
            "original_position": 1,
            "original_start_line": null,
            "path": "runtime/autoload/spellfile.lua",
            "position": 1,
            "pull_request_review_id": 2159419200,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666012768/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "file",
            "updated_at": "2024-07-04T19:10:04Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666012768",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4732915?v=4",
                "events_url": "https://api.github.com/users/cuducos/events{/privacy}",
                "followers_url": "https://api.github.com/users/cuducos/followers",
                "following_url": "https://api.github.com/users/cuducos/following{/other_user}",
                "gists_url": "https://api.github.com/users/cuducos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cuducos",
                "id": 4732915,
                "login": "cuducos",
                "node_id": "MDQ6VXNlcjQ3MzI5MTU=",
                "organizations_url": "https://api.github.com/users/cuducos/orgs",
                "received_events_url": "https://api.github.com/users/cuducos/received_events",
                "repos_url": "https://api.github.com/users/cuducos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cuducos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cuducos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cuducos"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1666013127"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666013127"
                }
            },
            "author_association": "NONE",
            "body": "Oops, accidentally removed that. Rolled back in c3fa93625",
            "commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "created_at": "2024-07-04T19:10:43Z",
            "diff_hunk": "",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1666013127",
            "id": 1666013127,
            "in_reply_to_id": 1664860763,
            "line": 1,
            "node_id": "PRRC_kwDOAPphoM5jTVfH",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 1,
            "original_position": 1,
            "original_start_line": null,
            "path": "test/old/testdir/test_spellfile.vim",
            "position": 1,
            "pull_request_review_id": 2159419639,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666013127/reactions"
            },
            "side": "LEFT",
            "start_line": null,
            "start_side": null,
            "subject_type": "file",
            "updated_at": "2024-07-04T19:10:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666013127",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4732915?v=4",
                "events_url": "https://api.github.com/users/cuducos/events{/privacy}",
                "followers_url": "https://api.github.com/users/cuducos/followers",
                "following_url": "https://api.github.com/users/cuducos/following{/other_user}",
                "gists_url": "https://api.github.com/users/cuducos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cuducos",
                "id": 4732915,
                "login": "cuducos",
                "node_id": "MDQ6VXNlcjQ3MzI5MTU=",
                "organizations_url": "https://api.github.com/users/cuducos/orgs",
                "received_events_url": "https://api.github.com/users/cuducos/received_events",
                "repos_url": "https://api.github.com/users/cuducos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cuducos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cuducos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cuducos"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1666013318"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666013318"
                }
            },
            "author_association": "NONE",
            "body": "True! Done in c3fa93625",
            "commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "created_at": "2024-07-04T19:11:06Z",
            "diff_hunk": "",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1666013318",
            "id": 1666013318,
            "in_reply_to_id": 1664861425,
            "line": 1,
            "node_id": "PRRC_kwDOAPphoM5jTViG",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 1,
            "original_position": 1,
            "original_start_line": null,
            "path": "test/unit/spellfile_spec.lua",
            "position": 1,
            "pull_request_review_id": 2159419886,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666013318/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "file",
            "updated_at": "2024-07-04T19:11:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666013318",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4732915?v=4",
                "events_url": "https://api.github.com/users/cuducos/events{/privacy}",
                "followers_url": "https://api.github.com/users/cuducos/followers",
                "following_url": "https://api.github.com/users/cuducos/following{/other_user}",
                "gists_url": "https://api.github.com/users/cuducos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cuducos",
                "id": 4732915,
                "login": "cuducos",
                "node_id": "MDQ6VXNlcjQ3MzI5MTU=",
                "organizations_url": "https://api.github.com/users/cuducos/orgs",
                "received_events_url": "https://api.github.com/users/cuducos/received_events",
                "repos_url": "https://api.github.com/users/cuducos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cuducos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cuducos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cuducos"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1666016576"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666016576"
                }
            },
            "author_association": "NONE",
            "body": "Ok, this sounds stupid, but beginners make stupid decisions and questions, so here we go : )\r\n\r\nI exposed a lot of functions so I could write tests for them. In other words, I don't know how to write tests if I don't expose and `require` in the test file. Any ideas or references so I can get to a better design here?",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-04T19:18:56Z",
            "diff_hunk": "@@ -0,0 +1,137 @@\n+local M = {}",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1666016576",
            "id": 1666016576,
            "in_reply_to_id": 1665362155,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jTWVA",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 1,
            "original_position": 1,
            "original_start_line": null,
            "path": "runtime/autoload/spellfile.lua",
            "position": null,
            "pull_request_review_id": 2159425888,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666016576/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-04T19:18:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666016576",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4732915?v=4",
                "events_url": "https://api.github.com/users/cuducos/events{/privacy}",
                "followers_url": "https://api.github.com/users/cuducos/followers",
                "following_url": "https://api.github.com/users/cuducos/following{/other_user}",
                "gists_url": "https://api.github.com/users/cuducos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cuducos",
                "id": 4732915,
                "login": "cuducos",
                "node_id": "MDQ6VXNlcjQ3MzI5MTU=",
                "organizations_url": "https://api.github.com/users/cuducos/orgs",
                "received_events_url": "https://api.github.com/users/cuducos/received_events",
                "repos_url": "https://api.github.com/users/cuducos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cuducos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cuducos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cuducos"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1666020053"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666020053"
                }
            },
            "author_association": "NONE",
            "body": "Ooop, my bad. Cleaned up in e1add1394.",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-04T19:25:29Z",
            "diff_hunk": "@@ -0,0 +1,10 @@\n+require('spellfile').setup()\n+\n+vim.api.nvim_create_autocmd('SpellFileMissing', {\n+  callback = function()\n+    local lang = vim.api.nvim_exec2('echo &spelllang', { output = true })\n+    require('spellfile').load_file(lang.output)\n+  end,\n+})\n+\n+return { answer = 42 }",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1666020053",
            "id": 1666020053,
            "in_reply_to_id": 1664862659,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jTXLV",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 10,
            "original_position": 10,
            "original_start_line": null,
            "path": "runtime/plugin/spellfile.lua",
            "position": null,
            "pull_request_review_id": 2159430936,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666020053/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-04T19:25:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666020053",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4732915?v=4",
                "events_url": "https://api.github.com/users/cuducos/events{/privacy}",
                "followers_url": "https://api.github.com/users/cuducos/followers",
                "following_url": "https://api.github.com/users/cuducos/following{/other_user}",
                "gists_url": "https://api.github.com/users/cuducos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cuducos",
                "id": 4732915,
                "login": "cuducos",
                "node_id": "MDQ6VXNlcjQ3MzI5MTU=",
                "organizations_url": "https://api.github.com/users/cuducos/orgs",
                "received_events_url": "https://api.github.com/users/cuducos/received_events",
                "repos_url": "https://api.github.com/users/cuducos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cuducos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cuducos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cuducos"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1666020102"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666020102"
                }
            },
            "author_association": "NONE",
            "body": "Done in e1add1394",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-04T19:25:34Z",
            "diff_hunk": "@@ -0,0 +1,10 @@\n+require('spellfile').setup()",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1666020102",
            "id": 1666020102,
            "in_reply_to_id": 1664863198,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jTXMG",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 1,
            "original_position": 1,
            "original_start_line": null,
            "path": "runtime/plugin/spellfile.lua",
            "position": null,
            "pull_request_review_id": 2159430999,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666020102/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-04T19:25:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666020102",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4732915?v=4",
                "events_url": "https://api.github.com/users/cuducos/events{/privacy}",
                "followers_url": "https://api.github.com/users/cuducos/followers",
                "following_url": "https://api.github.com/users/cuducos/following{/other_user}",
                "gists_url": "https://api.github.com/users/cuducos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cuducos",
                "id": 4732915,
                "login": "cuducos",
                "node_id": "MDQ6VXNlcjQ3MzI5MTU=",
                "organizations_url": "https://api.github.com/users/cuducos/orgs",
                "received_events_url": "https://api.github.com/users/cuducos/received_events",
                "repos_url": "https://api.github.com/users/cuducos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cuducos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cuducos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cuducos"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1666020160"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666020160"
                }
            },
            "author_association": "NONE",
            "body": "Done in e1add1394",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-04T19:25:42Z",
            "diff_hunk": "@@ -0,0 +1,10 @@\n+require('spellfile').setup()\n+\n+vim.api.nvim_create_autocmd('SpellFileMissing', {\n+  callback = function()\n+    local lang = vim.api.nvim_exec2('echo &spelllang', { output = true })",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1666020160",
            "id": 1666020160,
            "in_reply_to_id": 1665365853,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jTXNA",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 5,
            "original_position": 5,
            "original_start_line": null,
            "path": "runtime/plugin/spellfile.lua",
            "position": null,
            "pull_request_review_id": 2159431079,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666020160/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-04T19:25:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666020160",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4732915?v=4",
                "events_url": "https://api.github.com/users/cuducos/events{/privacy}",
                "followers_url": "https://api.github.com/users/cuducos/followers",
                "following_url": "https://api.github.com/users/cuducos/following{/other_user}",
                "gists_url": "https://api.github.com/users/cuducos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cuducos",
                "id": 4732915,
                "login": "cuducos",
                "node_id": "MDQ6VXNlcjQ3MzI5MTU=",
                "organizations_url": "https://api.github.com/users/cuducos/orgs",
                "received_events_url": "https://api.github.com/users/cuducos/received_events",
                "repos_url": "https://api.github.com/users/cuducos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cuducos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cuducos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cuducos"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1666021021"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666021021"
                }
            },
            "author_association": "NONE",
            "body": "I think this PR is far from being merged. I am happy working with `curl` by now and refactor late once #29327 gets merged : )",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-04T19:27:35Z",
            "diff_hunk": "@@ -0,0 +1,137 @@\n+local M = {}\n+\n+M.config = {\n+  url = 'https://ftp.nluug.nl/pub/vim/runtime/spell',\n+  encoding = vim.o.encoding,\n+  rtp = vim.opt.rtp:get(),\n+}\n+\n+M.done = {}\n+\n+M.setup = function(opts)\n+  M.done = {}\n+  M.config = vim.tbl_extend('force', M.config, opts or {})\n+end\n+\n+M.directory_choices = function()\n+  local options = {}\n+  for _, dir in ipairs(M.config.rtp) do\n+    local spell = dir .. '/spell'\n+    if vim.fn.isdirectory(spell) == 1 then\n+      table.insert(options, spell)\n+    end\n+  end\n+  return options\n+end\n+\n+M.choose_directory = function()\n+  local options = M.directory_choices()\n+  if #options == 0 then\n+    vim.notify('No spell directory found in the runtimepath')\n+    return\n+  elseif #options == 1 then\n+    return options[1]\n+  end\n+\n+  local prompt = {}\n+  for idx, dir in pairs(options) do\n+    table.insert(prompt, string.format('%d: %s', idx, dir))\n+  end\n+  local choice = vim.fn.inputlist(prompt)\n+  if choice <= 0 or choice > #options then\n+    return\n+  end\n+\n+  return options[choice]\n+end\n+\n+M.exists = function(file_name)\n+  local is_file = function(pth)\n+    local stat = vim.loop.fs_stat(pth)\n+    return stat ~= nil and stat.type ~= nil and stat.type == 'file'\n+  end\n+\n+  for _, dir in pairs(M.directory_choices()) do\n+    if is_file(dir .. '/' .. file_name) then\n+      return true\n+    end\n+  end\n+  return false\n+end\n+\n+M.parse = function(lang)\n+  local code = string.sub(lang:lower(), 1, 2)\n+\n+  local encoding = vim.bo.fileencoding\n+  if encoding == '' then\n+    encoding = M.config.encoding\n+  end\n+  if encoding == 'iso-8859-1' then\n+    encoding = 'latin1'\n+  end\n+\n+  local files = {\n+    string.format('%s.%s.spl', code, encoding),\n+    string.format('%s.%s.sug', code, encoding),\n+  }\n+  local missing = {}\n+  for _, name in ipairs(files) do\n+    if not M.exists(name) then\n+      table.insert(missing, name)\n+    end\n+  end\n+\n+  return {\n+    files = missing,\n+    key = string.format('%s.%s', code, encoding),\n+    lang = code,\n+    encoding = encoding,\n+  }\n+end\n+\n+M.download = function(data)\n+  local prompt =\n+    string.format('No spell file found for %s in %s. Download it? [y/N] ', data.lang, data.encoding)\n+  if vim.fn.input(prompt):lower() ~= 'y' then\n+    return\n+  end\n+  local dir = M.choose_directory()\n+  if dir == nil then\n+    return\n+  end\n+\n+  for _, name in ipairs(data.files) do\n+    local url = M.config.url .. '/' .. name\n+    local pth = dir .. '/' .. name\n+    local cmd = ''\n+    if vim.fn.executable('curl') == 1 then\n+      cmd = string.format('curl -fLo %s %s', pth, url)\n+    elseif vim.fn.executable('wget') == 1 then\n+      cmd = string.format('wget -O %s %s', pth, url)\n+    else\n+      vim.notify('No curl or wget found. Please install one of them.')\n+      return\n+    end\n+\n+    vim.notify(string.format('\\nDownloading %s...', name))\n+    vim.fn.system(cmd)",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1666021021",
            "id": 1666021021,
            "in_reply_to_id": 1665372032,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jTXad",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 117,
            "original_position": 117,
            "original_start_line": null,
            "path": "runtime/autoload/spellfile.lua",
            "position": null,
            "pull_request_review_id": 2159432236,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666021021/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-04T19:27:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666021021",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4732915?v=4",
                "events_url": "https://api.github.com/users/cuducos/events{/privacy}",
                "followers_url": "https://api.github.com/users/cuducos/followers",
                "following_url": "https://api.github.com/users/cuducos/following{/other_user}",
                "gists_url": "https://api.github.com/users/cuducos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cuducos",
                "id": 4732915,
                "login": "cuducos",
                "node_id": "MDQ6VXNlcjQ3MzI5MTU=",
                "organizations_url": "https://api.github.com/users/cuducos/orgs",
                "received_events_url": "https://api.github.com/users/cuducos/received_events",
                "repos_url": "https://api.github.com/users/cuducos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cuducos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cuducos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cuducos"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1666021411"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666021411"
                }
            },
            "author_association": "NONE",
            "body": "I'm gonna study `vim.fs` to see how to refactor. Probably gonna wait until I have tests working in this branch.",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-04T19:28:36Z",
            "diff_hunk": "@@ -0,0 +1,137 @@\n+local M = {}\n+\n+M.config = {\n+  url = 'https://ftp.nluug.nl/pub/vim/runtime/spell',\n+  encoding = vim.o.encoding,\n+  rtp = vim.opt.rtp:get(),\n+}\n+\n+M.done = {}\n+\n+M.setup = function(opts)\n+  M.done = {}\n+  M.config = vim.tbl_extend('force', M.config, opts or {})\n+end\n+\n+M.directory_choices = function()\n+  local options = {}\n+  for _, dir in ipairs(M.config.rtp) do\n+    local spell = dir .. '/spell'\n+    if vim.fn.isdirectory(spell) == 1 then\n+      table.insert(options, spell)\n+    end\n+  end\n+  return options\n+end\n+\n+M.choose_directory = function()\n+  local options = M.directory_choices()\n+  if #options == 0 then\n+    vim.notify('No spell directory found in the runtimepath')\n+    return\n+  elseif #options == 1 then\n+    return options[1]\n+  end\n+\n+  local prompt = {}\n+  for idx, dir in pairs(options) do\n+    table.insert(prompt, string.format('%d: %s', idx, dir))\n+  end\n+  local choice = vim.fn.inputlist(prompt)\n+  if choice <= 0 or choice > #options then\n+    return\n+  end\n+\n+  return options[choice]\n+end\n+\n+M.exists = function(file_name)\n+  local is_file = function(pth)\n+    local stat = vim.loop.fs_stat(pth)\n+    return stat ~= nil and stat.type ~= nil and stat.type == 'file'\n+  end\n+\n+  for _, dir in pairs(M.directory_choices()) do",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1666021411",
            "id": 1666021411,
            "in_reply_to_id": 1665375184,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jTXgj",
            "original_commit_id": "7fb0bf019c230d6595d50d41251e7a0b5cedf6d8",
            "original_line": 54,
            "original_position": 54,
            "original_start_line": null,
            "path": "runtime/autoload/spellfile.lua",
            "position": null,
            "pull_request_review_id": 2159432853,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666021411/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-04T19:28:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666021411",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4732915?v=4",
                "events_url": "https://api.github.com/users/cuducos/events{/privacy}",
                "followers_url": "https://api.github.com/users/cuducos/followers",
                "following_url": "https://api.github.com/users/cuducos/following{/other_user}",
                "gists_url": "https://api.github.com/users/cuducos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cuducos",
                "id": 4732915,
                "login": "cuducos",
                "node_id": "MDQ6VXNlcjQ3MzI5MTU=",
                "organizations_url": "https://api.github.com/users/cuducos/orgs",
                "received_events_url": "https://api.github.com/users/cuducos/received_events",
                "repos_url": "https://api.github.com/users/cuducos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cuducos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cuducos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cuducos"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1666136882"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666136882"
                }
            },
            "author_association": "MEMBER",
            "body": "Missing trailing EOL",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-05T01:10:41Z",
            "diff_hunk": "@@ -1083,4 +1083,4 @@ func Test_mkspell_empty_dic()\n endfunc\n \n \n-\" vim: shiftwidth=2 sts=2 expandtab\n+\" vim: shiftwidth=2 sts=2 expandtab",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1666136882",
            "id": 1666136882,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jTzsy",
            "original_commit_id": "2247c2e8f444542b57d090ef756e07276b050aec",
            "original_line": 1086,
            "original_position": 5,
            "original_start_line": null,
            "path": "test/old/testdir/test_spellfile.vim",
            "position": null,
            "pull_request_review_id": 2159604648,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666136882/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-05T01:10:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666136882",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1666829505"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666829505"
                }
            },
            "author_association": "NONE",
            "body": "Out of curiosity: shouldn't StyLua take care of that? Asking because maybe there is something wrong in my setup and it didn't…",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-05T13:45:53Z",
            "diff_hunk": "@@ -1083,4 +1083,4 @@ func Test_mkspell_empty_dic()\n endfunc\n \n \n-\" vim: shiftwidth=2 sts=2 expandtab\n+\" vim: shiftwidth=2 sts=2 expandtab",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1666829505",
            "id": 1666829505,
            "in_reply_to_id": 1666136882,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jWczB",
            "original_commit_id": "2247c2e8f444542b57d090ef756e07276b050aec",
            "original_line": 1086,
            "original_position": 5,
            "original_start_line": null,
            "path": "test/old/testdir/test_spellfile.vim",
            "position": null,
            "pull_request_review_id": 2160760712,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666829505/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-05T13:45:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666829505",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4732915?v=4",
                "events_url": "https://api.github.com/users/cuducos/events{/privacy}",
                "followers_url": "https://api.github.com/users/cuducos/followers",
                "following_url": "https://api.github.com/users/cuducos/following{/other_user}",
                "gists_url": "https://api.github.com/users/cuducos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cuducos",
                "id": 4732915,
                "login": "cuducos",
                "node_id": "MDQ6VXNlcjQ3MzI5MTU=",
                "organizations_url": "https://api.github.com/users/cuducos/orgs",
                "received_events_url": "https://api.github.com/users/cuducos/received_events",
                "repos_url": "https://api.github.com/users/cuducos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cuducos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cuducos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cuducos"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1666833218"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666833218"
                }
            },
            "author_association": "MEMBER",
            "body": "This is a vimscript file, not a Lua file...",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-05T13:49:16Z",
            "diff_hunk": "@@ -1083,4 +1083,4 @@ func Test_mkspell_empty_dic()\n endfunc\n \n \n-\" vim: shiftwidth=2 sts=2 expandtab\n+\" vim: shiftwidth=2 sts=2 expandtab",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1666833218",
            "id": 1666833218,
            "in_reply_to_id": 1666136882,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jWdtC",
            "original_commit_id": "2247c2e8f444542b57d090ef756e07276b050aec",
            "original_line": 1086,
            "original_position": 5,
            "original_start_line": null,
            "path": "test/old/testdir/test_spellfile.vim",
            "position": null,
            "pull_request_review_id": 2160766773,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666833218/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-05T13:49:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666833218",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1666876017"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666876017"
                }
            },
            "author_association": "NONE",
            "body": "Oh, brain fart. My bad. Sorry hahaha…",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-05T14:28:41Z",
            "diff_hunk": "@@ -1083,4 +1083,4 @@ func Test_mkspell_empty_dic()\n endfunc\n \n \n-\" vim: shiftwidth=2 sts=2 expandtab\n+\" vim: shiftwidth=2 sts=2 expandtab",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1666876017",
            "id": 1666876017,
            "in_reply_to_id": 1666136882,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jWoJx",
            "original_commit_id": "2247c2e8f444542b57d090ef756e07276b050aec",
            "original_line": 1086,
            "original_position": 5,
            "original_start_line": null,
            "path": "test/old/testdir/test_spellfile.vim",
            "position": null,
            "pull_request_review_id": 2160839254,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666876017/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-05T14:28:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666876017",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4732915?v=4",
                "events_url": "https://api.github.com/users/cuducos/events{/privacy}",
                "followers_url": "https://api.github.com/users/cuducos/followers",
                "following_url": "https://api.github.com/users/cuducos/following{/other_user}",
                "gists_url": "https://api.github.com/users/cuducos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cuducos",
                "id": 4732915,
                "login": "cuducos",
                "node_id": "MDQ6VXNlcjQ3MzI5MTU=",
                "organizations_url": "https://api.github.com/users/cuducos/orgs",
                "received_events_url": "https://api.github.com/users/cuducos/received_events",
                "repos_url": "https://api.github.com/users/cuducos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cuducos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cuducos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cuducos"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/29552#discussion_r1666879115"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/29552"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666879115"
                }
            },
            "author_association": "NONE",
            "body": "Fixed in 65934874a ✨ ",
            "commit_id": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
            "created_at": "2024-07-05T14:31:45Z",
            "diff_hunk": "@@ -1083,4 +1083,4 @@ func Test_mkspell_empty_dic()\n endfunc\n \n \n-\" vim: shiftwidth=2 sts=2 expandtab\n+\" vim: shiftwidth=2 sts=2 expandtab",
            "html_url": "https://github.com/neovim/neovim/pull/29552#discussion_r1666879115",
            "id": 1666879115,
            "in_reply_to_id": 1666136882,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5jWo6L",
            "original_commit_id": "2247c2e8f444542b57d090ef756e07276b050aec",
            "original_line": 1086,
            "original_position": 5,
            "original_start_line": null,
            "path": "test/old/testdir/test_spellfile.vim",
            "position": null,
            "pull_request_review_id": 2160844491,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666879115/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-07-05T14:31:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1666879115",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4732915?v=4",
                "events_url": "https://api.github.com/users/cuducos/events{/privacy}",
                "followers_url": "https://api.github.com/users/cuducos/followers",
                "following_url": "https://api.github.com/users/cuducos/following{/other_user}",
                "gists_url": "https://api.github.com/users/cuducos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cuducos",
                "id": 4732915,
                "login": "cuducos",
                "node_id": "MDQ6VXNlcjQ3MzI5MTU=",
                "organizations_url": "https://api.github.com/users/cuducos/orgs",
                "received_events_url": "https://api.github.com/users/cuducos/received_events",
                "repos_url": "https://api.github.com/users/cuducos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cuducos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cuducos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cuducos"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "NONE",
            "body": "Thank you @zeertzjq and @clason for the initial feedback. I pushed some commits with changes based on your comments. My main question at this moment is how to run tests. As I said in the [opening message](https://github.com/neovim/neovim/pull/29552#issue-2389557995):\r\n\r\n> In tests, how do I “import” the new module?\r\n\r\nAlso, Christian pointed out I am exporting too many things — and I did that so they are testable. Is that a desired approach? \r\n\r\n\r\n\r\n",
            "created_at": "2024-07-04T19:34:17Z",
            "html_url": "https://github.com/neovim/neovim/pull/29552#issuecomment-2209490971",
            "id": 2209490971,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29552",
            "node_id": "IC_kwDOAPphoM6Dsigb",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2209490971/reactions"
            },
            "updated_at": "2024-07-04T19:34:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2209490971",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4732915?v=4",
                "events_url": "https://api.github.com/users/cuducos/events{/privacy}",
                "followers_url": "https://api.github.com/users/cuducos/followers",
                "following_url": "https://api.github.com/users/cuducos/following{/other_user}",
                "gists_url": "https://api.github.com/users/cuducos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cuducos",
                "id": 4732915,
                "login": "cuducos",
                "node_id": "MDQ6VXNlcjQ3MzI5MTU=",
                "organizations_url": "https://api.github.com/users/cuducos/orgs",
                "received_events_url": "https://api.github.com/users/cuducos/received_events",
                "repos_url": "https://api.github.com/users/cuducos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cuducos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cuducos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cuducos"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "It is not. Ideally, this should be completely opaque. (The file you deleted is testing everything relevant; as long as this passes, you are good. Configuration is a non-goal here!)",
            "created_at": "2024-07-04T19:37:26Z",
            "html_url": "https://github.com/neovim/neovim/pull/29552#issuecomment-2209493270",
            "id": 2209493270,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29552",
            "node_id": "IC_kwDOAPphoM6DsjEW",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2209493270/reactions"
            },
            "updated_at": "2024-07-04T19:37:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2209493270",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "Ok, gonna refactor with that in mind — and learn a bit about `vim.fs` in the way : ) Thank you so much",
            "created_at": "2024-07-04T19:39:06Z",
            "html_url": "https://github.com/neovim/neovim/pull/29552#issuecomment-2209494378",
            "id": 2209494378,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29552",
            "node_id": "IC_kwDOAPphoM6DsjVq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2209494378/reactions"
            },
            "updated_at": "2024-07-04T19:39:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2209494378",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4732915?v=4",
                "events_url": "https://api.github.com/users/cuducos/events{/privacy}",
                "followers_url": "https://api.github.com/users/cuducos/followers",
                "following_url": "https://api.github.com/users/cuducos/following{/other_user}",
                "gists_url": "https://api.github.com/users/cuducos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cuducos",
                "id": 4732915,
                "login": "cuducos",
                "node_id": "MDQ6VXNlcjQ3MzI5MTU=",
                "organizations_url": "https://api.github.com/users/cuducos/orgs",
                "received_events_url": "https://api.github.com/users/cuducos/received_events",
                "repos_url": "https://api.github.com/users/cuducos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cuducos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cuducos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cuducos"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> It is not. Ideally, this should be completely opaque. (The file you deleted is testing everything relevant; as long as this passes, you are good. Configuration is a non-goal here!)\r\n\r\nWhat? The builtin `spellfile.vim` is not covered by any tests. All tests still pass even if it is deleted.",
            "created_at": "2024-07-05T01:14:57Z",
            "html_url": "https://github.com/neovim/neovim/pull/29552#issuecomment-2209802965",
            "id": 2209802965,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29552",
            "node_id": "IC_kwDOAPphoM6DturV",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2209802965/reactions"
            },
            "updated_at": "2024-07-05T01:14:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2209802965",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/29552/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/29552/commits",
    "created_at": "2024-07-03T21:53:47Z",
    "diff_url": "https://github.com/neovim/neovim/pull/29552.diff",
    "draft": true,
    "head": {
        "label": "cuducos:cuducos/spellfile",
        "ref": "cuducos/spellfile",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/cuducos/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/cuducos/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/cuducos/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/cuducos/neovim/branches{/branch}",
            "clone_url": "https://github.com/cuducos/neovim.git",
            "collaborators_url": "https://api.github.com/repos/cuducos/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/cuducos/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/cuducos/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/cuducos/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/cuducos/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/cuducos/neovim/contributors",
            "created_at": "2024-07-03T18:00:12Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/cuducos/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/cuducos/neovim/downloads",
            "events_url": "https://api.github.com/repos/cuducos/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/cuducos/neovim/forks",
            "full_name": "cuducos/neovim",
            "git_commits_url": "https://api.github.com/repos/cuducos/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/cuducos/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/cuducos/neovim/git/tags{/sha}",
            "git_url": "git://github.com/cuducos/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/cuducos/neovim/hooks",
            "html_url": "https://github.com/cuducos/neovim",
            "id": 823786214,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/cuducos/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/cuducos/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/cuducos/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/cuducos/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/cuducos/neovim/labels{/name}",
            "language": null,
            "languages_url": "https://api.github.com/repos/cuducos/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/cuducos/neovim/merges",
            "milestones_url": "https://api.github.com/repos/cuducos/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "R_kgDOMRn65g",
            "notifications_url": "https://api.github.com/repos/cuducos/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4732915?v=4",
                "events_url": "https://api.github.com/users/cuducos/events{/privacy}",
                "followers_url": "https://api.github.com/users/cuducos/followers",
                "following_url": "https://api.github.com/users/cuducos/following{/other_user}",
                "gists_url": "https://api.github.com/users/cuducos/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cuducos",
                "id": 4732915,
                "login": "cuducos",
                "node_id": "MDQ6VXNlcjQ3MzI5MTU=",
                "organizations_url": "https://api.github.com/users/cuducos/orgs",
                "received_events_url": "https://api.github.com/users/cuducos/received_events",
                "repos_url": "https://api.github.com/users/cuducos/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cuducos/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cuducos/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cuducos"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/cuducos/neovim/pulls{/number}",
            "pushed_at": "2024-07-05T14:31:27Z",
            "releases_url": "https://api.github.com/repos/cuducos/neovim/releases{/id}",
            "size": 270162,
            "ssh_url": "git@github.com:cuducos/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/cuducos/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/cuducos/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/cuducos/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/cuducos/neovim/subscription",
            "svn_url": "https://github.com/cuducos/neovim",
            "tags_url": "https://api.github.com/repos/cuducos/neovim/tags",
            "teams_url": "https://api.github.com/repos/cuducos/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/cuducos/neovim/git/trees{/sha}",
            "updated_at": "2024-07-03T18:00:12Z",
            "url": "https://api.github.com/repos/cuducos/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/4732915?v=4",
            "events_url": "https://api.github.com/users/cuducos/events{/privacy}",
            "followers_url": "https://api.github.com/users/cuducos/followers",
            "following_url": "https://api.github.com/users/cuducos/following{/other_user}",
            "gists_url": "https://api.github.com/users/cuducos/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/cuducos",
            "id": 4732915,
            "login": "cuducos",
            "node_id": "MDQ6VXNlcjQ3MzI5MTU=",
            "organizations_url": "https://api.github.com/users/cuducos/orgs",
            "received_events_url": "https://api.github.com/users/cuducos/received_events",
            "repos_url": "https://api.github.com/users/cuducos/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/cuducos/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/cuducos/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/cuducos"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/29552",
    "id": 1952481489,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29552",
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "funtime",
            "id": 120251370,
            "name": "runtime",
            "node_id": "MDU6TGFiZWwxMjAyNTEzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/runtime"
        }
    ],
    "locked": false,
    "merge_commit_sha": "c333c54d44f623bc69da6c691078bebd579368a2",
    "merged_at": null,
    "milestone": null,
    "node_id": "PR_kwDOAPphoM50YIDR",
    "number": 29552,
    "patch_url": "https://github.com/neovim/neovim/pull/29552.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/29552/comments",
    "state": "open",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/65934874a083c4d865b3dffa4498ad0e6b8b0f0b",
    "title": "Replaces: `spellfile.vim` -> `spellfile.nvim`",
    "updated_at": "2024-07-05T14:31:45Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/29552",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/4732915?v=4",
        "events_url": "https://api.github.com/users/cuducos/events{/privacy}",
        "followers_url": "https://api.github.com/users/cuducos/followers",
        "following_url": "https://api.github.com/users/cuducos/following{/other_user}",
        "gists_url": "https://api.github.com/users/cuducos/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/cuducos",
        "id": 4732915,
        "login": "cuducos",
        "node_id": "MDQ6VXNlcjQ3MzI5MTU=",
        "organizations_url": "https://api.github.com/users/cuducos/orgs",
        "received_events_url": "https://api.github.com/users/cuducos/received_events",
        "repos_url": "https://api.github.com/users/cuducos/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/cuducos/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/cuducos/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/cuducos"
    }
}