{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/8814/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/8814/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/8814"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/8814"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/8814/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/8814"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/c76ef6c89697bcf00f674f16842b9904ab12bd5d"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 5599,
            "forks_count": 5599,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1777,
            "open_issues_count": 1777,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2024-09-16T10:33:35Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 285944,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 81723,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2024-09-17T01:51:52Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 81723,
            "watchers_count": 81723,
            "web_commit_signoff_required": false
        },
        "sha": "8b60253ce747183a1896a8f0057519a1e2e517a1",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim"
        }
    },
    "body": "closes #8813\r\nref https://github.com/neovim/neovim/pull/7813#issuecomment-380949586\r\nref https://github.com/neovim/neovim/pull/8088#issuecomment-376312511\r\n\r\nDeferring the event:\r\n\r\n```diff\r\ndiff --git a/src/nvim/msgpack_rpc/channel.c b/src/nvim/msgpack_rpc/channel.c\r\nindex 3244d83a93c..62c7717c2e9 100644\r\n--- a/src/nvim/msgpack_rpc/channel.c\r\n+++ b/src/nvim/msgpack_rpc/channel.c\r\n@@ -532,7 +532,7 @@ void rpc_close(Channel *channel)\r\n   channel_decref(channel);\r\n \r\n   if (channel->streamtype == kChannelStreamStdio) {\r\n-    multiqueue_put(main_loop.fast_events, exit_event, 0);\r\n+    multiqueue_put(main_loop.events, exit_event, 0);\r\n   }\r\n }\r\n```\r\n\r\n...leads to hangs (waiting for input):\r\n \r\n```\r\n[5/7] Building C object test/functiona...s/CMakeFiles/tty-test.dir/tty-test.c.o\u001b[K\r\n[6/7] Linking C executable bin/tty-test\u001b[K\r\n[6/7] Linking C executable bin/tty-test\u001b[K\r\n[7/7] cd /home/travis/build/neovim/neo...ild/neovim/neovim/cmake/RunTests.cmake\u001b[K\r\n\r\nNo output has been received in the last 10m0s, this potentially indicates a stalled build or something wrong with the build itself.\r\nCheck the details on how to adjust your build configuration on: https://docs.travis-ci.com/user/common-build-problems/#Build-times-out-because-no-output-was-received\r\n\r\nThe build has been terminated\r\n```\r\n\r\n---\r\n\r\nNotes from chat with @bfredl :\r\n\r\n> The problem is that scheduling an event doesn't guarantee any progress back to the main normal mode.\r\n\r\n* Screen tests may hang (regardless of success or failure), after the test harness (busted) closes the channel, but nvim is stuck in press-enter\r\n* Root cause is that Nvim doesn't check for events during press-enter (`events_enabled=0` in `os/input.c`)\r\n    * `normal_execute..wait_return..os_inchar` waits for input forever, because it doesn't process `main_loop.events`, because `events_enabled=0`, because our current policy is that it's unsafe to process `main_loop.events` until we get back to the top of the `state_enter` loop. See also https://github.com/neovim/neovim/pull/8814#issuecomment-422274556\r\n",
    "closed_at": "2024-09-16T11:02:03Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/8814#discussion_r207726454"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/8814"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/207726454"
                }
            },
            "author_association": "MEMBER",
            "body": "This looks quite indirect and fragile (could fall in the first input state we happen to not have tested yet), why not just change the scheduling of this event from fast_events to ordinary events?",
            "commit_id": "c76ef6c89697bcf00f674f16842b9904ab12bd5d",
            "created_at": "2018-08-05T06:18:32Z",
            "diff_hunk": "@@ -539,7 +540,9 @@ void rpc_close(Channel *channel)\n static void exit_event(void **argv)\n {\n   if (!exiting) {\n-    mch_exit(0);\n+    // <C-\\><C-N>:qall!<CR>\n+    ins_typebuf((char_u *)\"\\034\\016:qall!\\n\", REMAP_NONE, typebuf.tb_len, 1,",
            "html_url": "https://github.com/neovim/neovim/pull/8814#discussion_r207726454",
            "id": 207726454,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzcyNjQ1NA==",
            "original_commit_id": "c1d8713302b8a46d3728668fc88fcf21993b740d",
            "original_line": 544,
            "original_position": 14,
            "original_start_line": null,
            "path": "src/nvim/msgpack_rpc/channel.c",
            "position": null,
            "pull_request_review_id": 143401098,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/8814",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/207726454/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2018-09-19T08:02:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/207726454",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/8814#discussion_r207732096"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/8814"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/207732096"
                }
            },
            "author_association": "MEMBER",
            "body": "@bfredl Thanks for taking a look. Do you mean:\r\n\r\n    multiqueue_put(main_loop.events, exit_event, 0);\r\n\r\nthat hangs (see PR description). But this `ins_typebuf()` also hangs, probably for the same reason. ",
            "commit_id": "c76ef6c89697bcf00f674f16842b9904ab12bd5d",
            "created_at": "2018-08-05T10:46:40Z",
            "diff_hunk": "@@ -539,7 +540,9 @@ void rpc_close(Channel *channel)\n static void exit_event(void **argv)\n {\n   if (!exiting) {\n-    mch_exit(0);\n+    // <C-\\><C-N>:qall!<CR>\n+    ins_typebuf((char_u *)\"\\034\\016:qall!\\n\", REMAP_NONE, typebuf.tb_len, 1,",
            "html_url": "https://github.com/neovim/neovim/pull/8814#discussion_r207732096",
            "id": 207732096,
            "in_reply_to_id": 207726454,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzczMjA5Ng==",
            "original_commit_id": "c1d8713302b8a46d3728668fc88fcf21993b740d",
            "original_line": 544,
            "original_position": 14,
            "original_start_line": null,
            "path": "src/nvim/msgpack_rpc/channel.c",
            "position": null,
            "pull_request_review_id": 143406811,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/8814",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/207732096/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2018-09-19T08:02:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/207732096",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/8814#discussion_r207732248"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/8814"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/207732248"
                }
            },
            "author_association": "MEMBER",
            "body": "Where does it hang? Possible to get a traceback?",
            "commit_id": "c76ef6c89697bcf00f674f16842b9904ab12bd5d",
            "created_at": "2018-08-05T10:53:55Z",
            "diff_hunk": "@@ -539,7 +540,9 @@ void rpc_close(Channel *channel)\n static void exit_event(void **argv)\n {\n   if (!exiting) {\n-    mch_exit(0);\n+    // <C-\\><C-N>:qall!<CR>\n+    ins_typebuf((char_u *)\"\\034\\016:qall!\\n\", REMAP_NONE, typebuf.tb_len, 1,",
            "html_url": "https://github.com/neovim/neovim/pull/8814#discussion_r207732248",
            "id": 207732248,
            "in_reply_to_id": 207726454,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzczMjI0OA==",
            "original_commit_id": "c1d8713302b8a46d3728668fc88fcf21993b740d",
            "original_line": 544,
            "original_position": 14,
            "original_start_line": null,
            "path": "src/nvim/msgpack_rpc/channel.c",
            "position": null,
            "pull_request_review_id": 143407015,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/8814",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/207732248/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2018-09-19T08:02:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/207732248",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/8814#discussion_r207732682"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/8814"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/207732682"
                }
            },
            "author_association": "MEMBER",
            "body": "workin' on it",
            "commit_id": "c76ef6c89697bcf00f674f16842b9904ab12bd5d",
            "created_at": "2018-08-05T11:09:34Z",
            "diff_hunk": "@@ -539,7 +540,9 @@ void rpc_close(Channel *channel)\n static void exit_event(void **argv)\n {\n   if (!exiting) {\n-    mch_exit(0);\n+    // <C-\\><C-N>:qall!<CR>\n+    ins_typebuf((char_u *)\"\\034\\016:qall!\\n\", REMAP_NONE, typebuf.tb_len, 1,",
            "html_url": "https://github.com/neovim/neovim/pull/8814#discussion_r207732682",
            "id": 207732682,
            "in_reply_to_id": 207726454,
            "line": null,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIwNzczMjY4Mg==",
            "original_commit_id": "c1d8713302b8a46d3728668fc88fcf21993b740d",
            "original_line": 544,
            "original_position": 14,
            "original_start_line": null,
            "path": "src/nvim/msgpack_rpc/channel.c",
            "position": null,
            "pull_request_review_id": 143407398,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/8814",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/207732682/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2018-09-19T08:02:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/207732682",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/8814#discussion_r218692428"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/8814"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/218692428"
                }
            },
            "author_association": "MEMBER",
            "body": "Need to address this...\r\n\r\nAlso: enabling events \"always\" causes unwanted redraws in some cases, e.g. at hit-enter prompt on `FocusGained `event, the hit-enter UI is lost.",
            "commit_id": "c76ef6c89697bcf00f674f16842b9904ab12bd5d",
            "created_at": "2018-09-19T07:22:09Z",
            "diff_hunk": "@@ -88,9 +88,9 @@ static void create_cursorhold_event(void)\n {\n   // If events are enabled and the queue has any items, this function should not\n   // have been called(inbuf_poll would return kInputAvail)\n-  // TODO(tarruda): Cursorhold should be implemented as a timer set during the\n+  // TODO(justinmk): Cursorhold should be implemented as a timer set during the\n   // `state_check` callback for the states where it can be triggered.\n-  assert(!events_enabled || multiqueue_empty(main_loop.events));\n+  assert(multiqueue_empty(main_loop.events));",
            "html_url": "https://github.com/neovim/neovim/pull/8814#discussion_r218692428",
            "id": 218692428,
            "line": 93,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxODY5MjQyOA==",
            "original_commit_id": "e17266ef22fd8b22c7c59937e5a192855855d7c2",
            "original_line": 93,
            "original_position": 17,
            "original_start_line": null,
            "path": "src/nvim/os/input.c",
            "position": 17,
            "pull_request_review_id": 156684123,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/8814",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/218692428/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2018-09-19T08:04:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/218692428",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/8814#discussion_r218747603"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/8814"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/218747603"
                }
            },
            "author_association": "MEMBER",
            "body": "Why is that? is K_EVENT regarded as a dismissive key in `wait_return`? Maybe it needs to be added to the list at `messages.c:954-966` of \"allowed\" state r keys.",
            "commit_id": "c76ef6c89697bcf00f674f16842b9904ab12bd5d",
            "created_at": "2018-09-19T10:17:23Z",
            "diff_hunk": "@@ -88,9 +88,9 @@ static void create_cursorhold_event(void)\n {\n   // If events are enabled and the queue has any items, this function should not\n   // have been called(inbuf_poll would return kInputAvail)\n-  // TODO(tarruda): Cursorhold should be implemented as a timer set during the\n+  // TODO(justinmk): Cursorhold should be implemented as a timer set during the\n   // `state_check` callback for the states where it can be triggered.\n-  assert(!events_enabled || multiqueue_empty(main_loop.events));\n+  assert(multiqueue_empty(main_loop.events));",
            "html_url": "https://github.com/neovim/neovim/pull/8814#discussion_r218747603",
            "id": 218747603,
            "in_reply_to_id": 218692428,
            "line": 93,
            "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxODc0NzYwMw==",
            "original_commit_id": "e17266ef22fd8b22c7c59937e5a192855855d7c2",
            "original_line": 93,
            "original_position": 17,
            "original_start_line": null,
            "path": "src/nvim/os/input.c",
            "position": 17,
            "pull_request_review_id": 156750322,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/8814",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/218747603/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2018-09-19T10:17:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/218747603",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "Or should we just skip `free_all_mem` when nvim exits in a breakcheck? This is an artificial condition anyway not related to any real-world use.",
            "created_at": "2018-08-05T10:59:35Z",
            "html_url": "https://github.com/neovim/neovim/pull/8814#issuecomment-410512315",
            "id": 410512315,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8814",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDUxMjMxNQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/410512315/reactions"
            },
            "updated_at": "2018-08-05T10:59:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/410512315",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Remember, vim is _by design_ not gc-safe in any place except for top-level, so I don't see how free_all_mem could be.",
            "created_at": "2018-08-05T11:02:20Z",
            "html_url": "https://github.com/neovim/neovim/pull/8814#issuecomment-410512499",
            "id": 410512499,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8814",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDUxMjQ5OQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/410512499/reactions"
            },
            "updated_at": "2018-08-05T11:02:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/410512499",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Or should we just skip free_all_mem when nvim exits in a breakcheck?\r\n\r\nBut then we'd just get a different kind of false positive in the asan job, no?",
            "created_at": "2018-08-05T11:09:18Z",
            "html_url": "https://github.com/neovim/neovim/pull/8814#issuecomment-410512885",
            "id": 410512885,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8814",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDUxMjg4NQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/410512885/reactions"
            },
            "updated_at": "2018-08-05T11:09:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/410512885",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I meant with some kind of message that a leak will be indeterministically (rarely) expected. A leak is a more reasonable failure than a crash that won't ever happen in real usage.",
            "created_at": "2018-08-05T11:12:29Z",
            "html_url": "https://github.com/neovim/neovim/pull/8814#issuecomment-410513031",
            "id": 410513031,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8814",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDUxMzAzMQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/410513031/reactions"
            },
            "updated_at": "2018-08-05T11:12:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/410513031",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Where does it hang? Possible to get a traceback?\r\n\r\nIt's stuck in `loop_poll_events`. And that makes sense, because `loop_poll_events` doesn't check `Loop.events`. But this also means that if we schedule something on `main_loop.events` it's not guaranteed to be processed until input (`Loop.uv`) is received.\r\n\r\nNormally we don't want `loop_poll_events` to check `Loop.events` because that's application-specific. But I wonder if we should timeout `loop_poll_events` so that `normal_enter` occasionally checks `main_loop.events`.\r\n\r\n```\r\n(gdb) bt\r\n+bt\r\n#0  syscall () at ../sysdeps/unix/sysv/linux/x86_64/syscall.S:38\r\n#1  0x000000000074fe52 in uv__io_poll (loop=<optimized out>, timeout=-1) at /home/vagrant/neovim/.deps/build/src/libuv/src/unix/linux-core.c:289\r\n#2  0x0000000000742c64 in uv_run (loop=0xac5bd0 <main_loop>, mode=UV_RUN_ONCE) at /home/vagrant/neovim/.deps/build/src/libuv/src/unix/core.c:359\r\n#3  0x00000000004ffbf3 in loop_poll_events (loop=0xac5bd0 <main_loop>, ms=-1) at ../src/nvim/event/loop.c:58\r\n#4  0x0000000000627d7a in input_poll (ms=-1) at ../src/nvim/os/input.c:354\r\n#5  0x0000000000626d90 in inbuf_poll (ms=-1) at ../src/nvim/os/input.c:377\r\n#6  0x0000000000626cae in os_inchar (buf=0x0, maxlen=0, ms=-1, tb_change_cnt=0) at ../src/nvim/os/input.c:120\r\n#7  0x00000000006cef1f in state_enter (s=0x7ffe4a3fe838) at ../src/nvim/state.c:55\r\n#8  0x00000000005e4dc4 in normal_enter (cmdwin=false, noexmode=false) at ../src/nvim/normal.c:467\r\n#9  0x00000000005a120f in main (argc=9, argv=0x7ffe4a3febd8) at ../src/nvim/main.c:566\r\n```\r\n\r\nTo repro the hang on my machine this test is consistent:\r\n\r\n    TEST_FILE=test/functional/api/vim_spec.lua TEST_FILTER='press.enter' make test",
            "created_at": "2018-08-05T12:37:32Z",
            "html_url": "https://github.com/neovim/neovim/pull/8814#issuecomment-410517492",
            "id": 410517492,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8814",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDUxNzQ5Mg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/410517492/reactions"
            },
            "updated_at": "2018-08-06T09:05:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/410517492",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "That doesn't make sense and is a bug, ordinary normal mode should always process main_loop.events before waiting on input.",
            "created_at": "2018-08-05T15:45:36Z",
            "html_url": "https://github.com/neovim/neovim/pull/8814#issuecomment-410528729",
            "id": 410528729,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8814",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQxMDUyODcyOQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/410528729/reactions"
            },
            "updated_at": "2018-08-05T15:45:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/410528729",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> That doesn't make sense and is a bug, ordinary normal mode should always process main_loop.events before waiting on input.\r\n\r\n@bfredl  It does. But the stream might be closed _during_ the hit-enter prompt, after `events_enabled=0`. That's the problem: events are not processed during hit-enter.\r\n\r\n* We can deal with this in the test harness by sending CTRL-C or something like that before closing the stream. \r\n* Should we try a more robust solution which makes life easier for UI clients? \r\n    * Special-case the `exit_event` case? \r\n        * We already did \"special case\" it by putting it on `fast_events` ...\r\n    * Process events during press-enter?\r\n\r\ncc @equalsraf who is doing related work for Nvim-Qt.",
            "created_at": "2018-09-18T06:45:13Z",
            "html_url": "https://github.com/neovim/neovim/pull/8814#issuecomment-422274556",
            "id": 422274556,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8814",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQyMjI3NDU1Ng==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/422274556/reactions"
            },
            "updated_at": "2018-09-18T07:51:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/422274556",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Process events during press-enter?\r\n\r\nI would vote for this. clients shouldn't randomly do potentially dangerous stuff in an async context (i e not as part of handling an event from nvim) anyway, they can use `nvim_get_mode` and check the mode. Perhaps there should even be a mechanism for a client to ask \"please send me a request as soon as nvim is back to top-level normal mode\".",
            "created_at": "2018-09-18T07:29:40Z",
            "html_url": "https://github.com/neovim/neovim/pull/8814#issuecomment-422285356",
            "id": 422285356,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8814",
            "node_id": "MDEyOklzc3VlQ29tbWVudDQyMjI4NTM1Ng==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/422285356/reactions"
            },
            "updated_at": "2018-09-18T07:29:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/422285356",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/8814/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/8814/commits",
    "created_at": "2018-08-05T00:13:40Z",
    "diff_url": "https://github.com/neovim/neovim/pull/8814.diff",
    "draft": false,
    "head": {
        "label": "justinmk:defer-exit_event",
        "ref": "defer-exit_event",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/justinmk/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/justinmk/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/justinmk/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/justinmk/neovim/branches{/branch}",
            "clone_url": "https://github.com/justinmk/neovim.git",
            "collaborators_url": "https://api.github.com/repos/justinmk/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/justinmk/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/justinmk/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/justinmk/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/justinmk/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/justinmk/neovim/contributors",
            "created_at": "2014-02-28T23:17:54Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/justinmk/neovim/deployments",
            "description": "somewhere in todo.txt",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/justinmk/neovim/downloads",
            "events_url": "https://api.github.com/repos/justinmk/neovim/events",
            "fork": true,
            "forks": 1,
            "forks_count": 1,
            "forks_url": "https://api.github.com/repos/justinmk/neovim/forks",
            "full_name": "justinmk/neovim",
            "git_commits_url": "https://api.github.com/repos/justinmk/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/justinmk/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/justinmk/neovim/git/tags{/sha}",
            "git_url": "git://github.com/justinmk/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": false,
            "has_wiki": false,
            "homepage": "http://neovim.io",
            "hooks_url": "https://api.github.com/repos/justinmk/neovim/hooks",
            "html_url": "https://github.com/justinmk/neovim",
            "id": 17302877,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/justinmk/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/justinmk/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/justinmk/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/justinmk/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/justinmk/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/justinmk/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/justinmk/neovim/merges",
            "milestones_url": "https://api.github.com/repos/justinmk/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNzMwMjg3Nw==",
            "notifications_url": "https://api.github.com/repos/justinmk/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/justinmk/neovim/pulls{/number}",
            "pushed_at": "2024-09-16T22:54:53Z",
            "releases_url": "https://api.github.com/repos/justinmk/neovim/releases{/id}",
            "size": 280129,
            "ssh_url": "git@github.com:justinmk/neovim.git",
            "stargazers_count": 1,
            "stargazers_url": "https://api.github.com/repos/justinmk/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/justinmk/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/justinmk/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/justinmk/neovim/subscription",
            "svn_url": "https://github.com/justinmk/neovim",
            "tags_url": "https://api.github.com/repos/justinmk/neovim/tags",
            "teams_url": "https://api.github.com/repos/justinmk/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/justinmk/neovim/git/trees{/sha}",
            "updated_at": "2023-07-25T13:51:02Z",
            "url": "https://api.github.com/repos/justinmk/neovim",
            "visibility": "public",
            "watchers": 1,
            "watchers_count": 1,
            "web_commit_signoff_required": false
        },
        "sha": "c76ef6c89697bcf00f674f16842b9904ab12bd5d",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/8814",
    "id": 206215384,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/8814",
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 520282574,
            "name": "event-loop",
            "node_id": "MDU6TGFiZWw1MjAyODI1NzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/event-loop"
        }
    ],
    "locked": false,
    "merge_commit_sha": "3d13b4f7d5e703b043b90e950ae57e8fd1addfb8",
    "merged_at": null,
    "milestone": null,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MjA2MjE1Mzg0",
    "number": 8814,
    "patch_url": "https://github.com/neovim/neovim/pull/8814.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/8814/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/c76ef6c89697bcf00f674f16842b9904ab12bd5d",
    "title": "channel.c: defer exit_event",
    "updated_at": "2024-09-16T11:02:04Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/8814",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk"
    }
}