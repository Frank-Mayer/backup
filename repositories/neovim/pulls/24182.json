{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/24182/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/24182/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/24182"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/24182"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/24182/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/24182"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/fa7553494bc6dacbbf452cc2e5f3d9a9968dca54"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 4788,
            "forks_count": 4788,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1672,
            "open_issues_count": 1672,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2023-07-25T19:09:28Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 247741,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 67723,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2023-07-25T21:52:05Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 67723,
            "watchers_count": 67723,
            "web_commit_signoff_required": false
        },
        "sha": "3ecd45ded044c47efa76b74e9e3b720fbe27adc7",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim"
        }
    },
    "body": "# Problem\r\n\r\nSometimes, when nvim sends the `win_viewport` event, for example when scrolling with visible folds on the screen, it reports the `scroll_delta` value one batch into \"future\". So when the client application is trying to show the new viewport it's not yet updated and results temporary corruption and flickering of the screen.\r\n\r\nFor a more detailed description see #23609, and starting from [this comment]( https://github.com/neovide/neovide/pull/1790#issuecomment-1518697747) in https://github.com/neovide/neovide/pull/1790,, where the issue was first detected. Note that some of the conclusions in those are not fully accurate, but the general observations are.\r\n\r\nThe documentation is also a bit unclear, especially regarding when the application is allowed to make updates to the new viewport.\r\n\r\n# Solution\r\nWhen there are pending updates to a Window, the `win_viewport` UI event is delayed until the updates are sent. This ensures that there's no flush between sending the viewport and updating of the lines corresponding to the new viewport.\r\n\r\nThe documentation has been clarified to document the existing behaviour (in the cases where there were no extra flushes) of the viewport, with an example of how applications can deal with the slightly surprising behaviour of the viewport event being sent after the updates.\r\n\r\nFixes: https://github.com/neovim/neovim/issues/23609",
    "closed_at": "2023-07-05T13:31:35Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/24182#discussion_r1247236039"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/24182"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1247236039"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n\tApplications implementing, for example, smooth scrolling should take\r\n```",
            "commit_id": "fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
            "created_at": "2023-06-29T22:41:35Z",
            "diff_hunk": "@@ -636,6 +636,13 @@ tabs.\n \tpurpose it only counts \"virtual\" or \"displayed\" lines, so folds\n \tonly count as one line.\n \n+\tAll updates, such as `grid_line`, in a batch affects the new viewport,\n+\tdespite the fact that `win_viewport` is received after the updates.\n+\tApplications implementing for example, smooth scrolling should take",
            "html_url": "https://github.com/neovim/neovim/pull/24182#discussion_r1247236039",
            "id": 1247236039,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5KV0_H",
            "original_commit_id": "fb4fdfdf7e55e5f22c3d76167b0ed3e06134e893",
            "original_line": 641,
            "original_position": 6,
            "original_start_line": null,
            "path": "runtime/doc/ui.txt",
            "position": null,
            "pull_request_review_id": 1506222368,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/24182",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1247236039/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-06-29T22:41:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1247236039",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/24182#discussion_r1247236820"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/24182"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1247236820"
                }
            },
            "author_association": "MEMBER",
            "body": "Is this check needed? This is only reached when `wp->w_redr_type != 0`",
            "commit_id": "fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
            "created_at": "2023-06-29T22:43:17Z",
            "diff_hunk": "@@ -629,7 +629,12 @@ int update_screen(void)\n         did_one = true;\n         start_search_hl();\n       }\n+\n+      int win_update_type = wp->w_redr_type;\n       win_update(wp, &providers);\n+      if (win_update_type) {",
            "html_url": "https://github.com/neovim/neovim/pull/24182#discussion_r1247236820",
            "id": 1247236820,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5KV1LU",
            "original_commit_id": "fb4fdfdf7e55e5f22c3d76167b0ed3e06134e893",
            "original_line": 635,
            "original_position": 7,
            "original_start_line": null,
            "path": "src/nvim/drawscreen.c",
            "position": null,
            "pull_request_review_id": 1506223528,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/24182",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1247236820/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-06-29T22:43:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1247236820",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/24182#discussion_r1247280834"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/24182"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1247280834"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Good catch! No it appears like it isn’t. I must have missed the outer block that already does the check, I’m not used two reading code with just two space indentation.",
            "commit_id": "fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
            "created_at": "2023-06-30T00:31:35Z",
            "diff_hunk": "@@ -629,7 +629,12 @@ int update_screen(void)\n         did_one = true;\n         start_search_hl();\n       }\n+\n+      int win_update_type = wp->w_redr_type;\n       win_update(wp, &providers);\n+      if (win_update_type) {",
            "html_url": "https://github.com/neovim/neovim/pull/24182#discussion_r1247280834",
            "id": 1247280834,
            "in_reply_to_id": 1247236820,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5KV_7C",
            "original_commit_id": "fb4fdfdf7e55e5f22c3d76167b0ed3e06134e893",
            "original_line": 635,
            "original_position": 7,
            "original_start_line": null,
            "path": "src/nvim/drawscreen.c",
            "position": null,
            "pull_request_review_id": 1506283527,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/24182",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1247280834/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-06-30T00:31:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1247280834",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/24182#discussion_r1247604940"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/24182"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1247604940"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "This should be fixed now",
            "commit_id": "fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
            "created_at": "2023-06-30T08:42:11Z",
            "diff_hunk": "@@ -636,6 +636,13 @@ tabs.\n \tpurpose it only counts \"virtual\" or \"displayed\" lines, so folds\n \tonly count as one line.\n \n+\tAll updates, such as `grid_line`, in a batch affects the new viewport,\n+\tdespite the fact that `win_viewport` is received after the updates.\n+\tApplications implementing for example, smooth scrolling should take",
            "html_url": "https://github.com/neovim/neovim/pull/24182#discussion_r1247604940",
            "id": 1247604940,
            "in_reply_to_id": 1247236039,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5KXPDM",
            "original_commit_id": "fb4fdfdf7e55e5f22c3d76167b0ed3e06134e893",
            "original_line": 641,
            "original_position": 6,
            "original_start_line": null,
            "path": "runtime/doc/ui.txt",
            "position": null,
            "pull_request_review_id": 1506774563,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/24182",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1247604940/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-06-30T08:42:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1247604940",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/24182#discussion_r1247605038"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/24182"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1247605038"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "This should be fixed now",
            "commit_id": "fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
            "created_at": "2023-06-30T08:42:15Z",
            "diff_hunk": "@@ -629,7 +629,12 @@ int update_screen(void)\n         did_one = true;\n         start_search_hl();\n       }\n+\n+      int win_update_type = wp->w_redr_type;\n       win_update(wp, &providers);\n+      if (win_update_type) {",
            "html_url": "https://github.com/neovim/neovim/pull/24182#discussion_r1247605038",
            "id": 1247605038,
            "in_reply_to_id": 1247236820,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5KXPEu",
            "original_commit_id": "fb4fdfdf7e55e5f22c3d76167b0ed3e06134e893",
            "original_line": 635,
            "original_position": 7,
            "original_start_line": null,
            "path": "src/nvim/drawscreen.c",
            "position": null,
            "pull_request_review_id": 1506774678,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/24182",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1247605038/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-06-30T08:42:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1247605038",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/24182#discussion_r1249394085"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/24182"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1249394085"
                }
            },
            "author_association": "MEMBER",
            "body": "would it make senes to use the `validate` pattern found in many other display functions (including `win_ui_flush` which calls this)? Or are the semantics not similar enough?\r\n\r\n```suggestion\r\nvoid ui_ext_win_viewport(win_T *wp, bool validate)\r\n```",
            "commit_id": "fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
            "created_at": "2023-07-02T09:44:59Z",
            "diff_hunk": "@@ -1027,9 +1027,11 @@ void ui_ext_win_position(win_T *wp, bool validate)\n   }\n }\n \n-void ui_ext_win_viewport(win_T *wp)\n+void ui_ext_win_viewport(win_T *wp, bool allow_updated)",
            "html_url": "https://github.com/neovim/neovim/pull/24182#discussion_r1249394085",
            "id": 1249394085,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5KeD2l",
            "original_commit_id": "a2a4fbb4aae5ae72b87e82f78a1084c67668f139",
            "original_line": 1030,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": null,
            "pull_request_review_id": 1509523854,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/24182",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1249394085/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-07-02T09:44:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1249394085",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/24182#discussion_r1249396264"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/24182"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1249396264"
                }
            },
            "author_association": "MEMBER",
            "body": "This placement seems kind of random. If `win_ui_flush` passed its `validate` arg to `ui_ext_win_viewport` , would this still be needed?",
            "commit_id": "fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
            "created_at": "2023-07-02T09:48:35Z",
            "diff_hunk": "@@ -629,7 +629,9 @@ int update_screen(void)\n         did_one = true;\n         start_search_hl();\n       }\n+\n       win_update(wp, &providers);\n+      ui_ext_win_viewport(wp, true);",
            "html_url": "https://github.com/neovim/neovim/pull/24182#discussion_r1249396264",
            "id": 1249396264,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5KeEYo",
            "original_commit_id": "a2a4fbb4aae5ae72b87e82f78a1084c67668f139",
            "original_line": 634,
            "original_position": 6,
            "original_start_line": null,
            "path": "src/nvim/drawscreen.c",
            "position": null,
            "pull_request_review_id": 1509525206,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/24182",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1249396264/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-07-02T09:48:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1249396264",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/24182#discussion_r1249412024"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/24182"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1249412024"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "That would be too early. The viewport has to be sent after `win_update`, since that's the function that modifies the grid and indirectly calls `grid_line`\r\n\r\nAnd there would be the same problem as before, that the grid is invalid at the new viewport, even after `flush` has been received.",
            "commit_id": "fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
            "created_at": "2023-07-02T10:19:52Z",
            "diff_hunk": "@@ -629,7 +629,9 @@ int update_screen(void)\n         did_one = true;\n         start_search_hl();\n       }\n+\n       win_update(wp, &providers);\n+      ui_ext_win_viewport(wp, true);",
            "html_url": "https://github.com/neovim/neovim/pull/24182#discussion_r1249412024",
            "id": 1249412024,
            "in_reply_to_id": 1249396264,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5KeIO4",
            "original_commit_id": "a2a4fbb4aae5ae72b87e82f78a1084c67668f139",
            "original_line": 634,
            "original_position": 6,
            "original_start_line": null,
            "path": "src/nvim/drawscreen.c",
            "position": null,
            "pull_request_review_id": 1509531201,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/24182",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1249412024/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-07-02T10:19:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1249412024",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/24182#discussion_r1250235429"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/24182"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250235429"
                }
            },
            "author_association": "MEMBER",
            "body": "Is this argument really needed? If the window needs another redraw after calling `win_update()`, shouldn't `win_viewport` still be delayed?\r\n```suggestion\r\nvoid ui_ext_win_viewport(win_T *wp)\r\n```",
            "commit_id": "fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
            "created_at": "2023-07-03T05:05:33Z",
            "diff_hunk": "@@ -1027,9 +1027,11 @@ void ui_ext_win_position(win_T *wp, bool validate)\n   }\n }\n \n-void ui_ext_win_viewport(win_T *wp)\n+void ui_ext_win_viewport(win_T *wp, bool allow_updated)",
            "html_url": "https://github.com/neovim/neovim/pull/24182#discussion_r1250235429",
            "id": 1250235429,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5KhRQl",
            "original_commit_id": "a2a4fbb4aae5ae72b87e82f78a1084c67668f139",
            "original_line": 1030,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": null,
            "pull_request_review_id": 1510369493,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/24182",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250235429/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-07-03T05:06:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250235429",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/24182#discussion_r1250235967"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/24182"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250235967"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n      && (wp->w_viewport_invalid && wp->w_redr_type == 0)) {\r\n```",
            "commit_id": "fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
            "created_at": "2023-07-03T05:05:51Z",
            "diff_hunk": "@@ -1027,9 +1027,11 @@ void ui_ext_win_position(win_T *wp, bool validate)\n   }\n }\n \n-void ui_ext_win_viewport(win_T *wp)\n+void ui_ext_win_viewport(win_T *wp, bool allow_updated)\n {\n-  if ((wp == curwin || ui_has(kUIMultigrid)) && wp->w_viewport_invalid) {\n+  if ((wp == curwin || ui_has(kUIMultigrid))\n+      // Delay the viewport command until the screen is updated if there are pending modifications\n+      && (allow_updated || (wp->w_viewport_invalid && wp->w_redr_type == 0))) {",
            "html_url": "https://github.com/neovim/neovim/pull/24182#discussion_r1250235967",
            "id": 1250235967,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5KhRY_",
            "original_commit_id": "a2a4fbb4aae5ae72b87e82f78a1084c67668f139",
            "original_line": 1036,
            "original_position": 10,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": null,
            "pull_request_review_id": 1510369493,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/24182",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250235967/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-07-03T05:06:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250235967",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/24182#discussion_r1250236484"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/24182"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250236484"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n      // Delay win_viewport until the screen is updated if there are pending modifications\r\n```",
            "commit_id": "fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
            "created_at": "2023-07-03T05:06:09Z",
            "diff_hunk": "@@ -1027,9 +1027,11 @@ void ui_ext_win_position(win_T *wp, bool validate)\n   }\n }\n \n-void ui_ext_win_viewport(win_T *wp)\n+void ui_ext_win_viewport(win_T *wp, bool allow_updated)\n {\n-  if ((wp == curwin || ui_has(kUIMultigrid)) && wp->w_viewport_invalid) {\n+  if ((wp == curwin || ui_has(kUIMultigrid))\n+      // Delay the viewport command until the screen is updated if there are pending modifications",
            "html_url": "https://github.com/neovim/neovim/pull/24182#discussion_r1250236484",
            "id": 1250236484,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5KhRhE",
            "original_commit_id": "a2a4fbb4aae5ae72b87e82f78a1084c67668f139",
            "original_line": 1033,
            "original_position": 9,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": null,
            "pull_request_review_id": 1510369493,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/24182",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250236484/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-07-03T05:06:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250236484",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/24182#discussion_r1250390961"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/24182"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250390961"
                }
            },
            "author_association": "MEMBER",
            "body": "Is the `win_viewport` still sent as part of the _same_ batch (logical batch, i e before the final \"flush\" event)? Then perhaps this specific callout is redundant or should be toned down a little. State between different objects is not fully synchronized until \"flush\" is received, this is just how all screen events work.\r\n\r\nIf the concern is _mainly_ the space-bar heating change of changing the order to what some existing UIs might have come expect, then it is better to call out such a change in `news.txt` rather than cluttering the docs.",
            "commit_id": "fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
            "created_at": "2023-07-03T07:29:03Z",
            "diff_hunk": "@@ -636,6 +636,13 @@ tabs.\n \tpurpose it only counts \"virtual\" or \"displayed\" lines, so folds\n \tonly count as one line.\n \n+\tAll updates, such as `grid_line`, in a batch affects the new viewport,\n+\tdespite the fact that `win_viewport` is received after the updates.\n+\tApplications implementing, for example, smooth scrolling should take\n+\tthis into account and keep the grid separated from what's displayed on\n+\tthe screen and copy it to the viewport destination once `win_viewport`\n+\tis received.",
            "html_url": "https://github.com/neovim/neovim/pull/24182#discussion_r1250390961",
            "id": 1250390961,
            "line": 651,
            "node_id": "PRRC_kwDOAPphoM5Kh3Ox",
            "original_commit_id": "a2a4fbb4aae5ae72b87e82f78a1084c67668f139",
            "original_line": 651,
            "original_position": 9,
            "original_start_line": 639,
            "path": "runtime/doc/ui.txt",
            "position": 9,
            "pull_request_review_id": 1510547335,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/24182",
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250390961/reactions"
            },
            "side": "RIGHT",
            "start_line": 646,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-07-03T07:29:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250390961",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/24182#discussion_r1250402600"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/24182"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250402600"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "It is unfortunately required. `win_viewport` has the dual duty of indicating the row and column, and that is allowed to happen without calling `redraw_later` In those cases `v_viewport_invalid` is set and `ui_ext_win_viewport` is called directly from `UIFlush` and can happen basically everywhere.\r\n\r\nSo, if the check `allow_updated` is not there, we are back to square one, `win_viewport` gets sent with a flush, while the actual screen is still dirty.\r\n\r\nMy first approach was actually to remove `win_viewport` from `UIFlush`, but then there will be no feedback when only the `curcolumn` or `curow` are updated. The next approach was to call `win_view_port` unconditionally after `win_update`, but some tests are still failing with that, and it also sounds extremely risky, since it's been called from so many places before, even outside the `update_screen`",
            "commit_id": "fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
            "created_at": "2023-07-03T07:37:08Z",
            "diff_hunk": "@@ -1027,9 +1027,11 @@ void ui_ext_win_position(win_T *wp, bool validate)\n   }\n }\n \n-void ui_ext_win_viewport(win_T *wp)\n+void ui_ext_win_viewport(win_T *wp, bool allow_updated)",
            "html_url": "https://github.com/neovim/neovim/pull/24182#discussion_r1250402600",
            "id": 1250402600,
            "in_reply_to_id": 1250235429,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5Kh6Eo",
            "original_commit_id": "a2a4fbb4aae5ae72b87e82f78a1084c67668f139",
            "original_line": 1030,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": null,
            "pull_request_review_id": 1510561233,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/24182",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250402600/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-07-03T07:37:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250402600",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/24182#discussion_r1250403451"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/24182"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250403451"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "See my previous comment about `allow_updated`",
            "commit_id": "fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
            "created_at": "2023-07-03T07:37:36Z",
            "diff_hunk": "@@ -1027,9 +1027,11 @@ void ui_ext_win_position(win_T *wp, bool validate)\n   }\n }\n \n-void ui_ext_win_viewport(win_T *wp)\n+void ui_ext_win_viewport(win_T *wp, bool allow_updated)\n {\n-  if ((wp == curwin || ui_has(kUIMultigrid)) && wp->w_viewport_invalid) {\n+  if ((wp == curwin || ui_has(kUIMultigrid))\n+      // Delay the viewport command until the screen is updated if there are pending modifications\n+      && (allow_updated || (wp->w_viewport_invalid && wp->w_redr_type == 0))) {",
            "html_url": "https://github.com/neovim/neovim/pull/24182#discussion_r1250403451",
            "id": 1250403451,
            "in_reply_to_id": 1250235967,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5Kh6R7",
            "original_commit_id": "a2a4fbb4aae5ae72b87e82f78a1084c67668f139",
            "original_line": 1036,
            "original_position": 10,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": null,
            "pull_request_review_id": 1510562386,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/24182",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250403451/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-07-03T07:37:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250403451",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/24182#discussion_r1250425879"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/24182"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250425879"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "I clarified the whole comment",
            "commit_id": "fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
            "created_at": "2023-07-03T07:53:03Z",
            "diff_hunk": "@@ -1027,9 +1027,11 @@ void ui_ext_win_position(win_T *wp, bool validate)\n   }\n }\n \n-void ui_ext_win_viewport(win_T *wp)\n+void ui_ext_win_viewport(win_T *wp, bool allow_updated)\n {\n-  if ((wp == curwin || ui_has(kUIMultigrid)) && wp->w_viewport_invalid) {\n+  if ((wp == curwin || ui_has(kUIMultigrid))\n+      // Delay the viewport command until the screen is updated if there are pending modifications",
            "html_url": "https://github.com/neovim/neovim/pull/24182#discussion_r1250425879",
            "id": 1250425879,
            "in_reply_to_id": 1250236484,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5Kh_wX",
            "original_commit_id": "a2a4fbb4aae5ae72b87e82f78a1084c67668f139",
            "original_line": 1033,
            "original_position": 9,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": null,
            "pull_request_review_id": 1510589265,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/24182",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250425879/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-07-03T07:53:04Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250425879",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/24182#discussion_r1250442574"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/24182"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250442574"
                }
            },
            "author_association": "MEMBER",
            "body": "> `win_viewport` has the dual duty of indicating the row and column, and that is allowed to happen without calling `redraw_later` In those cases `v_viewport_invalid` is set and `ui_ext_win_viewport` is called directly from `UIFlush` and can happen basically everywhere.\r\n\r\nThis would be useful to have as a `@param` docstring.",
            "commit_id": "fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
            "created_at": "2023-07-03T08:04:51Z",
            "diff_hunk": "@@ -1027,9 +1027,11 @@ void ui_ext_win_position(win_T *wp, bool validate)\n   }\n }\n \n-void ui_ext_win_viewport(win_T *wp)\n+void ui_ext_win_viewport(win_T *wp, bool allow_updated)",
            "html_url": "https://github.com/neovim/neovim/pull/24182#discussion_r1250442574",
            "id": 1250442574,
            "in_reply_to_id": 1250235429,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5KiD1O",
            "original_commit_id": "a2a4fbb4aae5ae72b87e82f78a1084c67668f139",
            "original_line": 1030,
            "original_position": 5,
            "original_start_line": null,
            "path": "src/nvim/window.c",
            "position": null,
            "pull_request_review_id": 1510614727,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/24182",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250442574/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-07-03T08:04:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250442574",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/24182#discussion_r1250527778"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/24182"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250527778"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "The documentation is the first place I go looking for this kind of information, and it also concerns people starting to make new UIs, or trying to fix bugs with their old information.\r\n\r\nThis would not be needed, if we somehow can change the order so that `win_viewport` comes before the `grid_scroll` and `grid_line` calls in the batch. But as it is now, coming the last in the batch, applications are forced to do some kind of double buffering.\r\n\r\nIntuitively, users will think that things are sent in the correct order, and that flush is just a point where everything is consistent.\r\n",
            "commit_id": "fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
            "created_at": "2023-07-03T09:06:56Z",
            "diff_hunk": "@@ -636,6 +636,13 @@ tabs.\n \tpurpose it only counts \"virtual\" or \"displayed\" lines, so folds\n \tonly count as one line.\n \n+\tAll updates, such as `grid_line`, in a batch affects the new viewport,\n+\tdespite the fact that `win_viewport` is received after the updates.\n+\tApplications implementing, for example, smooth scrolling should take\n+\tthis into account and keep the grid separated from what's displayed on\n+\tthe screen and copy it to the viewport destination once `win_viewport`\n+\tis received.",
            "html_url": "https://github.com/neovim/neovim/pull/24182#discussion_r1250527778",
            "id": 1250527778,
            "in_reply_to_id": 1250390961,
            "line": 651,
            "node_id": "PRRC_kwDOAPphoM5KiYoi",
            "original_commit_id": "a2a4fbb4aae5ae72b87e82f78a1084c67668f139",
            "original_line": 651,
            "original_position": 9,
            "original_start_line": 639,
            "path": "runtime/doc/ui.txt",
            "position": 9,
            "pull_request_review_id": 1510732428,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/24182",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250527778/reactions"
            },
            "side": "RIGHT",
            "start_line": 646,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-07-03T09:06:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1250527778",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "I'm not sure how to test this.\r\n\r\n`Screen:except` only takes a timeout, and I need to check that the state is as expected after the very next `flush`. Eventually it will become correct even without this changes, it's just that the intermediate changes are wrong.\r\n\r\nFor example the following seems to be wrong without these changes according to my logs from Neovide\r\n```lua\r\ninsert([[\r\n  Lorem ipsum dolor sit amet, consectetur\r\n  adipisicing elit, sed do eiusmod tempor\r\n  incididunt ut labore et dolore magna aliqua.\r\n  Ut enim ad minim veniam, quis nostrud\r\n  exercitation ullamco laboris nisi ut aliquip ex\r\n  ea commodo consequat. Duis aute irure dolor in\r\n  reprehenderit in voluptate velit esse cillum\r\n  dolore eu fugiat nulla pariatur. Excepteur sint\r\n  occaecat cupidatat non proident, sunt in culpa\r\n  qui officia deserunt mollit anim id est\r\n  laborum.]])\r\nfeed('6gg')\r\nfeed('v')\r\nfeed('2j')\r\nfeed('zF')\r\nfeed('<C-e>')\r\n```\r\nIt outputs for `<C-e>`\r\n```\r\nNeovimRedrawEvent(GridLine { grid: 4, row: 0, column_start: 168, cells: [GridLineCell { text: \"^\", highlight_id: Some(1), repeat: None }, GridLineCell { text: \"E\", highlight_id: None, repeat: None }] })\r\nNeovimRedrawEvent(Flush)\r\nNeovimRedrawEvent(GridLine { grid: 4, row: 0, column_start: 168, cells: [GridLineCell { text: \" \", highlight_id: Some(1), repeat: Some(2) }] })\r\nNeovimRedrawEvent(WindowViewport { grid: 2, top_line: 1.0, bottom_line: 12.0, current_line: 5.0, current_column: 0.0, line_count: Some(11.0), scroll_delta: Some(1.0) })\r\nNeovimRedrawEvent(Flush) *** This flush is wrong, the grid is not yet scrolled ***\r\nNeovimRedrawEvent(Scroll { grid: 2, top: 0, bottom: 87, left: 0, right: 179, rows: 1, columns: 0 })\r\nNeovimRedrawEvent(GridLine { grid: 2, row: 86, column_start: 0, cells: [GridLineCell { text: \"~\", highlight_id: Some(84), repeat: None }, GridLineCell { text: \" \", highlight_id: Some(84), repeat: Some(178) }] })\r\nNeovimRedrawEvent(WindowViewport { grid: 2, top_line: 1.0, bottom_line: 12.0, current_line: 5.0, current_column: 0.0, line_count: Some(11.0), scroll_delta: Some(0.0) })\r\nNeovimRedrawEvent(CursorGoto { grid: 2, row: 4, column: 4 })\r\nNeovimRedrawEvent(Flush)\r\n\r\n```\r\n\r\n**Edit:** Another thing I'm not sure about is the CI failure.  All passed on my local fork https://github.com/fredizzimo/neovim/actions/runs/5395482696/jobs/9798011151",
            "created_at": "2023-06-28T14:02:59Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1611474647",
            "id": 1611474647,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5gDSbX",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1611474647/reactions"
            },
            "updated_at": "2023-06-28T14:15:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1611474647",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Another thing I'm not sure about is the CI failure. All passed on my local fork\r\n\r\nCI is rather flakey these days, unfortunately. I'd recommend ignoring single(!) `test/` failures while the PR is still in draft. (Afterwards I can rerun tests to check for flake vs. consistent failure.)",
            "created_at": "2023-06-28T14:17:59Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1611501087",
            "id": 1611501087,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5gDY4f",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1611501087/reactions"
            },
            "updated_at": "2023-06-28T14:17:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1611501087",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I added some clarification to the `win_viewport` documentation and removed the draft status. \r\n\r\nI tried to search for some ways of unit testing it, but it does not appear to be easy currently, so I left the tests out. But I will add some if you have any suggestions. But at least the is `disabled in folded text` test seems o have the correct behavior now. I don't think the column should be `9`, since the cursor is at the start of the search pattern.",
            "created_at": "2023-06-28T16:07:49Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1611711370",
            "id": 1611711370,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5gEMOK",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1611711370/reactions"
            },
            "updated_at": "2023-06-28T16:07:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1611711370",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I still noticed problems in Neovide  when setting the new Neovim `smoothscroll` option. I have not debugged it completely yet, but it looks like the problem is that `scroll_delta` shows the wrong number of lines, unrelated to these changes. It should always be 1 when I set `wrap` and `smoothscroll` and scroll with `<C-e>`. But it's sometimes 2 and sometimes 0.",
            "created_at": "2023-07-02T21:53:20Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1616845472",
            "id": 1616845472,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5gXxqg",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1616845472/reactions"
            },
            "updated_at": "2023-07-02T21:54:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1616845472",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I'd structure the logic somewhat differently. `ui_ext_win_viewport()` should not take a `bool actually_do_it` parameter. Either the function is called in order to do its thing, or the function is not called.\r\n\r\ninstead, we should inhibit this function to be called when it is too early. Concretely, `win_ui_flush()` needs to take a `bool viewports` parameter, which should be set to `false` when called from `update_screen()` . alternatively,  this loop should be broken of the function entirely and still be done as part of `ui_flush()`",
            "created_at": "2023-07-03T07:45:32Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1617552802",
            "id": 1617552802,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5gaeWi",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1617552802/reactions"
            },
            "updated_at": "2023-07-03T07:45:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1617552802",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@bfredl,\r\n\r\nAs far as I can see, that needs a quite big restructuring of the code, not something I want to do. First of all there's no `win_ui_flush` in `update_screen` that is called after the grid is redrawn. The actual flush for that update only seems to happen the next frame.\r\n\r\nAnd that one happens in the middle of the `update_screen` function, there has to be a reason for that, so I did not even attempt to move it to the end.\r\n\r\nSecondly `win_ui_flush` is called from a huge amount of different places, some of them has to send `win_viewport` in order to update `curcol` and `currow`.\r\n\r\nYes, we could maybe add another `ui_flush` at the end of `update_screen`, and make that the only one to send `win_viewport`. But what consequences does an extra flush have here? Is `draw_screen` guaranteed to be called when just the cursor moves? \r\n\r\nBut I just now did a quick test by moving `win_ui_flush` to the end of `draw_screen` and use only that as a signal to call `win_viewport` and the tests started to fail because `cur_col` is not updated properly.\r\n",
            "created_at": "2023-07-03T09:45:52Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1617745170",
            "id": 1617745170,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5gbNUS",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1617745170/reactions"
            },
            "updated_at": "2023-07-03T09:45:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1617745170",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> As far as I can see, that needs a quite big restructuring of the code, not something I want to do. \r\n\r\nI don't think so.\r\n\r\n> First of all there's no win_ui_flush in update_screen that is called after the grid is redrawn.\r\n\r\nI didn't mean you should remove the new calls to `ui_ext_win_viewport(wp)`, just removing it unconditionally from the win_ui_flush that happens before, and thus remove the extra \"maybe update viewport\" condition.",
            "created_at": "2023-07-03T10:37:24Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1617878171",
            "id": 1617878171,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5gbtyb",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1617878171/reactions"
            },
            "updated_at": "2023-07-03T10:39:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1617878171",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@bfredl, thanks, \r\n\r\nIt doesn't quite work like that, but it brought me on the right track to simplify it. Starting with the original code, the only change needed is this, to never send `win_viewport` when it's dirty. So, no additional calls to `ui_ext_win_viewport` or anything\r\n\r\n```diff\r\ndiff --git a/src/nvim/window.c b/src/nvim/window.c\r\nindex 8c2d2e3da..7f9126e8c 100644\r\n--- a/src/nvim/window.c\r\n+++ b/src/nvim/window.c\r\n@@ -1029,7 +1029,7 @@ void ui_ext_win_position(win_T *wp, bool validate)\r\n \r\n void ui_ext_win_viewport(win_T *wp)\r\n {\r\n-  if ((wp == curwin || ui_has(kUIMultigrid)) && wp->w_viewport_invalid) {\r\n+  if ((wp == curwin || ui_has(kUIMultigrid)) && wp->w_viewport_invalid && wp->w_redr_type == 0) {\r\n     int botline = wp->w_botline;\r\n     int line_count = wp->w_buffer->b_ml.ml_line_count;\r\n     if (botline == line_count + 1 && wp->w_empty_rows == 0) {\r\n```\r\nOf course, this whole check could additionally be moved out to `win_ui_flush` since that's the only caller now. If you prefer it that way.\r\n\r\nAll tests pass with just this change, and it also appears to be working correctly with Neovide.\r\n\r\nHowever, if I apply the test change that I made in this PR, it fails. I believe that change is the correct behaviour, but moving the `win_ui_flush(true)` inside `update_screen` to the end of the function fixes that and everything still works.\r\n\r\n**Edit:**  Note that something as simple as this this does not work, a lot of tests are failing\r\n```diff\r\ndiff --git a/src/nvim/drawscreen.c b/src/nvim/drawscreen.c\r\nindex 3f024c507..ef1a86858 100644\r\n--- a/src/nvim/drawscreen.c\r\n+++ b/src/nvim/drawscreen.c\r\n@@ -509,7 +509,6 @@ int update_screen(void)\r\n     need_wait_return = false;\r\n   }\r\n \r\n-  win_ui_flush(true);\r\n   msg_ext_check_clear();\r\n \r\n   // reset cmdline_row now (may have been changed temporarily)\r\n@@ -674,6 +673,7 @@ int update_screen(void)\r\n \r\n   // either cmdline is cleared, not drawn or mode is last drawn\r\n   cmdline_was_last_drawn = false;\r\n+  win_ui_flush(true);\r\n   return OK;\r\n }\r\n \r\ndiff --git a/src/nvim/window.c b/src/nvim/window.c\r\nindex 8c2d2e3da..66262f98a 100644\r\n--- a/src/nvim/window.c\r\n+++ b/src/nvim/window.c\r\n@@ -7563,7 +7563,7 @@ void win_ui_flush(bool validate)\r\n         wp->w_pos_changed = false;\r\n       }\r\n     }\r\n-    if (tp == curtab) {\r\n+    if (validate && tp == curtab) {\r\n       ui_ext_win_viewport(wp);\r\n     }\r\n   }\r\n```",
            "created_at": "2023-07-03T11:14:20Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1617977564",
            "id": 1617977564,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5gcGDc",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 1,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1617977564/reactions"
            },
            "updated_at": "2023-07-03T12:38:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1617977564",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "After #24234 the following test change can be added to this PR:\r\n```diff\r\ndiff --git a/test/functional/ui/multigrid_spec.lua b/test/functional/ui/multigrid_spec.lua\r\nindex 2e6606803..1778c8218 100644\r\n--- a/test/functional/ui/multigrid_spec.lua\r\n+++ b/test/functional/ui/multigrid_spec.lua\r\n@@ -3808,7 +3808,6 @@ describe('ext_multigrid', function()\r\n     ]], win_viewport={\r\n       [2] = {win = {id = 1000}, topline = 30586, botline = 30592, curline = 30591, curcol = 0, linecount = 30592, sum_scroll_delta = 30588};\r\n     }}\r\n-    command('autocmd CursorMoved * ++once call line(\"w$\")')  -- FIXME: this should not be needed\r\n     feed('gg')\r\n     screen:expect{grid=[[\r\n     ## grid 1\r\n```",
            "created_at": "2023-07-04T08:52:24Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1619822946",
            "id": 1619822946,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5gjIli",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1619822946/reactions"
            },
            "updated_at": "2023-07-04T08:52:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1619822946",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> but moving the `win_ui_flush(true)` inside `update_screen` to the end of the function fixes that and everything still works.\r\n\r\nNice. Updating the PR will help with review.",
            "created_at": "2023-07-04T12:23:35Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1620152771",
            "id": 1620152771,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5gkZHD",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1620152771/reactions"
            },
            "updated_at": "2023-07-07T22:17:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1620152771",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> Nice. Updating the PR will help with review.\r\n\r\nYes, I will update it later today. I was just waiting for confirmation that it's the correct approach to take.",
            "created_at": "2023-07-04T12:29:05Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1620160823",
            "id": 1620160823,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5gkbE3",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1620160823/reactions"
            },
            "updated_at": "2023-07-07T22:17:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1620160823",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I simplified the changes, and removed the changes to the `search highlighting` test. When I tested it earlier I thought that moving `win_ui_flush` to the end of `update_screen` would make it behave the same way as earlier, but I must have done something wrong because some other tests start to fail.\r\n\r\nAdding an extra `win_ui_flush`, rather than just moving it to the end of `update_screen` does make it behave the same way. But I don't think that's the right way to fix the issue, we are probably missing a `w_viewport_invalid = false` somewhere and that's a separate issue. \r\n\r\nI have not done any new changes to the documentation yet, since it's unclear to me how it should be changed. `win_viewport` still works the same as before, it comes last in the batch, which is at least to me surprising, since all other events can be processed in the order they are received, as long as the only displayed state is the one right after flush.\r\n\r\nNote, that I have not yet tested these latest changes very much, only done a few sanity checks and that it indeed fixes the problem in Neovide. The `smoothscroll` bug I reported earlier here, is also fixed, probably with https://github.com/neovim/neovim/pull/24234\r\n\r\n",
            "created_at": "2023-07-04T22:03:09Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1620786850",
            "id": 1620786850,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5gmz6i",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1620786850/reactions"
            },
            "updated_at": "2023-07-04T22:03:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1620786850",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Is the Problem/Solution framing in https://github.com/neovim/neovim/pull/24182#pullrequestreview-1509525545 accurate or can you update the PR description with a correct Problem/Solution framing?",
            "created_at": "2023-07-05T11:40:00Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1621586497",
            "id": 1621586497,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5gp3JB",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1621586497/reactions"
            },
            "updated_at": "2023-07-07T22:17:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1621586497",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@justinmk, it was mostly correct, but had a few inaccuracies, like \"a few batches\" instead of \"one batch\",  so I rewrote it and updated the description.\r\n",
            "created_at": "2023-07-05T12:13:38Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1621636710",
            "id": 1621636710,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5gqDZm",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1621636710/reactions"
            },
            "updated_at": "2023-07-07T22:17:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1621636710",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> I have not done any new changes to the documentation yet, since it's unclear to me how it should be changed. `win_viewport` still works the same as before, it comes last in the batch,\r\n\r\nSo the doc changes as currently in the PR are not ready, thus can't merge this yet?\r\n",
            "created_at": "2023-07-05T13:02:59Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1621715512",
            "id": 1621715512,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5gqWo4",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1621715512/reactions"
            },
            "updated_at": "2023-07-07T22:17:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1621715512",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@justinmk, I was referring to comment @bfredl gave earlier here https://github.com/neovim/neovim/pull/24182#discussion_r1250390961. From my point of view it's good as it is, but I can change it, if you prefer to not have that many details there. For example by removing the last sentence:\r\n> Applications implementing, for example, smooth scrolling should take this into account and keep the grid separated from what's displayed onthe screen and copy it to the viewport destination once `win_viewport` is received.",
            "created_at": "2023-07-05T13:24:18Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1621753214",
            "id": 1621753214,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5gqf1-",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1621753214/reactions"
            },
            "updated_at": "2023-07-05T13:24:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1621753214",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@zeertzjq, @justinmk. \r\n\r\nWould it be possible to backport this into the next 0.9.x release? We just ran into some problems here https://github.com/neovide/neovide/pull/1870#issuecomment-1647863757, which are hard to fix  without breaking things completely when using it  with 0.9.1 and older. Therefore, I think we have to limit the version of Neovim people can use together with it.\r\n\r\n0.10, is probably quite far away, so including it in 0.9.2 would make things easier for us. I don't think this is a breaking change for existing clients, but I totally understand if you don't want to include it.\r\n\r\n \r\n\r\n",
            "created_at": "2023-07-25T08:33:58Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1649378100",
            "id": 1649378100,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5iT4M0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1649378100/reactions"
            },
            "updated_at": "2023-07-25T08:33:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1649378100",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Gnvim is using this at the moment (for smooth scrolling) and if I've understood this change correctly it will break, albeit already broken, behavior. I can test it later this week.",
            "created_at": "2023-07-25T08:39:14Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1649386470",
            "id": 1649386470,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5iT6Pm",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1649386470/reactions"
            },
            "updated_at": "2023-07-25T08:39:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1649386470",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4594126?v=4",
                "events_url": "https://api.github.com/users/vhakulinen/events{/privacy}",
                "followers_url": "https://api.github.com/users/vhakulinen/followers",
                "following_url": "https://api.github.com/users/vhakulinen/following{/other_user}",
                "gists_url": "https://api.github.com/users/vhakulinen/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/vhakulinen",
                "id": 4594126,
                "login": "vhakulinen",
                "node_id": "MDQ6VXNlcjQ1OTQxMjY=",
                "organizations_url": "https://api.github.com/users/vhakulinen/orgs",
                "received_events_url": "https://api.github.com/users/vhakulinen/received_events",
                "repos_url": "https://api.github.com/users/vhakulinen/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/vhakulinen/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/vhakulinen/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/vhakulinen"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I just double checked Neovide release, which does not take advantage of the fixes. And there it works the same with Neovim nightly and 0.9.1. But that's just one data point. I will check if someone on our side can test all major GUI implementations to see if there are any breakages.",
            "created_at": "2023-07-25T09:36:49Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1649474134",
            "id": 1649474134,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5iUPpW",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1649474134/reactions"
            },
            "updated_at": "2023-07-25T09:36:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1649474134",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Backport failed for `release-0.9`, because it was unable to cherry-pick the commit(s).\n\nPlease cherry-pick the changes locally.\n```bash\ngit fetch origin release-0.9\ngit worktree add -d .worktree/backport-24182-to-release-0.9 origin/release-0.9\ncd .worktree/backport-24182-to-release-0.9\ngit checkout -b backport-24182-to-release-0.9\nancref=$(git merge-base 3ecd45ded044c47efa76b74e9e3b720fbe27adc7 fa7553494bc6dacbbf452cc2e5f3d9a9968dca54)\ngit cherry-pick -x $ancref..fa7553494bc6dacbbf452cc2e5f3d9a9968dca54\n```",
            "created_at": "2023-07-25T11:26:27Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1649649482",
            "id": 1649649482,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5iU6dK",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1649649482/reactions"
            },
            "updated_at": "2023-07-25T11:26:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1649649482",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/in/15368?v=4",
                "events_url": "https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}",
                "followers_url": "https://api.github.com/users/github-actions%5Bbot%5D/followers",
                "following_url": "https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}",
                "gists_url": "https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/apps/github-actions",
                "id": 41898282,
                "login": "github-actions[bot]",
                "node_id": "MDM6Qm90NDE4OTgyODI=",
                "organizations_url": "https://api.github.com/users/github-actions%5Bbot%5D/orgs",
                "received_events_url": "https://api.github.com/users/github-actions%5Bbot%5D/received_events",
                "repos_url": "https://api.github.com/users/github-actions%5Bbot%5D/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/github-actions%5Bbot%5D/subscriptions",
                "type": "Bot",
                "url": "https://api.github.com/users/github-actions%5Bbot%5D"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Would it be possible to backport this into the next 0.9.x release?\r\n\r\nCan you open a PR against the `release-0.9` branch?",
            "created_at": "2023-07-25T11:27:33Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1649650868",
            "id": 1649650868,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5iU6y0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1649650868/reactions"
            },
            "updated_at": "2023-07-25T11:27:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1649650868",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@justinmk, yes here https://github.com/neovim/neovim/pull/24480",
            "created_at": "2023-07-25T11:43:21Z",
            "html_url": "https://github.com/neovim/neovim/pull/24182#issuecomment-1649671391",
            "id": 1649671391,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
            "node_id": "IC_kwDOAPphoM5iU_zf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1649671391/reactions"
            },
            "updated_at": "2023-07-25T11:43:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1649671391",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/24182/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/24182/commits",
    "created_at": "2023-06-27T23:01:36Z",
    "diff_url": "https://github.com/neovim/neovim/pull/24182.diff",
    "draft": false,
    "head": {
        "label": "fredizzimo:fsundvik/fix-win-viewport",
        "ref": "fsundvik/fix-win-viewport",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/fredizzimo/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/fredizzimo/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/fredizzimo/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/fredizzimo/neovim/branches{/branch}",
            "clone_url": "https://github.com/fredizzimo/neovim.git",
            "collaborators_url": "https://api.github.com/repos/fredizzimo/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/fredizzimo/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/fredizzimo/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/fredizzimo/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/fredizzimo/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/fredizzimo/neovim/contributors",
            "created_at": "2021-07-09T10:07:26Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/fredizzimo/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/fredizzimo/neovim/downloads",
            "events_url": "https://api.github.com/repos/fredizzimo/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/fredizzimo/neovim/forks",
            "full_name": "fredizzimo/neovim",
            "git_commits_url": "https://api.github.com/repos/fredizzimo/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/fredizzimo/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/fredizzimo/neovim/git/tags{/sha}",
            "git_url": "git://github.com/fredizzimo/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/fredizzimo/neovim/hooks",
            "html_url": "https://github.com/fredizzimo/neovim",
            "id": 384397538,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/fredizzimo/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/fredizzimo/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/fredizzimo/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/fredizzimo/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/fredizzimo/neovim/labels{/name}",
            "language": null,
            "languages_url": "https://api.github.com/repos/fredizzimo/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/fredizzimo/neovim/merges",
            "milestones_url": "https://api.github.com/repos/fredizzimo/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkzODQzOTc1Mzg=",
            "notifications_url": "https://api.github.com/repos/fredizzimo/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/fredizzimo/neovim/pulls{/number}",
            "pushed_at": "2023-07-25T11:40:42Z",
            "releases_url": "https://api.github.com/repos/fredizzimo/neovim/releases{/id}",
            "size": 244377,
            "ssh_url": "git@github.com:fredizzimo/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/fredizzimo/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/fredizzimo/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/fredizzimo/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/fredizzimo/neovim/subscription",
            "svn_url": "https://github.com/fredizzimo/neovim",
            "tags_url": "https://api.github.com/repos/fredizzimo/neovim/tags",
            "teams_url": "https://api.github.com/repos/fredizzimo/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/fredizzimo/neovim/git/trees{/sha}",
            "updated_at": "2021-07-09T10:07:27Z",
            "url": "https://api.github.com/repos/fredizzimo/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
            "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
            "followers_url": "https://api.github.com/users/fredizzimo/followers",
            "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
            "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/fredizzimo",
            "id": 9946255,
            "login": "fredizzimo",
            "node_id": "MDQ6VXNlcjk5NDYyNTU=",
            "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
            "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
            "repos_url": "https://api.github.com/users/fredizzimo/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/fredizzimo"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/24182",
    "id": 1410704020,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/24182",
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 113026979,
            "name": "ui",
            "node_id": "MDU6TGFiZWwxMTMwMjY5Nzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/ui"
        },
        {
            "color": "fef2c0",
            "default": false,
            "description": "",
            "id": 5363823255,
            "name": "backport release-0.9",
            "node_id": "LA_kwDOAPphoM8AAAABP7Vylw",
            "url": "https://api.github.com/repos/neovim/neovim/labels/backport%20release-0.9"
        }
    ],
    "locked": false,
    "merge_commit_sha": "1de82e16c1216e1dbe22cf7a8ec9ea9e9e69b631",
    "merged_at": "2023-07-05T13:31:35Z",
    "milestone": {
        "closed_at": null,
        "closed_issues": 51,
        "created_at": "2023-05-26T09:57:35Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
            "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
            "followers_url": "https://api.github.com/users/zeertzjq/followers",
            "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
            "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/zeertzjq",
            "id": 35768171,
            "login": "zeertzjq",
            "node_id": "MDQ6VXNlcjM1NzY4MTcx",
            "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
            "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
            "repos_url": "https://api.github.com/users/zeertzjq/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/zeertzjq"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/38",
        "id": 9446345,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/38/labels",
        "node_id": "MI_kwDOAPphoM4AkCPJ",
        "number": 38,
        "open_issues": 10,
        "state": "open",
        "title": "0.9.2",
        "updated_at": "2023-07-25T19:19:51Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/38"
    },
    "node_id": "PR_kwDOAPphoM5UFaKU",
    "number": 24182,
    "patch_url": "https://github.com/neovim/neovim/pull/24182.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/24182/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/fa7553494bc6dacbbf452cc2e5f3d9a9968dca54",
    "title": "fix(ui): delay win_viewport until the screen is updated ",
    "updated_at": "2023-07-25T11:43:21Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/24182",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
        "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
        "followers_url": "https://api.github.com/users/fredizzimo/followers",
        "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
        "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/fredizzimo",
        "id": 9946255,
        "login": "fredizzimo",
        "node_id": "MDQ6VXNlcjk5NDYyNTU=",
        "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
        "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
        "repos_url": "https://api.github.com/users/fredizzimo/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/fredizzimo"
    }
}