{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/25724/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/25724/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/25724"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/25724"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/25724/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/1d99aa56832644f65dc073e70a35adea10dfd9cb"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 4938,
            "forks_count": 4938,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1669,
            "open_issues_count": 1669,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2023-10-25T23:42:29Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 254137,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 70413,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2023-10-26T01:25:13Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 70413,
            "watchers_count": 70413,
            "web_commit_signoff_required": false
        },
        "sha": "684e93054b82c6b5b215db7d3ecbad803eb81f0e",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim"
        }
    },
    "body": "Problem:  The legacy signlist data structure and associated functions are\r\n          redundant since the introduction of extmark signs.\r\nSolution: Store signs placed through the legacy commands in the extmark\r\n          tree and replace signlist associated functions.\r\n\r\nUsage of the legacy sign commands should yield no change in behavior with the\r\nexception of:\r\n  - \"orphaned signs\" are now always removed when the line it is placed on is\r\n    deleted. This used to depend on the value of 'signcolumn'.\r\n  - It is no longer possible to place multiple signs with the same identifier\r\n    in a single group on multiple lines. This will now move the sign instead.\r\n\r\nAll signs are now displayed by increasing sign identifier, left to right.\r\nExtmark signs used to be displayed decreasingly as opposed to legacy signs.\r\n\r\nTODO:\r\n- Add a new extmark property to have the mark removed when the line it is placed on is deleted to match the legacy sign behavior: https://github.com/neovim/neovim/pull/25767",
    "closed_at": null,
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1368366026"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1368366026"
                }
            },
            "author_association": "MEMBER",
            "body": "How much stuff would break if this was reduced to a single id (which would be incremented regardless if the sign is newly added or modified)? ",
            "commit_id": "1d99aa56832644f65dc073e70a35adea10dfd9cb",
            "created_at": "2023-10-23T09:16:53Z",
            "diff_hunk": "@@ -156,12 +159,16 @@ void extmark_set(buf_T *buf, uint32_t ns_id, uint32_t *idp, int row, colnr_T col\n       buf->b_virt_line_blocks++;\n     }\n     if (decor_has_sign(decor)) {\n+      if (revised) {\n+        decor->sign_mod_id = sign_add_id;\n+      }\n+      decor->sign_add_id = sign_add_id++;",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1368366026",
            "id": 1368366026,
            "line": 165,
            "node_id": "PRRC_kwDOAPphoM5Rj5vK",
            "original_commit_id": "33b91acbd1621ba64a6e7fa24ea17da8e6731f07",
            "original_line": 165,
            "original_position": 31,
            "original_start_line": 162,
            "path": "src/nvim/extmark.c",
            "position": 31,
            "pull_request_review_id": 1692073345,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1368366026/reactions"
            },
            "side": "RIGHT",
            "start_line": 162,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-10-23T09:16:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1368366026",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/25724#discussion_r1368493804"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/25724"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1368493804"
                }
            },
            "author_association": "MEMBER",
            "body": "Arguably not that much. When signs are first placed in the signlist, currently they are sorted by `lnum` -> `priority` -> `sign_id`. Then when modified, signs take precedence over other signs with the same `sign_id`, even if the priority didn't change. I.e. this function does not consider `sign_id`:\r\nhttps://github.com/neovim/neovim/blob/5e5f5174e3faa862a9bc353aa7da41487911140b/src/nvim/sign.c#L309-L312\r\n\r\nSeems rather arbitrary to me actually, but it is explicitly tested for here:\r\nhttps://github.com/neovim/neovim/blob/5e5f5174e3faa862a9bc353aa7da41487911140b/test/old/testdir/test_signs.vim#L1512-L1515",
            "commit_id": "1d99aa56832644f65dc073e70a35adea10dfd9cb",
            "created_at": "2023-10-23T11:06:41Z",
            "diff_hunk": "@@ -156,12 +159,16 @@ void extmark_set(buf_T *buf, uint32_t ns_id, uint32_t *idp, int row, colnr_T col\n       buf->b_virt_line_blocks++;\n     }\n     if (decor_has_sign(decor)) {\n+      if (revised) {\n+        decor->sign_mod_id = sign_add_id;\n+      }\n+      decor->sign_add_id = sign_add_id++;",
            "html_url": "https://github.com/neovim/neovim/pull/25724#discussion_r1368493804",
            "id": 1368493804,
            "in_reply_to_id": 1368366026,
            "line": 165,
            "node_id": "PRRC_kwDOAPphoM5RkY7s",
            "original_commit_id": "33b91acbd1621ba64a6e7fa24ea17da8e6731f07",
            "original_line": 165,
            "original_position": 31,
            "original_start_line": 162,
            "path": "src/nvim/extmark.c",
            "position": 31,
            "pull_request_review_id": 1692267924,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1368493804/reactions"
            },
            "side": "RIGHT",
            "start_line": 162,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-10-23T15:24:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1368493804",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "Good work. This looks awesome!",
            "created_at": "2023-10-20T19:40:45Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1773303073",
            "id": 1773303073,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5psnUh",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 1,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1773303073/reactions"
            },
            "updated_at": "2023-10-20T19:40:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1773303073",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I believe all issues related to sign ordering are now resolved. The few display tests of which I changed the expected result were modified to match the extmark sign order to legacy sign order when it is not determined by `priority` but by `sign id` (as discussed and suggested by @bfredl on matrix).\r\n\r\nThe remaining failing tests require a solution for extmark signs to match legacy behavior where deleted lines have their associated signs removed from the buffer.",
            "created_at": "2023-10-23T03:33:47Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1774377618",
            "id": 1774377618,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5pwtqS",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1774377618/reactions"
            },
            "updated_at": "2023-10-23T03:33:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1774377618",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Extmark signs will currently show up in `sign place group=*` and signs placed through the legacy commands will show up in `nvim_buf_get_extmarks()`. IMO it's not really a problem, more so a useful (unintended) consequence of this refactor. If anyone disagrees let me know and we can keep them segregated.",
            "created_at": "2023-10-23T03:44:40Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1774384429",
            "id": 1774384429,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5pwvUt",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1774384429/reactions"
            },
            "updated_at": "2023-10-23T03:44:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1774384429",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Add a new (public?) extmark property to have the mark removed when the line it is placed on is deleted to match the legacy sign behavior. Should fix the last remaining failing tests?\r\n\r\nI'm kind of stuck on this. First of all, do we want to keep sign deletion conditional on the value of [`'signcolumn'`](https://github.com/neovim/neovim/blob/94127cb5df0a513e66777d18a2c7fa6219404280/runtime/doc/options.txt#L5620-L5624)?\r\n\r\nDo we want it to be a publicly configurable property for all extmarks? Or can it simply be done implicitly for marks containing sign properties? And would looping over all marks in the deleted range and simply deleting when the flag is set/is a sign be fine? I think if done properly it would be handled somewhere in `marktree_splice()` but I'm not sure I would manage that.\r\n\r\nCan this note about undoing sign deletion be removed, or does this need to be maintained along with the behavior somehow? Signs (being extmarks) now move back upon undo'ing.\r\nhttps://github.com/neovim/neovim/blob/94127cb5df0a513e66777d18a2c7fa6219404280/runtime/doc/sign.txt#L80-L82",
            "created_at": "2023-10-23T17:45:12Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1775705749",
            "id": 1775705749,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5p1x6V",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1775705749/reactions"
            },
            "updated_at": "2023-10-23T17:58:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1775705749",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> First of all, do we want to keep sign deletion conditional on the value of 'signcolumn'?\n\nNo. I wasn't even aware it was conditional on the sign column until recently.\n\n> Do we want it to be a publicly configurable property for all extmarks?\n\nIdeally all marks. But if it makes it easier, you can add the logic internally and defer adding this to the public extmark API. I was thinking this could be added as `lifetime = 'buffer' | 'redraw'` and deprecate `ephemeral`.\n\n> And would looping over all marks in the deleted range and simply deleting when the flag is set/is a sign be fine? I think if done properly it would be handled somewhere in marktree_splice() but I'm not sure I would manage that.\n\nYes I believe so. Can't you just mimic the code for what we do for signs?\n\n> Can this note about undoing sign deletion be removed, or does this need to be maintained along with the behavior somehow? Signs (being extmarks) now move back upon undo'ing.\n\nIsn't that note superseded by the fact that signs are deleted when lines are removed?",
            "created_at": "2023-10-23T19:00:09Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1775840754",
            "id": 1775840754,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5p2S3y",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1775840754/reactions"
            },
            "updated_at": "2023-10-23T19:03:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1775840754",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Ideally all marks. But if it makes it easier, you can add the logic internally and defer adding this to the public extmark API. I was thinking this could be added as `lifetime = 'buffer' | 'redraw'` and deprecate `ephemeral`.\r\n\r\nAlright, I think I'll defer it for now then. Just need to keep in mind that whatever code I add now might become redundant whenever it is handled properly for all marks.\r\n\r\n> > And would looping over all marks in the deleted range and simply deleting when the flag is set/is a sign be fine? I think if done properly it would be handled somewhere in marktree_splice() but I'm not sure I would manage that.\r\n> \r\n> Yes I believe so. Can't you just mimic the code for what we do for signs?\r\n\r\nYeah this is no problem, and is what I had already implemented locally. I just believe its not idiomatic with the rest of the extmark adjusting code.\r\n\r\n> > Can this note about undoing sign deletion be removed, or does this need to be maintained along with the behavior somehow? Signs (being extmarks) now move back upon undo'ing.\r\n> \r\n> Isn't that note superseded by the fact that signs are deleted when lines are removed?\r\n\r\nCorrect. If we get rid of the conditional removal of signs and instead always remove them, this note is redundant all together.",
            "created_at": "2023-10-23T20:06:32Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1775938231",
            "id": 1775938231,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5p2qq3",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1775938231/reactions"
            },
            "updated_at": "2023-10-23T20:06:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1775938231",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> > > And would looping over all marks in the deleted range and simply deleting when the flag is set/is a sign be fine? I think if done properly it would be handled somewhere in marktree_splice() but I'm not sure I would manage that.\r\n> > \r\n> > \r\n> > Yes I believe so. Can't you just mimic the code for what we do for signs?\r\n> \r\n> Yeah this is no problem, and is what I had already implemented locally. I just believe its not idiomatic with the rest of the extmark adjusting code.\r\n\r\nHmm it does result in problems when joining lines. In `do_join()`, [`del_lines()`](https://github.com/neovim/neovim/blob/94127cb5df0a513e66777d18a2c7fa6219404280/src/nvim/ops.c#L4172C7-L4172C7) is called after extmarks have already been adjusted by [`extmark_splice()`](https://github.com/neovim/neovim/blob/94127cb5df0a513e66777d18a2c7fa6219404280/src/nvim/ops.c#L4172C7-L4172C7). This results in marks being deleted in lines succeeding the joined lines with my current implementation.\r\n\r\nI get the feeling deleting flagged marks should be handled while iterating in the splice routine. But TBH I haven't wrapped my head around what really happens in `extmark_splice()`. So IDK if I can manage that, or if my intuition is even correct.",
            "created_at": "2023-10-23T22:03:11Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1776092794",
            "id": 1776092794,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5p3QZ6",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1776092794/reactions"
            },
            "updated_at": "2023-10-24T11:46:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1776092794",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "OK found something that appears to work properly, also for joining lines. I guess I can take a stab at making a separate PR for the API change. @lewis6991 I didn't quite get how you wanted `lifetime` to work, `buffer|redraw` seem to me to be the current default mark lifetime and the lifetime for `ephemeral` marks. Were you suggesting we add those in addition to a third `lifetime` e.g. `line`, or am I missing something? Does https://github.com/neovim/neovim/pull/25767 look alright?",
            "created_at": "2023-10-24T01:54:43Z",
            "html_url": "https://github.com/neovim/neovim/pull/25724#issuecomment-1776361236",
            "id": 1776361236,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
            "node_id": "IC_kwDOAPphoM5p4R8U",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1776361236/reactions"
            },
            "updated_at": "2023-10-24T13:13:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1776361236",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/25724/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/25724/commits",
    "created_at": "2023-10-20T09:24:53Z",
    "diff_url": "https://github.com/neovim/neovim/pull/25724.diff",
    "draft": true,
    "head": {
        "label": "luukvbaal:signmerge",
        "ref": "signmerge",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/luukvbaal/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/luukvbaal/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/luukvbaal/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/luukvbaal/neovim/branches{/branch}",
            "clone_url": "https://github.com/luukvbaal/neovim.git",
            "collaborators_url": "https://api.github.com/repos/luukvbaal/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/luukvbaal/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/luukvbaal/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/luukvbaal/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/luukvbaal/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/luukvbaal/neovim/contributors",
            "created_at": "2022-07-05T23:21:47Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/luukvbaal/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/luukvbaal/neovim/downloads",
            "events_url": "https://api.github.com/repos/luukvbaal/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/luukvbaal/neovim/forks",
            "full_name": "luukvbaal/neovim",
            "git_commits_url": "https://api.github.com/repos/luukvbaal/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/luukvbaal/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/luukvbaal/neovim/git/tags{/sha}",
            "git_url": "git://github.com/luukvbaal/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/luukvbaal/neovim/hooks",
            "html_url": "https://github.com/luukvbaal/neovim",
            "id": 510922471,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/luukvbaal/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/luukvbaal/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/luukvbaal/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/luukvbaal/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/luukvbaal/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/luukvbaal/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/luukvbaal/neovim/merges",
            "milestones_url": "https://api.github.com/repos/luukvbaal/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "R_kgDOHnQO5w",
            "notifications_url": "https://api.github.com/repos/luukvbaal/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/luukvbaal/neovim/pulls{/number}",
            "pushed_at": "2023-10-25T23:10:20Z",
            "releases_url": "https://api.github.com/repos/luukvbaal/neovim/releases{/id}",
            "size": 251011,
            "ssh_url": "git@github.com:luukvbaal/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/luukvbaal/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/luukvbaal/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/luukvbaal/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/luukvbaal/neovim/subscription",
            "svn_url": "https://github.com/luukvbaal/neovim",
            "tags_url": "https://api.github.com/repos/luukvbaal/neovim/tags",
            "teams_url": "https://api.github.com/repos/luukvbaal/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/luukvbaal/neovim/git/trees{/sha}",
            "updated_at": "2022-09-14T02:39:38Z",
            "url": "https://api.github.com/repos/luukvbaal/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "1d99aa56832644f65dc073e70a35adea10dfd9cb",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
            "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
            "followers_url": "https://api.github.com/users/luukvbaal/followers",
            "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
            "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/luukvbaal",
            "id": 31730729,
            "login": "luukvbaal",
            "node_id": "MDQ6VXNlcjMxNzMwNzI5",
            "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
            "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
            "repos_url": "https://api.github.com/users/luukvbaal/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/luukvbaal"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/25724",
    "id": 1566338565,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25724",
    "labels": [
        {
            "color": "C5DEF5",
            "default": false,
            "description": "changes that are not features or bugfixes",
            "id": 106949155,
            "name": "refactor",
            "node_id": "MDU6TGFiZWwxMDY5NDkxNTU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/refactor"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "sign/number column",
            "id": 2962322085,
            "name": "column",
            "node_id": "MDU6TGFiZWwyOTYyMzIyMDg1",
            "url": "https://api.github.com/repos/neovim/neovim/labels/column"
        }
    ],
    "locked": false,
    "merge_commit_sha": "09fb9fb3ec0ad8f3508f9e14f901b30d76f6da9a",
    "merged_at": null,
    "milestone": null,
    "node_id": "PR_kwDOAPphoM5dXG4F",
    "number": 25724,
    "patch_url": "https://github.com/neovim/neovim/pull/25724.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/25724/comments",
    "state": "open",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/1d99aa56832644f65dc073e70a35adea10dfd9cb",
    "title": "refactor(sign): move legacy signs to extmarks",
    "updated_at": "2023-10-25T15:05:55Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/25724",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
        "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
        "followers_url": "https://api.github.com/users/luukvbaal/followers",
        "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
        "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/luukvbaal",
        "id": 31730729,
        "login": "luukvbaal",
        "node_id": "MDQ6VXNlcjMxNzMwNzI5",
        "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
        "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
        "repos_url": "https://api.github.com/users/luukvbaal/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/luukvbaal"
    }
}