{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/30999/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/30999/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/30999"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/30999"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/30999/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/30999"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/1de1ceda60221c7c2ba9ba1d244f429eda933ecb"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 5713,
            "forks_count": 5713,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1844,
            "open_issues_count": 1844,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2024-11-25T23:53:08Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 296619,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 83592,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2024-11-26T01:58:04Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 83592,
            "watchers_count": 83592,
            "web_commit_signoff_required": false
        },
        "sha": "b4599acbf8e30aa1234bc4041546f960dcc3a238",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim",
            "user_view_type": "public"
        }
    },
    "body": "Fix #30985\n",
    "closed_at": "2024-11-25T17:16:12Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30999#discussion_r1823337350"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30999"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1823337350"
                }
            },
            "author_association": "MEMBER",
            "body": "Instead of hardcoding the code here you should be adding it to protocol's error codes: https://github.com/neovim/neovim/blob/b4599acbf8e30aa1234bc4041546f960dcc3a238/runtime/lua/vim/lsp/protocol.lua#L163",
            "commit_id": "1de1ceda60221c7c2ba9ba1d244f429eda933ecb",
            "created_at": "2024-10-30T20:20:48Z",
            "diff_hunk": "@@ -306,11 +306,15 @@ end\n --- )\n --- ```\n ---\n----@param _ lsp.ResponseError?\n+---@param error lsp.ResponseError?\n ---@param result lsp.DocumentDiagnosticReport\n ---@param ctx lsp.HandlerContext\n ---@param config vim.diagnostic.Opts Configuration table (see |vim.diagnostic.config()|).\n-function M.on_diagnostic(_, result, ctx, config)\n+function M.on_diagnostic(error, result, ctx, config)\n+  -- Ignore ServerCancelled error\n+  if error ~= nil and error.code == -32802 then",
            "html_url": "https://github.com/neovim/neovim/pull/30999#discussion_r1823337350",
            "id": 1823337350,
            "line": null,
            "node_id": "PRRC_kwDOAPphoM5sreuG",
            "original_commit_id": "19b8289de9772b9c60b8480d6b32212551d30ef9",
            "original_line": 315,
            "original_position": 12,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp/diagnostic.lua",
            "position": null,
            "pull_request_review_id": 2406215977,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30999",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1823337350/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-10-30T20:24:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1823337350",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
                "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
                "followers_url": "https://api.github.com/users/MariaSolOs/followers",
                "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
                "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MariaSolOs",
                "id": 62502207,
                "login": "MariaSolOs",
                "node_id": "MDQ6VXNlcjYyNTAyMjA3",
                "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
                "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
                "repos_url": "https://api.github.com/users/MariaSolOs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MariaSolOs",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30999#discussion_r1824430758"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30999"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1824430758"
                }
            },
            "author_association": "MEMBER",
            "body": "Maybe an assertion that `client` isn’t nil is more appropriate?",
            "commit_id": "1de1ceda60221c7c2ba9ba1d244f429eda933ecb",
            "created_at": "2024-10-31T13:10:42Z",
            "diff_hunk": "@@ -306,11 +306,20 @@ end\n --- )\n --- ```\n ---\n----@param _ lsp.ResponseError?\n+---@param error lsp.ResponseError?\n ---@param result lsp.DocumentDiagnosticReport\n ---@param ctx lsp.HandlerContext\n ---@param config vim.diagnostic.Opts Configuration table (see |vim.diagnostic.config()|).\n-function M.on_diagnostic(_, result, ctx, config)\n+function M.on_diagnostic(error, result, ctx, config)\n+  if error ~= nil and error.code == protocol.ErrorCodes.ServerCancelled then\n+    if error.data == nil or error.data.retriggerRequest == true then\n+      local client = vim.lsp.get_client_by_id(ctx.client_id)\n+      if client ~= nil then",
            "html_url": "https://github.com/neovim/neovim/pull/30999#discussion_r1824430758",
            "id": 1824430758,
            "line": 317,
            "node_id": "PRRC_kwDOAPphoM5svpqm",
            "original_commit_id": "1de1ceda60221c7c2ba9ba1d244f429eda933ecb",
            "original_line": 317,
            "original_position": 14,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp/diagnostic.lua",
            "position": 14,
            "pull_request_review_id": 2407906684,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30999",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1824430758/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-10-31T13:10:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1824430758",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
                "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
                "followers_url": "https://api.github.com/users/MariaSolOs/followers",
                "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
                "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MariaSolOs",
                "id": 62502207,
                "login": "MariaSolOs",
                "node_id": "MDQ6VXNlcjYyNTAyMjA3",
                "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
                "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
                "repos_url": "https://api.github.com/users/MariaSolOs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MariaSolOs",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30999#discussion_r1851705415"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30999"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1851705415"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Not 100% sure but I think this should be:\r\n\r\n```suggestion\r\n        client:request(ctx.method, ctx.params)\r\n```\r\n\r\n- https://github.com/neovim/neovim/pull/31207",
            "commit_id": "1de1ceda60221c7c2ba9ba1d244f429eda933ecb",
            "created_at": "2024-11-21T09:49:07Z",
            "diff_hunk": "@@ -306,11 +306,20 @@ end\n --- )\n --- ```\n ---\n----@param _ lsp.ResponseError?\n+---@param error lsp.ResponseError?\n ---@param result lsp.DocumentDiagnosticReport\n ---@param ctx lsp.HandlerContext\n ---@param config vim.diagnostic.Opts Configuration table (see |vim.diagnostic.config()|).\n-function M.on_diagnostic(_, result, ctx, config)\n+function M.on_diagnostic(error, result, ctx, config)\n+  if error ~= nil and error.code == protocol.ErrorCodes.ServerCancelled then\n+    if error.data == nil or error.data.retriggerRequest == true then\n+      local client = vim.lsp.get_client_by_id(ctx.client_id)\n+      if client ~= nil then\n+        client.request(ctx.method, ctx.params)",
            "html_url": "https://github.com/neovim/neovim/pull/30999#discussion_r1851705415",
            "id": 1851705415,
            "line": 318,
            "node_id": "PRRC_kwDOAPphoM5uXshH",
            "original_commit_id": "1de1ceda60221c7c2ba9ba1d244f429eda933ecb",
            "original_line": 318,
            "original_position": 15,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp/diagnostic.lua",
            "position": 15,
            "pull_request_review_id": 2450812127,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30999",
            "reactions": {
                "+1": 3,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 3,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1851705415/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-11-21T09:51:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1851705415",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/177685?v=4",
                "events_url": "https://api.github.com/users/lithammer/events{/privacy}",
                "followers_url": "https://api.github.com/users/lithammer/followers",
                "following_url": "https://api.github.com/users/lithammer/following{/other_user}",
                "gists_url": "https://api.github.com/users/lithammer/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lithammer",
                "id": 177685,
                "login": "lithammer",
                "node_id": "MDQ6VXNlcjE3NzY4NQ==",
                "organizations_url": "https://api.github.com/users/lithammer/orgs",
                "received_events_url": "https://api.github.com/users/lithammer/received_events",
                "repos_url": "https://api.github.com/users/lithammer/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lithammer/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lithammer/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lithammer",
                "user_view_type": "public"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/30999#discussion_r1856920991"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/30999"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1856920991"
                }
            },
            "author_association": "MEMBER",
            "body": "Is it possible that between the first request being sent and the server cancellation being received that the client has exited? If so, silently failing when `client` is nil seems like the better approach I think.",
            "commit_id": "1de1ceda60221c7c2ba9ba1d244f429eda933ecb",
            "created_at": "2024-11-25T16:31:49Z",
            "diff_hunk": "@@ -306,11 +306,20 @@ end\n --- )\n --- ```\n ---\n----@param _ lsp.ResponseError?\n+---@param error lsp.ResponseError?\n ---@param result lsp.DocumentDiagnosticReport\n ---@param ctx lsp.HandlerContext\n ---@param config vim.diagnostic.Opts Configuration table (see |vim.diagnostic.config()|).\n-function M.on_diagnostic(_, result, ctx, config)\n+function M.on_diagnostic(error, result, ctx, config)\n+  if error ~= nil and error.code == protocol.ErrorCodes.ServerCancelled then\n+    if error.data == nil or error.data.retriggerRequest == true then\n+      local client = vim.lsp.get_client_by_id(ctx.client_id)\n+      if client ~= nil then",
            "html_url": "https://github.com/neovim/neovim/pull/30999#discussion_r1856920991",
            "id": 1856920991,
            "in_reply_to_id": 1824430758,
            "line": 317,
            "node_id": "PRRC_kwDOAPphoM5url2f",
            "original_commit_id": "1de1ceda60221c7c2ba9ba1d244f429eda933ecb",
            "original_line": 317,
            "original_position": 14,
            "original_start_line": null,
            "path": "runtime/lua/vim/lsp/diagnostic.lua",
            "position": 14,
            "pull_request_review_id": 2458946157,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/30999",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1856920991/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2024-11-25T16:31:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1856920991",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
                "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
                "followers_url": "https://api.github.com/users/gpanders/followers",
                "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
                "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/gpanders",
                "id": 8965202,
                "login": "gpanders",
                "node_id": "MDQ6VXNlcjg5NjUyMDI=",
                "organizations_url": "https://api.github.com/users/gpanders/orgs",
                "received_events_url": "https://api.github.com/users/gpanders/received_events",
                "repos_url": "https://api.github.com/users/gpanders/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/gpanders",
                "user_view_type": "public"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "I don't think this is the right fix. The LSP says that if the server sends this response we should look at the cancellation data and possibly retrigger the request: https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#diagnosticServerCancellationData. Kind of surprised that this isn't behind a client capability but this PR would be against what the protocol says we should do.\r\n\r\nBut even if we ignore the retriggering for now, I don't think we should check the code in the request handler but instead handle it here where we ignore `RequestCancelled` errors:\r\nhttps://github.com/neovim/neovim/blob/b4599acbf8e30aa1234bc4041546f960dcc3a238/runtime/lua/vim/lsp/rpc.lua#L471-L490",
            "created_at": "2024-10-30T20:24:25Z",
            "html_url": "https://github.com/neovim/neovim/pull/30999#issuecomment-2448300472",
            "id": 2448300472,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30999",
            "node_id": "IC_kwDOAPphoM6R7hm4",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2448300472/reactions"
            },
            "updated_at": "2024-10-30T20:24:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2448300472",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
                "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
                "followers_url": "https://api.github.com/users/MariaSolOs/followers",
                "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
                "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MariaSolOs",
                "id": 62502207,
                "login": "MariaSolOs",
                "node_id": "MDQ6VXNlcjYyNTAyMjA3",
                "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
                "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
                "repos_url": "https://api.github.com/users/MariaSolOs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MariaSolOs",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I went with handling the error in the request handler, because server-side cancellation is only defined for pull diagnostics (and semantic token requests, but that's behind a capability). The `RequestCancelled` error is for client-side cancellation, which is defined for all requests.\r\n\r\n(It's not behind a client capability, because the cancellation was introduced in the same version as pull diagnostics, which means there should be no clients that implement pull diagnostics but not server-side cancellation)",
            "created_at": "2024-10-30T20:48:02Z",
            "html_url": "https://github.com/neovim/neovim/pull/30999#issuecomment-2448345748",
            "id": 2448345748,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30999",
            "node_id": "IC_kwDOAPphoM6R7sqU",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2448345748/reactions"
            },
            "updated_at": "2024-10-30T20:48:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2448345748",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/22473248?v=4",
                "events_url": "https://api.github.com/users/Jesse-Bakker/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jesse-Bakker/followers",
                "following_url": "https://api.github.com/users/Jesse-Bakker/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jesse-Bakker/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jesse-Bakker",
                "id": 22473248,
                "login": "Jesse-Bakker",
                "node_id": "MDQ6VXNlcjIyNDczMjQ4",
                "organizations_url": "https://api.github.com/users/Jesse-Bakker/orgs",
                "received_events_url": "https://api.github.com/users/Jesse-Bakker/received_events",
                "repos_url": "https://api.github.com/users/Jesse-Bakker/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jesse-Bakker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jesse-Bakker/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jesse-Bakker",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Hey @Jesse-Bakker, it seems like a lot of people are still struggling with #30985. Are you having issues with this PR? Let us know and we can help :)",
            "created_at": "2024-11-21T00:47:56Z",
            "html_url": "https://github.com/neovim/neovim/pull/30999#issuecomment-2489837346",
            "id": 2489837346,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30999",
            "node_id": "IC_kwDOAPphoM6UZ-ci",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 1,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2489837346/reactions"
            },
            "updated_at": "2024-11-21T00:47:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2489837346",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
                "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
                "followers_url": "https://api.github.com/users/MariaSolOs/followers",
                "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
                "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MariaSolOs",
                "id": 62502207,
                "login": "MariaSolOs",
                "node_id": "MDQ6VXNlcjYyNTAyMjA3",
                "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
                "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
                "repos_url": "https://api.github.com/users/MariaSolOs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MariaSolOs",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": ">Kind of surprised that this isn't behind a client capability but this PR would be against what the protocol says we should do.\r\n\r\nExtra surprising since there is a `serverCancelSupport` field in [`SemanticTokensClientCapabilities`](https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#semanticTokensClientCapabilities) (which we set to `false`!)",
            "created_at": "2024-11-25T16:29:52Z",
            "html_url": "https://github.com/neovim/neovim/pull/30999#issuecomment-2498490316",
            "id": 2498490316,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30999",
            "node_id": "IC_kwDOAPphoM6U6-_M",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2498490316/reactions"
            },
            "updated_at": "2024-11-25T16:29:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2498490316",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
                "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
                "followers_url": "https://api.github.com/users/gpanders/followers",
                "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
                "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/gpanders",
                "id": 8965202,
                "login": "gpanders",
                "node_id": "MDQ6VXNlcjg5NjUyMDI=",
                "organizations_url": "https://api.github.com/users/gpanders/orgs",
                "received_events_url": "https://api.github.com/users/gpanders/received_events",
                "repos_url": "https://api.github.com/users/gpanders/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/gpanders",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Will continue this in https://github.com/neovim/neovim/pull/31345. Thank you @Jesse-Bakker for your contribution!",
            "created_at": "2024-11-25T17:16:12Z",
            "html_url": "https://github.com/neovim/neovim/pull/30999#issuecomment-2498595282",
            "id": 2498595282,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30999",
            "node_id": "IC_kwDOAPphoM6U7YnS",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 1,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2498595282/reactions"
            },
            "updated_at": "2024-11-25T17:16:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2498595282",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
                "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
                "followers_url": "https://api.github.com/users/gpanders/followers",
                "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
                "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/gpanders",
                "id": 8965202,
                "login": "gpanders",
                "node_id": "MDQ6VXNlcjg5NjUyMDI=",
                "organizations_url": "https://api.github.com/users/gpanders/orgs",
                "received_events_url": "https://api.github.com/users/gpanders/received_events",
                "repos_url": "https://api.github.com/users/gpanders/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/gpanders",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> > Kind of surprised that this isn't behind a client capability but this PR would be against what the protocol says we should do.\r\n> \r\n> Extra surprising since there is a `serverCancelSupport` field in [`SemanticTokensClientCapabilities`](https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#semanticTokensClientCapabilities) (which we set to `false`!)\r\n\r\nYeah this feels like a gap in the protocol.",
            "created_at": "2024-11-25T18:36:30Z",
            "html_url": "https://github.com/neovim/neovim/pull/30999#issuecomment-2498764343",
            "id": 2498764343,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30999",
            "node_id": "IC_kwDOAPphoM6U8B43",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2498764343/reactions"
            },
            "updated_at": "2024-11-25T18:36:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2498764343",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
                "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
                "followers_url": "https://api.github.com/users/MariaSolOs/followers",
                "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
                "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MariaSolOs",
                "id": 62502207,
                "login": "MariaSolOs",
                "node_id": "MDQ6VXNlcjYyNTAyMjA3",
                "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
                "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
                "repos_url": "https://api.github.com/users/MariaSolOs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MariaSolOs",
                "user_view_type": "public"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/30999/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/30999/commits",
    "created_at": "2024-10-30T19:10:01Z",
    "diff_url": "https://github.com/neovim/neovim/pull/30999.diff",
    "draft": true,
    "head": {
        "label": "Jesse-Bakker:diagnostic-cancel",
        "ref": "diagnostic-cancel",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/Jesse-Bakker/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/Jesse-Bakker/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/Jesse-Bakker/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/Jesse-Bakker/neovim/branches{/branch}",
            "clone_url": "https://github.com/Jesse-Bakker/neovim.git",
            "collaborators_url": "https://api.github.com/repos/Jesse-Bakker/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/Jesse-Bakker/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/Jesse-Bakker/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/Jesse-Bakker/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/Jesse-Bakker/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/Jesse-Bakker/neovim/contributors",
            "created_at": "2019-12-23T16:12:50Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/Jesse-Bakker/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/Jesse-Bakker/neovim/downloads",
            "events_url": "https://api.github.com/repos/Jesse-Bakker/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/Jesse-Bakker/neovim/forks",
            "full_name": "Jesse-Bakker/neovim",
            "git_commits_url": "https://api.github.com/repos/Jesse-Bakker/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/Jesse-Bakker/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/Jesse-Bakker/neovim/git/tags{/sha}",
            "git_url": "git://github.com/Jesse-Bakker/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/Jesse-Bakker/neovim/hooks",
            "html_url": "https://github.com/Jesse-Bakker/neovim",
            "id": 229784929,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/Jesse-Bakker/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/Jesse-Bakker/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/Jesse-Bakker/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/Jesse-Bakker/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/Jesse-Bakker/neovim/labels{/name}",
            "language": "Vim script",
            "languages_url": "https://api.github.com/repos/Jesse-Bakker/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/Jesse-Bakker/neovim/merges",
            "milestones_url": "https://api.github.com/repos/Jesse-Bakker/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkyMjk3ODQ5Mjk=",
            "notifications_url": "https://api.github.com/repos/Jesse-Bakker/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/22473248?v=4",
                "events_url": "https://api.github.com/users/Jesse-Bakker/events{/privacy}",
                "followers_url": "https://api.github.com/users/Jesse-Bakker/followers",
                "following_url": "https://api.github.com/users/Jesse-Bakker/following{/other_user}",
                "gists_url": "https://api.github.com/users/Jesse-Bakker/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Jesse-Bakker",
                "id": 22473248,
                "login": "Jesse-Bakker",
                "node_id": "MDQ6VXNlcjIyNDczMjQ4",
                "organizations_url": "https://api.github.com/users/Jesse-Bakker/orgs",
                "received_events_url": "https://api.github.com/users/Jesse-Bakker/received_events",
                "repos_url": "https://api.github.com/users/Jesse-Bakker/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Jesse-Bakker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Jesse-Bakker/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Jesse-Bakker",
                "user_view_type": "public"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/Jesse-Bakker/neovim/pulls{/number}",
            "pushed_at": "2024-10-30T21:21:11Z",
            "releases_url": "https://api.github.com/repos/Jesse-Bakker/neovim/releases{/id}",
            "size": 284756,
            "ssh_url": "git@github.com:Jesse-Bakker/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/Jesse-Bakker/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/Jesse-Bakker/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/Jesse-Bakker/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/Jesse-Bakker/neovim/subscription",
            "svn_url": "https://github.com/Jesse-Bakker/neovim",
            "tags_url": "https://api.github.com/repos/Jesse-Bakker/neovim/tags",
            "teams_url": "https://api.github.com/repos/Jesse-Bakker/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/Jesse-Bakker/neovim/git/trees{/sha}",
            "updated_at": "2020-07-05T17:31:56Z",
            "url": "https://api.github.com/repos/Jesse-Bakker/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "1de1ceda60221c7c2ba9ba1d244f429eda933ecb",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/22473248?v=4",
            "events_url": "https://api.github.com/users/Jesse-Bakker/events{/privacy}",
            "followers_url": "https://api.github.com/users/Jesse-Bakker/followers",
            "following_url": "https://api.github.com/users/Jesse-Bakker/following{/other_user}",
            "gists_url": "https://api.github.com/users/Jesse-Bakker/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/Jesse-Bakker",
            "id": 22473248,
            "login": "Jesse-Bakker",
            "node_id": "MDQ6VXNlcjIyNDczMjQ4",
            "organizations_url": "https://api.github.com/users/Jesse-Bakker/orgs",
            "received_events_url": "https://api.github.com/users/Jesse-Bakker/received_events",
            "repos_url": "https://api.github.com/users/Jesse-Bakker/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/Jesse-Bakker/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Jesse-Bakker/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/Jesse-Bakker",
            "user_view_type": "public"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/30999",
    "id": 2154791959,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30999",
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        },
        {
            "color": "0052CC",
            "default": false,
            "description": "",
            "id": 6959860626,
            "name": "ci:backport release-0.10",
            "node_id": "LA_kwDOAPphoM8AAAABntcLkg",
            "url": "https://api.github.com/repos/neovim/neovim/labels/ci:backport%20release-0.10"
        }
    ],
    "locked": false,
    "merge_commit_sha": null,
    "merged_at": null,
    "milestone": null,
    "node_id": "PR_kwDOAPphoM6Ab4QX",
    "number": 30999,
    "patch_url": "https://github.com/neovim/neovim/pull/30999.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/30999/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/1de1ceda60221c7c2ba9ba1d244f429eda933ecb",
    "title": "fix(lsp): Ignore ServerCancelled error when pulling lsp diagnostics",
    "updated_at": "2024-11-25T18:36:31Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/30999",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/22473248?v=4",
        "events_url": "https://api.github.com/users/Jesse-Bakker/events{/privacy}",
        "followers_url": "https://api.github.com/users/Jesse-Bakker/followers",
        "following_url": "https://api.github.com/users/Jesse-Bakker/following{/other_user}",
        "gists_url": "https://api.github.com/users/Jesse-Bakker/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Jesse-Bakker",
        "id": 22473248,
        "login": "Jesse-Bakker",
        "node_id": "MDQ6VXNlcjIyNDczMjQ4",
        "organizations_url": "https://api.github.com/users/Jesse-Bakker/orgs",
        "received_events_url": "https://api.github.com/users/Jesse-Bakker/received_events",
        "repos_url": "https://api.github.com/users/Jesse-Bakker/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Jesse-Bakker/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Jesse-Bakker/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Jesse-Bakker",
        "user_view_type": "public"
    }
}