{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/27348/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/27348/commits"
        },
        "html": {
            "href": "https://github.com/neovim/neovim/pull/27348"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/neovim/issues/27348"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/27348/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/neovim/pulls/27348"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/neovim/statuses/a090d43d61b5de1add5624fc55e4a9dead5b7ece"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/neovim/branches{/branch}",
            "clone_url": "https://github.com/neovim/neovim.git",
            "collaborators_url": "https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/neovim/contributors",
            "created_at": "2014-01-31T13:39:22Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/neovim/downloads",
            "events_url": "https://api.github.com/repos/neovim/neovim/events",
            "fork": false,
            "forks": 5201,
            "forks_count": 5201,
            "forks_url": "https://api.github.com/repos/neovim/neovim/forks",
            "full_name": "neovim/neovim",
            "git_commits_url": "https://api.github.com/repos/neovim/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/neovim/git/tags{/sha}",
            "git_url": "git://github.com/neovim/neovim.git",
            "has_discussions": true,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/neovim/neovim/hooks",
            "html_url": "https://github.com/neovim/neovim",
            "id": 16408992,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/neovim/labels{/name}",
            "language": "Vim Script",
            "languages_url": "https://api.github.com/repos/neovim/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/neovim/neovim/merges",
            "milestones_url": "https://api.github.com/repos/neovim/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==",
            "notifications_url": "https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}",
            "open_issues": 1728,
            "open_issues_count": 1728,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/neovim/pulls{/number}",
            "pushed_at": "2024-02-12T23:38:13Z",
            "releases_url": "https://api.github.com/repos/neovim/neovim/releases{/id}",
            "size": 252813,
            "ssh_url": "git@github.com:neovim/neovim.git",
            "stargazers_count": 73720,
            "stargazers_url": "https://api.github.com/repos/neovim/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/neovim/subscription",
            "svn_url": "https://github.com/neovim/neovim",
            "tags_url": "https://api.github.com/repos/neovim/neovim/tags",
            "teams_url": "https://api.github.com/repos/neovim/neovim/teams",
            "topics": [
                "api",
                "c",
                "lua",
                "neovim",
                "nvim",
                "text-editor",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/neovim/git/trees{/sha}",
            "updated_at": "2024-02-13T01:34:21Z",
            "url": "https://api.github.com/repos/neovim/neovim",
            "visibility": "public",
            "watchers": 73720,
            "watchers_count": 73720,
            "web_commit_signoff_required": false
        },
        "sha": "b3bda2f0438da44a0a74fd5d64d6eecdac98d691",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim"
        }
    },
    "body": "This fixes the crashing for:\r\n* https://github.com/neovim/neovim/issues/26980\r\n\r\nBut the other problems of  `ext_hlstate` as described in the issue are still there. Additionally, deleting a lot of lines like that gets very slow quickly, since it sends one message for each line deleted and the size of the message keeps growing.\r\n\r\nThe fix was done by determining the needed buffer space first, instead of trying to revert the effect of `prepare_call` if message does not fit. The previous code did not revert the full state, which caused corrupted messages to be sent. So, rather than trying to fix all of that, with fragile and hard to read code as a result, the code is now much simpler, although slightly slower.\r\n\r\nDuring testing of this, I also noticed another issue, the messagepack session used in the test were receiving corrupted data, and caused the tests to fail, even before the actual bug I intended to fix was observed. This happened already with `num_lines = 100` in the `does not hang when combining too many highlights`  test. That turned out to be caused by a bug in `lmpack_session_receive`, which did not take the start position into account when determinging the remaining message size.\r\n\r\nI also added a couple of extra tests for `ext_hlstate`, which did not seem to be properly tested elsewhere.",
    "closed_at": "2024-02-12T13:33:34Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/27348#discussion_r1485920851"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/27348"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1485920851"
                }
            },
            "author_association": "MEMBER",
            "body": "Hmm, this works as a quick fix, but it shouldn't be needed to pack things _twice_ to figure out the buffer sizing. we want to make it safe to just simply flush the buffer at any time and then mark that we are in a state where we cannot add more events (even arglists to the same event name) to the secondary buffer(s) needed to complete the large event.",
            "commit_id": "a090d43d61b5de1add5624fc55e4a9dead5b7ece",
            "created_at": "2024-02-12T09:32:28Z",
            "diff_hunk": "@@ -615,64 +642,42 @@ static bool prepare_call(UI *ui, const char *name)\n     mpack_str(buf, name, strlen(name));\n     data->nevents++;\n     data->ncalls = 1;\n-    return true;\n+    return;\n   }\n+}\n \n-  return false;\n+static void send_oversized_message(UIData *data)\n+{\n+  if (data->temp_buf) {\n+    size_t size = (size_t)(data->buf_wptr - data->temp_buf);\n+    WBuffer *buf = wstream_new_buffer(data->temp_buf, size, 1, xfree);\n+    rpc_write_raw(data->channel_id, buf);\n+    data->temp_buf = NULL;\n+    data->buf_wptr = data->buf;\n+    data->nevents_pos = NULL;\n+  }\n }\n \n /// Pushes data into UI.UIData, to be consumed later by remote_ui_flush().\n static void push_call(UI *ui, const char *name, Array args)\n {\n   UIData *data = ui->data;\n-  bool pending = data->nevents_pos;\n-  char *buf_pos_save = data->buf_wptr;\n-\n-  bool new_event = prepare_call(ui, name);\n \n   msgpack_packer pac;\n   data->pack_totlen = 0;\n-  data->buf_overflow = false;\n+  // First determine the needed size\n+  msgpack_packer_init(&pac, data, size_cb);\n+  msgpack_rpc_from_array(args, &pac);\n+  // Then send the actual message\n+  prepare_call(ui, name, data->pack_totlen);",
            "html_url": "https://github.com/neovim/neovim/pull/27348#discussion_r1485920851",
            "id": 1485920851,
            "line": 672,
            "node_id": "PRRC_kwDOAPphoM5YkVpT",
            "original_commit_id": "a090d43d61b5de1add5624fc55e4a9dead5b7ece",
            "original_line": 672,
            "original_position": 91,
            "original_start_line": 668,
            "path": "src/nvim/api/ui.c",
            "position": 91,
            "pull_request_review_id": 1874822061,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/27348",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1485920851/reactions"
            },
            "side": "RIGHT",
            "start_line": 668,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-02-12T09:32:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1485920851",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/27348#discussion_r1486015587"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/27348"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1486015587"
                }
            },
            "author_association": "CONTRIBUTOR",
            "body": "Well, the old version did actually pack twice with memcpy  if things did not fit too. This version just determines the size on the first pack and doesn't do any actual packing. So, the overhead is just shifted to be slightly more expensive in the normal case, and less expensive in the worst case. And while I haven't done any performance profiling, the cache misses probably dominate here, and with the cache filled at the second pass it will be much faster than the first pass. I personally care most about the worst-case performance, since that could show up as frame drops in Neovide, while the normal case is always fast enough by a huge margin to not matter at all for any practical purposes.\r\n\r\nIf anything is going to be changed, I think it should be to remove the allocation of extra buffers and flush on the fly. There's nothing in the RPC protocol that requires us to allocate buffers that big. We only need to know the number of array elements, the length of the strings and so on before writing them and never the complete byte size. The stream can be flushed any time, even in the middle of a string, therefore eliminating the need for additional buffering.\r\n\r\nBut that requires bigger changes for very little benefit and increased code complexity, unless the profiling data says it's a problem. Your suggestion also probably increases at least the code complexity and development time, which at least I don't have any extra to spare.\r\n\r\nFinally, all those micro-optimizations pales in comparison to the actual problem of sending `N(N+1) / 2` `hl_attr_define` events, where N is the number of deleted lines. That can be fixed to only require `N`, but even that's a waste for what I need. And that's why I rather spend my time working on an alternative for our use cases that doesn't need that. https://github.com/neovim/neovim/issues/23610#issuecomment-1929366416\r\n\r\n\r\n\r\n\r\n\r\n",
            "commit_id": "a090d43d61b5de1add5624fc55e4a9dead5b7ece",
            "created_at": "2024-02-12T10:51:29Z",
            "diff_hunk": "@@ -615,64 +642,42 @@ static bool prepare_call(UI *ui, const char *name)\n     mpack_str(buf, name, strlen(name));\n     data->nevents++;\n     data->ncalls = 1;\n-    return true;\n+    return;\n   }\n+}\n \n-  return false;\n+static void send_oversized_message(UIData *data)\n+{\n+  if (data->temp_buf) {\n+    size_t size = (size_t)(data->buf_wptr - data->temp_buf);\n+    WBuffer *buf = wstream_new_buffer(data->temp_buf, size, 1, xfree);\n+    rpc_write_raw(data->channel_id, buf);\n+    data->temp_buf = NULL;\n+    data->buf_wptr = data->buf;\n+    data->nevents_pos = NULL;\n+  }\n }\n \n /// Pushes data into UI.UIData, to be consumed later by remote_ui_flush().\n static void push_call(UI *ui, const char *name, Array args)\n {\n   UIData *data = ui->data;\n-  bool pending = data->nevents_pos;\n-  char *buf_pos_save = data->buf_wptr;\n-\n-  bool new_event = prepare_call(ui, name);\n \n   msgpack_packer pac;\n   data->pack_totlen = 0;\n-  data->buf_overflow = false;\n+  // First determine the needed size\n+  msgpack_packer_init(&pac, data, size_cb);\n+  msgpack_rpc_from_array(args, &pac);\n+  // Then send the actual message\n+  prepare_call(ui, name, data->pack_totlen);",
            "html_url": "https://github.com/neovim/neovim/pull/27348#discussion_r1486015587",
            "id": 1486015587,
            "in_reply_to_id": 1485920851,
            "line": 672,
            "node_id": "PRRC_kwDOAPphoM5Yksxj",
            "original_commit_id": "a090d43d61b5de1add5624fc55e4a9dead5b7ece",
            "original_line": 672,
            "original_position": 91,
            "original_start_line": 668,
            "path": "src/nvim/api/ui.c",
            "position": 91,
            "pull_request_review_id": 1874973864,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/27348",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1486015587/reactions"
            },
            "side": "RIGHT",
            "start_line": 668,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-02-12T10:51:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1486015587",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/neovim/pull/27348#discussion_r1486186177"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/27348"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/neovim/pulls/comments/1486186177"
                }
            },
            "author_association": "MEMBER",
            "body": "> If anything is going to be changed, I think it should be to remove the allocation of extra buffers and flush on the fly. There's nothing in the RPC protocol that requires us to allocate buffers that big. We only need to know the number of array elements, the length of the strings and so on before writing them and never the complete byte size. The stream can be flushed any time, even in the middle of a string, therefore eliminating the need for additional buffering.\r\n\r\nSure it is more something this I had in mind. I'd be happy to look at this myself, as I don't think this requires much extra complexity at all: we just need to represent the state where the \"ncalls\" value already has been flushed away, and thus it cannot be changed (and thus we need to start on a new `\"redraw\"` event for the next event, even with the same event name). Optimization should just be generally tuned to use medium sized buffers (and batching is then invoked when we can pack really small events into the _lagom_ sized buffer)\r\n\r\nThat being said, I'm fine with merging this as is as a stop-gap as-is, as it might take some time until I get into look at that and not crashing is of course priority one (especially with good testing, as you add).",
            "commit_id": "a090d43d61b5de1add5624fc55e4a9dead5b7ece",
            "created_at": "2024-02-12T13:32:37Z",
            "diff_hunk": "@@ -615,64 +642,42 @@ static bool prepare_call(UI *ui, const char *name)\n     mpack_str(buf, name, strlen(name));\n     data->nevents++;\n     data->ncalls = 1;\n-    return true;\n+    return;\n   }\n+}\n \n-  return false;\n+static void send_oversized_message(UIData *data)\n+{\n+  if (data->temp_buf) {\n+    size_t size = (size_t)(data->buf_wptr - data->temp_buf);\n+    WBuffer *buf = wstream_new_buffer(data->temp_buf, size, 1, xfree);\n+    rpc_write_raw(data->channel_id, buf);\n+    data->temp_buf = NULL;\n+    data->buf_wptr = data->buf;\n+    data->nevents_pos = NULL;\n+  }\n }\n \n /// Pushes data into UI.UIData, to be consumed later by remote_ui_flush().\n static void push_call(UI *ui, const char *name, Array args)\n {\n   UIData *data = ui->data;\n-  bool pending = data->nevents_pos;\n-  char *buf_pos_save = data->buf_wptr;\n-\n-  bool new_event = prepare_call(ui, name);\n \n   msgpack_packer pac;\n   data->pack_totlen = 0;\n-  data->buf_overflow = false;\n+  // First determine the needed size\n+  msgpack_packer_init(&pac, data, size_cb);\n+  msgpack_rpc_from_array(args, &pac);\n+  // Then send the actual message\n+  prepare_call(ui, name, data->pack_totlen);",
            "html_url": "https://github.com/neovim/neovim/pull/27348#discussion_r1486186177",
            "id": 1486186177,
            "in_reply_to_id": 1485920851,
            "line": 672,
            "node_id": "PRRC_kwDOAPphoM5YlWbB",
            "original_commit_id": "a090d43d61b5de1add5624fc55e4a9dead5b7ece",
            "original_line": 672,
            "original_position": 91,
            "original_start_line": 668,
            "path": "src/nvim/api/ui.c",
            "position": 91,
            "pull_request_review_id": 1875245062,
            "pull_request_url": "https://api.github.com/repos/neovim/neovim/pulls/27348",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1486186177/reactions"
            },
            "side": "RIGHT",
            "start_line": 668,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2024-02-12T13:32:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/pulls/comments/1486186177",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "`mpack` is a vendored dependency; if this is a bug, please consider PRing the fix upstream (https://github.com/libmpack/libmpack).",
            "created_at": "2024-02-05T14:50:12Z",
            "html_url": "https://github.com/neovim/neovim/pull/27348#issuecomment-1927174621",
            "id": 1927174621,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27348",
            "node_id": "IC_kwDOAPphoM5y3lnd",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1927174621/reactions"
            },
            "updated_at": "2024-02-05T14:50:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1927174621",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> `mpack` is a vendored dependency; if this is a bug, please consider PRing the fix upstream\r\n\r\nOk, I will look into that, the repo has not been updated in 6 years though. And there seem to be a lot of commits directly to it here, so I assumed it's unmaintained.",
            "created_at": "2024-02-05T15:03:13Z",
            "html_url": "https://github.com/neovim/neovim/pull/27348#issuecomment-1927205019",
            "id": 1927205019,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27348",
            "node_id": "IC_kwDOAPphoM5y3tCb",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1927205019/reactions"
            },
            "updated_at": "2024-02-05T15:03:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1927205019",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "The bug is actually in https://github.com/libmpack/libmpack-lua, which has been updated more recently.",
            "created_at": "2024-02-05T15:13:09Z",
            "html_url": "https://github.com/neovim/neovim/pull/27348#issuecomment-1927225485",
            "id": 1927225485,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27348",
            "node_id": "IC_kwDOAPphoM5y3yCN",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1927225485/reactions"
            },
            "updated_at": "2024-02-05T15:13:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1927225485",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Right, sorry, wrong link! So (parallel) PR would be welcome.",
            "created_at": "2024-02-05T15:17:15Z",
            "html_url": "https://github.com/neovim/neovim/pull/27348#issuecomment-1927234858",
            "id": 1927234858,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27348",
            "node_id": "IC_kwDOAPphoM5y30Uq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1927234858/reactions"
            },
            "updated_at": "2024-02-05T15:17:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1927234858",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Ok, I will try to create a failing test there first.",
            "created_at": "2024-02-05T15:23:28Z",
            "html_url": "https://github.com/neovim/neovim/pull/27348#issuecomment-1927248706",
            "id": 1927248706,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27348",
            "node_id": "IC_kwDOAPphoM5y33tC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1927248706/reactions"
            },
            "updated_at": "2024-02-05T15:23:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1927248706",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I created the upstream PR here https://github.com/libmpack/libmpack-lua/pull/33\r\n\r\nAnd also rebased this to make the fix exactly the same.",
            "created_at": "2024-02-05T23:08:54Z",
            "html_url": "https://github.com/neovim/neovim/pull/27348#issuecomment-1928468988",
            "id": 1928468988,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27348",
            "node_id": "IC_kwDOAPphoM5y8hn8",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 1,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1928468988/reactions"
            },
            "updated_at": "2024-02-05T23:08:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1928468988",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "* https://github.com/libmpack/libmpack-lua/pull/33 has been merged now",
            "created_at": "2024-02-06T12:11:30Z",
            "html_url": "https://github.com/neovim/neovim/pull/27348#issuecomment-1929392380",
            "id": 1929392380,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27348",
            "node_id": "IC_kwDOAPphoM5zADD8",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1929392380/reactions"
            },
            "updated_at": "2024-02-06T12:11:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1929392380",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Another Neovide issue that this fixes is this one\r\n* https://github.com/neovide/neovide/issues/2353\r\n\r\nIn that case the `ext_hlstate` messages don't get that huge, but the frequency of them probably causes the pipes to fill up, so Neovim starts to build bigger packets internally.\r\n\r\n@bfredl\r\nI this PR could be changed to something closer to the original implementation if needed. But we need to figure out exactly what needs to be restored, and guarantee that it doesn't break again if the implementation is changed. \r\n\r\nAt least `ncalls` and `ncalls_pos` were not restored properly before, but there might be other fields that need to be restored as well. I did try to restore those originally but due to the `libmpack-lua` bug I was never able to get it to work. And by the time that was fixed I had already implemented the current solution and did not feel like going back to the fragile old solution, which needed to keep track of internals across different functions.",
            "created_at": "2024-02-12T09:14:39Z",
            "html_url": "https://github.com/neovim/neovim/pull/27348#issuecomment-1938287273",
            "id": 1938287273,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27348",
            "node_id": "IC_kwDOAPphoM5zh-qp",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1938287273/reactions"
            },
            "updated_at": "2024-02-12T09:16:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1938287273",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/27348/comments",
    "commits_url": "https://api.github.com/repos/neovim/neovim/pulls/27348/commits",
    "created_at": "2024-02-05T14:38:10Z",
    "diff_url": "https://github.com/neovim/neovim/pull/27348.diff",
    "draft": false,
    "head": {
        "label": "fredizzimo:fsundvik/fix-ext-hlstate",
        "ref": "fsundvik/fix-ext-hlstate",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/fredizzimo/neovim/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/fredizzimo/neovim/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/fredizzimo/neovim/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/fredizzimo/neovim/branches{/branch}",
            "clone_url": "https://github.com/fredizzimo/neovim.git",
            "collaborators_url": "https://api.github.com/repos/fredizzimo/neovim/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/fredizzimo/neovim/comments{/number}",
            "commits_url": "https://api.github.com/repos/fredizzimo/neovim/commits{/sha}",
            "compare_url": "https://api.github.com/repos/fredizzimo/neovim/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/fredizzimo/neovim/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/fredizzimo/neovim/contributors",
            "created_at": "2021-07-09T10:07:26Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/fredizzimo/neovim/deployments",
            "description": "Vim-fork focused on extensibility and usability",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/fredizzimo/neovim/downloads",
            "events_url": "https://api.github.com/repos/fredizzimo/neovim/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/fredizzimo/neovim/forks",
            "full_name": "fredizzimo/neovim",
            "git_commits_url": "https://api.github.com/repos/fredizzimo/neovim/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/fredizzimo/neovim/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/fredizzimo/neovim/git/tags{/sha}",
            "git_url": "git://github.com/fredizzimo/neovim.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "https://neovim.io",
            "hooks_url": "https://api.github.com/repos/fredizzimo/neovim/hooks",
            "html_url": "https://github.com/fredizzimo/neovim",
            "id": 384397538,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/fredizzimo/neovim/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/fredizzimo/neovim/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/fredizzimo/neovim/issues{/number}",
            "keys_url": "https://api.github.com/repos/fredizzimo/neovim/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/fredizzimo/neovim/labels{/name}",
            "language": null,
            "languages_url": "https://api.github.com/repos/fredizzimo/neovim/languages",
            "license": {
                "key": "other",
                "name": "Other",
                "node_id": "MDc6TGljZW5zZTA=",
                "spdx_id": "NOASSERTION",
                "url": null
            },
            "merges_url": "https://api.github.com/repos/fredizzimo/neovim/merges",
            "milestones_url": "https://api.github.com/repos/fredizzimo/neovim/milestones{/number}",
            "mirror_url": null,
            "name": "neovim",
            "node_id": "MDEwOlJlcG9zaXRvcnkzODQzOTc1Mzg=",
            "notifications_url": "https://api.github.com/repos/fredizzimo/neovim/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
                "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
                "followers_url": "https://api.github.com/users/fredizzimo/followers",
                "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
                "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fredizzimo",
                "id": 9946255,
                "login": "fredizzimo",
                "node_id": "MDQ6VXNlcjk5NDYyNTU=",
                "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
                "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
                "repos_url": "https://api.github.com/users/fredizzimo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fredizzimo"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/fredizzimo/neovim/pulls{/number}",
            "pushed_at": "2024-02-10T05:36:17Z",
            "releases_url": "https://api.github.com/repos/fredizzimo/neovim/releases{/id}",
            "size": 247982,
            "ssh_url": "git@github.com:fredizzimo/neovim.git",
            "stargazers_count": 0,
            "stargazers_url": "https://api.github.com/repos/fredizzimo/neovim/stargazers",
            "statuses_url": "https://api.github.com/repos/fredizzimo/neovim/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/fredizzimo/neovim/subscribers",
            "subscription_url": "https://api.github.com/repos/fredizzimo/neovim/subscription",
            "svn_url": "https://github.com/fredizzimo/neovim",
            "tags_url": "https://api.github.com/repos/fredizzimo/neovim/tags",
            "teams_url": "https://api.github.com/repos/fredizzimo/neovim/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/fredizzimo/neovim/git/trees{/sha}",
            "updated_at": "2021-07-09T10:07:27Z",
            "url": "https://api.github.com/repos/fredizzimo/neovim",
            "visibility": "public",
            "watchers": 0,
            "watchers_count": 0,
            "web_commit_signoff_required": false
        },
        "sha": "a090d43d61b5de1add5624fc55e4a9dead5b7ece",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
            "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
            "followers_url": "https://api.github.com/users/fredizzimo/followers",
            "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
            "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/fredizzimo",
            "id": 9946255,
            "login": "fredizzimo",
            "node_id": "MDQ6VXNlcjk5NDYyNTU=",
            "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
            "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
            "repos_url": "https://api.github.com/users/fredizzimo/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/fredizzimo"
        }
    },
    "html_url": "https://github.com/neovim/neovim/pull/27348",
    "id": 1711825042,
    "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27348",
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": "libnvim, Nvim RPC API",
            "id": 103819671,
            "name": "api",
            "node_id": "MDU6TGFiZWwxMDM4MTk2NzE=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/api"
        },
        {
            "color": "c7def8",
            "default": false,
            "description": null,
            "id": 242522707,
            "name": "rpc",
            "node_id": "MDU6TGFiZWwyNDI1MjI3MDc=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/rpc"
        }
    ],
    "locked": false,
    "merge_commit_sha": "210ec3b7a94c64263703087163a957567ddf4224",
    "merged_at": "2024-02-12T13:33:34Z",
    "milestone": null,
    "node_id": "PR_kwDOAPphoM5mCGCS",
    "number": 27348,
    "patch_url": "https://github.com/neovim/neovim/pull/27348.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/neovim/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/neovim/pulls/27348/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/neovim/statuses/a090d43d61b5de1add5624fc55e4a9dead5b7ece",
    "title": "fix: crashes with large msgpack messages",
    "updated_at": "2024-02-12T13:33:49Z",
    "url": "https://api.github.com/repos/neovim/neovim/pulls/27348",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
        "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
        "followers_url": "https://api.github.com/users/fredizzimo/followers",
        "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
        "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/fredizzimo",
        "id": 9946255,
        "login": "fredizzimo",
        "node_id": "MDQ6VXNlcjk5NDYyNTU=",
        "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
        "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
        "repos_url": "https://api.github.com/users/fredizzimo/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/fredizzimo"
    }
}