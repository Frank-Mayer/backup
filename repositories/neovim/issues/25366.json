{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nI haven't updated neovim in a while and after doing so today I noticed that LSP hover windows look strange.\r\n\r\n![image](https://github.com/neovim/neovim/assets/85143381/65f3c010-e169-4203-919f-ba5aa48f05a4)\r\n\r\nAs a reference, this is what they looked like before:\r\n\r\n![image](https://github.com/neovim/neovim/assets/85143381/b2419396-2b47-4281-95db-55bae3540038)\r\n\r\nThere are visible code blocks in the title and highlighting in the description is lost. According to the screenshots in #25073 it should look much better than that.\r\n\r\nUsing a minimal `init.lua` with only [nvim-treesitter](https://github.com/nvim-treesitter/nvim-treesitter) installed (since I need the parsers), it looks like this:\r\n\r\n![image](https://github.com/neovim/neovim/assets/85143381/f1e13e50-cc56-4f9b-aadf-495ea1de4661)\r\n\n\n### Steps to reproduce using \"nvim -u minimal_init.lua\"\n\nI modified the `minimal_init.lua` a bit to include a colorscheme that doesn't hurt my eyes as well as a minimal [nvim-treesitter](https://github.com/nvim-treesitter/nvim-treesitter) setup for the Rust and Markdown parsers.\r\n\r\nOpening a Rust file and running `:lua vim.lsp.buf.hover()` on a symbol will open a floating window that looks worse than it did before.\r\n\r\nReverting to a commit before cfd4a9dfaf5fd900264a946ca33c4a4f26f66a49 \"fixes\" the issue.\r\n\r\n```lua\r\nvim.cmd.colorscheme(\"habamax\")\r\n\r\n--- CHANGE THESE\r\nlocal pattern = \"rust\"\r\nlocal cmd = { \"rustup\", \"run\", \"stable\", \"rust-analyzer\" }\r\n-- Add files/folders here that indicate the root of a project\r\nlocal root_markers = { \"Cargo.toml\" }\r\n-- Change to table with settings if required\r\nlocal settings = vim.empty_dict()\r\n\r\nvim.api.nvim_create_autocmd(\"FileType\", {\r\n  pattern = pattern,\r\n  callback = function(args)\r\n    local match = vim.fs.find(root_markers, { path = args.file, upward = true })[1]\r\n    local root_dir = match and vim.fn.fnamemodify(match, \":p:h\") or nil\r\n    vim.lsp.start({\r\n      name = \"bugged-ls\",\r\n      cmd = cmd,\r\n      root_dir = root_dir,\r\n      settings = settings\r\n    })\r\n  end\r\n})\r\n\r\nrequire(\"nvim-treesitter.configs\").setup({\r\n  ensure_installed = { \"rust\", \"markdown\" },\r\n  auto_install = true,\r\n  highlight = { enable = true },\r\n})\r\n```\n\n### Expected behavior\n\nThe highlighting should look better, or at least just as good, as before.\n\n### Neovim version (nvim -v)\n\nNVIM v0.10.0-dev-cfd4a9d installed via the flake provided in `contrib/`\n\n### Language server name/version\n\nrust-analyzer 1.72.1 (d5c2e9c 2023-09-13)\n\n### Operating system/version\n\nNixOS Unstable\n\n### Log file\n\n_No response_",
    "closed_at": "2023-09-25T17:42:25Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Yes, this is as intended, see https://github.com/neovim/neovim/pull/25073 (and `:h news`, which is required reading after every updated).\r\n\r\nLooks fine for me with the provided minimal init -- I suspect that NixOS is somehow preventing you from loading the now required parsers.",
            "created_at": "2023-09-25T17:42:25Z",
            "html_url": "https://github.com/neovim/neovim/issues/25366#issuecomment-1734197689",
            "id": 1734197689,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25366",
            "node_id": "IC_kwDOAPphoM5nXcG5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1734197689/reactions"
            },
            "updated_at": "2023-09-25T17:50:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1734197689",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "The only relevant info in `:h news` I can find for this is the following:\r\n\r\n```\r\nâ€¢ LSP hover and signature help now use Treesitter for highlighting of Markdown\r\n  content.\r\n  Note that syntax highlighting of code examples requires a matching parser\r\n  and may be affected by custom queries.\r\n```\r\n\r\nwhich isn't particularly helpful. I updated nvim-treesitter and all my parsers, am on the latest commit on master, tried removing the markdown parser from nvim-treesitter so I only have the one that ships with neovim, but it still looks like that. I don't know how NixOS would be at fault here, if anything it would be your flake. I tried copying the markdown parser from my neovim installation into `nvim-treesitter/parser/markdown.so` but it didn't change anything either, so I don't think it's a loading issue. I also tried [this](https://github.com/nvim-treesitter/nvim-treesitter/issues/4801#issuecomment-1564124267) which works, but looks even worse because now there's a bunch of empty space.\r\n\r\nThe screenshots in #25073 don't show the backticks or empty space either, so I can't imagine this is intended? If it is intended, is there any way to revert it back to how it looked before?",
            "created_at": "2023-09-25T19:25:42Z",
            "html_url": "https://github.com/neovim/neovim/issues/25366#issuecomment-1734335708",
            "id": 1734335708,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25366",
            "node_id": "IC_kwDOAPphoM5nX9zc",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1734335708/reactions"
            },
            "updated_at": "2023-09-25T19:25:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1734335708",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/85143381?v=4",
                "events_url": "https://api.github.com/users/AlphaKeks/events{/privacy}",
                "followers_url": "https://api.github.com/users/AlphaKeks/followers",
                "following_url": "https://api.github.com/users/AlphaKeks/following{/other_user}",
                "gists_url": "https://api.github.com/users/AlphaKeks/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/AlphaKeks",
                "id": 85143381,
                "login": "AlphaKeks",
                "node_id": "MDQ6VXNlcjg1MTQzMzgx",
                "organizations_url": "https://api.github.com/users/AlphaKeks/orgs",
                "received_events_url": "https://api.github.com/users/AlphaKeks/received_events",
                "repos_url": "https://api.github.com/users/AlphaKeks/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/AlphaKeks/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/AlphaKeks/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/AlphaKeks"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "It's intended (a current limitation of conceal that is actively being worked on).\n\nAnd reverting is trivial: just stick to the actual release.",
            "created_at": "2023-09-25T19:50:10Z",
            "html_url": "https://github.com/neovim/neovim/issues/25366#issuecomment-1734367494",
            "id": 1734367494,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25366",
            "node_id": "IC_kwDOAPphoM5nYFkG",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1734367494/reactions"
            },
            "updated_at": "2023-09-25T19:50:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1734367494",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "@clason is there a ticket that tracks concealing issue in LSP hover?",
            "created_at": "2024-03-30T03:23:59Z",
            "html_url": "https://github.com/neovim/neovim/issues/25366#issuecomment-2027895217",
            "id": 2027895217,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25366",
            "node_id": "IC_kwDOAPphoM543zmx",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2027895217/reactions"
            },
            "updated_at": "2024-03-30T03:23:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2027895217",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/26609879?v=4",
                "events_url": "https://api.github.com/users/ivanjermakov/events{/privacy}",
                "followers_url": "https://api.github.com/users/ivanjermakov/followers",
                "following_url": "https://api.github.com/users/ivanjermakov/following{/other_user}",
                "gists_url": "https://api.github.com/users/ivanjermakov/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ivanjermakov",
                "id": 26609879,
                "login": "ivanjermakov",
                "node_id": "MDQ6VXNlcjI2NjA5ODc5",
                "organizations_url": "https://api.github.com/users/ivanjermakov/orgs",
                "received_events_url": "https://api.github.com/users/ivanjermakov/received_events",
                "repos_url": "https://api.github.com/users/ivanjermakov/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ivanjermakov/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ivanjermakov/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ivanjermakov"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/25366/comments",
    "created_at": "2023-09-25T17:31:08Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/25366/events",
    "html_url": "https://github.com/neovim/neovim/issues/25366",
    "id": 1911980470,
    "labels": [
        {
            "color": "e6e6e6",
            "default": false,
            "description": "Issues that are closed as \"invalid\"",
            "id": 77997477,
            "name": "closed:invalid",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Nw==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/closed:invalid"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/25366/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM5x9oG2",
    "number": 25366,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/25366/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "not_planned",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/25366/timeline",
    "title": "LSP Hover highlighting regression?",
    "updated_at": "2024-03-30T03:24:00Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/25366",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/85143381?v=4",
        "events_url": "https://api.github.com/users/AlphaKeks/events{/privacy}",
        "followers_url": "https://api.github.com/users/AlphaKeks/followers",
        "following_url": "https://api.github.com/users/AlphaKeks/following{/other_user}",
        "gists_url": "https://api.github.com/users/AlphaKeks/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/AlphaKeks",
        "id": 85143381,
        "login": "AlphaKeks",
        "node_id": "MDQ6VXNlcjg1MTQzMzgx",
        "organizations_url": "https://api.github.com/users/AlphaKeks/orgs",
        "received_events_url": "https://api.github.com/users/AlphaKeks/received_events",
        "repos_url": "https://api.github.com/users/AlphaKeks/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/AlphaKeks/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/AlphaKeks/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/AlphaKeks"
    }
}