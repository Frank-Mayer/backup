{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nAfter tree-sitter commit https://github.com/tree-sitter/tree-sitter/commit/f1eecf9786a0c18fd659eb8b392f172f12e3b586, attempting to build `neovim` results in following error.\r\n\r\n```\r\n/usr/bin/ld: /tmp/ccBmSmO3.ltrans28.ltrans.o: in function `tslua_init':\r\n/home/main-builder/pkgwork/src/neovim/src/nvim/lua/treesitter.c:171:(.text+0x37c9): undefined reference to `ts_set_allocator'\r\ncollect2: error: ld returned 1 exit status\r\nmake[2]: *** [src/nvim/CMakeFiles/nvim_bin.dir/build.make:5150: bin/nvim] Error 1\r\nmake[2]: Leaving directory '/home/main-builder/pkgwork/src/neovim/build'\r\nmake[1]: *** [CMakeFiles/Makefile2:624: src/nvim/CMakeFiles/nvim_bin.dir/all] Error 2\r\nmake[1]: Leaving directory '/home/main-builder/pkgwork/src/neovim/build'\r\nmake: *** [Makefile:156: all] Error 2\r\n```\r\n\r\nChecking out the commit immediate before (https://github.com/tree-sitter/tree-sitter/commit/52d69790f36b96ecc1541f6106782ab12786f7cb) results in successful build.\n\n### Steps to reproduce\n\n1. clone, build, and install tree-sitter from https://github.com/tree-sitter/tree-sitter\r\n2. clone and attempt to build neovim\r\n\n\n### Expected behavior\n\nSuccessful build.\n\n### Neovim version (nvim -v)\n\na4b4442524\n\n### Vim (not Nvim) behaves the same?\n\nNot applicable\n\n### Operating system/version\n\nArch Linux\n\n### Terminal name/version\n\nNot applicable\n\n### $TERM environment variable\n\nNot applicable\n\n### Installation\n\nNot applicable / AUR",
    "closed_at": "2024-02-27T08:54:59Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "> Not applicable / AUR\r\n\r\nVery much applicable. You cannot pull in random (pre-release) versions of dependencies and expect them to build. (This is why distro nightly builds are not supported. Go and complain to the AUR.)",
            "created_at": "2024-02-27T08:54:59Z",
            "html_url": "https://github.com/neovim/neovim/issues/27640#issuecomment-1966067216",
            "id": 1966067216,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27640",
            "node_id": "IC_kwDOAPphoM51L84Q",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1966067216/reactions"
            },
            "updated_at": "2024-02-27T08:54:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1966067216",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "Hi @clason. Please don't take this personally. Neovim nightly wouldn't start due to a treesitter error and I wasn't sure if it was I doing something wrong, or a problem with building the AUR package, or maybe a bug in Neovim that no one had noticed yet. Not fully understanding how to build packages at all, I asked the team responsible for the Archlinux chaotic-aur repository for help, and @xiota offered to help, hence this issue. I know that nightly versions have no support. I thought it might be something important for the project.",
            "created_at": "2024-02-27T11:31:22Z",
            "html_url": "https://github.com/neovim/neovim/issues/27640#issuecomment-1966347595",
            "id": 1966347595,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27640",
            "node_id": "IC_kwDOAPphoM51NBVL",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1966347595/reactions"
            },
            "updated_at": "2024-02-27T11:31:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1966347595",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/44477799?v=4",
                "events_url": "https://api.github.com/users/roland-5/events{/privacy}",
                "followers_url": "https://api.github.com/users/roland-5/followers",
                "following_url": "https://api.github.com/users/roland-5/following{/other_user}",
                "gists_url": "https://api.github.com/users/roland-5/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/roland-5",
                "id": 44477799,
                "login": "roland-5",
                "node_id": "MDQ6VXNlcjQ0NDc3Nzk5",
                "organizations_url": "https://api.github.com/users/roland-5/orgs",
                "received_events_url": "https://api.github.com/users/roland-5/received_events",
                "repos_url": "https://api.github.com/users/roland-5/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/roland-5/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/roland-5/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/roland-5"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I'm not taking it personally, but I want to be very clear that this kind of issue is not appropriate here -- so that there won't be any confusion about where to open such issues in the future.\r\n\r\nIn brief, a build failure is only a valid issue if\r\n1. it contains explicit, complete, step-by-step descriptions on how the build was done and\r\n2. these steps use `git clone neovim`, `make distclean`, and `make`.\r\n\r\nIf the build is mediated by distro scripts, any failure is a distro issue and has to be reported there (only, or first if it turns out that a **supported** option to build with **valid** external dependencies fails using **our** build scripts as well. (Such a report would indeed be welcome.)\r\n\r\n\r\n(P.S.: I tried an official build with current tree-sitter HEAD, and that worked fine. So there must be some sort of header mismatch in the OP's build environment.)",
            "created_at": "2024-02-27T11:54:58Z",
            "html_url": "https://github.com/neovim/neovim/issues/27640#issuecomment-1966383878",
            "id": 1966383878,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27640",
            "node_id": "IC_kwDOAPphoM51NKMG",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1966383878/reactions"
            },
            "updated_at": "2024-02-27T11:55:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1966383878",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "I will remember this. Thank you for explanation.",
            "created_at": "2024-02-27T12:03:40Z",
            "html_url": "https://github.com/neovim/neovim/issues/27640#issuecomment-1966397603",
            "id": 1966397603,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27640",
            "node_id": "IC_kwDOAPphoM51NNij",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1966397603/reactions"
            },
            "updated_at": "2024-02-27T12:03:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1966397603",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/44477799?v=4",
                "events_url": "https://api.github.com/users/roland-5/events{/privacy}",
                "followers_url": "https://api.github.com/users/roland-5/followers",
                "following_url": "https://api.github.com/users/roland-5/following{/other_user}",
                "gists_url": "https://api.github.com/users/roland-5/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/roland-5",
                "id": 44477799,
                "login": "roland-5",
                "node_id": "MDQ6VXNlcjQ0NDc3Nzk5",
                "organizations_url": "https://api.github.com/users/roland-5/orgs",
                "received_events_url": "https://api.github.com/users/roland-5/received_events",
                "repos_url": "https://api.github.com/users/roland-5/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/roland-5/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/roland-5/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/roland-5"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "This seems to be a bug in tree-sitter. It doesn't set correct visibility for `ts_set_allocator`.",
            "created_at": "2024-02-27T12:51:47Z",
            "html_url": "https://github.com/neovim/neovim/issues/27640#issuecomment-1966479094",
            "id": 1966479094,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27640",
            "node_id": "IC_kwDOAPphoM51Nhb2",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1966479094/reactions"
            },
            "updated_at": "2024-02-27T14:10:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1966479094",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Reported at https://github.com/tree-sitter/tree-sitter/issues/3091",
            "created_at": "2024-02-27T13:03:43Z",
            "html_url": "https://github.com/neovim/neovim/issues/27640#issuecomment-1966502544",
            "id": 1966502544,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27640",
            "node_id": "IC_kwDOAPphoM51NnKQ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 2,
                "total_count": 4,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1966502544/reactions"
            },
            "updated_at": "2024-02-27T13:03:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1966502544",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        }
    ],
    "comments": 6,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/27640/comments",
    "created_at": "2024-02-27T03:22:39Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/27640/events",
    "html_url": "https://github.com/neovim/neovim/issues/27640",
    "id": 2155569568,
    "labels": [
        {
            "color": "e6e6e6",
            "default": false,
            "description": "Issues that are closed as \"invalid\"",
            "id": 77997477,
            "name": "closed:invalid",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Nw==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/closed:invalid"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "building and installing Neovim using the provided scripts",
            "id": 84723321,
            "name": "build",
            "node_id": "MDU6TGFiZWw4NDcyMzMyMQ==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/build"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "build dependencies (LuaJIT, LibUV, etc.)",
            "id": 1205400704,
            "name": "dependencies",
            "node_id": "MDU6TGFiZWwxMjA1NDAwNzA0",
            "url": "https://api.github.com/repos/neovim/neovim/labels/dependencies"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/27640/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6Ae2Gg",
    "number": 27640,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 4,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 4,
        "url": "https://api.github.com/repos/neovim/neovim/issues/27640/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "not_planned",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/27640/timeline",
    "title": "undefined reference to ts_set_allocator",
    "updated_at": "2024-02-27T14:10:32Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/27640",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8353098?v=4",
        "events_url": "https://api.github.com/users/xiota/events{/privacy}",
        "followers_url": "https://api.github.com/users/xiota/followers",
        "following_url": "https://api.github.com/users/xiota/following{/other_user}",
        "gists_url": "https://api.github.com/users/xiota/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/xiota",
        "id": 8353098,
        "login": "xiota",
        "node_id": "MDQ6VXNlcjgzNTMwOTg=",
        "organizations_url": "https://api.github.com/users/xiota/orgs",
        "received_events_url": "https://api.github.com/users/xiota/received_events",
        "repos_url": "https://api.github.com/users/xiota/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/xiota/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/xiota/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/xiota"
    }
}