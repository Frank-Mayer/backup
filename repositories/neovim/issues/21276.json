{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "\r\n\r\n## Feature description\r\n\r\nVS Code uses a `untitled://` URI scheme for the LSP to enable language servers to know if a file is written to disk or not so that functionality can change if certain operations only work if the file is written to disk.  An example of this is the ESLint language server:\r\n\r\nhttps://github.com/microsoft/vscode-eslint/blob/415526ff31aeb866298514384ad401f2e4d841f5/server/src/eslint.ts#L1057\r\n\r\nThis came up recently in a pull request I opened in the vscode-eslint project (home of the ESLint language server) where I added some additional code to handle if a file does not exist since Neovim does not implement the same `untitled` URI scheme concept that VS Code does.\r\n\r\nhttps://github.com/microsoft/vscode-eslint/pull/1560\r\n\r\nIn that PR, the maintainer said this:\r\n\r\n> That could lead to strange behavior since the path is used to determine the eslint config file to use.\r\n> \r\n> IMO catching the exception is not the right approach for this since there are other cases in the code that check for untitled. IMO we should allow the client to announce the untitled scheme and then make the server behave correctly and Neovim should choose the scheme of its liking for unsaved files.\r\n\r\nSo, with all that context, I wanted to bring up this topic here to understand more about the Neovim maintainers thoughts about the `untitled` URI scheme, is it possible, what are the pros/cons of the approach, etc.",
    "closed_at": "2023-07-17T20:06:10Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "from https://github.com/microsoft/vscode-eslint/pull/1560 :\r\n\r\n> The URI that Neovim provides uses the `file` scheme regardless of if the file is written to disk or not.\r\n\r\nIs there actually a reason we need to do that, or it's just an accident? If the LSP protocol expects  `untitled://` for _every_ never-saved buffer I don't see why Nvim lsp client couldn't do that...",
            "created_at": "2022-12-04T01:56:45Z",
            "html_url": "https://github.com/neovim/neovim/issues/21276#issuecomment-1336299229",
            "id": 1336299229,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21276",
            "node_id": "IC_kwDOAPphoM5Ppk7d",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1336299229/reactions"
            },
            "updated_at": "2022-12-04T01:59:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1336299229",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "So, regarding the LSP spec, it doesn't seem to indicate that `untitled` is \"official\", but it is mentioned several times in the comments of the spec:\r\n\r\n- https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#documentFilter\r\n- https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#notebookDocumentFilter\r\n- https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#fileOperationFilter\r\n\r\n> A Uri [scheme](#Uri.scheme), like `file` or `untitled`.\r\n\r\nAdditionally, I've seen reference to this in the `gopls` language server, though that seems to be more or less a direct copy of the comments from the LSP spec, as I was unable to find an actual use of the `untitled` URI scheme in the source of gopls itself.\r\n\r\nhttps://github.com/golang/tools/blob/f718365b8d687e81808426c2c5eb05c404bd9491/gopls/internal/lsp/protocol/tsprotocol.go#L1886\r\n\r\n> Is there actually a reason we need to do that, or it's just an accident? If the LSP protocol expects untitled:// for every never-saved buffer I don't see why Nvim lsp client couldn't do that...\r\n\r\nNot sure to be honest, I guess I don't really know enough about the nvim LSP internals to understand a) if it's even possible or b) if it makes sense in the context of nvim.  For my use case of using the ESLint language server I think it would help, my main question is would it somehow have unintended side effects ðŸ¤· ",
            "created_at": "2022-12-04T04:03:45Z",
            "html_url": "https://github.com/neovim/neovim/issues/21276#issuecomment-1336315315",
            "id": 1336315315,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21276",
            "node_id": "IC_kwDOAPphoM5Ppo2z",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1336315315/reactions"
            },
            "updated_at": "2022-12-04T04:03:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1336315315",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/25914066?v=4",
                "events_url": "https://api.github.com/users/mskelton/events{/privacy}",
                "followers_url": "https://api.github.com/users/mskelton/followers",
                "following_url": "https://api.github.com/users/mskelton/following{/other_user}",
                "gists_url": "https://api.github.com/users/mskelton/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mskelton",
                "id": 25914066,
                "login": "mskelton",
                "node_id": "MDQ6VXNlcjI1OTE0MDY2",
                "organizations_url": "https://api.github.com/users/mskelton/orgs",
                "received_events_url": "https://api.github.com/users/mskelton/received_events",
                "repos_url": "https://api.github.com/users/mskelton/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mskelton/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mskelton/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mskelton"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I think it would be worth creating an issue in the language-server-protocol repository and ask about clarification if clients should use the `untitled` scheme if a file doesn't exist on disk. To me it seems currently kinda undefined, or at least not explicit enough if they are supposed to do that.\r\n\r\nThere are a couple of language servers which currently don't work well when neovim sends a `didOpen` event for files which don't exist (like eclipse.jdt.ls), while others work well",
            "created_at": "2022-12-04T14:07:22Z",
            "html_url": "https://github.com/neovim/neovim/issues/21276#issuecomment-1336420793",
            "id": 1336420793,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21276",
            "node_id": "IC_kwDOAPphoM5PqCm5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1336420793/reactions"
            },
            "updated_at": "2022-12-04T14:07:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1336420793",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38700?v=4",
                "events_url": "https://api.github.com/users/mfussenegger/events{/privacy}",
                "followers_url": "https://api.github.com/users/mfussenegger/followers",
                "following_url": "https://api.github.com/users/mfussenegger/following{/other_user}",
                "gists_url": "https://api.github.com/users/mfussenegger/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mfussenegger",
                "id": 38700,
                "login": "mfussenegger",
                "node_id": "MDQ6VXNlcjM4NzAw",
                "organizations_url": "https://api.github.com/users/mfussenegger/orgs",
                "received_events_url": "https://api.github.com/users/mfussenegger/received_events",
                "repos_url": "https://api.github.com/users/mfussenegger/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mfussenegger/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mfussenegger/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mfussenegger"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I found this issue in the LSP specification repo:\r\n\r\nhttps://github.com/microsoft/language-server-protocol/issues/1030#issuecomment-661869686\r\n\r\n> Isn't that the same as the untitled:Untitled-1 that is used by vscode?\r\n\r\n> Yes, but it is not as a standard in the spec so it might depend on how every client implements this.",
            "created_at": "2022-12-04T15:32:36Z",
            "html_url": "https://github.com/neovim/neovim/issues/21276#issuecomment-1336441202",
            "id": 1336441202,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21276",
            "node_id": "IC_kwDOAPphoM5PqHly",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1336441202/reactions"
            },
            "updated_at": "2022-12-04T15:32:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1336441202",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/25914066?v=4",
                "events_url": "https://api.github.com/users/mskelton/events{/privacy}",
                "followers_url": "https://api.github.com/users/mskelton/followers",
                "following_url": "https://api.github.com/users/mskelton/following{/other_user}",
                "gists_url": "https://api.github.com/users/mskelton/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mskelton",
                "id": 25914066,
                "login": "mskelton",
                "node_id": "MDQ6VXNlcjI1OTE0MDY2",
                "organizations_url": "https://api.github.com/users/mskelton/orgs",
                "received_events_url": "https://api.github.com/users/mskelton/received_events",
                "repos_url": "https://api.github.com/users/mskelton/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mskelton/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mskelton/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mskelton"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "https://github.com/microsoft/language-server-protocol/issues/1676",
            "created_at": "2023-02-19T06:06:10Z",
            "html_url": "https://github.com/neovim/neovim/issues/21276#issuecomment-1435902393",
            "id": 1435902393,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21276",
            "node_id": "IC_kwDOAPphoM5VliG5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1435902393/reactions"
            },
            "updated_at": "2023-02-19T06:06:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1435902393",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/25914066?v=4",
                "events_url": "https://api.github.com/users/mskelton/events{/privacy}",
                "followers_url": "https://api.github.com/users/mskelton/followers",
                "following_url": "https://api.github.com/users/mskelton/following{/other_user}",
                "gists_url": "https://api.github.com/users/mskelton/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mskelton",
                "id": 25914066,
                "login": "mskelton",
                "node_id": "MDQ6VXNlcjI1OTE0MDY2",
                "organizations_url": "https://api.github.com/users/mskelton/orgs",
                "received_events_url": "https://api.github.com/users/mskelton/received_events",
                "repos_url": "https://api.github.com/users/mskelton/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mskelton/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mskelton/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mskelton"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Conclusion from https://github.com/microsoft/language-server-protocol/issues/1676 : \r\n\r\n- Clients should use not use `file:` scheme for in-memory buffers.\r\n    - The choice of client-defined, though [language-server-protocol/#1030](https://github.com/microsoft/language-server-protocol/issues/1030) is requesting it to be defined in LSP.\r\n- If the file for an existing buffer gets deleted, the behavior is undefined. But it's suggested to \"not change the URI to an in memory URI since editors usually allow users to save the file again on disk\".\r\n    - Caveat: servers  (example: eslint) may crash if we call `textDocument/didOpen` with `file:` scheme for a non-existent file.\r\n\r\n\r\n",
            "created_at": "2023-07-17T21:00:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/21276#issuecomment-1638874789",
            "id": 1638874789,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21276",
            "node_id": "IC_kwDOAPphoM5hrz6l",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1638874789/reactions"
            },
            "updated_at": "2023-07-17T21:00:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1638874789",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        }
    ],
    "comments": 6,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/21276/comments",
    "created_at": "2022-12-03T21:13:16Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/21276/events",
    "html_url": "https://github.com/neovim/neovim/issues/21276",
    "id": 1474237523,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/21276/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 562,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk"
        },
        "description": "Low priority. Not planned for the current target, may be reassigned.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 411,
        "state": "open",
        "title": "backlog",
        "updated_at": "2023-07-17T20:06:10Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM5X3xRT",
    "number": 21276,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/21276/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/21276/timeline",
    "title": "LSP untitled:// URI scheme",
    "updated_at": "2023-07-17T21:01:25Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/21276",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/25914066?v=4",
        "events_url": "https://api.github.com/users/mskelton/events{/privacy}",
        "followers_url": "https://api.github.com/users/mskelton/followers",
        "following_url": "https://api.github.com/users/mskelton/following{/other_user}",
        "gists_url": "https://api.github.com/users/mskelton/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/mskelton",
        "id": 25914066,
        "login": "mskelton",
        "node_id": "MDQ6VXNlcjI1OTE0MDY2",
        "organizations_url": "https://api.github.com/users/mskelton/orgs",
        "received_events_url": "https://api.github.com/users/mskelton/received_events",
        "repos_url": "https://api.github.com/users/mskelton/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/mskelton/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mskelton/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/mskelton"
    }
}