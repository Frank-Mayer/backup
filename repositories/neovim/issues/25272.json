{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "### Problem\r\n\r\n`vim.lsp.util` is a dumpster that needs to be cleaned up. This process has already been started in #25073. But the pruning must continue.\r\n\r\nThis is a tracking issue for _substantially_ reducing the size and scope of `vim.lsp.util`. Ideally, it will be removed completely (deprecated first, of course, and removed in a future release).\r\n\r\nIn particular, new homes should be found for:\r\n\r\n* `_normalize_markdown`\r\n  - This should be made public, but not under `vim.lsp.util`. TBD on the correct namespace for this\r\n* `open_floating_preview`\r\n  - This is a useful utility function for easily creating floats, but it tries to do too much and has become over engineered. Move this to `vim.ui.open_float`.\r\n* `make_floating_popup_options`\r\n  - This should just be part of `vim.ui.open_float`. Deprecate.\r\n* `_make_floating_popup_size`\r\n  - Same as above.\r\n* `_str_utfindex_enc` and `_str_byteindex_enc`\r\n  - These are advertised as \"convenience wrappers\" around `vim.str_utfindex` and `vim.str_byteindex`, respectively. Consider updating those functions to accept an encoding instead.\r\n* `set_lines`\r\n  - I don't see any usages of this in our own code. This should be deprecated and deleted. Plugins can do this themselves, it is not that hard, and we don't need to provide little utility functions for every possible thing that can be done.\r\n* `apply_text_edits`\r\n  - Can this be moved to e.g. `vim.lsp.buf`? @mfussenegger \r\n* `_get_completion_item_kind_name`\r\n  - This is a one line function. Why is this needed? Can it be inlined/deleted? @mfussenegger \r\n* `text_document_completion_list_to_complete_items`\r\n  - The name alone suggests this is a special purpose function and doesn't belong in \"util\". Is there a more appropriate location? \r\n* `stylize_markdown`\r\n  - Deprecate once `normalize_markdown` is public and `vim.ui.open_float` exists. At that point this is no longer needed or necessary.\r\n\r\nThe list above is non-exhaustive, it may be updated with new items as the effort progresses.",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "[`try_trim_markdown_code_blocks`](https://github.com/MariaSolOs/neovim/blob/23c21e763074d401e8b36a91e6568bebc1655ce9/runtime/lua/vim/lsp/util.lua#L1996) also feels like an utility function that we should get rid of.",
            "created_at": "2023-09-20T23:39:06Z",
            "html_url": "https://github.com/neovim/neovim/issues/25272#issuecomment-1728558527",
            "id": 1728558527,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25272",
            "node_id": "IC_kwDOAPphoM5nB7W_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1728558527/reactions"
            },
            "updated_at": "2023-09-20T23:39:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1728558527",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
                "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
                "followers_url": "https://api.github.com/users/MariaSolOs/followers",
                "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
                "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MariaSolOs",
                "id": 62502207,
                "login": "MariaSolOs",
                "node_id": "MDQ6VXNlcjYyNTAyMjA3",
                "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
                "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
                "repos_url": "https://api.github.com/users/MariaSolOs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MariaSolOs"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/25272/comments",
    "created_at": "2023-09-20T20:46:03Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/25272/events",
    "html_url": "https://github.com/neovim/neovim/issues/25272",
    "id": 1905695507,
    "labels": [
        {
            "color": "C5DEF5",
            "default": false,
            "description": "changes that are not features or bugfixes",
            "id": 106949155,
            "name": "refactor",
            "node_id": "MDU6TGFiZWwxMDY5NDkxNTU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/refactor"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/25272/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM5xlpsT",
    "number": 25272,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 3,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 3,
        "url": "https://api.github.com/repos/neovim/neovim/issues/25272/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/25272/timeline",
    "title": "The culling of vim.lsp.util",
    "updated_at": "2023-09-20T23:39:06Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/25272",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
        "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
        "followers_url": "https://api.github.com/users/gpanders/followers",
        "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
        "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/gpanders",
        "id": 8965202,
        "login": "gpanders",
        "node_id": "MDQ6VXNlcjg5NjUyMDI=",
        "organizations_url": "https://api.github.com/users/gpanders/orgs",
        "received_events_url": "https://api.github.com/users/gpanders/received_events",
        "repos_url": "https://api.github.com/users/gpanders/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/gpanders"
    }
}