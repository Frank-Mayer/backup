{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\n`g:javaScript_fold`, `g:php_folding`, and possibly other ftplugin syntax files override folding options.\n\n\n### Steps to reproduce\n\n\ninit.lua:\n```lua\n-- vim.g.markdown_fold = 1      -- :set fdm returns manual\n-- vim.g.javaScript_fold = 1    -- :set fdm returns syntax\n-- vim.g.php_folding = 1        -- :set fdm returns syntax\n```\n\nUncomment the file line by line, then run `nvim -u init.lua`, and check for\n`fdm` value.\n\nThis doesn't happen in Vim 9.1. Try\n\n```\n\"let g:markdown_fold = 1\n\"let g:javaScript_fold = 1\n\"let g:php_folding = 1\n```\n\n### Expected behavior\n\nfdm is default (manual or as set in nvimrc)\n\n### Nvim version (nvim -v)\n\n0.10.2\n\n### Vim (not Nvim) behaves the same?\n\nno, vim 9.1\n\n### Operating system/version\n\nunix\n\n### Terminal name/version\n\nxterm\n\n### $TERM environment variable\n\nxterm-256\n\n### Installation\n\npacman",
    "closed_at": "2024-11-18T00:00:14Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
        "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
        "followers_url": "https://api.github.com/users/zeertzjq/followers",
        "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
        "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/zeertzjq",
        "id": 35768171,
        "login": "zeertzjq",
        "node_id": "MDQ6VXNlcjM1NzY4MTcx",
        "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
        "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
        "repos_url": "https://api.github.com/users/zeertzjq/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/zeertzjq",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "The steps the reproduce don't look right:\n- `g:markdown_fold` isn't a thing. There is only `g:markdown_folding`.\n- What file did you edit?",
            "created_at": "2024-11-16T05:50:28Z",
            "html_url": "https://github.com/neovim/neovim/issues/31233#issuecomment-2480420425",
            "id": 2480420425,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31233",
            "node_id": "IC_kwDOAPphoM6T2DZJ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2480420425/reactions"
            },
            "updated_at": "2024-11-16T05:50:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2480420425",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Test the latest development version. The [Releases](https://github.com/neovim/neovim/releases/tag/nightly) page has pre-built archives for Linux/Windows/macOS. Check `:version` to confirm the version.\n\n",
            "created_at": "2024-11-16T18:32:16Z",
            "html_url": "https://github.com/neovim/neovim/issues/31233#issuecomment-2480728671",
            "id": 2480728671,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31233",
            "node_id": "IC_kwDOAPphoM6T3Opf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2480728671/reactions"
            },
            "updated_at": "2024-11-16T18:32:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2480728671",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": ">     * `g:markdown_fold` isn't a thing\n\nTypo. I only gave markdown as an example of a filetype plugin that works as expected. In fact, all the following work as expected:\n\n```lua\nvim.g.markdown_folding = 1\nvim.g.perl_fold = 1\nvim.g.r_syntax_folding = 1\nvim.g.rst_fold_enabled = 1\nvim.g.ruby_fold = 1\nvim.g.rust_recommended_style = 0\nvim.g.sh_fold_enabled = 1\nvim.g.sh_fold_enabled = 3\nvim.g.tex_fold_enabled = 1\nvim.g.xml_syntax_folding = 1\nvim.g.zsh_fold_enable = 1\n```\n\nIt's only when I add these lines to my init.lua that the issue comes up:\n\n```lua\n-- vim.g.javaScript_fold = 1\n-- vim.g.php_folding = 1\n```\n\nI found this issue by trying to debug why rst plugin not working: see https://github.com/marshallward/vim-restructuredtext/issues/75\n\n>     * What file did you edit?\n\nWhat do you mean? the config file? `init.lua` for nvim and `vimrc` for vim. I can't seem to replicate this issue in Vim, though.",
            "created_at": "2024-11-17T20:19:42Z",
            "html_url": "https://github.com/neovim/neovim/issues/31233#issuecomment-2481537338",
            "id": 2481537338,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31233",
            "node_id": "IC_kwDOAPphoM6T6UE6",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2481537338/reactions"
            },
            "updated_at": "2024-11-17T20:19:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2481537338",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/67508272?v=4",
                "events_url": "https://api.github.com/users/avidseeker/events{/privacy}",
                "followers_url": "https://api.github.com/users/avidseeker/followers",
                "following_url": "https://api.github.com/users/avidseeker/following{/other_user}",
                "gists_url": "https://api.github.com/users/avidseeker/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/avidseeker",
                "id": 67508272,
                "login": "avidseeker",
                "node_id": "MDQ6VXNlcjY3NTA4Mjcy",
                "organizations_url": "https://api.github.com/users/avidseeker/orgs",
                "received_events_url": "https://api.github.com/users/avidseeker/received_events",
                "repos_url": "https://api.github.com/users/avidseeker/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/avidseeker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/avidseeker/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/avidseeker",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "We need concrete, reproducible steps including a minimal(!) config we can test with `nvim --clean -u test.lua`. ",
            "created_at": "2024-11-17T20:23:56Z",
            "html_url": "https://github.com/neovim/neovim/issues/31233#issuecomment-2481538548",
            "id": 2481538548,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31233",
            "node_id": "IC_kwDOAPphoM6T6UX0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2481538548/reactions"
            },
            "updated_at": "2024-11-17T20:23:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2481538548",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "The crux of the matter is that we use the exact same runtime files as Vim. So if it works there but not here, something very weird is going on (usually involving treesitter, which makes it a config issue). ",
            "created_at": "2024-11-17T20:26:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/31233#issuecomment-2481539151",
            "id": 2481539151,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31233",
            "node_id": "IC_kwDOAPphoM6T6UhP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2481539151/reactions"
            },
            "updated_at": "2024-11-17T20:26:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2481539151",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Here's another list of steps\n\nmwe.rst:\n```rst\n================\nDocument Heading\n================\n\nHeading\n=======\n\nSub-heading\n-----------\n\nParagraphs are separated \nby a blank line.\n```\n\nand `nvim --clean -u init.lua +'set fdm' mwe.rst` where `init.lua` is\n\n```lua\nvim.g.rst_fold_enabled = 1     \nvim.g.markdown_folding = 1      -- :set fdm returns manual\n```\n\nSo far everything works as expected. rst file has proper folding. Now any of the lines\n```lua\nvim.g.javaScript_fold = 1    -- :set fdm returns syntax\nvim.g.php_folding = 1        -- :set fdm returns syntax\n```\n\nand rst folding no longer works.",
            "created_at": "2024-11-17T20:36:53Z",
            "html_url": "https://github.com/neovim/neovim/issues/31233#issuecomment-2481542330",
            "id": 2481542330,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31233",
            "node_id": "IC_kwDOAPphoM6T6VS6",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2481542330/reactions"
            },
            "updated_at": "2024-11-17T20:36:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2481542330",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/67508272?v=4",
                "events_url": "https://api.github.com/users/avidseeker/events{/privacy}",
                "followers_url": "https://api.github.com/users/avidseeker/followers",
                "following_url": "https://api.github.com/users/avidseeker/following{/other_user}",
                "gists_url": "https://api.github.com/users/avidseeker/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/avidseeker",
                "id": 67508272,
                "login": "avidseeker",
                "node_id": "MDQ6VXNlcjY3NTA4Mjcy",
                "organizations_url": "https://api.github.com/users/avidseeker/orgs",
                "received_events_url": "https://api.github.com/users/avidseeker/received_events",
                "repos_url": "https://api.github.com/users/avidseeker/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/avidseeker/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/avidseeker/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/avidseeker",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "This is a problem with the interaction between individual syntax files. It should be reported to Vim. In Vim it can be reproduced with:\n```vim\nset nocompatible\nlet g:rst_fold_enabled = 1\nlet g:javaScript_fold = 1\nfiletype plugin on\nsyntax on\n```",
            "created_at": "2024-11-18T00:00:14Z",
            "html_url": "https://github.com/neovim/neovim/issues/31233#issuecomment-2481686628",
            "id": 2481686628,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31233",
            "node_id": "IC_kwDOAPphoM6T64hk",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2481686628/reactions"
            },
            "updated_at": "2024-11-18T00:00:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2481686628",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 7,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/31233/comments",
    "created_at": "2024-11-16T04:50:40Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/31233/events",
    "html_url": "https://github.com/neovim/neovim/issues/31233",
    "id": 2663793362,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "funtime",
            "id": 120251370,
            "name": "runtime",
            "node_id": "MDU6TGFiZWwxMjAyNTEzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/runtime"
        },
        {
            "color": "FBCA04",
            "default": false,
            "description": "upstream issue that must be fixed in Vim first",
            "id": 2639399975,
            "name": "needs:vim-patch",
            "node_id": "MDU6TGFiZWwyNjM5Mzk5OTc1",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:vim-patch"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/31233/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6exkLS",
    "number": 31233,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/31233/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "not_planned",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/31233/timeline",
    "title": "Problematic syntax ftplugin files for folding",
    "updated_at": "2024-11-18T00:00:36Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/31233",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/67508272?v=4",
        "events_url": "https://api.github.com/users/avidseeker/events{/privacy}",
        "followers_url": "https://api.github.com/users/avidseeker/followers",
        "following_url": "https://api.github.com/users/avidseeker/following{/other_user}",
        "gists_url": "https://api.github.com/users/avidseeker/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/avidseeker",
        "id": 67508272,
        "login": "avidseeker",
        "node_id": "MDQ6VXNlcjY3NTA4Mjcy",
        "organizations_url": "https://api.github.com/users/avidseeker/orgs",
        "received_events_url": "https://api.github.com/users/avidseeker/received_events",
        "repos_url": "https://api.github.com/users/avidseeker/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/avidseeker/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/avidseeker/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/avidseeker",
        "user_view_type": "public"
    }
}