{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\n\r\nhttps://github.com/neovim/neovim/assets/135401840/87e79f6f-b51f-4a96-baab-f79af72a6351\r\n\r\n\n\n### Steps to reproduce\n\nHere is my minimal config:\r\n```lua\r\nlocal path = vim.fn.stdpath(\"data\") .. \"/nvim-treesitter\"\r\nvim.opt.rtp:prepend(path)\r\n\r\nrequire(\"nvim-treesitter.configs\").setup({\r\n\tensure_installed = {\r\n\t\t\"markdown\",\r\n\t\t\"markdown_inline\",\r\n\t\t\"latex\",\r\n\t},\r\n\thighlight = { enable = true },\r\n})\r\n\r\nvim.opt.smoothscroll = false\r\n```\r\n`vim.opt.smoothscroll = false` is to ensure that `smoothscroll` doesn't make any difference.\r\n\r\nHere is my .md file used in the video.\r\n[q.md](https://github.com/user-attachments/files/15965542/q.md)\r\n\r\nMy operation in the video is\r\n\r\n1. `G` to the bottom\r\n2. `o` to open a new line and input some `a`\r\n3. undo the last operation\r\n4. navigate back to the top and find highlight of first two lines fails\r\n5. input `a` and find highlight is restored.\r\n\r\n\r\n\n\n### Expected behavior\n\nThe first two lines should be highlight properly after undo.\r\n\r\n\n\n### Neovim version (nvim -v)\n\nNVIM v0.10.0\n\n### Vim (not Nvim) behaves the same?\n\nI don't know, I think the `nvim-treesitter` plugin is for neovim only.\n\n### Operating system/version\n\nWindows 11 Home China\n\n### Terminal name/version\n\nPowerShell 7.4.3\n\n### $TERM environment variable\n\nI think it is not important.\n\n### Installation\n\nnvim-win64.zip",
    "closed_at": "2024-07-01T05:37:38Z",
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "It is quite strange that I can't reproduce the problem every time I do the same operation as in the video.\r\nBut maybe you can try to undo more times with the first two line out of the buffer, and try to quit and reopen the file, the problem may arise.",
            "created_at": "2024-06-25T10:49:08Z",
            "html_url": "https://github.com/neovim/neovim/issues/29482#issuecomment-2188588536",
            "id": 2188588536,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29482",
            "node_id": "IC_kwDOAPphoM6CczX4",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2188588536/reactions"
            },
            "updated_at": "2024-06-25T10:49:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2188588536",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/135401840?v=4",
                "events_url": "https://api.github.com/users/yuukibarns/events{/privacy}",
                "followers_url": "https://api.github.com/users/yuukibarns/followers",
                "following_url": "https://api.github.com/users/yuukibarns/following{/other_user}",
                "gists_url": "https://api.github.com/users/yuukibarns/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/yuukibarns",
                "id": 135401840,
                "login": "yuukibarns",
                "node_id": "U_kgDOCBIRcA",
                "organizations_url": "https://api.github.com/users/yuukibarns/orgs",
                "received_events_url": "https://api.github.com/users/yuukibarns/received_events",
                "repos_url": "https://api.github.com/users/yuukibarns/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/yuukibarns/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/yuukibarns/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/yuukibarns"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/29482/comments",
    "created_at": "2024-06-25T06:01:54Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/29482/events",
    "html_url": "https://github.com/neovim/neovim/issues/29482",
    "id": 2371725344,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 1799626557,
            "name": "treesitter",
            "node_id": "MDU6TGFiZWwxNzk5NjI2NTU3",
            "url": "https://api.github.com/repos/neovim/neovim/labels/treesitter"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/29482/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6NXagg",
    "number": 29482,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/29482/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/29482/timeline",
    "title": "Undo leads to markdown highlight failure. ",
    "updated_at": "2024-07-01T05:37:38Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/29482",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/135401840?v=4",
        "events_url": "https://api.github.com/users/yuukibarns/events{/privacy}",
        "followers_url": "https://api.github.com/users/yuukibarns/followers",
        "following_url": "https://api.github.com/users/yuukibarns/following{/other_user}",
        "gists_url": "https://api.github.com/users/yuukibarns/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/yuukibarns",
        "id": 135401840,
        "login": "yuukibarns",
        "node_id": "U_kgDOCBIRcA",
        "organizations_url": "https://api.github.com/users/yuukibarns/orgs",
        "received_events_url": "https://api.github.com/users/yuukibarns/received_events",
        "repos_url": "https://api.github.com/users/yuukibarns/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/yuukibarns/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/yuukibarns/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/yuukibarns"
    }
}