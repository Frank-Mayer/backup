{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "### Problem\n\nAfter #25288, the following happens when `neovim` exits unsuccessfully:\r\n\r\nhttps://github.com/neovim/neovim/assets/62502207/f2613af3-2e0c-4d1c-afb3-1949869e4ca0\r\n\r\nBelow I show what happens when starting the lua debugger and then exiting with `:ZZ` (I guess this doesn't terminate the DAP session correctly). Notice how the GUI remains frozen at the top.\n\n### Steps to reproduce\n\n1. Use your following method to make Neovim exit with a failure status.\r\n2. Notice the frozen UI.\n\n### Expected behavior\n\nFor shutdown to complete on failure.\n\n### Neovim version (nvim -v)\n\nv0.10.0-dev-1177+gfcfc87cb7\n\n### Vim (not Nvim) behaves the same?\n\nN/A\n\n### Operating system/version\n\nMac Ventura 13.5.2\n\n### Terminal name/version\n\nkitty 0.30\n\n### $TERM environment variable\n\nxterm-kitty\n\n### Installation\n\nFrom source",
    "closed_at": "2023-09-23T01:26:00Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "log from console would be help",
            "created_at": "2023-09-23T01:17:25Z",
            "html_url": "https://github.com/neovim/neovim/issues/25312#issuecomment-1732168192",
            "id": 1732168192,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25312",
            "node_id": "IC_kwDOAPphoM5nPsoA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1732168192/reactions"
            },
            "updated_at": "2023-09-23T01:17:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1732168192",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@glepnir sure. The log is \r\n```\r\n-------------------------------------\r\nTranslated Report (Full Report Below)\r\n-------------------------------------\r\n\r\nProcess:               nvim [44615]\r\nPath:                  /Users/USER/*/nvim\r\nIdentifier:            nvim\r\nVersion:               ???\r\nCode Type:             ARM-64 (Native)\r\nParent Process:        Exited process [44614]\r\nResponsible:           kitty [44059]\r\nUser ID:               501\r\n\r\nDate/Time:             2023-09-22 18:03:26.5082 -0700\r\nOS Version:            macOS 14.0 (23A344)\r\nReport Version:        12\r\nAnonymous UUID:        F3614BE4-6673-C567-7F9D-312F48D5041B\r\n\r\nSleep/Wake UUID:       E3DBC5F9-7D5D-4E11-A693-96A2B7D029A3\r\n\r\nTime Awake Since Boot: 21000 seconds\r\nTime Since Wake:       1576 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_BAD_ACCESS (SIGBUS)\r\nException Codes:       UNKNOWN_0x101 at 0x0000000000000003\r\nException Codes:       0x0000000000000101, 0x0000000000000003\r\n\r\nTermination Reason:    Namespace SIGNAL, Code 10 Bus error: 10\r\nTerminating Process:   exc handler [44615]\r\n\r\nVM Region Info: 0x3 is not in any region.  Bytes before following region: 4296196093\r\n      REGION TYPE                    START - END         [ VSIZE] PRT/MAX SHRMOD  REGION DETAIL\r\n      UNUSED SPACE AT START\r\n--->  \r\n      __TEXT                      10012c000-100670000    [ 5392K] r-x/r-x SM=COW  ...s/USER/*/nvim\r\n\r\nThread 0 Crashed::  Dispatch queue: com.apple.main-thread\r\n0   ???                           \t               0x3 ???\r\n1   nvim                          \t       0x1004b9a3c loop_close + 228\r\n2   nvim                          \t       0x100430b88 event_teardown + 572\r\n3   nvim                          \t       0x10042ad04 os_exit + 64\r\n4   nvim                          \t       0x10042b47c getout + 1532\r\n5   nvim                          \t       0x1004ff700 ex_exit.llvm.14194469518381020251 + 636\r\n6   nvim                          \t       0x1004ebc8c execute_cmd0 + 256\r\n7   nvim                          \t       0x1004e46bc do_cmdline + 10020\r\n8   nvim                          \t       0x1004972e8 normal_execute.llvm.12834297247739071252 + 9808\r\n9   nvim                          \t       0x1005583e8 state_enter + 160\r\n10  nvim                          \t       0x10042f828 main + 16408\r\n11  dyld                          \t       0x18de9d058 start + 2224\r\n\r\n\r\nThread 0 crashed with ARM Thread State (64-bit):\r\n    x0: 0x00000001006a5578   x1: 0x00000001006a55b8   x2: 0x0000000000000004   x3: 0x000000000000000b\r\n    x4: 0x000000000000000a   x5: 0x000000000000002c   x6: 0x0000000000003fff   x7: 0x0000000000000000\r\n    x8: 0x0000000000000003   x9: 0x00000001006a55c0  x10: 0x00000000ffffffff  x11: 0x0000000000000009\r\n   x12: 0x0000000000000035  x13: 0x0000000000000009  x14: 0x0000000000000027  x15: 0x0000000000000003\r\n   x16: 0x000000018e212d30  x17: 0x0000000000000000  x18: 0x0000000000000000  x19: 0x00000001006a5578\r\n   x20: 0x0000000000000000  x21: 0x0000000000000001  x22: 0x0000000000000000  x23: 0x00000001006a55c0\r\n   x24: 0x00000001006a57c0  x25: 0x00000000fffffffd  x26: 0x0000000000000005  x27: 0x000000016fcd1930\r\n   x28: 0x00000001005dacc8   fp: 0x000000016fcd1990   lr: 0x00000001001f3a20\r\n    sp: 0x000000016fcd1930   pc: 0x0000000000000003 cpsr: 0x80001000\r\n   far: 0x0000000000000003  esr: 0x8a000000 (PC alignment)\r\n\r\nBinary Images:\r\n       0x100c08000 -        0x100c13fff lua.so (*) <edb68822-13a8-3a43-85b8-848edac9cb3a> /Users/USER/*/lua.so\r\n       0x100c90000 -        0x100ca7fff libintl.8.dylib (*) <78247629-fa87-3ffb-8bd4-6464ed2d6c0c> /opt/homebrew/*/libintl.8.dylib\r\n       0x10012c000 -        0x10066ffff nvim (*) <834d10a2-720d-3ae6-ac08-368932969952> /Users/USER/*/nvim\r\n               0x0 - 0xffffffffffffffff ??? (*) <00000000-0000-0000-0000-000000000000> ???\r\n       0x18de97000 -        0x18df2a873 dyld (*) <ffd8ab66-c9ab-31df-ab80-3a3dff367ddd> /usr/lib/dyld\r\n       0x18e210000 -        0x18e21cff3 libsystem_pthread.dylib (*) <e4debb6e-421d-33d0-9e17-77ae0e0fe4dc> /usr/lib/system/libsystem_pthread.dylib\r\n\r\nExternal Modification Summary:\r\n  Calls made by other processes targeting this process:\r\n    task_for_pid: 0\r\n    thread_create: 0\r\n    thread_set_state: 0\r\n  Calls made by this process:\r\n    task_for_pid: 0\r\n    thread_create: 0\r\n    thread_set_state: 0\r\n  Calls made by all processes on this machine:\r\n    task_for_pid: 0\r\n    thread_create: 0\r\n    thread_set_state: 0\r\n\r\nVM Region Summary:\r\nReadOnly portion of Libraries: Total=1.0G resident=0K(0%) swapped_out_or_unallocated=1.0G(100%)\r\nWritable regions: Total=1.9G written=0K(0%) resident=0K(0%) swapped_out=0K(0%) unallocated=1.9G(100%)\r\n\r\n                                VIRTUAL   REGION \r\nREGION TYPE                        SIZE    COUNT (non-coalesced) \r\n===========                     =======  ======= \r\nActivity Tracing                   256K        1 \r\nKernel Alloc Once                   32K        1 \r\nMALLOC                             1.8G       39 \r\nMALLOC guard page                   96K        6 \r\nSTACK GUARD                       56.0M        1 \r\nStack                             8176K        1 \r\nVM_ALLOCATE                       20.8M      167 \r\n__AUTH                             339K       65 \r\n__AUTH_CONST                      4040K      146 \r\n__DATA                            1903K      142 \r\n__DATA_CONST                      4255K      150 \r\n__DATA_DIRTY                       363K       58 \r\n__LINKEDIT                       887.9M        4 \r\n__OBJC_RO                         70.6M        1 \r\n__OBJC_RW                         2153K        1 \r\n__TEXT                           125.0M      157 \r\ndyld private memory                272K        2 \r\nshared memory                       32K        2 \r\n===========                     =======  ======= \r\nTOTAL                              3.0G      944 \r\n```\r\n\r\nThat isn't what this issue is about though. It is the strange frozen UI what I'm pointing out.",
            "created_at": "2023-09-23T01:21:02Z",
            "html_url": "https://github.com/neovim/neovim/issues/25312#issuecomment-1732168984",
            "id": 1732168984,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25312",
            "node_id": "IC_kwDOAPphoM5nPs0Y",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1732168984/reactions"
            },
            "updated_at": "2023-09-23T01:21:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1732168984",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
                "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
                "followers_url": "https://api.github.com/users/MariaSolOs/followers",
                "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
                "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MariaSolOs",
                "id": 62502207,
                "login": "MariaSolOs",
                "node_id": "MDQ6VXNlcjYyNTAyMjA3",
                "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
                "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
                "repos_url": "https://api.github.com/users/MariaSolOs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MariaSolOs"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "What is \"your following method\"?",
            "created_at": "2023-09-23T01:21:20Z",
            "html_url": "https://github.com/neovim/neovim/issues/25312#issuecomment-1732169042",
            "id": 1732169042,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25312",
            "node_id": "IC_kwDOAPphoM5nPs1S",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1732169042/reactions"
            },
            "updated_at": "2023-09-23T01:21:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1732169042",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@zeertzjq what do you mean?",
            "created_at": "2023-09-23T01:23:06Z",
            "html_url": "https://github.com/neovim/neovim/issues/25312#issuecomment-1732169481",
            "id": 1732169481,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25312",
            "node_id": "IC_kwDOAPphoM5nPs8J",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1732169481/reactions"
            },
            "updated_at": "2023-09-23T01:23:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1732169481",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
                "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
                "followers_url": "https://api.github.com/users/MariaSolOs/followers",
                "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
                "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MariaSolOs",
                "id": 62502207,
                "login": "MariaSolOs",
                "node_id": "MDQ6VXNlcjYyNTAyMjA3",
                "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
                "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
                "repos_url": "https://api.github.com/users/MariaSolOs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MariaSolOs"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Anyway, shutdown shouldn't complete on failure, because you need to know what the failure is.",
            "created_at": "2023-09-23T01:26:00Z",
            "html_url": "https://github.com/neovim/neovim/issues/25312#issuecomment-1732170169",
            "id": 1732170169,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25312",
            "node_id": "IC_kwDOAPphoM5nPtG5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1732170169/reactions"
            },
            "updated_at": "2023-09-23T01:26:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1732170169",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@zeertzjq well the failure isn't even being displayed.",
            "created_at": "2023-09-23T01:27:21Z",
            "html_url": "https://github.com/neovim/neovim/issues/25312#issuecomment-1732170479",
            "id": 1732170479,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25312",
            "node_id": "IC_kwDOAPphoM5nPtLv",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1732170479/reactions"
            },
            "updated_at": "2023-09-23T01:27:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1732170479",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
                "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
                "followers_url": "https://api.github.com/users/MariaSolOs/followers",
                "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
                "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MariaSolOs",
                "id": 62502207,
                "login": "MariaSolOs",
                "node_id": "MDQ6VXNlcjYyNTAyMjA3",
                "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
                "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
                "repos_url": "https://api.github.com/users/MariaSolOs/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MariaSolOs"
            }
        }
    ],
    "comments": 6,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/25312/comments",
    "created_at": "2023-09-23T01:14:25Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/25312/events",
    "html_url": "https://github.com/neovim/neovim/issues/25312",
    "id": 1909657089,
    "labels": [
        {
            "color": "e6e6e6",
            "default": false,
            "description": "current behavior is by design, and change is not desired",
            "id": 77997479,
            "name": "closed:wontfix",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3OQ==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/closed:wontfix"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/25312/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM5x0w4B",
    "number": 25312,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/25312/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "not_planned",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/25312/timeline",
    "title": "Strange shutdown with kitty terminal",
    "updated_at": "2023-09-23T01:27:21Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/25312",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/62502207?v=4",
        "events_url": "https://api.github.com/users/MariaSolOs/events{/privacy}",
        "followers_url": "https://api.github.com/users/MariaSolOs/followers",
        "following_url": "https://api.github.com/users/MariaSolOs/following{/other_user}",
        "gists_url": "https://api.github.com/users/MariaSolOs/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/MariaSolOs",
        "id": 62502207,
        "login": "MariaSolOs",
        "node_id": "MDQ6VXNlcjYyNTAyMjA3",
        "organizations_url": "https://api.github.com/users/MariaSolOs/orgs",
        "received_events_url": "https://api.github.com/users/MariaSolOs/received_events",
        "repos_url": "https://api.github.com/users/MariaSolOs/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/MariaSolOs/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/MariaSolOs/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/MariaSolOs"
    }
}