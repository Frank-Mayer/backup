{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nThe neovim spell checker is very useful, but there doesn't seem to be any straightforward way to get all spelling mistakes in a buffer with Lua without iterating through them with `]s`. Ideally, there would be a function like `vim.fn.get_spelling_errors(bufnr)` that would return all errors in a buffer as a table (while preserving things like Treesitter context-dependence that are ignored by `vim.spell.check()`.\n\n### Expected behavior\n\nThe new feature would look like a function that returns the same result that would be provided by iterating through the buffer with `]s` and writing down each mistake found. This would solve the problem, and it would be useful because it would (probably) be faster than iterating through, would definitely be more elegant, and would be simpler to run in the background as it wouldn't require moving and then resetting the cursor. Something like:\r\n```lua\r\n{\r\n  {\r\n    word = \"tset\",\r\n    severity = \"bad\",\r\n    linenr = 20,\r\n    colnr = 10,\r\n  },\r\n  {\r\n    word = \"grey\",\r\n    severity = \"local\",\r\n    linenr = 15,\r\n    colnr = 5,\r\n  },\r\n}\r\n```",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "You can use `vim.spell.check` and pass in each line of the buffer manually. I don't think we need to provide a first class function for this.",
            "created_at": "2024-06-03T21:29:38Z",
            "html_url": "https://github.com/neovim/neovim/issues/29167#issuecomment-2146157354",
            "id": 2146157354,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29167",
            "node_id": "IC_kwDOAPphoM5_68Mq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2146157354/reactions"
            },
            "updated_at": "2024-06-03T21:29:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2146157354",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991"
            }
        },
        {
            "author_association": "NONE",
            "body": "Thanks for the reply. I was thinking it could be useful to have something that would integrate with things like Treesitter automatically (whereas `vim.spell.check` is strictly strings), but it might be too niche.",
            "created_at": "2024-06-03T21:33:53Z",
            "html_url": "https://github.com/neovim/neovim/issues/29167#issuecomment-2146163667",
            "id": 2146163667,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29167",
            "node_id": "IC_kwDOAPphoM5_69vT",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2146163667/reactions"
            },
            "updated_at": "2024-06-03T21:33:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2146163667",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/66334356?v=4",
                "events_url": "https://api.github.com/users/ravibrock/events{/privacy}",
                "followers_url": "https://api.github.com/users/ravibrock/followers",
                "following_url": "https://api.github.com/users/ravibrock/following{/other_user}",
                "gists_url": "https://api.github.com/users/ravibrock/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ravibrock",
                "id": 66334356,
                "login": "ravibrock",
                "node_id": "MDQ6VXNlcjY2MzM0MzU2",
                "organizations_url": "https://api.github.com/users/ravibrock/orgs",
                "received_events_url": "https://api.github.com/users/ravibrock/received_events",
                "repos_url": "https://api.github.com/users/ravibrock/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ravibrock/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ravibrock/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ravibrock"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I guess the main point is that Neovim already exposes everything needed for this to be implemented so there isn't anything that can't be done via a custom function or plugin.",
            "created_at": "2024-06-03T21:50:23Z",
            "html_url": "https://github.com/neovim/neovim/issues/29167#issuecomment-2146186403",
            "id": 2146186403,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29167",
            "node_id": "IC_kwDOAPphoM5_7DSj",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2146186403/reactions"
            },
            "updated_at": "2024-06-03T21:50:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2146186403",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991"
            }
        },
        {
            "author_association": "NONE",
            "body": "How does it expose something like \"get next spelling error\"? I went through the source code and it looks like `]s` is hardcoded in C--there isn't an API for getting the location of the next spelling error. I guess my suggestion is to expose whatever method(s) Neovim uses internally to jump to the next spelling error in such a way that they can be called directly in Lua, since presumably they exist in the C codebase (and, since they're implemented in C, are probably faster than comparable Lua implementations). But I'm not 100% sure how complicated that would be.",
            "created_at": "2024-06-03T22:40:29Z",
            "html_url": "https://github.com/neovim/neovim/issues/29167#issuecomment-2146246343",
            "id": 2146246343,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29167",
            "node_id": "IC_kwDOAPphoM5_7R7H",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2146246343/reactions"
            },
            "updated_at": "2024-06-03T22:43:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2146246343",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/66334356?v=4",
                "events_url": "https://api.github.com/users/ravibrock/events{/privacy}",
                "followers_url": "https://api.github.com/users/ravibrock/followers",
                "following_url": "https://api.github.com/users/ravibrock/following{/other_user}",
                "gists_url": "https://api.github.com/users/ravibrock/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ravibrock",
                "id": 66334356,
                "login": "ravibrock",
                "node_id": "MDQ6VXNlcjY2MzM0MzU2",
                "organizations_url": "https://api.github.com/users/ravibrock/orgs",
                "received_events_url": "https://api.github.com/users/ravibrock/received_events",
                "repos_url": "https://api.github.com/users/ravibrock/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ravibrock/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ravibrock/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ravibrock"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "- You can get the buffer text\n- You can iterate words using a pattern. \n- You can check if a certain position has a `@spell` capture\n- You can check the spelling of a string.\n\nIt isn't exactly the same as what the C codebase does, but I'm not sure it needs to be. And I'm not sure it's even feasible given how it is implemented in C. Last time I checked I remember being quite ad-hoc.\n\nWe can, if need be, improve the API for any one of these points.",
            "created_at": "2024-06-03T23:14:17Z",
            "html_url": "https://github.com/neovim/neovim/issues/29167#issuecomment-2146279194",
            "id": 2146279194,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29167",
            "node_id": "IC_kwDOAPphoM5_7Z8a",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2146279194/reactions"
            },
            "updated_at": "2024-06-03T23:14:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2146279194",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991"
            }
        }
    ],
    "comments": 5,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/29167/comments",
    "created_at": "2024-06-03T15:31:52Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/29167/events",
    "html_url": "https://github.com/neovim/neovim/issues/29167",
    "id": 2331462621,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "spellcheck",
            "id": 1953742452,
            "name": "spell",
            "node_id": "MDU6TGFiZWwxOTUzNzQyNDUy",
            "url": "https://api.github.com/repos/neovim/neovim/labels/spell"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/29167/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6K90vd",
    "number": 29167,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/29167/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/29167/timeline",
    "title": "Programmatic way of getting spelling errors",
    "updated_at": "2024-06-03T23:14:19Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/29167",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/66334356?v=4",
        "events_url": "https://api.github.com/users/ravibrock/events{/privacy}",
        "followers_url": "https://api.github.com/users/ravibrock/followers",
        "following_url": "https://api.github.com/users/ravibrock/following{/other_user}",
        "gists_url": "https://api.github.com/users/ravibrock/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/ravibrock",
        "id": 66334356,
        "login": "ravibrock",
        "node_id": "MDQ6VXNlcjY2MzM0MzU2",
        "organizations_url": "https://api.github.com/users/ravibrock/orgs",
        "received_events_url": "https://api.github.com/users/ravibrock/received_events",
        "repos_url": "https://api.github.com/users/ravibrock/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/ravibrock/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ravibrock/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/ravibrock"
    }
}