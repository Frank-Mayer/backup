{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\r\n\r\nConTeXt has highlighting in Neovim. However, when embedding Lua code it correctly switches to Lua hightlighting but does not come back to ConTeXt highlighting correctly.\r\n\r\nThis problem is fixed already kind of in Vim (and the example is not mine, although I encounter the problem).\r\nSee here:\r\n- https://mailman.ntg.nl/archives/list/ntg-context@ntg.nl/thread/4ALVL6LDO5GU6E5X63JOY2MJQ4KOCRBQ/\r\n- https://github.com/vim/vim/pull/13778 (merged)\r\n\r\n### Steps to reproduce\r\n\r\nLook at this file (example by Damien Thiriet)\r\n```\r\n\\starttext\r\n\r\nHello!\r\n\\ctxlua{context(\"does the parser work?\")}\r\n\r\n-- this should not be highlighted as a comment\r\n\r\n\\stoptext\r\n```\r\n\r\n### Expected behavior\r\n\r\nThe highlight is correct (the fake Lua comment ist not hightlighted as comment)\r\n\r\n### Neovim version (nvim -v)\r\n\r\n0.9.4\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\nno, vim newest\r\n\r\n### Operating system/version\r\n\r\nGentoo Linux\r\n\r\n### Terminal name/version\r\n\r\nKitty 0.31.0\r\n\r\n### $TERM environment variable\r\n\r\nxterm-256color\r\n\r\n### Installation\r\n\r\nsystem package manager",
    "closed_at": "2024-01-09T16:11:12Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "The \"fix\" in Vim consisted in a full rewrite of the filetype plugins in Vim9script. We cannot port these changes, so the ConTeXt filetype plugins are essentially frozen. (They're also much too complex for bundled plugins and better belong in a dedicated filetype plugin.)\r\n\r\nAs we do not maintain any filetype plugins ourselves (in favor of treesitter support, which unfortunately doesn't have a context parser -- yet) I'm afraid this is therefore \"wontfix\" from us. ",
            "created_at": "2024-01-09T16:11:12Z",
            "html_url": "https://github.com/neovim/neovim/issues/26966#issuecomment-1883344520",
            "id": 1883344520,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26966",
            "node_id": "IC_kwDOAPphoM5wQY6I",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1883344520/reactions"
            },
            "updated_at": "2024-01-09T16:11:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1883344520",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "Would it be okay if a separate pull request is made against the current syntax file for context included in neovim. The key issue is adding `keepend` keyword in `syn region contextBeginEndLua` to fix the highlighting bug. ",
            "created_at": "2024-01-09T16:42:31Z",
            "html_url": "https://github.com/neovim/neovim/issues/26966#issuecomment-1883401530",
            "id": 1883401530,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26966",
            "node_id": "IC_kwDOAPphoM5wQm06",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1883401530/reactions"
            },
            "updated_at": "2024-01-09T16:42:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1883401530",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/28448?v=4",
                "events_url": "https://api.github.com/users/adityam/events{/privacy}",
                "followers_url": "https://api.github.com/users/adityam/followers",
                "following_url": "https://api.github.com/users/adityam/following{/other_user}",
                "gists_url": "https://api.github.com/users/adityam/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/adityam",
                "id": 28448,
                "login": "adityam",
                "node_id": "MDQ6VXNlcjI4NDQ4",
                "organizations_url": "https://api.github.com/users/adityam/orgs",
                "received_events_url": "https://api.github.com/users/adityam/received_events",
                "repos_url": "https://api.github.com/users/adityam/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/adityam/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/adityam/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/adityam"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "If you want to make the effort to manually port the changes to legacy vimscript, then yes, you can do that.\r\n\r\nPlease find the commit in Vim making these runtime file changes and open a PR with the title\r\n```\r\nvim-patch:partial:<short commit hash>\r\n```\r\n\r\nand explain exactly which changes you ported. (I believe it's commit `7dd543246a4c`  or `fd999452adaf` from August 2022.)\r\n\r\nAlternatively, you could try to convert (all) these vim9script runtime files to Lua using https://github.com/tjdevries/vim9jit; that would also be acceptable.\r\n\r\n@zeertzjq ",
            "created_at": "2024-01-09T17:14:31Z",
            "html_url": "https://github.com/neovim/neovim/issues/26966#issuecomment-1883461369",
            "id": 1883461369,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26966",
            "node_id": "IC_kwDOAPphoM5wQ1b5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1883461369/reactions"
            },
            "updated_at": "2024-01-09T17:25:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1883461369",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "For now, I was just planning of adding the `keepend` keyword. I'll test if it fixes the bug and then send a pull request.",
            "created_at": "2024-01-09T17:57:00Z",
            "html_url": "https://github.com/neovim/neovim/issues/26966#issuecomment-1883528741",
            "id": 1883528741,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26966",
            "node_id": "IC_kwDOAPphoM5wRF4l",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1883528741/reactions"
            },
            "updated_at": "2024-01-09T17:57:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1883528741",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/28448?v=4",
                "events_url": "https://api.github.com/users/adityam/events{/privacy}",
                "followers_url": "https://api.github.com/users/adityam/followers",
                "following_url": "https://api.github.com/users/adityam/following{/other_user}",
                "gists_url": "https://api.github.com/users/adityam/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/adityam",
                "id": 28448,
                "login": "adityam",
                "node_id": "MDQ6VXNlcjI4NDQ4",
                "organizations_url": "https://api.github.com/users/adityam/orgs",
                "received_events_url": "https://api.github.com/users/adityam/received_events",
                "repos_url": "https://api.github.com/users/adityam/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/adityam/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/adityam/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/adityam"
            }
        },
        {
            "author_association": "NONE",
            "body": "Thank you for your efforts! The Lua issue is the most annoying one, I did not encounter other obvious highlighting issues, yet. BTW, as mentioned [here](https://github.com/nvim-treesitter/nvim-treesitter/issues/2282#issuecomment-1483976242), there is actually a treesitter grammar but not supported by nvim-treesitter, yet.",
            "created_at": "2024-01-09T19:22:29Z",
            "html_url": "https://github.com/neovim/neovim/issues/26966#issuecomment-1883644964",
            "id": 1883644964,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26966",
            "node_id": "IC_kwDOAPphoM5wRiQk",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1883644964/reactions"
            },
            "updated_at": "2024-01-09T19:22:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1883644964",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/32870336?v=4",
                "events_url": "https://api.github.com/users/gerion0/events{/privacy}",
                "followers_url": "https://api.github.com/users/gerion0/followers",
                "following_url": "https://api.github.com/users/gerion0/following{/other_user}",
                "gists_url": "https://api.github.com/users/gerion0/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/gerion0",
                "id": 32870336,
                "login": "gerion0",
                "node_id": "MDQ6VXNlcjMyODcwMzM2",
                "organizations_url": "https://api.github.com/users/gerion0/orgs",
                "received_events_url": "https://api.github.com/users/gerion0/received_events",
                "repos_url": "https://api.github.com/users/gerion0/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/gerion0/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/gerion0/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/gerion0"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Then why not make a PR to nvim-treesitter adding it? That would give you proper language nesting for free. ",
            "created_at": "2024-01-09T19:56:23Z",
            "html_url": "https://github.com/neovim/neovim/issues/26966#issuecomment-1883690665",
            "id": 1883690665,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26966",
            "node_id": "IC_kwDOAPphoM5wRtap",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1883690665/reactions"
            },
            "updated_at": "2024-01-09T19:56:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1883690665",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        }
    ],
    "comments": 6,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/26966/comments",
    "created_at": "2024-01-09T15:34:50Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/26966/events",
    "html_url": "https://github.com/neovim/neovim/issues/26966",
    "id": 2072616064,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/26966/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM57iZyA",
    "number": 26966,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/26966/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "not_planned",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/26966/timeline",
    "title": "ConTeXt highlighting is flawed",
    "updated_at": "2024-01-09T19:56:24Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/26966",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/32870336?v=4",
        "events_url": "https://api.github.com/users/gerion0/events{/privacy}",
        "followers_url": "https://api.github.com/users/gerion0/followers",
        "following_url": "https://api.github.com/users/gerion0/following{/other_user}",
        "gists_url": "https://api.github.com/users/gerion0/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/gerion0",
        "id": 32870336,
        "login": "gerion0",
        "node_id": "MDQ6VXNlcjMyODcwMzM2",
        "organizations_url": "https://api.github.com/users/gerion0/orgs",
        "received_events_url": "https://api.github.com/users/gerion0/received_events",
        "repos_url": "https://api.github.com/users/gerion0/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/gerion0/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/gerion0/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/gerion0"
    }
}