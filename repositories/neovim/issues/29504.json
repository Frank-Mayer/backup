{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nFrom :h clipboard\r\n\r\n```\r\nNvim will attempt to automatically determine if the host terminal emulator\r\nsupports the OSC 52 sequence and enable the OSC 52 clipboard provider if it\r\ndoes as long as all of the following are true:\r\n\r\n  • Nvim is running in the TUI\r\n  • g:clipboard is unset\r\n  • 'clipboard' is not set to \"unnamed\" or \"unnamedplus\"\r\n  • $SSH_TTY is set\r\n\r\nIf any of the above conditions are not met then the OSC 52 clipboard provider\r\nwill not be used by default and Nvim will fall back to discovering a\r\nclipboard-tool through the usual process.\r\n```\r\nAll the conditions are true\r\n- nvim is in the terminal UI interface\r\n- echo g:clipboard: \"Undefined variable: g:clipboard\"\r\n- set clipboard?: \"clipboard=\"\r\n- $SSH_TTY=\"/dev/pts/3\"\r\n\r\nI need to manually set the OSC52 provider for it to work. Then it works fine. I shouldn't need to maually set osc52 provider when connected via ssh.\r\n\n\n### Steps to reproduce\n\nSelect text\r\nTry to copy to system clipboard with \"+y\r\n\r\nSee warning \r\n`clipboard: No provider. Try \":checkhealth\" or \":h clipboard\".`\n\n### Expected behavior\n\nIt should copy to my system clipboard through the osc52 provider\n\n### Neovim version (nvim -v)\n\n0.10.0\n\n### Vim (not Nvim) behaves the same?\n\nn/a\n\n### Operating system/version\n\nmacOS 14.5 ssh to Ubuntu 20.04\n\n### Terminal name/version\n\niTerm2 3.5.3beta2\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\nAppImage",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "I am facing the same issue with the same env except that $TERM=xterm-kitty.\r\nI ran `printf $'\\e]52;c;%s\\a' \"$(base64 <<<'hello world test clip')\"` on the machine I'm ssh'ed into and then queried the clipboard on my local machine and I am able to get the hello world string.\r\nAny directions to debug are much appreciated\r\nEdit:\r\nrunning `nvim -V3 --clean` the Ms capability\r\n```\r\nExtended string capabilities:\r\n  Cr                        = ^[]112^G\r\n  Cs                        = ^[]12;%p1%s^G\r\n  E3                        = ^[[3J\r\n  Ms                        = ^[]52;%p1%s;%p2%s^G\r\n```\r\n",
            "created_at": "2024-06-29T02:27:21Z",
            "html_url": "https://github.com/neovim/neovim/issues/29504#issuecomment-2197861483",
            "id": 2197861483,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29504",
            "node_id": "IC_kwDOAPphoM6DALRr",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2197861483/reactions"
            },
            "updated_at": "2024-06-29T05:11:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2197861483",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/90275622?v=4",
                "events_url": "https://api.github.com/users/Ridhamz-nd/events{/privacy}",
                "followers_url": "https://api.github.com/users/Ridhamz-nd/followers",
                "following_url": "https://api.github.com/users/Ridhamz-nd/following{/other_user}",
                "gists_url": "https://api.github.com/users/Ridhamz-nd/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Ridhamz-nd",
                "id": 90275622,
                "login": "Ridhamz-nd",
                "node_id": "MDQ6VXNlcjkwMjc1NjIy",
                "organizations_url": "https://api.github.com/users/Ridhamz-nd/orgs",
                "received_events_url": "https://api.github.com/users/Ridhamz-nd/received_events",
                "repos_url": "https://api.github.com/users/Ridhamz-nd/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Ridhamz-nd/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Ridhamz-nd/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Ridhamz-nd"
            }
        },
        {
            "author_association": "NONE",
            "body": "So I found that text still wasn't copied when using the `nvim --clean -u clipconf.lua` option where clipconf.lua is\r\n```lua\r\n    vim.g.clipboard = {\r\n      name = 'OSC 52',\r\n      copy = {\r\n        ['+'] = require('vim.ui.clipboard.osc52').copy('+'),\r\n        ['*'] = require('vim.ui.clipboard.osc52').copy('*'),\r\n      },\r\n      paste = {\r\n        ['+'] = require('vim.ui.clipboard.osc52').paste('+'),\r\n        ['*'] = require('vim.ui.clipboard.osc52').paste('*'),\r\n      },\r\n    }\r\n```\r\nApparently the `reg == '+'` check was failing in `vim/ui/clipboard/osc52.lua`. After launching with the above config, if I run `:set clipboard=unnamedplus`, then the default yank register becomes `+` and I am able to copy from the ssh'ed target to the local host.\r\nSo do we really need to make sure `clipboard` is not set to `unnamedplus` as mentioned in the docs?\r\n",
            "created_at": "2024-07-06T02:15:39Z",
            "html_url": "https://github.com/neovim/neovim/issues/29504#issuecomment-2211588231",
            "id": 2211588231,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29504",
            "node_id": "IC_kwDOAPphoM6D0iiH",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2211588231/reactions"
            },
            "updated_at": "2024-07-06T02:15:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2211588231",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/33592738?v=4",
                "events_url": "https://api.github.com/users/rzalawad/events{/privacy}",
                "followers_url": "https://api.github.com/users/rzalawad/followers",
                "following_url": "https://api.github.com/users/rzalawad/following{/other_user}",
                "gists_url": "https://api.github.com/users/rzalawad/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rzalawad",
                "id": 33592738,
                "login": "rzalawad",
                "node_id": "MDQ6VXNlcjMzNTkyNzM4",
                "organizations_url": "https://api.github.com/users/rzalawad/orgs",
                "received_events_url": "https://api.github.com/users/rzalawad/received_events",
                "repos_url": "https://api.github.com/users/rzalawad/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rzalawad/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rzalawad/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rzalawad"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/29504/comments",
    "created_at": "2024-06-27T20:47:45Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/29504/events",
    "html_url": "https://github.com/neovim/neovim/issues/29504",
    "id": 2379067682,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "clipboard, paste",
            "id": 186192409,
            "name": "clipboard",
            "node_id": "MDU6TGFiZWwxODYxOTI0MDk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/clipboard"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/29504/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6NzbEi",
    "number": 29504,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/29504/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/29504/timeline",
    "title": "In ssh session, neovim doesn't set osc52 provider even though all conditions are true",
    "updated_at": "2024-07-06T02:15:39Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/29504",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/2553980?v=4",
        "events_url": "https://api.github.com/users/nighthawk469/events{/privacy}",
        "followers_url": "https://api.github.com/users/nighthawk469/followers",
        "following_url": "https://api.github.com/users/nighthawk469/following{/other_user}",
        "gists_url": "https://api.github.com/users/nighthawk469/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/nighthawk469",
        "id": 2553980,
        "login": "nighthawk469",
        "node_id": "MDQ6VXNlcjI1NTM5ODA=",
        "organizations_url": "https://api.github.com/users/nighthawk469/orgs",
        "received_events_url": "https://api.github.com/users/nighthawk469/received_events",
        "repos_url": "https://api.github.com/users/nighthawk469/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/nighthawk469/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/nighthawk469/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/nighthawk469"
    }
}