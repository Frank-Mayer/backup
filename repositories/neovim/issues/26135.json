{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\r\n\r\nFor me df87266b23b32b96d1e3d4d26eb721a9dd63c2a4 seems to have introduced performance regressions for rendering.\r\n\r\nThe below config works smoothly prior to that commit and but quickly freezes `nvim` when opening a reasonably long (250+ lines) Python file for which `pyright` sets signs from that commit onward.\r\n\r\n### Steps to reproduce\r\n\r\nMinimal `init.lua`\r\n\r\n```lua\r\nvim.cmd [[set runtimepath=$VIMRUNTIME]]\r\nvim.cmd [[set packpath=/tmp/nvim/site]]\r\nlocal package_root = \"/tmp/nvim/site/pack\"\r\nlocal lazypath = package_root .. \"/lazy/lazy.nvim\"\r\nlocal pluginpath = package_root .. \"/plugins/\"\r\nif not vim.loop.fs_stat(lazypath) then\r\n  print \"Installing 'folke/lazy.nvim'...\"\r\n  vim.fn.system { \"git\", \"clone\", \"https://github.com/folke/lazy.nvim.git\", lazypath }\r\nend\r\nvim.opt.rtp:prepend(lazypath)\r\n\r\nlocal opt = vim.opt\r\nopt.signcolumn = \"auto:1-4\" -- needs varying length signcolumn\r\n-- opt.signcolumn = \"yes:2\" -- does not occur with fixed signcolumn length\r\n-- some options that slow down rendering\r\n--  disabling some can help avoid / reduce freezing\r\nopt.wrap = true\r\nopt.linebreak = true\r\nopt.showbreak = [[â†ª ]]\r\nopt.cursorline = true\r\nopt.scrolloff = 10\r\nopt.termguicolors = true\r\n\r\n-- LSP / plugins that frequently\r\n-- render signs \r\nrequire(\"lazy\").setup({\r\n  {\r\n    \"lewis6991/gitsigns.nvim\",\r\n    event = \"VeryLazy\",\r\n    config = function() require(\"gitsigns\").setup {} end,\r\n  },\r\n  {\r\n    \"neovim/nvim-lspconfig\",\r\n    config = function()\r\n      -- Most likely LSP required\r\n      -- that frequently sets many signs\r\n      require \"lspconfig\".pyright.setup {}\r\n    end,\r\n  },\r\n}, { root = pluginpath })\r\n````\r\n\r\n1. `nvim -u minimal_init.lua $SOME_FILE_WITH_MANY_SIGNS.py`\r\n2. Hold `j` or `k` to scroll say 10-20 lines\r\n3. Observe freezing / slow down in rendering\r\n\r\nCommenting out\r\n```lua\r\nopt.signcolumn = \"auto:1-4\" -- needs varying length signcolumn\r\n```\r\nfixes the problem.\r\n\r\nCommenting out groups (e.g., `opt.wrap .. opt.showbreak`, `opts.cursorline`) alleviates the issue and potentially fixes it. Similar with disabling `gitsigns` or LSP.\r\n\r\n### Expected behavior\r\n\r\nSmooth rendering without freezes.\r\n\r\n### Neovim version (nvim -v)\r\n\r\nNVIM v0.10.0-dev-1613+g585eeacb24\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\nno, doesn't have signcolumn refactor\r\n\r\n### Operating system/version\r\n\r\nArch Linux\r\n\r\n### Terminal name/version\r\n\r\nkitty 0.31.0 \r\n\r\n### $TERM environment variable\r\n\r\nxterm-kitty\r\n\r\n### Installation\r\n\r\nbuild from repo",
    "closed_at": "2023-11-21T14:32:19Z",
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/26135/comments",
    "created_at": "2023-11-21T13:00:08Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/26135/events",
    "html_url": "https://github.com/neovim/neovim/issues/26135",
    "id": 2004236603,
    "labels": [
        {
            "color": "FEF2C0",
            "default": false,
            "description": "issues reporting performance problems",
            "id": 101930601,
            "name": "performance",
            "node_id": "MDU6TGFiZWwxMDE5MzA2MDE=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/performance"
        },
        {
            "color": "f9d0c4",
            "default": false,
            "description": "wrong behavior that was introduced in a previous commit (please bisect)",
            "id": 619474658,
            "name": "bug-regression",
            "node_id": "MDU6TGFiZWw2MTk0NzQ2NTg=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-regression"
        },
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue has been tracked to a specific commit",
            "id": 1481421490,
            "name": "has:bisected",
            "node_id": "MDU6TGFiZWwxNDgxNDIxNDkw",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:bisected"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "extmarks, decorations, virtual text, namespaces",
            "id": 1680119719,
            "name": "extmarks",
            "node_id": "MDU6TGFiZWwxNjgwMTE5NzE5",
            "url": "https://api.github.com/repos/neovim/neovim/labels/extmarks"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "sign/number column",
            "id": 2962322085,
            "name": "column",
            "node_id": "MDU6TGFiZWwyOTYyMzIyMDg1",
            "url": "https://api.github.com/repos/neovim/neovim/labels/column"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/26135/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 186,
        "created_at": "2023-02-02T14:11:43Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
            "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
            "followers_url": "https://api.github.com/users/bfredl/followers",
            "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
            "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/bfredl",
            "id": 1363104,
            "login": "bfredl",
            "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
            "organizations_url": "https://api.github.com/users/bfredl/orgs",
            "received_events_url": "https://api.github.com/users/bfredl/received_events",
            "repos_url": "https://api.github.com/users/bfredl/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/bfredl"
        },
        "description": "",
        "due_on": "2024-03-01T08:00:00Z",
        "html_url": "https://github.com/neovim/neovim/milestone/36",
        "id": 8997654,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/36/labels",
        "node_id": "MI_kwDOAPphoM4AiUsW",
        "number": 36,
        "open_issues": 129,
        "state": "open",
        "title": "0.10",
        "updated_at": "2023-11-21T14:32:20Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/36"
    },
    "node_id": "I_kwDOAPphoM53djk7",
    "number": 26135,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/26135/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/26135/timeline",
    "title": "bug: rendering performance regression due to signcolumn",
    "updated_at": "2023-11-21T14:32:20Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/26135",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/39233597?v=4",
        "events_url": "https://api.github.com/users/fdschmidt93/events{/privacy}",
        "followers_url": "https://api.github.com/users/fdschmidt93/followers",
        "following_url": "https://api.github.com/users/fdschmidt93/following{/other_user}",
        "gists_url": "https://api.github.com/users/fdschmidt93/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/fdschmidt93",
        "id": 39233597,
        "login": "fdschmidt93",
        "node_id": "MDQ6VXNlcjM5MjMzNTk3",
        "organizations_url": "https://api.github.com/users/fdschmidt93/orgs",
        "received_events_url": "https://api.github.com/users/fdschmidt93/received_events",
        "repos_url": "https://api.github.com/users/fdschmidt93/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/fdschmidt93/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/fdschmidt93/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/fdschmidt93"
    }
}