{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "## Current Plan\r\n- Use a new option `fswatch` that takes three values `notify` `autolaod` and `off`. \r\n    - If `notify` is set we notify the user about changes.\r\n    - If `autoload` is set we automatically update the files. (For logs.)\r\n    - `off`\r\nWe can have these options set per file/filetype via `after/<LANG>,vim` That way we can leverage the existing filetype plugin.\r\n- For #1785, I am thinking of watching the directory that is supposed to contain the file. That way we can detect if a file was created and load it. \r\n- For [this](https://github.com/neovim/neovim/issues/1380#issuecomment-77283133) comment, stating that neovim should detect when a file was moved and reflect the changes accordingly, and write to a new location, I couldn't think of anything too reliable. If we watch directories, what is the upper limit? We can't watch the entire filesystem with all the subdirectories in it, and the user can always move a file to anywhere. Maybe we can watch the root directory of a project. (Eg, git repo) But then only the files inside the project will be covered. And that too might get too much in terms of resources. I don't know how atom does it. I will try and find it out. \r\n- For the fallback mechanism, the only way that we have right now is to run both (polling and fs notification) watchers simultaneously and see which receives the changes first. And use that. \r\n\r\n**EDIT:** A point that I missed, what I am thinking of is only giving notificatinos for buffer that is being currently edited, so that we don't break the workflow of a user editing something by notifying him about a change made in a buffer that isn't even visible. What are everyone else's thoughts about this? We can show notifications for the buffer that is active and queue the rest. \r\n\r\nDo suggest some improvements to this.\r\nThe current implementation resides at #12593. ",
    "closed_at": "2024-02-15T13:39:59Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "relevant comments on the design https://github.com/neovim/neovim/pull/12593#issuecomment-667654125",
            "created_at": "2020-08-02T22:09:36Z",
            "html_url": "https://github.com/neovim/neovim/issues/12605#issuecomment-667730793",
            "id": 667730793,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/12605",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY2NzczMDc5Mw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/667730793/reactions"
            },
            "updated_at": "2020-08-02T22:09:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/667730793",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/886074?v=4",
                "events_url": "https://api.github.com/users/teto/events{/privacy}",
                "followers_url": "https://api.github.com/users/teto/followers",
                "following_url": "https://api.github.com/users/teto/following{/other_user}",
                "gists_url": "https://api.github.com/users/teto/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/teto",
                "id": 886074,
                "login": "teto",
                "node_id": "MDQ6VXNlcjg4NjA3NA==",
                "organizations_url": "https://api.github.com/users/teto/orgs",
                "received_events_url": "https://api.github.com/users/teto/received_events",
                "repos_url": "https://api.github.com/users/teto/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/teto/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/teto/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/teto"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "# Status\r\n\r\nAs mentioned in the last comment of the original PR (https://github.com/neovim/neovim/pull/12593) I am thinking of splitting this issue into separate PRs:\r\n\r\n- [ ] Libuv based autoread. (https://github.com/neovim/neovim/pull/20801)\r\n- [ ] ~~New option to enable or disable filewatching itself.~~\r\n- [ ] A way of showing diff when we prompt the user for an update.\r\n- [ ] https://github.com/neovim/neovim/pull/12503\r\n\r\n@justinmk, point number 2 is up for debate. For now I have dropped the additional option. \r\n\r\ncc @teto @justinmk",
            "created_at": "2022-10-25T18:45:36Z",
            "html_url": "https://github.com/neovim/neovim/issues/12605#issuecomment-1290994235",
            "id": 1290994235,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/12605",
            "node_id": "IC_kwDOAPphoM5M8wI7",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1290994235/reactions"
            },
            "updated_at": "2023-03-05T14:30:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1290994235",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/29245744?v=4",
                "events_url": "https://api.github.com/users/BK1603/events{/privacy}",
                "followers_url": "https://api.github.com/users/BK1603/followers",
                "following_url": "https://api.github.com/users/BK1603/following{/other_user}",
                "gists_url": "https://api.github.com/users/BK1603/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/BK1603",
                "id": 29245744,
                "login": "BK1603",
                "node_id": "MDQ6VXNlcjI5MjQ1NzQ0",
                "organizations_url": "https://api.github.com/users/BK1603/orgs",
                "received_events_url": "https://api.github.com/users/BK1603/received_events",
                "repos_url": "https://api.github.com/users/BK1603/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/BK1603/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/BK1603/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/BK1603"
            }
        },
        {
            "author_association": "MEMBER",
            "body": ">  New option to enable or disable filewatching itself.\r\n\r\nWhy is a new option needed? 'autoread' already is that option.\r\n\r\n> A way of showing diff when we prompt the user for an update.\r\n\r\nBreaking this out into a separate PR is a good idea!",
            "created_at": "2022-10-27T04:43:15Z",
            "html_url": "https://github.com/neovim/neovim/issues/12605#issuecomment-1292985542",
            "id": 1292985542,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/12605",
            "node_id": "IC_kwDOAPphoM5NEWTG",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1292985542/reactions"
            },
            "updated_at": "2023-02-23T14:07:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1292985542",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I am thinking along the lines that what we are doing is changing the actual behavior of autoread. And this might change any tools/plugins that rely on this behavior. \r\nSo maybe giving an option, to switch back to how it used to work helps?\r\n\r\nBut I do remember you suggesting that we can ask users to change lua configurations if they do not want this. Do we want to go ahead with that?\r\n@justinmk ",
            "created_at": "2022-11-18T17:20:01Z",
            "html_url": "https://github.com/neovim/neovim/issues/12605#issuecomment-1320309791",
            "id": 1320309791,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/12605",
            "node_id": "IC_kwDOAPphoM5OslQf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1320309791/reactions"
            },
            "updated_at": "2023-02-23T14:08:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1320309791",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/29245744?v=4",
                "events_url": "https://api.github.com/users/BK1603/events{/privacy}",
                "followers_url": "https://api.github.com/users/BK1603/followers",
                "following_url": "https://api.github.com/users/BK1603/following{/other_user}",
                "gists_url": "https://api.github.com/users/BK1603/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/BK1603",
                "id": 29245744,
                "login": "BK1603",
                "node_id": "MDQ6VXNlcjI5MjQ1NzQ0",
                "organizations_url": "https://api.github.com/users/BK1603/orgs",
                "received_events_url": "https://api.github.com/users/BK1603/received_events",
                "repos_url": "https://api.github.com/users/BK1603/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/BK1603/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/BK1603/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/BK1603"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> I am thinking ... we are changing the actual behavior of autoread. And this might change any tools/plugins that rely on this behavior.\r\n\r\nHow are we changing it? What conflicts with `:help 'autoread'` ? Ah, I see your comment https://github.com/neovim/neovim/pull/12593#discussion_r613781065 :\r\n\r\n> Autoread was, before the autoread-tui PR was merged, an option that dictated the behavior of `checktime`. I don't think we ever automatically reloaded a file just because it was changed outside neovim.\r\n\r\nThat's not a hard requirement of 'autoread', it's just a historical limitation.\r\n\r\n> only give notifications for buffer that is being currently edited, so that we don't break the workflow of a user editing something by notifying him about a change made in a buffer that isn't even visible\r\n\r\nBy \"notification\" do you mean the warning prompt? https://github.com/neovim/neovim/issues/1785\r\n\r\nPer `:help 'autoread'`, that prompt should only appear if there are unsaved changes. So, there is rarely \"workflow breakage\". For cases where a file is often updated on-disk, user can `:setlocal noautoread` on that particular file to avoid a noisy prompt.\r\n\r\nIn general I think it makes sense to load all buffers (including hidden/non-visible buffers) so that plugins and commands will see the updated buffer contents. The user has plenty of control over this, via 'hidden', 'bufhidden' and buffer-local 'autoread'.",
            "created_at": "2023-02-23T13:29:08Z",
            "html_url": "https://github.com/neovim/neovim/issues/12605#issuecomment-1441796934",
            "id": 1441796934,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/12605",
            "node_id": "IC_kwDOAPphoM5V8BNG",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1441796934/reactions"
            },
            "updated_at": "2023-02-23T14:01:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1441796934",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "# Status\r\n\r\n- [ ] Our LSP filewatch module [#22405](https://github.com/neovim/neovim/pull/22405) [#27347](https://github.com/neovim/neovim/pull/27347) is maturing, so we need to think about lifting it to a public interace. Then use it for 'autoread' (but see notes in [#1380](https://github.com/neovim/neovim/issues/1380)).\r\n- [ ] User can see a diff when we prompt the user for an update?\r\n- [ ] https://github.com/neovim/neovim/pull/12503\r\n- [x] Libuv based autoread (overlaps with `_watch.lua` (see above)?). (https://github.com/neovim/neovim/pull/20801)\r\n- ~~New option to enable or disable filewatching itself.~~",
            "created_at": "2023-03-05T14:29:57Z",
            "html_url": "https://github.com/neovim/neovim/issues/12605#issuecomment-1455108139",
            "id": 1455108139,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/12605",
            "node_id": "IC_kwDOAPphoM5WuzAr",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1455108139/reactions"
            },
            "updated_at": "2024-02-15T13:40:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1455108139",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Merged with https://github.com/neovim/neovim/issues/1380#issuecomment-1946115753",
            "created_at": "2024-02-15T13:39:59Z",
            "html_url": "https://github.com/neovim/neovim/issues/12605#issuecomment-1946117442",
            "id": 1946117442,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/12605",
            "node_id": "IC_kwDOAPphoM5z_2VC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1946117442/reactions"
            },
            "updated_at": "2024-02-15T13:39:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1946117442",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        }
    ],
    "comments": 7,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/12605/comments",
    "created_at": "2020-07-07T16:50:11Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/12605/events",
    "html_url": "https://github.com/neovim/neovim/issues/12605",
    "id": 652472475,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 520282574,
            "name": "event-loop",
            "node_id": "MDU6TGFiZWw1MjAyODI1NzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/event-loop"
        },
        {
            "color": "F3A62E",
            "default": false,
            "description": "community: Google Summer of Code project",
            "id": 834483397,
            "name": "gsoc",
            "node_id": "MDU6TGFiZWw4MzQ0ODMzOTc=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/gsoc"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "filenames, path manipulation",
            "id": 3386070083,
            "name": "filesystem",
            "node_id": "LA_kwDOAPphoM7J01RD",
            "url": "https://api.github.com/repos/neovim/neovim/labels/filesystem"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 4242493821,
            "name": "options",
            "node_id": "LA_kwDOAPphoM7831F9",
            "url": "https://api.github.com/repos/neovim/neovim/labels/options"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/12605/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU2NTI0NzI0NzU=",
    "number": 12605,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 1,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/neovim/neovim/issues/12605/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/12605/timeline",
    "title": "autoread (fswatch) tracking issue",
    "updated_at": "2024-02-15T13:40:08Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/12605",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/29245744?v=4",
        "events_url": "https://api.github.com/users/BK1603/events{/privacy}",
        "followers_url": "https://api.github.com/users/BK1603/followers",
        "following_url": "https://api.github.com/users/BK1603/following{/other_user}",
        "gists_url": "https://api.github.com/users/BK1603/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/BK1603",
        "id": 29245744,
        "login": "BK1603",
        "node_id": "MDQ6VXNlcjI5MjQ1NzQ0",
        "organizations_url": "https://api.github.com/users/BK1603/orgs",
        "received_events_url": "https://api.github.com/users/BK1603/received_events",
        "repos_url": "https://api.github.com/users/BK1603/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/BK1603/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/BK1603/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/BK1603"
    }
}