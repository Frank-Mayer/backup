{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Neovim version (nvim -v)\r\n\r\nv0.8.0-dev-1098-gb616458af\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\nno\r\n\r\n### Operating system/version\r\n\r\nManjaro\r\n\r\n### Terminal name/version\r\n\r\nkitty\r\n\r\n### $TERM environment variable\r\n\r\nxterm-256color\r\n\r\n### Installation\r\n\r\nbuild from repo\r\n\r\n### How to reproduce the issue\r\n\r\nbuild the newest neovim, the problem start with [build(deps): bump tree-sitter-lua to v0.0.13](https://github.com/neovim/neovim/commit/279c7b11fb89776f89789ee7e0c4f2624a10d156)\r\nyou get seg fault\r\n\r\nfish: Job 1, 'nvim' terminated by signal SIGSEGV (Address boundary error)\r\nzsh: segmentation fault (core dumped)  nvim\r\n\r\nif you git checkout the commit before\r\n[docs(autocmds): re-add buffer param to docstring](https://github.com/neovim/neovim/commit/0f93aa12fdb07fd452706da8d13c590c86ce21de)\r\nand it work \r\n\r\n### Expected behavior\r\n\r\nit work\r\n\r\n### Actual behavior\r\n\r\nyou get seg fault\r\n\r\nfish: Job 1, 'nvim' terminated by signal SIGSEGV (Address boundary error)\r\nzsh: segmentation fault (core dumped)  nvim",
    "closed_at": "2023-11-29T14:02:07Z",
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "nvim start up with nvim --clean, and if the nvim-treesitter plugin is delete it start",
            "created_at": "2022-09-16T18:47:09Z",
            "html_url": "https://github.com/neovim/neovim/issues/20223#issuecomment-1249695279",
            "id": 1249695279,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20223",
            "node_id": "IC_kwDOAPphoM5KfNYv",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1249695279/reactions"
            },
            "updated_at": "2022-09-16T18:47:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1249695279",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1221622?v=4",
                "events_url": "https://api.github.com/users/seocamo/events{/privacy}",
                "followers_url": "https://api.github.com/users/seocamo/followers",
                "following_url": "https://api.github.com/users/seocamo/following{/other_user}",
                "gists_url": "https://api.github.com/users/seocamo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/seocamo",
                "id": 1221622,
                "login": "seocamo",
                "node_id": "MDQ6VXNlcjEyMjE2MjI=",
                "organizations_url": "https://api.github.com/users/seocamo/orgs",
                "received_events_url": "https://api.github.com/users/seocamo/received_events",
                "repos_url": "https://api.github.com/users/seocamo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/seocamo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/seocamo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/seocamo"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "We need exact reproduction steps with `nvim --clean` and the specific buffer it crashes with.\r\n\r\n(Needless to say, it has been working fine for me and many others.)",
            "created_at": "2022-09-16T18:50:14Z",
            "html_url": "https://github.com/neovim/neovim/issues/20223#issuecomment-1249697824",
            "id": 1249697824,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20223",
            "node_id": "IC_kwDOAPphoM5KfOAg",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1249697824/reactions"
            },
            "updated_at": "2022-09-16T18:50:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1249697824",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Then it's not a Neovim problem?",
            "created_at": "2022-09-16T18:51:18Z",
            "html_url": "https://github.com/neovim/neovim/issues/20223#issuecomment-1249698696",
            "id": 1249698696,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20223",
            "node_id": "IC_kwDOAPphoM5KfOOI",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1249698696/reactions"
            },
            "updated_at": "2022-09-16T18:51:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1249698696",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "well it can be some that neovim depend on, but i can build the commit before the tree-sitter-lua v0.0.13 and it work fine but build any commit after that commit and neovim seg fault, i do need to have the nvim-treesitter plugin install for it to seg fault, but this plugin work fine with the old commit and a plugin should not make seg fault and die ?",
            "created_at": "2022-09-16T20:25:42Z",
            "html_url": "https://github.com/neovim/neovim/issues/20223#issuecomment-1249781071",
            "id": 1249781071,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20223",
            "node_id": "IC_kwDOAPphoM5KfiVP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1249781071/reactions"
            },
            "updated_at": "2022-09-16T20:26:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1249781071",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1221622?v=4",
                "events_url": "https://api.github.com/users/seocamo/events{/privacy}",
                "followers_url": "https://api.github.com/users/seocamo/followers",
                "following_url": "https://api.github.com/users/seocamo/following{/other_user}",
                "gists_url": "https://api.github.com/users/seocamo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/seocamo",
                "id": 1221622,
                "login": "seocamo",
                "node_id": "MDQ6VXNlcjEyMjE2MjI=",
                "organizations_url": "https://api.github.com/users/seocamo/orgs",
                "received_events_url": "https://api.github.com/users/seocamo/received_events",
                "repos_url": "https://api.github.com/users/seocamo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/seocamo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/seocamo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/seocamo"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "First, nvim-treesitter replaces the parser. And if it is the parser that crashes (yet to be established), there is nothing Neovim can do to fix it).",
            "created_at": "2022-09-16T20:28:54Z",
            "html_url": "https://github.com/neovim/neovim/issues/20223#issuecomment-1249783464",
            "id": 1249783464,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20223",
            "node_id": "IC_kwDOAPphoM5Kfi6o",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1249783464/reactions"
            },
            "updated_at": "2022-09-16T20:28:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1249783464",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "ok, how can i get more info for you i am unsure? because it do work before that commit",
            "created_at": "2022-09-16T20:31:50Z",
            "html_url": "https://github.com/neovim/neovim/issues/20223#issuecomment-1249785613",
            "id": 1249785613,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20223",
            "node_id": "IC_kwDOAPphoM5KfjcN",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1249785613/reactions"
            },
            "updated_at": "2022-09-16T20:31:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1249785613",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1221622?v=4",
                "events_url": "https://api.github.com/users/seocamo/events{/privacy}",
                "followers_url": "https://api.github.com/users/seocamo/followers",
                "following_url": "https://api.github.com/users/seocamo/following{/other_user}",
                "gists_url": "https://api.github.com/users/seocamo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/seocamo",
                "id": 1221622,
                "login": "seocamo",
                "node_id": "MDQ6VXNlcjEyMjE2MjI=",
                "organizations_url": "https://api.github.com/users/seocamo/orgs",
                "received_events_url": "https://api.github.com/users/seocamo/received_events",
                "repos_url": "https://api.github.com/users/seocamo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/seocamo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/seocamo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/seocamo"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I need complete reproducing steps: a _minimal_\r\n1. `init.lua`  (not using nvim-treesitter)\r\n2. `test.lua`\r\n\r\nthat I can run with `nvim --clean -u init.lua test.lua` to observe the crash.",
            "created_at": "2022-09-17T08:38:07Z",
            "html_url": "https://github.com/neovim/neovim/issues/20223#issuecomment-1250029951",
            "id": 1250029951,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20223",
            "node_id": "IC_kwDOAPphoM5KgfF_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1250029951/reactions"
            },
            "updated_at": "2022-09-17T08:38:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1250029951",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "it look like it is a error in MunifTanjim's tree-sitter-lua v 0.0.13 that is not in v 0.0.12 (as that is what change in the commit) maybe or it is neovim's cmdheight code ??\r\n\r\nright now i can reproduces this with kyazdani42's nvim-tree.lua plugin and when calling the setup function(require\"nvim-tree\".setup{}) and with the vim.opt.cmdheight = 0 and this seg fault neovim.\r\n\r\nas i find cmdheight buggy any way, and setting this to 1 fix this, i just do that as i don't have the time to find the 1 line in nvim-tree that reproduces this with cmdheight as i use 8 hours on this now :)\r\n\r\nif no one else want to look for this bug, you can just close this issue.\r\n\r\n",
            "created_at": "2022-09-18T13:44:12Z",
            "html_url": "https://github.com/neovim/neovim/issues/20223#issuecomment-1250312009",
            "id": 1250312009,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20223",
            "node_id": "IC_kwDOAPphoM5Khj9J",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1250312009/reactions"
            },
            "updated_at": "2022-09-18T14:15:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1250312009",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1221622?v=4",
                "events_url": "https://api.github.com/users/seocamo/events{/privacy}",
                "followers_url": "https://api.github.com/users/seocamo/followers",
                "following_url": "https://api.github.com/users/seocamo/following{/other_user}",
                "gists_url": "https://api.github.com/users/seocamo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/seocamo",
                "id": 1221622,
                "login": "seocamo",
                "node_id": "MDQ6VXNlcjEyMjE2MjI=",
                "organizations_url": "https://api.github.com/users/seocamo/orgs",
                "received_events_url": "https://api.github.com/users/seocamo/received_events",
                "repos_url": "https://api.github.com/users/seocamo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/seocamo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/seocamo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/seocamo"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Closing this since we've had no reports of this with later versions (current is v0.0.19). Feel free to open a new issue (with full reproduction steps, including the file!) if you observe it again with the current releases.",
            "created_at": "2023-11-29T14:02:07Z",
            "html_url": "https://github.com/neovim/neovim/issues/20223#issuecomment-1831953143",
            "id": 1831953143,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/20223",
            "node_id": "IC_kwDOAPphoM5tMWL3",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1831953143/reactions"
            },
            "updated_at": "2023-11-29T14:02:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1831953143",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        }
    ],
    "comments": 9,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/20223/comments",
    "created_at": "2022-09-16T18:32:31Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/20223/events",
    "html_url": "https://github.com/neovim/neovim/issues/20223",
    "id": 1376325547,
    "labels": [
        {
            "color": "FBCA04",
            "default": false,
            "description": "We need minimal steps to reproduce the issue",
            "id": 298863445,
            "name": "needs:repro",
            "node_id": "MDU6TGFiZWwyOTg4NjM0NDU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:repro"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "issue reporting a crash or segfault",
            "id": 435854234,
            "name": "bug-crash",
            "node_id": "MDU6TGFiZWw0MzU4NTQyMzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-crash"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "build dependencies (LuaJIT, LibUV, etc.)",
            "id": 1205400704,
            "name": "dependencies",
            "node_id": "MDU6TGFiZWwxMjA1NDAwNzA0",
            "url": "https://api.github.com/repos/neovim/neovim/labels/dependencies"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 1799626557,
            "name": "treesitter",
            "node_id": "MDU6TGFiZWwxNzk5NjI2NTU3",
            "url": "https://api.github.com/repos/neovim/neovim/labels/treesitter"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/20223/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM5SCQ-r",
    "number": 20223,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 1,
        "total_count": 1,
        "url": "https://api.github.com/repos/neovim/neovim/issues/20223/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/20223/timeline",
    "title": "seg fault because of tree-sitter-lua v0.0.13",
    "updated_at": "2023-11-29T14:02:08Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/20223",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1221622?v=4",
        "events_url": "https://api.github.com/users/seocamo/events{/privacy}",
        "followers_url": "https://api.github.com/users/seocamo/followers",
        "following_url": "https://api.github.com/users/seocamo/following{/other_user}",
        "gists_url": "https://api.github.com/users/seocamo/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/seocamo",
        "id": 1221622,
        "login": "seocamo",
        "node_id": "MDQ6VXNlcjEyMjE2MjI=",
        "organizations_url": "https://api.github.com/users/seocamo/orgs",
        "received_events_url": "https://api.github.com/users/seocamo/received_events",
        "repos_url": "https://api.github.com/users/seocamo/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/seocamo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/seocamo/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/seocamo"
    }
}