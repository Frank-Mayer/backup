{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nWhen i open the neovim, it will pop up error message: `E576 : Error while reading ShaDa file: expected positive integer at position 3173`. I search for a while and delete the files in `~/.local/state/nvim/shada/`, but it still occur this error.\r\n\r\nHow can i solve this? \r\n![b062dce034b2db0668173ea4abea71f](https://user-images.githubusercontent.com/96438179/234816879-073f65b5-7c94-4d98-8a7a-73b19ac4383b.jpg)\r\n\n\n### Steps to reproduce\n\nonly this issue not occur, when using `nvim --clean`\n\n### Expected behavior\n\n![b062dce034b2db0668173ea4abea71f](https://user-images.githubusercontent.com/96438179/234817416-17d32848-22ca-4c76-bd84-d8e9743c060a.jpg)\r\n\r\n\n\n### Neovim version (nvim -v)\n\n0.8.1\n\n### Vim (not Nvim) behaves the same?\n\nno\n\n### Operating system/version\n\nipad(M2) using alpine\n\n### Terminal name/version\n\nish\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\napk add neovim",
    "closed_at": "2024-05-16T14:57:00Z",
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "I had this issue, turns out the shada file is just in a different location (found solution here: https://github.com/neovim/neovim/issues/12101#issuecomment-1379980289\r\n \r\ntry removing this folder: `~/.local/state/nvim/shada`",
            "created_at": "2023-05-07T17:10:29Z",
            "html_url": "https://github.com/neovim/neovim/issues/23345#issuecomment-1537496040",
            "id": 1537496040,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/23345",
            "node_id": "IC_kwDOAPphoM5bpFPo",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1537496040/reactions"
            },
            "updated_at": "2023-05-07T17:10:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1537496040",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59071534?v=4",
                "events_url": "https://api.github.com/users/nosvagor/events{/privacy}",
                "followers_url": "https://api.github.com/users/nosvagor/followers",
                "following_url": "https://api.github.com/users/nosvagor/following{/other_user}",
                "gists_url": "https://api.github.com/users/nosvagor/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/nosvagor",
                "id": 59071534,
                "login": "nosvagor",
                "node_id": "MDQ6VXNlcjU5MDcxNTM0",
                "organizations_url": "https://api.github.com/users/nosvagor/orgs",
                "received_events_url": "https://api.github.com/users/nosvagor/received_events",
                "repos_url": "https://api.github.com/users/nosvagor/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/nosvagor/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/nosvagor/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/nosvagor"
            }
        },
        {
            "author_association": "NONE",
            "body": "Cleaning this up is relatively easy, as the linked issue above shows. But the harder question is: how to debug what is corrupting shada files in the first place? I've had it happen on two machines half a dozen times this week alone. I can make it go away by nuking the files, but I don't know where to begin debugging how they are ending up corrupted in the first place. The previous issues about this being locked doesn't help...",
            "created_at": "2024-01-04T19:47:05Z",
            "html_url": "https://github.com/neovim/neovim/issues/23345#issuecomment-1877668860",
            "id": 1877668860,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/23345",
            "node_id": "IC_kwDOAPphoM5v6vP8",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1877668860/reactions"
            },
            "updated_at": "2024-01-04T19:47:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1877668860",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/173595?v=4",
                "events_url": "https://api.github.com/users/alerque/events{/privacy}",
                "followers_url": "https://api.github.com/users/alerque/followers",
                "following_url": "https://api.github.com/users/alerque/following{/other_user}",
                "gists_url": "https://api.github.com/users/alerque/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/alerque",
                "id": 173595,
                "login": "alerque",
                "node_id": "MDQ6VXNlcjE3MzU5NQ==",
                "organizations_url": "https://api.github.com/users/alerque/orgs",
                "received_events_url": "https://api.github.com/users/alerque/received_events",
                "repos_url": "https://api.github.com/users/alerque/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/alerque/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/alerque/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/alerque"
            }
        },
        {
            "author_association": "NONE",
            "body": "I hate to enter a conversation just to notify everyone that I have the same issue, but I do too. This issue has been reoccurring to me for about one half year. I don't know why my ShaDa-file keeps getting corrupted but it is obnoxious. I really need to persist global options and oldfiles and Neovim presents no other way (afaict).\r\n\r\nWhich is why I have the following questions; how to debug this issue? Do I need to execute neovim with an strace-equivalent on windows? My suspicion is that Neovim does not wait for the ShaDa-file is not completely written before the Neovim process exits on shutdown and thus starts getting corrupted once it is larger than a specific size. Mine is currently 1162 kb large. There are 27 of them with names like `main.shada.tmp.a` etc.",
            "created_at": "2024-02-08T16:08:28Z",
            "html_url": "https://github.com/neovim/neovim/issues/23345#issuecomment-1934452511",
            "id": 1934452511,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/23345",
            "node_id": "IC_kwDOAPphoM5zTWcf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1934452511/reactions"
            },
            "updated_at": "2024-02-08T16:08:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1934452511",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13405712?v=4",
                "events_url": "https://api.github.com/users/axelhj/events{/privacy}",
                "followers_url": "https://api.github.com/users/axelhj/followers",
                "following_url": "https://api.github.com/users/axelhj/following{/other_user}",
                "gists_url": "https://api.github.com/users/axelhj/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/axelhj",
                "id": 13405712,
                "login": "axelhj",
                "node_id": "MDQ6VXNlcjEzNDA1NzEy",
                "organizations_url": "https://api.github.com/users/axelhj/orgs",
                "received_events_url": "https://api.github.com/users/axelhj/received_events",
                "repos_url": "https://api.github.com/users/axelhj/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/axelhj/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/axelhj/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/axelhj"
            }
        },
        {
            "author_association": "NONE",
            "body": "This is happening to me now too. I recently switched from Linux to MacOS. I nuke `~/.local/state/nvim/shada` and it's fine for the first open, but then it comes back for all subsequent opens until I nuke it again. Something is corrupting it.\r\n\r\n```\r\nE576: Error while reading ShaDa file: there is an item at position 8182 that must not be there: Missing items are for\r\ninternal uses only\r\n```",
            "created_at": "2024-05-03T04:28:53Z",
            "html_url": "https://github.com/neovim/neovim/issues/23345#issuecomment-2092104197",
            "id": 2092104197,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/23345",
            "node_id": "IC_kwDOAPphoM58svoF",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2092104197/reactions"
            },
            "updated_at": "2024-05-03T04:28:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2092104197",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1324601?v=4",
                "events_url": "https://api.github.com/users/Aaronik/events{/privacy}",
                "followers_url": "https://api.github.com/users/Aaronik/followers",
                "following_url": "https://api.github.com/users/Aaronik/following{/other_user}",
                "gists_url": "https://api.github.com/users/Aaronik/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Aaronik",
                "id": 1324601,
                "login": "Aaronik",
                "node_id": "MDQ6VXNlcjEzMjQ2MDE=",
                "organizations_url": "https://api.github.com/users/Aaronik/orgs",
                "received_events_url": "https://api.github.com/users/Aaronik/received_events",
                "repos_url": "https://api.github.com/users/Aaronik/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Aaronik/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Aaronik/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Aaronik"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@Aaronik what nvim `:version` exactly?",
            "created_at": "2024-05-03T08:51:40Z",
            "html_url": "https://github.com/neovim/neovim/issues/23345#issuecomment-2092582561",
            "id": 2092582561,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/23345",
            "node_id": "IC_kwDOAPphoM58ukah",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2092582561/reactions"
            },
            "updated_at": "2024-05-03T08:51:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2092582561",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "Yeah true here are my deets, @justinmk:\r\n\r\n### Neovim version (nvim -v)\r\nNVIM v0.9.5\r\nBuild type: Release\r\nLuaJIT 2.1.1710088188\r\n\r\n   system vimrc file: \"$VIM/sysinit.vim\"\r\n  fall-back for $VIM: \"/opt/homebrew/Cellar/neovim/0.9.5/share/nvim\"\r\n\r\n### Vim (not Nvim) behaves the same?\r\nno it does not, it opens without complaint about the shada file\r\n\r\n### Operating system/version\r\n```sh\r\nuname -a\r\nDarwin m24.local 23.4.0 Darwin Kernel Version 23.4.0: Fri Mar 15 00:12:37 PDT 2024; root:xnu-10063.101.17~1/RELEASE_ARM64_T6031 arm64\r\n```\r\n\r\n### Terminal name/version\r\nzsh on iterm2: Build 3.4.23\r\nAlso happens with zsh on the built-in macos terminal, Version 2.14 (453)\r\n\r\n### $TERM environment variable\r\n```sh\r\necho $TERM\r\nxterm-256color\r\n```\r\n\r\n### Installation\r\nvia homebrew:\r\n\r\n```sh\r\nbrew info nvim\r\n==> neovim: stable 0.9.5 (bottled), HEAD\r\nAmbitious Vim-fork focused on extensibility and agility\r\nhttps://neovim.io/\r\nInstalled\r\n/opt/homebrew/Cellar/neovim/0.9.5 (1,737 files, 26.7MB) *\r\n  Poured from bottle using the formulae.brew.sh API on 2024-04-24 at 19:36:33\r\nFrom: https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/n/neovim.rb\r\nLicense: Apache-2.0\r\n==> Dependencies\r\nBuild: luarocks ✘, cmake ✘, lpeg ✘\r\nRequired: libtermkey ✔, gettext ✔, libuv ✔, libvterm ✔, luajit ✘, luv ✔, msgpack ✔, tree-sitter ✘, unibilium ✔\r\n==> Options\r\n--HEAD\r\n\tInstall HEAD version\r\n==> Analytics\r\ninstall: 22,477 (30 days), 76,631 (90 days), 343,787 (365 days)\r\ninstall-on-request: 22,283 (30 days), 75,957 (90 days), 341,188 (365 days)\r\nbuild-error: 1,054 (30 days)\r\n```",
            "created_at": "2024-05-03T16:53:41Z",
            "html_url": "https://github.com/neovim/neovim/issues/23345#issuecomment-2093394012",
            "id": 2093394012,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/23345",
            "node_id": "IC_kwDOAPphoM58xqhc",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2093394012/reactions"
            },
            "updated_at": "2024-05-03T16:53:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2093394012",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1324601?v=4",
                "events_url": "https://api.github.com/users/Aaronik/events{/privacy}",
                "followers_url": "https://api.github.com/users/Aaronik/followers",
                "following_url": "https://api.github.com/users/Aaronik/following{/other_user}",
                "gists_url": "https://api.github.com/users/Aaronik/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Aaronik",
                "id": 1324601,
                "login": "Aaronik",
                "node_id": "MDQ6VXNlcjEzMjQ2MDE=",
                "organizations_url": "https://api.github.com/users/Aaronik/orgs",
                "received_events_url": "https://api.github.com/users/Aaronik/received_events",
                "repos_url": "https://api.github.com/users/Aaronik/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Aaronik/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Aaronik/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Aaronik"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> NVIM v0.9.5\r\n\r\nTry 0.10",
            "created_at": "2024-05-16T14:57:00Z",
            "html_url": "https://github.com/neovim/neovim/issues/23345#issuecomment-2115480541",
            "id": 2115480541,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/23345",
            "node_id": "IC_kwDOAPphoM5-F6vd",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2115480541/reactions"
            },
            "updated_at": "2024-05-16T14:57:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2115480541",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "I've upgraded to 0.10 but am still seeing errors around writing to the shada file. Don't have an error handy but will update this when I find one.",
            "created_at": "2024-06-12T18:57:50Z",
            "html_url": "https://github.com/neovim/neovim/issues/23345#issuecomment-2163707863",
            "id": 2163707863,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/23345",
            "node_id": "IC_kwDOAPphoM6A94_X",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2163707863/reactions"
            },
            "updated_at": "2024-06-12T18:57:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2163707863",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1324601?v=4",
                "events_url": "https://api.github.com/users/Aaronik/events{/privacy}",
                "followers_url": "https://api.github.com/users/Aaronik/followers",
                "following_url": "https://api.github.com/users/Aaronik/following{/other_user}",
                "gists_url": "https://api.github.com/users/Aaronik/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Aaronik",
                "id": 1324601,
                "login": "Aaronik",
                "node_id": "MDQ6VXNlcjEzMjQ2MDE=",
                "organizations_url": "https://api.github.com/users/Aaronik/orgs",
                "received_events_url": "https://api.github.com/users/Aaronik/received_events",
                "repos_url": "https://api.github.com/users/Aaronik/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Aaronik/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Aaronik/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Aaronik"
            }
        }
    ],
    "comments": 8,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/23345/comments",
    "created_at": "2023-04-27T09:16:15Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/23345/events",
    "html_url": "https://github.com/neovim/neovim/issues/23345",
    "id": 1686455064,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "FBCA04",
            "default": false,
            "description": "",
            "id": 392811090,
            "name": "revisit-at-release",
            "node_id": "MDU6TGFiZWwzOTI4MTEwOTA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/revisit-at-release"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "save/restore editor state: shada, context, ctx",
            "id": 4449264023,
            "name": "editor-state",
            "node_id": "LA_kwDOAPphoM8AAAABCTJhlw",
            "url": "https://api.github.com/repos/neovim/neovim/labels/editor-state"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/23345/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM5khUMY",
    "number": 23345,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/23345/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/23345/timeline",
    "title": "Error while reading ShaDa file: expected positive integer at position 3173 ",
    "updated_at": "2024-06-12T18:57:51Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/23345",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/96438179?v=4",
        "events_url": "https://api.github.com/users/EdwardWong1994/events{/privacy}",
        "followers_url": "https://api.github.com/users/EdwardWong1994/followers",
        "following_url": "https://api.github.com/users/EdwardWong1994/following{/other_user}",
        "gists_url": "https://api.github.com/users/EdwardWong1994/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/EdwardWong1994",
        "id": 96438179,
        "login": "EdwardWong1994",
        "node_id": "U_kgDOBb-How",
        "organizations_url": "https://api.github.com/users/EdwardWong1994/orgs",
        "received_events_url": "https://api.github.com/users/EdwardWong1994/received_events",
        "repos_url": "https://api.github.com/users/EdwardWong1994/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/EdwardWong1994/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/EdwardWong1994/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/EdwardWong1994"
    }
}