{
    "active_lock_reason": null,
    "assignee": {
        "avatar_url": "https://avatars.githubusercontent.com/u/29580810?v=4",
        "events_url": "https://api.github.com/users/famiu/events{/privacy}",
        "followers_url": "https://api.github.com/users/famiu/followers",
        "following_url": "https://api.github.com/users/famiu/following{/other_user}",
        "gists_url": "https://api.github.com/users/famiu/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/famiu",
        "id": 29580810,
        "login": "famiu",
        "node_id": "MDQ6VXNlcjI5NTgwODEw",
        "organizations_url": "https://api.github.com/users/famiu/orgs",
        "received_events_url": "https://api.github.com/users/famiu/received_events",
        "repos_url": "https://api.github.com/users/famiu/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/famiu/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/famiu/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/famiu"
    },
    "assignees": [
        {
            "avatar_url": "https://avatars.githubusercontent.com/u/29580810?v=4",
            "events_url": "https://api.github.com/users/famiu/events{/privacy}",
            "followers_url": "https://api.github.com/users/famiu/followers",
            "following_url": "https://api.github.com/users/famiu/following{/other_user}",
            "gists_url": "https://api.github.com/users/famiu/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/famiu",
            "id": 29580810,
            "login": "famiu",
            "node_id": "MDQ6VXNlcjI5NTgwODEw",
            "organizations_url": "https://api.github.com/users/famiu/orgs",
            "received_events_url": "https://api.github.com/users/famiu/received_events",
            "repos_url": "https://api.github.com/users/famiu/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/famiu/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/famiu/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/famiu"
        }
    ],
    "author_association": "NONE",
    "body": "<!-- Before reporting: search existing issues and check the FAQ. -->\r\n\r\n- `nvim --version`: 0.4.3 / v0.5.0-253-g138480939\r\n- `vim -u DEFAULTS` (version: ) behaves differently?\r\n- Operating system/version: ArchLinux latest in WSL\r\n- Terminal name/version: no applicable\r\n- `$TERM`: no applicable\r\n\r\ninitial text:\r\n```\r\nabc\r\n{\r\ndef\r\n}\r\n```\r\ntype: `yyjjvi{p`\r\n\r\nreceives following edits from nvim_buf_lines_event (`[buf, tick, firstLine, lastLine, lineData, more]`)\r\n```json\r\n[\r\n [1, 1, 2, 3, [\"\"], 0],\r\n [1, 2, 2, 3, [\"}\"], 0], // <- here is the problem\r\n [1, 3, 3, 4, [], 0],\r\n [1, 4, 3, 3, [\"abc\", \"}\"], 0]\r\n]\r\n```\r\n\r\nThe result after applying these edits is\r\n```\r\nabc\r\n{\r\n}\r\nabc\r\n}\r\n```\r\nrather than:\r\n```\r\nabc\r\n{\r\n\r\nabc\r\n}\r\n```\r\n\r\nI'm not sure if i don't miss anything here and it's a bug. Pressing `u` followed by `r` returns expected changes. Terminal nvim behaves as expected",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Other errors discovered #11380 ",
            "created_at": "2019-12-25T17:56:38Z",
            "html_url": "https://github.com/neovim/neovim/issues/11591#issuecomment-568919310",
            "id": 568919310,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/11591",
            "node_id": "MDEyOklzc3VlQ29tbWVudDU2ODkxOTMxMA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/568919310/reactions"
            },
            "updated_at": "2019-12-25T17:56:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/568919310",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/296363?v=4",
                "events_url": "https://api.github.com/users/norcalli/events{/privacy}",
                "followers_url": "https://api.github.com/users/norcalli/followers",
                "following_url": "https://api.github.com/users/norcalli/following{/other_user}",
                "gists_url": "https://api.github.com/users/norcalli/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/norcalli",
                "id": 296363,
                "login": "norcalli",
                "node_id": "MDQ6VXNlcjI5NjM2Mw==",
                "organizations_url": "https://api.github.com/users/norcalli/orgs",
                "received_events_url": "https://api.github.com/users/norcalli/received_events",
                "repos_url": "https://api.github.com/users/norcalli/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/norcalli/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/norcalli/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/norcalli"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Looks like this is still an issue on b7084fef4c85\r\n\r\n## Steps using pynvim\r\n\r\n```\r\nimport pynvim\r\nn = pynvim.attach('socket', path='...')\r\nn.request('nvim_buf_attach', 1, False, {})\r\nwhile True: m=n.next_message(); print(m);\r\n\r\n['notification', 'nvim_buf_changedtick_event', [<Buffer(handle=1)>, 6]]\r\n['notification', 'nvim_buf_lines_event', [<Buffer(handle=1)>, 7, 2, 3, [''], False]]\r\n['notification', 'nvim_buf_lines_event', [<Buffer(handle=1)>, 8, 2, 3, ['}'], False]]\r\n['notification', 'nvim_buf_lines_event', [<Buffer(handle=1)>, 9, 3, 4, [], False]]\r\n['notification', 'nvim_buf_lines_event', [<Buffer(handle=1)>, 10, 3, 3, ['abc', '}'], False]]\r\n```",
            "created_at": "2022-06-26T12:27:44Z",
            "html_url": "https://github.com/neovim/neovim/issues/11591#issuecomment-1166517462",
            "id": 1166517462,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/11591",
            "node_id": "IC_kwDOAPphoM5Fh6TW",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1166517462/reactions"
            },
            "updated_at": "2022-06-26T12:28:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1166517462",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I'm not sure how to handle this.\r\nfirst notification `[1, 1, 2, 3, [\"\"], 0]` from  `truncate_line` make lnum 3 to empty `''`\r\nhttps://github.com/neovim/neovim/blob/d7359a87425dc38efda4f74bd580bae9946abe31/src/nvim/ops.c#L1732\r\n\r\nin `truncate_line -> changed_bytes -> buf_updates_send_changes`\r\n\r\nsecond  `[1, 2, 2, 3, [\"}\"], 0]` from `do_join` \r\nhttps://github.com/neovim/neovim/blob/d7359a87425dc38efda4f74bd580bae9946abe31/src/nvim/ops.c#L1745\r\n\r\nin `do_join` newp get value from there . It merges the text `}` of the next line (lnum 4) into lnum 3 `''` . then newp will be `}`  and lnum 3 text will replace by newp in `ml_replace` . then `changed_lines` invoked send buf changes. now `ml_get(3)` is `}`.\r\n\r\nhttps://github.com/neovim/neovim/blob/d7359a87425dc38efda4f74bd580bae9946abe31/src/nvim/ops.c#L4109-L4154\r\n\r\nany idea.",
            "created_at": "2023-11-01T06:43:17Z",
            "html_url": "https://github.com/neovim/neovim/issues/11591#issuecomment-1788492122",
            "id": 1788492122,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/11591",
            "node_id": "IC_kwDOAPphoM5qmjla",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1788492122/reactions"
            },
            "updated_at": "2023-11-01T08:19:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1788492122",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/11591/comments",
    "created_at": "2019-12-22T01:44:02Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/11591/events",
    "html_url": "https://github.com/neovim/neovim/issues/11591",
    "id": 541394987,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "libnvim, Nvim RPC API",
            "id": 103819671,
            "name": "api",
            "node_id": "MDU6TGFiZWwxMDM4MTk2NzE=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/api"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/11591/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 177,
        "created_at": "2023-02-02T14:11:43Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
            "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
            "followers_url": "https://api.github.com/users/bfredl/followers",
            "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
            "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/bfredl",
            "id": 1363104,
            "login": "bfredl",
            "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
            "organizations_url": "https://api.github.com/users/bfredl/orgs",
            "received_events_url": "https://api.github.com/users/bfredl/received_events",
            "repos_url": "https://api.github.com/users/bfredl/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/bfredl"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/36",
        "id": 8997654,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/36/labels",
        "node_id": "MI_kwDOAPphoM4AiUsW",
        "number": 36,
        "open_issues": 128,
        "state": "open",
        "title": "0.10",
        "updated_at": "2023-11-01T02:10:43Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/36"
    },
    "node_id": "MDU6SXNzdWU1NDEzOTQ5ODc=",
    "number": 11591,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/11591/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/11591/timeline",
    "title": "nvim_buf_lines_event: wrong edits received",
    "updated_at": "2023-11-01T08:19:11Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/11591",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8881674?v=4",
        "events_url": "https://api.github.com/users/asvetliakov/events{/privacy}",
        "followers_url": "https://api.github.com/users/asvetliakov/followers",
        "following_url": "https://api.github.com/users/asvetliakov/following{/other_user}",
        "gists_url": "https://api.github.com/users/asvetliakov/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/asvetliakov",
        "id": 8881674,
        "login": "asvetliakov",
        "node_id": "MDQ6VXNlcjg4ODE2NzQ=",
        "organizations_url": "https://api.github.com/users/asvetliakov/orgs",
        "received_events_url": "https://api.github.com/users/asvetliakov/received_events",
        "repos_url": "https://api.github.com/users/asvetliakov/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/asvetliakov/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/asvetliakov/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/asvetliakov"
    }
}