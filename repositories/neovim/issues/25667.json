{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nI don't know if this is a bug:\r\nThere are some edge cases where creating a mapping with lhs being a keycode: `vim.keymap.set(...,vim.keycode(map),...)` and getting the map with `maparg()` (or `nvim_get_keymap()` gives a different `lhsraw` than what `vim.keycode()` returned.\r\n\r\nThis is unexpected, as one could presume that passing the internal representation of the mapping to `vim.keymap.set` would not cause the mapping to be parsed again.\r\n\r\nThe scripts that affect this bug are scripts that save keymaps separately and then check if they exist.\r\nThere is the workaround of using `lhs` with `keytrans()` instead.\n\n### Steps to reproduce\n\nnvim --clean\r\n:setf lua\r\no\r\nlocal map=vim.keycode('<C-M-e>')\r\nvim.keymap.set('n',map,'')\r\nfor _,v in ipairs(vim.api.nvim_get_keymap('n')) do\r\n    if map==v.lhsraw then error() end\r\nend\r\n<ESC>\r\n:source\n\n### Expected behavior\n\nAn error should be raised\n\n### Neovim version (nvim -v)\n\n0.10.0-dev-d2d3885\n\n### Vim (not Nvim) behaves the same?\n\nN/A\n\n### Operating system/version\n\nlinux 6.5.7-arch1-1\n\n### Terminal name/version\n\nNeovim Terminal \n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\npacman",
    "closed_at": "2023-10-16T08:50:13Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Mapping API doesn't support raw keycodes.",
            "created_at": "2023-10-16T08:50:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/25667#issuecomment-1764016318",
            "id": 1764016318,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25667",
            "node_id": "IC_kwDOAPphoM5pJMC-",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1764016318/reactions"
            },
            "updated_at": "2023-10-16T08:50:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1764016318",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/25667/comments",
    "created_at": "2023-10-16T08:48:33Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/25667/events",
    "html_url": "https://github.com/neovim/neovim/issues/25667",
    "id": 1944701497,
    "labels": [
        {
            "color": "e6e6e6",
            "default": false,
            "description": "Issues that are closed as \"invalid\"",
            "id": 77997477,
            "name": "closed:invalid",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Nw==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/closed:invalid"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/25667/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM5z6co5",
    "number": 25667,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/25667/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "not_planned",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/25667/timeline",
    "title": "Edge case with `maparg().lhsraw` and `vim.keycode`",
    "updated_at": "2023-10-16T08:50:21Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/25667",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/107814000?v=4",
        "events_url": "https://api.github.com/users/altermo/events{/privacy}",
        "followers_url": "https://api.github.com/users/altermo/followers",
        "following_url": "https://api.github.com/users/altermo/following{/other_user}",
        "gists_url": "https://api.github.com/users/altermo/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/altermo",
        "id": 107814000,
        "login": "altermo",
        "node_id": "U_kgDOBm0ccA",
        "organizations_url": "https://api.github.com/users/altermo/orgs",
        "received_events_url": "https://api.github.com/users/altermo/received_events",
        "repos_url": "https://api.github.com/users/altermo/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/altermo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/altermo/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/altermo"
    }
}