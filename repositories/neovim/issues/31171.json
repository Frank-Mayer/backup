{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nI was setting up my new Mac today when I encountered an issue I did not have previously. Not sure if this is an M4 issue (was previously on an Intel based Mac and have since upgraded to M4). \n\nWhen deleting a line with a diagnostic log showing from gopls, NeoVim crashes and I have to complete close my terminal to be able to recover. \n\nI have tested with other LSPs (PyRight and TSServer) and the behaviour was not present on these however I cannot be sure. \n\n### Steps to reproduce using \"nvim -u minimal_init.lua\"\n\n1. Create a go file with the gopls LSP active. \n2. Create an error in the file (such as declaring `package main` twice)\n3. Delete the line once the diagnostic log appears using `dd`\n\nNeoVim will subsequently hang/crash.\n\nI have noticed in Activity Monitor that the GoPls process sees no noticeable change, however the NeoVim process spikes to 100% CPU time.\n\n### Expected behavior\n\nNeoVim does not hang\n\n### Nvim version (nvim -v)\n\nv0.10.2\n\n### Language server name/version\n\ngopls 0.16.2\n\n### Operating system/version\n\n15.1 (24B2082)\n\n### Log file\n\n_No response_",
    "closed_at": "2024-11-12T05:18:24Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/42494246?v=4",
        "events_url": "https://api.github.com/users/harrydayexe/events{/privacy}",
        "followers_url": "https://api.github.com/users/harrydayexe/followers",
        "following_url": "https://api.github.com/users/harrydayexe/following{/other_user}",
        "gists_url": "https://api.github.com/users/harrydayexe/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/harrydayexe",
        "id": 42494246,
        "login": "harrydayexe",
        "node_id": "MDQ6VXNlcjQyNDk0MjQ2",
        "organizations_url": "https://api.github.com/users/harrydayexe/orgs",
        "received_events_url": "https://api.github.com/users/harrydayexe/received_events",
        "repos_url": "https://api.github.com/users/harrydayexe/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/harrydayexe/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/harrydayexe/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/harrydayexe",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Cannot reproduce on Linux",
            "created_at": "2024-11-11T23:49:43Z",
            "html_url": "https://github.com/neovim/neovim/issues/31171#issuecomment-2469302958",
            "id": 2469302958,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31171",
            "node_id": "IC_kwDOAPphoM6TLpKu",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2469302958/reactions"
            },
            "updated_at": "2024-11-11T23:49:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2469302958",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "I also cannot reproduce this on an intel based Mac, I believe this may be due to Apple Silicon but I am unsure on how to debug this further. If someone can give me any instructions to produce some logs which may be useful in debugging, I am more than happy to follow them and provide the information I can",
            "created_at": "2024-11-12T00:06:58Z",
            "html_url": "https://github.com/neovim/neovim/issues/31171#issuecomment-2469321040",
            "id": 2469321040,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31171",
            "node_id": "IC_kwDOAPphoM6TLtlQ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2469321040/reactions"
            },
            "updated_at": "2024-11-12T00:06:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2469321040",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/42494246?v=4",
                "events_url": "https://api.github.com/users/harrydayexe/events{/privacy}",
                "followers_url": "https://api.github.com/users/harrydayexe/followers",
                "following_url": "https://api.github.com/users/harrydayexe/following{/other_user}",
                "gists_url": "https://api.github.com/users/harrydayexe/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/harrydayexe",
                "id": 42494246,
                "login": "harrydayexe",
                "node_id": "MDQ6VXNlcjQyNDk0MjQ2",
                "organizations_url": "https://api.github.com/users/harrydayexe/orgs",
                "received_events_url": "https://api.github.com/users/harrydayexe/received_events",
                "repos_url": "https://api.github.com/users/harrydayexe/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/harrydayexe/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/harrydayexe/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/harrydayexe",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I cannot reproduce with minimal_init.lua, and I'm also on an Arm Mac running 15.1 and using gopls 0.16.2. (What exact minimal_init.lua did you use?)",
            "created_at": "2024-11-12T01:54:15Z",
            "html_url": "https://github.com/neovim/neovim/issues/31171#issuecomment-2469432337",
            "id": 2469432337,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31171",
            "node_id": "IC_kwDOAPphoM6TMIwR",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2469432337/reactions"
            },
            "updated_at": "2024-11-12T01:54:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2469432337",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/62958?v=4",
                "events_url": "https://api.github.com/users/telemachus/events{/privacy}",
                "followers_url": "https://api.github.com/users/telemachus/followers",
                "following_url": "https://api.github.com/users/telemachus/following{/other_user}",
                "gists_url": "https://api.github.com/users/telemachus/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/telemachus",
                "id": 62958,
                "login": "telemachus",
                "node_id": "MDQ6VXNlcjYyOTU4",
                "organizations_url": "https://api.github.com/users/telemachus/orgs",
                "received_events_url": "https://api.github.com/users/telemachus/received_events",
                "repos_url": "https://api.github.com/users/telemachus/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/telemachus/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/telemachus/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/telemachus",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Let me come up with a minimal init to reproduce the bug, will report back",
            "created_at": "2024-11-12T04:45:01Z",
            "html_url": "https://github.com/neovim/neovim/issues/31171#issuecomment-2469592839",
            "id": 2469592839,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31171",
            "node_id": "IC_kwDOAPphoM6TMv8H",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2469592839/reactions"
            },
            "updated_at": "2024-11-12T04:45:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2469592839",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/42494246?v=4",
                "events_url": "https://api.github.com/users/harrydayexe/events{/privacy}",
                "followers_url": "https://api.github.com/users/harrydayexe/followers",
                "following_url": "https://api.github.com/users/harrydayexe/following{/other_user}",
                "gists_url": "https://api.github.com/users/harrydayexe/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/harrydayexe",
                "id": 42494246,
                "login": "harrydayexe",
                "node_id": "MDQ6VXNlcjQyNDk0MjQ2",
                "organizations_url": "https://api.github.com/users/harrydayexe/orgs",
                "received_events_url": "https://api.github.com/users/harrydayexe/received_events",
                "repos_url": "https://api.github.com/users/harrydayexe/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/harrydayexe/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/harrydayexe/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/harrydayexe",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Nevermind this was not an issue with the gopls lsp, I have tracked the issue down to only occurring when the lukas-reineke/indent-blankline.nvim is being used. I will close this thread and open an issue over there",
            "created_at": "2024-11-12T05:18:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/31171#issuecomment-2469631077",
            "id": 2469631077,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/31171",
            "node_id": "IC_kwDOAPphoM6TM5Rl",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2469631077/reactions"
            },
            "updated_at": "2024-11-12T05:18:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2469631077",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/42494246?v=4",
                "events_url": "https://api.github.com/users/harrydayexe/events{/privacy}",
                "followers_url": "https://api.github.com/users/harrydayexe/followers",
                "following_url": "https://api.github.com/users/harrydayexe/following{/other_user}",
                "gists_url": "https://api.github.com/users/harrydayexe/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/harrydayexe",
                "id": 42494246,
                "login": "harrydayexe",
                "node_id": "MDQ6VXNlcjQyNDk0MjQ2",
                "organizations_url": "https://api.github.com/users/harrydayexe/orgs",
                "received_events_url": "https://api.github.com/users/harrydayexe/received_events",
                "repos_url": "https://api.github.com/users/harrydayexe/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/harrydayexe/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/harrydayexe/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/harrydayexe",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 5,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/31171/comments",
    "created_at": "2024-11-11T23:24:17Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/31171/events",
    "html_url": "https://github.com/neovim/neovim/issues/31171",
    "id": 2650621002,
    "labels": [],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/31171/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6d_URK",
    "number": 31171,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/31171/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/31171/timeline",
    "title": "LSP: NeoVim crashes when deleting a line with active diagnostic from gopls",
    "updated_at": "2024-11-12T05:28:42Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/31171",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/42494246?v=4",
        "events_url": "https://api.github.com/users/harrydayexe/events{/privacy}",
        "followers_url": "https://api.github.com/users/harrydayexe/followers",
        "following_url": "https://api.github.com/users/harrydayexe/following{/other_user}",
        "gists_url": "https://api.github.com/users/harrydayexe/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/harrydayexe",
        "id": 42494246,
        "login": "harrydayexe",
        "node_id": "MDQ6VXNlcjQyNDk0MjQ2",
        "organizations_url": "https://api.github.com/users/harrydayexe/orgs",
        "received_events_url": "https://api.github.com/users/harrydayexe/received_events",
        "repos_url": "https://api.github.com/users/harrydayexe/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/harrydayexe/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/harrydayexe/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/harrydayexe",
        "user_view_type": "public"
    }
}