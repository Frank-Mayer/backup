{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nWhen using `nvim_buf_set_text` to insert text in front of a visual selection, the \"other end\" does not move, it stays on the same column. The cursor, on the other hand, does move in a reasonable way.\r\n\r\nThis is causing problems in our [collaborative editing project](https://github.com/ethersync/ethersync). We could probably fix it on our end, but this seems like a Neovim bug.\n\n### Steps to reproduce\n\n- `nvim --clean`\r\n- `i1234<Esc>`\r\n- `:lua vim.defer_fn(function() vim.api.nvim_buf_set_text(0,0,0,0,0,{\"0\"}) end, 3000)` (This will insert a 0 in front of the line in 3 seconds.)\r\n- While the timeout is running, `hhvl` to create a visual selection containing the \"23\".\r\n\r\nResult: The cursor moves one column to the right (and stays on the 3), but the \"other end\" of the visual selection stays on the second column (and thus moves from the 2 to the 1).\n\n### Expected behavior\n\nThe \"other end\" should also be pushed to the right, like the cursor.\n\n### Neovim version (nvim -v)\n\n0.10.0\n\n### Vim (not Nvim) behaves the same?\n\nVim doesn't have nvim_buf_set_text\n\n### Operating system/version\n\nNixOS unstable\n\n### Terminal name/version\n\nkitty 0.35.1\n\n### $TERM environment variable\n\nxterm-kitty\n\n### Installation\n\nnixpkgs",
    "closed_at": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/29558/comments",
    "created_at": "2024-07-04T08:34:18Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/29558/events",
    "html_url": "https://github.com/neovim/neovim/issues/29558",
    "id": 2390278820,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "libnvim, Nvim RPC API",
            "id": 103819671,
            "name": "api",
            "node_id": "MDU6TGFiZWwxMDM4MTk2NzE=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/api"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "marks, extmarks, decorations, virtual text, namespaces",
            "id": 1680119719,
            "name": "marks",
            "node_id": "MDU6TGFiZWwxNjgwMTE5NzE5",
            "url": "https://api.github.com/repos/neovim/neovim/labels/marks"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/29558/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6OeMKk",
    "number": 29558,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/29558/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/29558/timeline",
    "title": "The \"other end\" of a visual selection does not move when using `nvim_buf_set_text`",
    "updated_at": "2024-07-04T08:39:42Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/29558",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/81277?v=4",
        "events_url": "https://api.github.com/users/blinry/events{/privacy}",
        "followers_url": "https://api.github.com/users/blinry/followers",
        "following_url": "https://api.github.com/users/blinry/following{/other_user}",
        "gists_url": "https://api.github.com/users/blinry/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/blinry",
        "id": 81277,
        "login": "blinry",
        "node_id": "MDQ6VXNlcjgxMjc3",
        "organizations_url": "https://api.github.com/users/blinry/orgs",
        "received_events_url": "https://api.github.com/users/blinry/received_events",
        "repos_url": "https://api.github.com/users/blinry/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/blinry/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/blinry/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/blinry"
    }
}