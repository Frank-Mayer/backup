{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "<!-- Before reporting: search existing issues and check the FAQ. -->\r\n\r\n- `nvim --version`: NVIM v0.4.4\r\n- `vim -u DEFAULTS` (version: ) behaves differently?\r\n- Operating system/version: Fedora 32\r\n- Terminal name/version: Tilix, Alacritty, nvim-gtk\r\n- `$TERM`: xterm-256color, alacritty\r\n\r\nI opened a network-mounted file in neovim yesterday, and now it's trying to write to that location and blocks, even though I'm not editing or opening that file. Specifically, it blocks on `:q` (even with `NORC`), but when using e.g. the Startify plugin there's also a long block on startup.\r\n\r\n### Steps to reproduce using `nvim -u NORC`\r\n\r\n```\r\nnvim -u NORC\r\n:q\r\n```\r\n\r\n### Actual behaviour\r\n\r\nTakes a few seconds. Breaking in gdb reveals a backtrace similar to this:\r\n\r\n```\r\n#0  0x00007f6fc04c5edb in chdir () at ../sysdeps/unix/syscall-template.S:120\r\n#1  0x00007f6fc0386d0d in uv_chdir (dir=dir@entry=0x5583059edcf0 \"/run/user/1000/gvfs/smb-share:server=REDACTED\") at src/unix/core.c:736\r\n#2  0x0000558303e570da in os_chdir (path=0x5583059edcf0 \"/run/user/1000/gvfs/smb-share:server=REDACTED\") at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/os/fs.c:76\r\n#3  0x0000558303e5ff31 in path_full_dir_name (directory=directory@entry=0x5583059edcf0 \"/run/user/1000/gvfs/smb-share:server=REDACTED\", buffer=buffer@entry=0x5583059ec060 \"\", len=len@entry=4096) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/path.c:2162\r\n#4  0x0000558303e600ca in path_to_absolute (fname=fname@entry=0x558303fe42a0 <NameBuff> \"/run/user/1000/gvfs/smb-share:server=REDACTED\", buf=buf@entry=0x5583059ec060 \"\", len=len@entry=4096, force=force@entry=1) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/path.c:2255\r\n#5  0x0000558303e6018c in vim_FullName (fname=0x558303fe42a0 <NameBuff> \"/run/user/1000/gvfs/smb-share:server=REDACTED\", buf=0x5583059ec060 \"\", len=4096, force=<optimized out>) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/path.c:1732\r\n#6  0x0000558303e5a77e in FullName_save (fname=0x558303fe42a0 <NameBuff> \"/run/user/1000/gvfs/smb-share:server=REDACTED\", force=<optimized out>) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/path.c:446\r\n#7  0x0000558303e5f262 in fix_fname (fname=<optimized out>) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/path.c:1755\r\n#8  0x0000558303d41f18 in fname_expand (buf=<optimized out>, ffname=ffname@entry=0x7ffdaeb33228, sfname=sfname@entry=0x7ffdaeb33220) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/buffer.c:4537\r\n#9  0x0000558303d455aa in buflist_new (ffname=<optimized out>, sfname=<optimized out>, lnum=1, flags=0) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/buffer.c:1697\r\n#10 0x0000558303e0ef95 in fname2fnum (fm=fm@entry=0x5583053160f0) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/mark.c:494\r\n#11 0x0000558303e0f500 in cleanup_jumplist (wp=0x558305314250, checktail=<optimized out>) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/mark.c:1176\r\n#12 0x0000558303ead169 in shada_write (sd_writer=sd_writer@entry=0x7ffdaeb33570, sd_reader=0x7ffdaeb33590) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/shada.c:2709\r\n#13 0x0000558303eaefa1 in shada_write_file (file=<optimized out>, nomerge=false) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/shada.c:3122\r\n#14 0x0000558303e05db0 in getout (exitval=0) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/main.c:657\r\n#15 0x0000558303dbd995 in ex_quit (eap=0x7ffdaeb33790) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/ex_docmd.c:6136\r\n#16 0x0000558303db52c6 in do_one_cmd (cmdlinep=cmdlinep@entry=0x7ffdaeb339b8, flags=flags@entry=0, cstack=cstack@entry=0x7ffdaeb33a40, fgetline=fgetline@entry=0x558303dcb444 <getexline>, cookie=cookie@entry=0x0) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/ex_docmd.c:2270\r\n#17 0x0000558303db5df0 in do_cmdline (cmdline=<optimized out>, fgetline=0x558303dcb444 <getexline>, cookie=0x0, flags=0) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/ex_docmd.c:593\r\n#18 0x0000558303e38a80 in nv_colon (cap=0x7ffdaeb34078) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/normal.c:4599\r\n#19 0x0000558303e3340c in normal_execute (state=0x7ffdaeb33ff0, key=<optimized out>) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/normal.c:1131\r\n#20 0x0000558303ec64af in state_enter (s=0x7ffdaeb33ff0) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/state.c:69\r\n#21 0x0000558303e2e077 in normal_enter (cmdwin=<optimized out>, noexmode=<optimized out>) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/normal.c:463\r\n#22 0x0000558303e09064 in main (argc=-1363984048, argv=<optimized out>) at /usr/src/debug/neovim-0.4.4-1.fc32.x86_64/src/nvim/main.c:583\r\n```\r\n\r\n### Expected behaviour\r\n\r\nInstant.",
    "closed_at": "2021-07-28T09:06:30Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "May be duplicate of #12896.",
            "created_at": "2020-09-25T03:30:43Z",
            "html_url": "https://github.com/neovim/neovim/issues/12969#issuecomment-698700239",
            "id": 698700239,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/12969",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY5ODcwMDIzOQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/698700239/reactions"
            },
            "updated_at": "2020-09-25T03:30:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/698700239",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11682285?v=4",
                "events_url": "https://api.github.com/users/erw7/events{/privacy}",
                "followers_url": "https://api.github.com/users/erw7/followers",
                "following_url": "https://api.github.com/users/erw7/following{/other_user}",
                "gists_url": "https://api.github.com/users/erw7/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/erw7",
                "id": 11682285,
                "login": "erw7",
                "node_id": "MDQ6VXNlcjExNjgyMjg1",
                "organizations_url": "https://api.github.com/users/erw7/orgs",
                "received_events_url": "https://api.github.com/users/erw7/received_events",
                "repos_url": "https://api.github.com/users/erw7/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/erw7/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/erw7/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/erw7"
            }
        },
        {
            "author_association": "NONE",
            "body": "> May be duplicate of #12896.\r\n\r\nLooks similar; my network mount was also stale.",
            "created_at": "2020-09-25T03:53:37Z",
            "html_url": "https://github.com/neovim/neovim/issues/12969#issuecomment-698705356",
            "id": 698705356,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/12969",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY5ODcwNTM1Ng==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/698705356/reactions"
            },
            "updated_at": "2020-09-25T03:53:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/698705356",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1794388?v=4",
                "events_url": "https://api.github.com/users/YaLTeR/events{/privacy}",
                "followers_url": "https://api.github.com/users/YaLTeR/followers",
                "following_url": "https://api.github.com/users/YaLTeR/following{/other_user}",
                "gists_url": "https://api.github.com/users/YaLTeR/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/YaLTeR",
                "id": 1794388,
                "login": "YaLTeR",
                "node_id": "MDQ6VXNlcjE3OTQzODg=",
                "organizations_url": "https://api.github.com/users/YaLTeR/orgs",
                "received_events_url": "https://api.github.com/users/YaLTeR/received_events",
                "repos_url": "https://api.github.com/users/YaLTeR/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/YaLTeR/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/YaLTeR/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/YaLTeR"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I think we can close this as a duplicate - the fix is [here](https://github.com/neovim/neovim/issues/12075#issuecomment-867956505)",
            "created_at": "2021-06-24T21:16:18Z",
            "html_url": "https://github.com/neovim/neovim/issues/12969#issuecomment-867957070",
            "id": 867957070,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/12969",
            "node_id": "MDEyOklzc3VlQ29tbWVudDg2Nzk1NzA3MA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/867957070/reactions"
            },
            "updated_at": "2021-06-24T21:16:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/867957070",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/205673?v=4",
                "events_url": "https://api.github.com/users/bobrippling/events{/privacy}",
                "followers_url": "https://api.github.com/users/bobrippling/followers",
                "following_url": "https://api.github.com/users/bobrippling/following{/other_user}",
                "gists_url": "https://api.github.com/users/bobrippling/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bobrippling",
                "id": 205673,
                "login": "bobrippling",
                "node_id": "MDQ6VXNlcjIwNTY3Mw==",
                "organizations_url": "https://api.github.com/users/bobrippling/orgs",
                "received_events_url": "https://api.github.com/users/bobrippling/received_events",
                "repos_url": "https://api.github.com/users/bobrippling/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bobrippling/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bobrippling/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bobrippling"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Closed as duplicate -- feel free to reopen if it is in fact a different issue (because the fix doesn't work).",
            "created_at": "2021-07-28T09:07:06Z",
            "html_url": "https://github.com/neovim/neovim/issues/12969#issuecomment-888144861",
            "id": 888144861,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/12969",
            "node_id": "IC_kwDOAPphoM408APd",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/888144861/reactions"
            },
            "updated_at": "2021-07-28T09:07:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/888144861",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "\r\nFor reference from: https://github.com/neovim/neovim/issues/12075#issuecomment-867956505\r\n\r\n> [the fix](https://old.reddit.com/r/neovim/comments/duqg7v/shada_and_external_drives/f79zplg/) is `set shada+=r/mnt/exdisk` - instant exit for me now.\r\n\r\n",
            "created_at": "2021-09-24T16:22:53Z",
            "html_url": "https://github.com/neovim/neovim/issues/12969#issuecomment-926760923",
            "id": 926760923,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/12969",
            "node_id": "IC_kwDOAPphoM43PT_b",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/926760923/reactions"
            },
            "updated_at": "2021-09-24T16:22:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/926760923",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        }
    ],
    "comments": 5,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/12969/comments",
    "created_at": "2020-09-23T08:08:47Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/12969/events",
    "html_url": "https://github.com/neovim/neovim/issues/12969",
    "id": 707145283,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "FEF2C0",
            "default": false,
            "description": "issues reporting performance problems",
            "id": 101930601,
            "name": "performance",
            "node_id": "MDU6TGFiZWwxMDE5MzA2MDE=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/performance"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "filenames, path manipulation",
            "id": 3386070083,
            "name": "filesystem",
            "node_id": "LA_kwDOAPphoM7J01RD",
            "url": "https://api.github.com/repos/neovim/neovim/labels/filesystem"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/12969/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU3MDcxNDUyODM=",
    "number": 12969,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/12969/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/12969/timeline",
    "title": "Freezes due to previously opened files from a network mount",
    "updated_at": "2024-03-23T01:23:32Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/12969",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1794388?v=4",
        "events_url": "https://api.github.com/users/YaLTeR/events{/privacy}",
        "followers_url": "https://api.github.com/users/YaLTeR/followers",
        "following_url": "https://api.github.com/users/YaLTeR/following{/other_user}",
        "gists_url": "https://api.github.com/users/YaLTeR/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/YaLTeR",
        "id": 1794388,
        "login": "YaLTeR",
        "node_id": "MDQ6VXNlcjE3OTQzODg=",
        "organizations_url": "https://api.github.com/users/YaLTeR/orgs",
        "received_events_url": "https://api.github.com/users/YaLTeR/received_events",
        "repos_url": "https://api.github.com/users/YaLTeR/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/YaLTeR/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/YaLTeR/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/YaLTeR"
    }
}