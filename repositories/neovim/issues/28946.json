{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\r\n\r\nI am experiencing a strange issue when opening a file with `nvim `. Directory navigation work fine, but as soon as I open any file, `nvim` instantly exits.\r\n\r\nThis issue seems to stem from `changed_window_setting` at `/usr/src/debug/neovim/neovim-0.10.0/src/nvim/move.c:546` when looking at the backtrace.\r\n\r\n```txt\r\nCore was generated by `nvim --embed .'.\r\nProgram terminated with signal SIGSEGV, Segmentation fault.\r\n#0  0x00005ac0e6d549cb in changed_window_setting (wp=0x0) at /usr/src/debug/neovim/neovim-0.10.0/src/nvim/move.c:546\r\n546       wp->w_valid &= ~(VALID_BOTLINE|VALID_BOTLINE_AP|VALID_TOPLINE);\r\n```\r\n\r\nlogs below:\r\n```txt\r\nQuit\r\n\r\nThread 2 (LWP 64767):\r\n#0  0x0000000000000000 in ?? ()\r\nNo symbol table info available.\r\nBacktrace stopped: Cannot access memory at address 0x0\r\n\r\nThread 1 (Thread 0x74017e142740 (LWP 64765)):\r\n#0  0x00005ac0e6d549cb in changed_window_setting (wp=0x0) at /usr/src/debug/neovim/neovim-0.10.0/src/nvim/move.c:546\r\nNo locals.\r\n#1  0x000074017e488356 in lj_vm_ffi_call () at buildvm_x86.dasc:2706\r\nNo locals.\r\n#2  0x000074017e4ae354 in lj_ccall_func (L=<optimized out>, cd=<optimized out>) at /usr/src/debug/luajit/LuaJIT-5790d253972c9d78a0c2aece527eda5b134bbbf7/src/lj_ccall.c:1187\r\n        cc = {func = 0x5ac0e6d549c0 <changed_window_setting>, spadj = 8, nsp = 0 '\\000', retref = 106 'j', ngpr = 152 '\\230', nfpr = 0 '\\000', fpr = {{d = {0, 0}, f = {0, 0, 0, 0}, b = '\\000' <repeats 15 times>, s = {0, 0, 0, 0, 0, 0, 0, 0}, i = {0, 0, 0, 0}, l = {0, 0}}, {d = {0, 0}, f = {0, 0, 0, 0}, b = '\\000' <repeats 15 times>, s = {0, 0, 0, 0, 0, 0, 0, 0}, i = {0, 0, 0, 0}, l = {0, 0}}, {d = {0, 0}, f = {0, 0, 0, 0}, b = '\\000' <repeats 15 times>, s = {0, 0, 0, 0, 0, 0, 0, 0}, i = {0, 0, 0, 0}, l = {0, 0}}, {d = {0, 0}, f = {0, 0, 0, 0}, b = '\\000' <repeats 15 times>, s = {0, 0, 0, 0, 0, 0, 0, 0}, i = {0, 0, 0, 0}, l = {0, 0}}, {d = {0, 0}, f = {0, 0, 0, 0}, b = '\\000' <repeats 15 times>, s = {0, 0, 0, 0, 0, 0, 0, 0}, i = {0, 0, 0, 0}, l = {0, 0}}, {d = {0, 0}, f = {0, 0, 0, 0}, b = '\\000' <repeats 15 times>, s = {0, 0, 0, 0, 0, 0, 0, 0}, i = {0, 0, 0, 0}, l = {0, 0}}, {d = {0, 0}, f = {0, 0, 0, 0}, b = '\\000' <repeats 15 times>, s = {0, 0, 0, 0, 0, 0, 0, 0}, i = {0, 0, 0, 0}, l = {0, 0}}, {d = {0, 0}, f = {0, 0, 0, 0}, b = '\\000' <repeats 15 times>, s = {0, 0, 0, 0, 0, 0, 0, 0}, i = {0, 0, 0, 0}, l = {0, 0}}}, gpr = {0, 0, 0, 0, 0, 0}, stack = {0, 0, 0, 127549762514302, 127549758907264, 0, -128, 127549764045472, 140725982907520, 127549759640771, 192, 0, 72185143793365272, 0, 0, 755423483415702784, 140725982907560, 0, 127549764046848, 127549749363144, 126, 127549750832688, 140725982907600, 127549759642521, 0, 127549758907360, 24, 127549758907264, 99784552958400, 127549762505583, 127549758907264}}\r\n        gcsteps = 0\r\n        ret = <optimized out>\r\n        cts = 0x74017d96ee30\r\n        ct = 0xbd0\r\n        sz = <optimized out>\r\n#3  0x000074017e4e8af5 in lj_cf_ffi_meta___call (L=0x74017e122380) at /usr/src/debug/luajit/LuaJIT-5790d253972c9d78a0c2aece527eda5b134bbbf7/src/lib_ffi.c:230\r\n        ret = <optimized out>\r\n        cts = 0x74017d96ee30\r\n        cd = <optimized out>\r\n        id = 126\r\n        ct = <optimized out>\r\n        tv = <optimized out>\r\n        mm = MM_call\r\n#4  0x000074017e485ef6 in lj_BC_FUNCC () at buildvm_x86.dasc:857\r\nNo locals.\r\n#5  0x000074017e498d43 in lua_pcall (L=L@entry=0x74017e122380, nargs=nargs@entry=0, nresults=nresults@entry=0, errfunc=errfunc@entry=-2) at /usr/src/debug/luajit/LuaJIT-5790d253972c9d78a0c2aece527eda5b134bbbf7/src/lj_api.c:1122\r\n        g = 0x74017e1223e0\r\n        oldh = 0 '\\000'\r\n        ef = 16\r\n        status = <optimized out>\r\n#6  0x00005ac0e6cf08d8 in nlua_pcall (lstate=0x74017e122380, nargs=0, nresults=0) at /usr/src/debug/neovim/neovim-0.10.0/src/nvim/lua/executor.c:173\r\n        status = <optimized out>\r\n        status = <optimized out>\r\n#7  nlua_schedule_event (argv=<optimized out>) at /usr/src/debug/neovim/neovim-0.10.0/src/nvim/lua/executor.c:371\r\n        cb = <optimized out>\r\n        lstate = 0x74017e122380\r\n#8  0x00005ac0e6e5f078 in state_handle_k_event () at /usr/src/debug/neovim/neovim-0.10.0/src/nvim/state.c:119\r\n        event = {handler = 0x5ac0e6cf0830 <nlua_schedule_event>, argv = {0x107, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}}\r\n#9  0x00005ac0e6d76d61 in nv_event (cap=<optimized out>) at /usr/src/debug/neovim/neovim-0.10.0/src/nvim/normal.c:6586\r\n        may_restart = false\r\n#10 0x00005ac0e6d66e87 in normal_execute (state=0x7ffd5238cf70, key=<optimized out>) at /usr/src/debug/neovim/neovim-0.10.0/src/nvim/normal.c:1229\r\n        s = 0x7ffd5238cf70\r\n#11 0x00005ac0e6e5ee23 in state_enter (s=0x7ffd5238cf70) at /usr/src/debug/neovim/neovim-0.10.0/src/nvim/state.c:101\r\n        check_result = <optimized out>\r\n        key = <optimized out>\r\n        execute_result = <optimized out>\r\n        getkey = <optimized out>\r\n#12 0x00005ac0e6d642da in normal_enter (cmdwin=<optimized out>, noexmode=<optimized out>) at /usr/src/debug/neovim/neovim-0.10.0/src/nvim/normal.c:518\r\n        state = {state = {check = 0x5ac0e6d659e0 <normal_check>, execute = 0x5ac0e6d663a0 <normal_execute>}, command_finished = false, ctrl_w = false, need_flushbuf = false, set_prevcount = false, previous_got_int = false, cmdwin = false, noexmode = false, toplevel = true, oa = {op_type = 0, regname = 0, motion_type = kMTLineWise, motion_force = 0, use_reg_one = false, inclusive = false, end_adjusted = false, start = {lnum = 0, col = 0, coladd = 0}, end = {lnum = 0, col = 0, coladd = 0}, cursor_start = {lnum = 0, col = 0, coladd = 0}, line_count = 0, empty = false, is_VIsual = false, start_vcol = 0, end_vcol = 0, prev_opcount = 0, prev_count0 = 0, excl_tr_ws = false}, ca = {oap = 0x7ffd5238cf88, prechar = 0, cmdchar = -26365, nchar = 0, ncharC1 = 0, ncharC2 = 0, extra_char = 0, opcount = 0, count0 = 0, count1 = 1, arg = 0, retval = 0, searchbuf = 0x0}, mapped_len = 0, old_mapped_len = 0, idx = 184, c = -26365, old_col = 0, old_pos = {lnum = 1, col = 0, coladd = 0}}\r\n        prev_oap = 0x0\r\n#13 0x00005ac0e6b03aef in main (argc=<optimized out>, argv=<optimized out>) at /usr/src/debug/neovim/neovim-0.10.0/src/nvim/main.c:664\r\n        fname = <optimized out>\r\n        params = {argc = 3, argv = 0x7ffd5238d478, use_vimrc = 0x0, clean = false, n_commands = 0, commands = {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}, cmds_tofree = \"\\000\\000\\000\\000\\000\\000\\000\\000\\000\", n_pre_commands = 0, pre_commands = {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}, luaf = 0x0, lua_arg0 = -1, edit_type = 1, tagname = 0x0, use_ef = 0x0, input_istext = false, no_swap_file = 0, use_debug_break_level = -1, window_count = 1, window_layout = 0, diff_mode = 0, listen_addr = 0x0, remote = 0, server_addr = 0x0, scriptin = 0x0, scriptout = 0x0, scriptout_append = false, had_stdin_file = false}\r\n        cwd = 0x0\r\n        has_term = <optimized out>\r\n        use_builtin_ui = <optimized out>\r\n        remote_ui = <optimized out>\r\n        use_remote_ui = <optimized out>\r\n        listen_and_embed = <optimized out>\r\n        vimrc_none = <optimized out>\r\n\r\n```\r\n\r\n### Steps to reproduce\r\n\r\n`nvim <path/to/file>`\r\n\r\n### Expected behavior\r\n\r\nno seg fault\r\n\r\n### Neovim version (nvim -v)\r\n\r\nNVIM v0.10.0\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\nno, vim 9.1\r\n\r\n### Operating system/version\r\n\r\nArch Linux \r\n\r\n### Terminal name/version\r\n\r\nalacritty 0.13.2 (bb8ea18e)\r\n\r\n### $TERM environment variable\r\n\r\nscreen-256color\r\n\r\n### Installation\r\n\r\nsystem package manager - pacman -S neovim",
    "closed_at": "2024-05-23T16:55:02Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "FFI issue. Grep `changed_window_setting` in your plugins folder and report at the offending plugin(if the issue persists after updating your plugins).",
            "created_at": "2024-05-23T16:55:03Z",
            "html_url": "https://github.com/neovim/neovim/issues/28946#issuecomment-2127639093",
            "id": 2127639093,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28946",
            "node_id": "IC_kwDOAPphoM5-0TI1",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2127639093/reactions"
            },
            "updated_at": "2024-05-23T16:57:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2127639093",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "author_association": "NONE",
            "body": "@luukvbaal just for my future understanding, how are you able to determine that this is coming from a plugin?",
            "created_at": "2024-05-23T16:57:10Z",
            "html_url": "https://github.com/neovim/neovim/issues/28946#issuecomment-2127642291",
            "id": 2127642291,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28946",
            "node_id": "IC_kwDOAPphoM5-0T6z",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2127642291/reactions"
            },
            "updated_at": "2024-05-23T16:57:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2127642291",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38671724?v=4",
                "events_url": "https://api.github.com/users/charliemenke/events{/privacy}",
                "followers_url": "https://api.github.com/users/charliemenke/followers",
                "following_url": "https://api.github.com/users/charliemenke/following{/other_user}",
                "gists_url": "https://api.github.com/users/charliemenke/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/charliemenke",
                "id": 38671724,
                "login": "charliemenke",
                "node_id": "MDQ6VXNlcjM4NjcxNzI0",
                "organizations_url": "https://api.github.com/users/charliemenke/orgs",
                "received_events_url": "https://api.github.com/users/charliemenke/received_events",
                "repos_url": "https://api.github.com/users/charliemenke/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/charliemenke/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/charliemenke/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/charliemenke"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "The backtrace reveals usage of the luajit FFI interface, which is not used in core.",
            "created_at": "2024-05-23T16:59:02Z",
            "html_url": "https://github.com/neovim/neovim/issues/28946#issuecomment-2127645231",
            "id": 2127645231,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28946",
            "node_id": "IC_kwDOAPphoM5-0Uov",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2127645231/reactions"
            },
            "updated_at": "2024-05-23T16:59:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2127645231",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "author_association": "NONE",
            "body": "Thanks for helping me understand!",
            "created_at": "2024-05-23T17:00:49Z",
            "html_url": "https://github.com/neovim/neovim/issues/28946#issuecomment-2127648082",
            "id": 2127648082,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28946",
            "node_id": "IC_kwDOAPphoM5-0VVS",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2127648082/reactions"
            },
            "updated_at": "2024-05-23T17:00:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2127648082",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/38671724?v=4",
                "events_url": "https://api.github.com/users/charliemenke/events{/privacy}",
                "followers_url": "https://api.github.com/users/charliemenke/followers",
                "following_url": "https://api.github.com/users/charliemenke/following{/other_user}",
                "gists_url": "https://api.github.com/users/charliemenke/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/charliemenke",
                "id": 38671724,
                "login": "charliemenke",
                "node_id": "MDQ6VXNlcjM4NjcxNzI0",
                "organizations_url": "https://api.github.com/users/charliemenke/orgs",
                "received_events_url": "https://api.github.com/users/charliemenke/received_events",
                "repos_url": "https://api.github.com/users/charliemenke/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/charliemenke/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/charliemenke/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/charliemenke"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "And that's why we always ask to test with `nvim --clean`!",
            "created_at": "2024-05-23T17:02:52Z",
            "html_url": "https://github.com/neovim/neovim/issues/28946#issuecomment-2127651586",
            "id": 2127651586,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28946",
            "node_id": "IC_kwDOAPphoM5-0WMC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 1,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2127651586/reactions"
            },
            "updated_at": "2024-05-23T17:02:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2127651586",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        }
    ],
    "comments": 5,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/28946/comments",
    "created_at": "2024-05-23T16:49:08Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/28946/events",
    "html_url": "https://github.com/neovim/neovim/issues/28946",
    "id": 2313412684,
    "labels": [],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/28946/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6J4-BM",
    "number": 28946,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/28946/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/28946/timeline",
    "title": "Segmentation fault SIGSEGV when opening any file",
    "updated_at": "2024-05-23T22:10:27Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/28946",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/38671724?v=4",
        "events_url": "https://api.github.com/users/charliemenke/events{/privacy}",
        "followers_url": "https://api.github.com/users/charliemenke/followers",
        "following_url": "https://api.github.com/users/charliemenke/following{/other_user}",
        "gists_url": "https://api.github.com/users/charliemenke/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/charliemenke",
        "id": 38671724,
        "login": "charliemenke",
        "node_id": "MDQ6VXNlcjM4NjcxNzI0",
        "organizations_url": "https://api.github.com/users/charliemenke/orgs",
        "received_events_url": "https://api.github.com/users/charliemenke/received_events",
        "repos_url": "https://api.github.com/users/charliemenke/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/charliemenke/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/charliemenke/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/charliemenke"
    }
}