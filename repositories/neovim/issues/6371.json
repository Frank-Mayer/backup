{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "Current header files have the problem with implicit dependencies/blocks meaning that you must include headers in a specific order in some cases. In addition to this incremental compilation does not work well because when you include header because you need some specific type from it you also pull in function declarations which depend on the C file. The fix to the situation was discussed already, but I do not remember a separate issue. Thus suggestion: refactor header files in turns:\r\n\r\n1. Refactor header files according to https://neovim.io/doc/user/dev_style.html#dev-style-header\r\n2. Make clint check that headers depend only on _defs.h.\r\n3. Make IWYU check header files.\r\n\r\n---\r\n\r\nActual plan:\r\n\r\n- [x] Document the above (in `:help develop` or `:help dev-style`)\r\n- [x] Add a way to test that that each header can be included separately (#6396).\r\n- [x] PR which runs IWYU, with errors from all files ignored.\r\n- [x] Per-header PR, new _defs.h headers must pass IWYU. This part can be marked entry-level.\r\n     - The list of files left are documented as code in `Makefile`.\r\n- [x] Add clint checks, with errors from all files ignored.\r\n- [x] Fix remaining clint checks.\r\n     - The list of files not linted with clint are documented as code in `src/clint.py`.",
    "closed_at": "2024-01-11T20:59:34Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "This is effectively fixed. There are some files ignored in `clint.py` but removing them causes more churn than it's worth. We could add IWYU to CI but it's too unstable and weird so it'll likely cause confusion with contributors who won't understand why it fails sometimes. I will therefore close this.",
            "created_at": "2024-01-11T20:59:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/6371#issuecomment-1887951816",
            "id": 1887951816,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/6371",
            "node_id": "IC_kwDOAPphoM5wh9vI",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 2,
                "total_count": 3,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1887951816/reactions"
            },
            "updated_at": "2024-01-11T20:59:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1887951816",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/33953936?v=4",
                "events_url": "https://api.github.com/users/dundargoc/events{/privacy}",
                "followers_url": "https://api.github.com/users/dundargoc/followers",
                "following_url": "https://api.github.com/users/dundargoc/following{/other_user}",
                "gists_url": "https://api.github.com/users/dundargoc/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/dundargoc",
                "id": 33953936,
                "login": "dundargoc",
                "node_id": "MDQ6VXNlcjMzOTUzOTM2",
                "organizations_url": "https://api.github.com/users/dundargoc/orgs",
                "received_events_url": "https://api.github.com/users/dundargoc/received_events",
                "repos_url": "https://api.github.com/users/dundargoc/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/dundargoc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dundargoc/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/dundargoc"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Next item on the agenda may be to replace IWYU with e.g. include-fixer as IWYU has been pretty disappointing so far.",
            "created_at": "2024-01-11T21:00:44Z",
            "html_url": "https://github.com/neovim/neovim/issues/6371#issuecomment-1887953232",
            "id": 1887953232,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/6371",
            "node_id": "IC_kwDOAPphoM5wh-FQ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1887953232/reactions"
            },
            "updated_at": "2024-01-11T21:01:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1887953232",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/33953936?v=4",
                "events_url": "https://api.github.com/users/dundargoc/events{/privacy}",
                "followers_url": "https://api.github.com/users/dundargoc/followers",
                "following_url": "https://api.github.com/users/dundargoc/following{/other_user}",
                "gists_url": "https://api.github.com/users/dundargoc/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/dundargoc",
                "id": 33953936,
                "login": "dundargoc",
                "node_id": "MDQ6VXNlcjMzOTUzOTM2",
                "organizations_url": "https://api.github.com/users/dundargoc/orgs",
                "received_events_url": "https://api.github.com/users/dundargoc/received_events",
                "repos_url": "https://api.github.com/users/dundargoc/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/dundargoc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dundargoc/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/dundargoc"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/6371/comments",
    "created_at": "2017-03-26T20:49:52Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/6371/events",
    "html_url": "https://github.com/neovim/neovim/issues/6371",
    "id": 217088144,
    "labels": [
        {
            "color": "C5DEF5",
            "default": false,
            "description": "changes that are not features or bugfixes",
            "id": 106949155,
            "name": "refactor",
            "node_id": "MDU6TGFiZWwxMDY5NDkxNTU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/refactor"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/6371/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 235,
        "created_at": "2023-02-02T14:11:43Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
            "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
            "followers_url": "https://api.github.com/users/bfredl/followers",
            "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
            "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/bfredl",
            "id": 1363104,
            "login": "bfredl",
            "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
            "organizations_url": "https://api.github.com/users/bfredl/orgs",
            "received_events_url": "https://api.github.com/users/bfredl/received_events",
            "repos_url": "https://api.github.com/users/bfredl/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/bfredl"
        },
        "description": "",
        "due_on": "2024-03-01T08:00:00Z",
        "html_url": "https://github.com/neovim/neovim/milestone/36",
        "id": 8997654,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/36/labels",
        "node_id": "MI_kwDOAPphoM4AiUsW",
        "number": 36,
        "open_issues": 141,
        "state": "open",
        "title": "0.10",
        "updated_at": "2024-01-15T23:44:03Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/36"
    },
    "node_id": "MDU6SXNzdWUyMTcwODgxNDQ=",
    "number": 6371,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 4,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 4,
        "url": "https://api.github.com/repos/neovim/neovim/issues/6371/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/6371/timeline",
    "title": "[Project] Headers refactoring, IWYU",
    "updated_at": "2024-01-11T22:15:47Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/6371",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/322097?v=4",
        "events_url": "https://api.github.com/users/ZyX-I/events{/privacy}",
        "followers_url": "https://api.github.com/users/ZyX-I/followers",
        "following_url": "https://api.github.com/users/ZyX-I/following{/other_user}",
        "gists_url": "https://api.github.com/users/ZyX-I/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/ZyX-I",
        "id": 322097,
        "login": "ZyX-I",
        "node_id": "MDQ6VXNlcjMyMjA5Nw==",
        "organizations_url": "https://api.github.com/users/ZyX-I/orgs",
        "received_events_url": "https://api.github.com/users/ZyX-I/received_events",
        "repos_url": "https://api.github.com/users/ZyX-I/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/ZyX-I/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ZyX-I/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/ZyX-I"
    }
}