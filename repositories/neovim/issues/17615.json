{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Neovim version (nvim -v)\n\nNVIM v0.7.0-dev+1192-g8ed9c8448\n\n### Language server name/version\n\npyright\n\n### Operating system/version\n\nDarwin 21.3.0 Darwin Kernel Version 21.3.0: Wed Jan  5 21:37:58 PST 2022; root:xnu-8019.80.24~20/RELEASE_ARM64_T6000 arm64 arm64 MacBookPro18,4 Darwin\n\n### Steps to reproduce using \"nvim -u minimal_init.lua\"\n\n1. Run `nvim -u minimal_init.lua` (link to the my [minimal_init.lua](https://gist.github.com/fsouza/fcbf926ed67dc6ebbcc05e9ff73ead33))\r\n2. once it's ready, edit a Python file\r\n3. type some code, but do not press enter (for example `while True:`)\r\n4. exit insert mode\r\n5. press `O` to start editing the line above (get an error)\r\n6. exit insert mode again and go to the line below\r\n7. press `o` to start editing a new line below (get a different error)\r\n\r\n(note: the issue doesn't always happen, but it happens most of the time)\n\n### Expected behavior\n\nEnter insert mode in the line above, with no errors.\n\n### Actual behavior\n\nOn step 5, I get the following error:\r\n\r\n```\r\nError executing lua callback: ...souza/opt/neovim/share/nvim/runtime/lua/vim/lsp/sync.lua:142: attempt to get length of local 'line' (a nil value)\r\nstack traceback:\r\n        ...souza/opt/neovim/share/nvim/runtime/lua/vim/lsp/sync.lua:142: in function 'compute_start_range'\r\n        ...souza/opt/neovim/share/nvim/runtime/lua/vim/lsp/sync.lua:359: in function 'compute_diff'\r\n        /Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:427: in function 'incremental_changes'\r\n        /Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:460: in function 'fn'\r\n        /Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:164: in function 'for_each_buffer_client'\r\n        /Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:1184: in function </Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:1176>\r\n```\r\n\r\nOn step 7, I get two errors: \r\n\r\n```\r\nError executing lua callback: ...souza/opt/neovim/share/nvim/runtime/lua/vim/lsp/sync.lua:142: attempt to get length of local 'line' (a nil value)\r\nstack traceback:\r\n        ...souza/opt/neovim/share/nvim/runtime/lua/vim/lsp/sync.lua:142: in function 'compute_start_range'\r\n        ...souza/opt/neovim/share/nvim/runtime/lua/vim/lsp/sync.lua:359: in function 'compute_diff'\r\n        /Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:427: in function 'incremental_changes'\r\n        /Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:460: in function 'fn'\r\n        /Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:164: in function 'for_each_buffer_client'\r\n        /Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:1184: in function </Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:1176>\r\nPress ENTER or type command to continue\r\nError executing lua callback: ...souza/opt/neovim/share/nvim/runtime/lua/vim/lsp/sync.lua:162: attempt to get length of local 'prev_line' (a nil value)\r\nstack traceback:\r\n        ...souza/opt/neovim/share/nvim/runtime/lua/vim/lsp/sync.lua:162: in function 'compute_start_range'\r\n        ...souza/opt/neovim/share/nvim/runtime/lua/vim/lsp/sync.lua:359: in function 'compute_diff'\r\n        /Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:427: in function 'incremental_changes'\r\n        /Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:460: in function 'fn'\r\n        /Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:164: in function 'for_each_buffer_client'\r\n        /Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:1184: in function </Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:1176>\r\nError executing lua callback: ...souza/opt/neovim/share/nvim/runtime/lua/vim/lsp/sync.lua:162: attempt to get length of local 'prev_line' (a nil value)\r\nstack traceback:\r\n        ...souza/opt/neovim/share/nvim/runtime/lua/vim/lsp/sync.lua:162: in function 'compute_start_range'\r\n        ...souza/opt/neovim/share/nvim/runtime/lua/vim/lsp/sync.lua:359: in function 'compute_diff'\r\n        /Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:427: in function 'incremental_changes'\r\n        /Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:460: in function 'fn'\r\n        /Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:164: in function 'for_each_buffer_client'\r\n        /Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:1184: in function </Users/fsouza/opt/neovim/share/nvim/runtime/lua/vim/lsp.lua:1176>\r\n```\r\n\r\nNotice that from now on the file is completely out of sync, and I'll get some weird errors like \"break should be used inside a loop\" even if I write a break inside a loop, and I get the error on every keystroke in insert mode. To cleanup errors, I have to save the file and run \":e!\".\r\n\r\nHere's a recording:\r\n\r\nhttps://user-images.githubusercontent.com/108725/156904684-473e5fbf-451c-4519-b62e-28f54e41a869.mp4\r\n\r\n(notice that the diagnostic is in the wrong line and I get the error on every keystroke of `break` - I actually struggled to type \"break\" because some of the errors had to be dismissed before typing lol)\n\n### Log file\n\n_No response_",
    "closed_at": "2022-03-06T15:52:11Z",
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "The title says new files, but I just ran into this issue with an existing file. Sorry about that.",
            "created_at": "2022-03-06T01:11:41Z",
            "html_url": "https://github.com/neovim/neovim/issues/17615#issuecomment-1059866297",
            "id": 1059866297,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17615",
            "node_id": "IC_kwDOAPphoM4_LEa5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1059866297/reactions"
            },
            "updated_at": "2022-03-06T01:11:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1059866297",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/108725?v=4",
                "events_url": "https://api.github.com/users/fsouza/events{/privacy}",
                "followers_url": "https://api.github.com/users/fsouza/followers",
                "following_url": "https://api.github.com/users/fsouza/following{/other_user}",
                "gists_url": "https://api.github.com/users/fsouza/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fsouza",
                "id": 108725,
                "login": "fsouza",
                "node_id": "MDQ6VXNlcjEwODcyNQ==",
                "organizations_url": "https://api.github.com/users/fsouza/orgs",
                "received_events_url": "https://api.github.com/users/fsouza/received_events",
                "repos_url": "https://api.github.com/users/fsouza/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fsouza/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fsouza/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fsouza"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Try reverting https://github.com/neovim/neovim/commit/a5e475fcc269b32a8a487f787af20802cbfabe28, I know the issue.",
            "created_at": "2022-03-06T04:30:06Z",
            "html_url": "https://github.com/neovim/neovim/issues/17615#issuecomment-1059893110",
            "id": 1059893110,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17615",
            "node_id": "IC_kwDOAPphoM4_LK92",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 1,
                "total_count": 3,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1059893110/reactions"
            },
            "updated_at": "2022-03-06T04:35:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1059893110",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13316262?v=4",
                "events_url": "https://api.github.com/users/mjlbach/events{/privacy}",
                "followers_url": "https://api.github.com/users/mjlbach/followers",
                "following_url": "https://api.github.com/users/mjlbach/following{/other_user}",
                "gists_url": "https://api.github.com/users/mjlbach/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mjlbach",
                "id": 13316262,
                "login": "mjlbach",
                "node_id": "MDQ6VXNlcjEzMzE2MjYy",
                "organizations_url": "https://api.github.com/users/mjlbach/orgs",
                "received_events_url": "https://api.github.com/users/mjlbach/received_events",
                "repos_url": "https://api.github.com/users/mjlbach/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mjlbach/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mjlbach/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mjlbach"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@fsouza want to test #17618?",
            "created_at": "2022-03-06T04:50:59Z",
            "html_url": "https://github.com/neovim/neovim/issues/17615#issuecomment-1059894721",
            "id": 1059894721,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17615",
            "node_id": "IC_kwDOAPphoM4_LLXB",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1059894721/reactions"
            },
            "updated_at": "2022-03-06T04:50:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1059894721",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13316262?v=4",
                "events_url": "https://api.github.com/users/mjlbach/events{/privacy}",
                "followers_url": "https://api.github.com/users/mjlbach/followers",
                "following_url": "https://api.github.com/users/mjlbach/following{/other_user}",
                "gists_url": "https://api.github.com/users/mjlbach/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mjlbach",
                "id": 13316262,
                "login": "mjlbach",
                "node_id": "MDQ6VXNlcjEzMzE2MjYy",
                "organizations_url": "https://api.github.com/users/mjlbach/orgs",
                "received_events_url": "https://api.github.com/users/mjlbach/received_events",
                "repos_url": "https://api.github.com/users/mjlbach/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mjlbach/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mjlbach/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mjlbach"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> @fsouza want to test #17618?\r\n\r\nOn my way to bed now, but will test it first thing in the morning tomorrow!",
            "created_at": "2022-03-06T05:01:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/17615#issuecomment-1059895765",
            "id": 1059895765,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17615",
            "node_id": "IC_kwDOAPphoM4_LLnV",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1059895765/reactions"
            },
            "updated_at": "2022-03-06T05:01:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1059895765",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/108725?v=4",
                "events_url": "https://api.github.com/users/fsouza/events{/privacy}",
                "followers_url": "https://api.github.com/users/fsouza/followers",
                "following_url": "https://api.github.com/users/fsouza/following{/other_user}",
                "gists_url": "https://api.github.com/users/fsouza/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fsouza",
                "id": 108725,
                "login": "fsouza",
                "node_id": "MDQ6VXNlcjEwODcyNQ==",
                "organizations_url": "https://api.github.com/users/fsouza/orgs",
                "received_events_url": "https://api.github.com/users/fsouza/received_events",
                "repos_url": "https://api.github.com/users/fsouza/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fsouza/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fsouza/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fsouza"
            }
        },
        {
            "author_association": "NONE",
            "body": "I just encountered the same issue when swapping lines.\r\n\r\n> @fsouza want to test https://github.com/neovim/neovim/pull/17618?\r\n\r\nLet me try this now. Wait.",
            "created_at": "2022-03-06T09:30:44Z",
            "html_url": "https://github.com/neovim/neovim/issues/17615#issuecomment-1059927145",
            "id": 1059927145,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17615",
            "node_id": "IC_kwDOAPphoM4_LTRp",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1059927145/reactions"
            },
            "updated_at": "2022-03-06T09:31:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1059927145",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24765272?v=4",
                "events_url": "https://api.github.com/users/nyngwang/events{/privacy}",
                "followers_url": "https://api.github.com/users/nyngwang/followers",
                "following_url": "https://api.github.com/users/nyngwang/following{/other_user}",
                "gists_url": "https://api.github.com/users/nyngwang/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/nyngwang",
                "id": 24765272,
                "login": "nyngwang",
                "node_id": "MDQ6VXNlcjI0NzY1Mjcy",
                "organizations_url": "https://api.github.com/users/nyngwang/orgs",
                "received_events_url": "https://api.github.com/users/nyngwang/received_events",
                "repos_url": "https://api.github.com/users/nyngwang/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/nyngwang/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/nyngwang/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/nyngwang"
            }
        },
        {
            "author_association": "NONE",
            "body": "The error disappears. Confirmed it works in my case:\r\n\r\n- Python `pylsp` with default config from `nvim-lspconfig`.\r\n- branch: [mjlbach:fix/incremental-sync-again](https://github.com/mjlbach/neovim/tree/fix/incremental-sync-again)\r\n\r\nExample code to reproduce the error:\r\n\r\n```python\r\nfrom pprint import pprint\r\n\r\nimport tensorflow as tf          # try swapping this line to above the first line above.\r\nimport tensorflow_datasets as tfds\r\n```\r\n\r\nThe shortcut I'm using in the following (both) DEMO.\r\n\r\n```lua\r\nlocal NOREF_NOERR_TRUNC = { noremap = true, silent = true, nowait = true }\r\n---- Up / Down direction.\r\nvim.keymap.set('n', '<M-S-K>', '<cmd>m.-2<CR>', NOREF_NOERR_TRUNC)\r\nvim.keymap.set('n', '<M-S-J>', '<cmd>m.1<CR>', NOREF_NOERR_TRUNC)\r\n```\r\n\r\n## DEMO\r\n\r\n### compiling from `neovim/master` ([8ed9c84](https://github.com/neovim/neovim/commit/8ed9c84481a7d0df0708d11ffa538f832591240f))\r\n\r\nYou can skip the compiling part and start from 1:14. While the error messages are truncated they're exactly the same error as OP.\r\n\r\nhttps://user-images.githubusercontent.com/24765272/156918193-915e353a-f3c5-49e3-ab80-9b374d5245ef.mov\r\n\r\n### compiling from [mjlbach:fix/incremental-sync-again](https://github.com/mjlbach/neovim/tree/fix/incremental-sync-again)\r\n\r\nYou can skip the compiling part and start from 1:00. The error disappears when swapping lines.\r\n\r\nhttps://user-images.githubusercontent.com/24765272/156918239-d5630628-6c03-4eff-aa50-088a4d2f8826.mov\r\n\r\n",
            "created_at": "2022-03-06T09:49:46Z",
            "html_url": "https://github.com/neovim/neovim/issues/17615#issuecomment-1059929695",
            "id": 1059929695,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17615",
            "node_id": "IC_kwDOAPphoM4_LT5f",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1059929695/reactions"
            },
            "updated_at": "2022-03-06T10:05:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1059929695",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/24765272?v=4",
                "events_url": "https://api.github.com/users/nyngwang/events{/privacy}",
                "followers_url": "https://api.github.com/users/nyngwang/followers",
                "following_url": "https://api.github.com/users/nyngwang/following{/other_user}",
                "gists_url": "https://api.github.com/users/nyngwang/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/nyngwang",
                "id": 24765272,
                "login": "nyngwang",
                "node_id": "MDQ6VXNlcjI0NzY1Mjcy",
                "organizations_url": "https://api.github.com/users/nyngwang/orgs",
                "received_events_url": "https://api.github.com/users/nyngwang/received_events",
                "repos_url": "https://api.github.com/users/nyngwang/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/nyngwang/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/nyngwang/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/nyngwang"
            }
        },
        {
            "author_association": "NONE",
            "body": "encounters this error upon every `O` action on first line in normal mode in c/cpp file with default clangd setup.",
            "created_at": "2022-03-06T14:05:37Z",
            "html_url": "https://github.com/neovim/neovim/issues/17615#issuecomment-1059968993",
            "id": 1059968993,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17615",
            "node_id": "IC_kwDOAPphoM4_Ldfh",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1059968993/reactions"
            },
            "updated_at": "2022-03-06T14:05:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1059968993",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/43778097?v=4",
                "events_url": "https://api.github.com/users/zijian-x/events{/privacy}",
                "followers_url": "https://api.github.com/users/zijian-x/followers",
                "following_url": "https://api.github.com/users/zijian-x/following{/other_user}",
                "gists_url": "https://api.github.com/users/zijian-x/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zijian-x",
                "id": 43778097,
                "login": "zijian-x",
                "node_id": "MDQ6VXNlcjQzNzc4MDk3",
                "organizations_url": "https://api.github.com/users/zijian-x/orgs",
                "received_events_url": "https://api.github.com/users/zijian-x/received_events",
                "repos_url": "https://api.github.com/users/zijian-x/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zijian-x/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zijian-x/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zijian-x"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> @fsouza want to test #17618?\r\n\r\nConfirmed #17618 fixes the issue for me, thank you very much for the quick fix!",
            "created_at": "2022-03-06T14:27:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/17615#issuecomment-1059972567",
            "id": 1059972567,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17615",
            "node_id": "IC_kwDOAPphoM4_LeXX",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1059972567/reactions"
            },
            "updated_at": "2022-03-06T14:27:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1059972567",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/108725?v=4",
                "events_url": "https://api.github.com/users/fsouza/events{/privacy}",
                "followers_url": "https://api.github.com/users/fsouza/followers",
                "following_url": "https://api.github.com/users/fsouza/following{/other_user}",
                "gists_url": "https://api.github.com/users/fsouza/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fsouza",
                "id": 108725,
                "login": "fsouza",
                "node_id": "MDQ6VXNlcjEwODcyNQ==",
                "organizations_url": "https://api.github.com/users/fsouza/orgs",
                "received_events_url": "https://api.github.com/users/fsouza/received_events",
                "repos_url": "https://api.github.com/users/fsouza/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fsouza/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fsouza/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fsouza"
            }
        },
        {
            "author_association": "NONE",
            "body": "I have got the same error when entering dap repl and entering expressions to evaluate and then hitting Enter\r\n\r\n`Error executing lua callback: /usr/local/share/nvim/runtime/lua/vim/lsp/sync.lua:170: attempt to get length of local 'prev_line' (a nil value)\r\nstack traceback:\r\n        /usr/local/share/nvim/runtime/lua/vim/lsp/sync.lua:170: in function 'compute_start_range'\r\n        /usr/local/share/nvim/runtime/lua/vim/lsp/sync.lua:367: in function 'compute_diff'\r\n        /usr/local/share/nvim/runtime/lua/vim/lsp.lua:427: in function 'incremental_changes'\r\n        /usr/local/share/nvim/runtime/lua/vim/lsp.lua:460: in function 'fn'\r\n        /usr/local/share/nvim/runtime/lua/vim/lsp.lua:164: in function 'for_each_buffer_client'\r\n        /usr/local/share/nvim/runtime/lua/vim/lsp.lua:1184: in function </usr/local/share/nvim/runtime/lua/vim/lsp.lua:1176>`",
            "created_at": "2022-07-05T05:43:15Z",
            "html_url": "https://github.com/neovim/neovim/issues/17615#issuecomment-1174638756",
            "id": 1174638756,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17615",
            "node_id": "IC_kwDOAPphoM5GA5Ck",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 18,
                "-1": 0,
                "confused": 0,
                "eyes": 3,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 21,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1174638756/reactions"
            },
            "updated_at": "2022-07-05T05:44:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1174638756",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/71869629?v=4",
                "events_url": "https://api.github.com/users/av-maslov/events{/privacy}",
                "followers_url": "https://api.github.com/users/av-maslov/followers",
                "following_url": "https://api.github.com/users/av-maslov/following{/other_user}",
                "gists_url": "https://api.github.com/users/av-maslov/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/av-maslov",
                "id": 71869629,
                "login": "av-maslov",
                "node_id": "MDQ6VXNlcjcxODY5NjI5",
                "organizations_url": "https://api.github.com/users/av-maslov/orgs",
                "received_events_url": "https://api.github.com/users/av-maslov/received_events",
                "repos_url": "https://api.github.com/users/av-maslov/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/av-maslov/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/av-maslov/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/av-maslov"
            }
        },
        {
            "author_association": "NONE",
            "body": "@av-maslov I had this similar issue due to Github copilot. If you have enabled copilot, be sure to disable it on all buffers by default and enable it only on explicit filetypes.",
            "created_at": "2022-07-06T15:48:19Z",
            "html_url": "https://github.com/neovim/neovim/issues/17615#issuecomment-1176385988",
            "id": 1176385988,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17615",
            "node_id": "IC_kwDOAPphoM5GHjnE",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 9,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 3,
                "laugh": 0,
                "rocket": 0,
                "total_count": 12,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1176385988/reactions"
            },
            "updated_at": "2022-07-06T15:48:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1176385988",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/60206749?v=4",
                "events_url": "https://api.github.com/users/donny-son/events{/privacy}",
                "followers_url": "https://api.github.com/users/donny-son/followers",
                "following_url": "https://api.github.com/users/donny-son/following{/other_user}",
                "gists_url": "https://api.github.com/users/donny-son/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/donny-son",
                "id": 60206749,
                "login": "donny-son",
                "node_id": "MDQ6VXNlcjYwMjA2NzQ5",
                "organizations_url": "https://api.github.com/users/donny-son/orgs",
                "received_events_url": "https://api.github.com/users/donny-son/received_events",
                "repos_url": "https://api.github.com/users/donny-son/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/donny-son/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/donny-son/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/donny-son"
            }
        },
        {
            "author_association": "NONE",
            "body": "@av-maslov , same, faced it using dap through vimspector",
            "created_at": "2022-07-08T08:37:43Z",
            "html_url": "https://github.com/neovim/neovim/issues/17615#issuecomment-1178715584",
            "id": 1178715584,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17615",
            "node_id": "IC_kwDOAPphoM5GQcXA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 4,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 4,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1178715584/reactions"
            },
            "updated_at": "2022-07-08T08:37:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1178715584",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3021667?v=4",
                "events_url": "https://api.github.com/users/phcerdan/events{/privacy}",
                "followers_url": "https://api.github.com/users/phcerdan/followers",
                "following_url": "https://api.github.com/users/phcerdan/following{/other_user}",
                "gists_url": "https://api.github.com/users/phcerdan/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/phcerdan",
                "id": 3021667,
                "login": "phcerdan",
                "node_id": "MDQ6VXNlcjMwMjE2Njc=",
                "organizations_url": "https://api.github.com/users/phcerdan/orgs",
                "received_events_url": "https://api.github.com/users/phcerdan/received_events",
                "repos_url": "https://api.github.com/users/phcerdan/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/phcerdan/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/phcerdan/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/phcerdan"
            }
        },
        {
            "author_association": "NONE",
            "body": "> @av-maslov , same, faced it using dap through vimspector\r\n\r\nThis was also because of copilot in my case, this helped (luckily `Watches` and `Console` views have a distinguished file type):\r\n`g.copilot_filetypes = { VimspectorPrompt = false }`\r\n",
            "created_at": "2023-01-18T10:45:50Z",
            "html_url": "https://github.com/neovim/neovim/issues/17615#issuecomment-1386848317",
            "id": 1386848317,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17615",
            "node_id": "IC_kwDOAPphoM5SqaA9",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1386848317/reactions"
            },
            "updated_at": "2023-01-19T10:27:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1386848317",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/5539949?v=4",
                "events_url": "https://api.github.com/users/iserpent/events{/privacy}",
                "followers_url": "https://api.github.com/users/iserpent/followers",
                "following_url": "https://api.github.com/users/iserpent/following{/other_user}",
                "gists_url": "https://api.github.com/users/iserpent/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/iserpent",
                "id": 5539949,
                "login": "iserpent",
                "node_id": "MDQ6VXNlcjU1Mzk5NDk=",
                "organizations_url": "https://api.github.com/users/iserpent/orgs",
                "received_events_url": "https://api.github.com/users/iserpent/received_events",
                "repos_url": "https://api.github.com/users/iserpent/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/iserpent/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/iserpent/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/iserpent"
            }
        },
        {
            "author_association": "NONE",
            "body": "damn, I kind of liked having copilot on the dap-repl. this is still an issue for me btw in 0.9.1.\r\nany known workarounds?",
            "created_at": "2023-08-13T18:03:36Z",
            "html_url": "https://github.com/neovim/neovim/issues/17615#issuecomment-1676426034",
            "id": 1676426034,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17615",
            "node_id": "IC_kwDOAPphoM5j7Dsy",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1676426034/reactions"
            },
            "updated_at": "2023-08-13T18:03:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1676426034",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/30557896?v=4",
                "events_url": "https://api.github.com/users/MohamedOsman1998/events{/privacy}",
                "followers_url": "https://api.github.com/users/MohamedOsman1998/followers",
                "following_url": "https://api.github.com/users/MohamedOsman1998/following{/other_user}",
                "gists_url": "https://api.github.com/users/MohamedOsman1998/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/MohamedOsman1998",
                "id": 30557896,
                "login": "MohamedOsman1998",
                "node_id": "MDQ6VXNlcjMwNTU3ODk2",
                "organizations_url": "https://api.github.com/users/MohamedOsman1998/orgs",
                "received_events_url": "https://api.github.com/users/MohamedOsman1998/received_events",
                "repos_url": "https://api.github.com/users/MohamedOsman1998/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/MohamedOsman1998/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/MohamedOsman1998/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/MohamedOsman1998"
            }
        }
    ],
    "comments": 13,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/17615/comments",
    "created_at": "2022-03-06T00:55:24Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/17615/events",
    "html_url": "https://github.com/neovim/neovim/issues/17615",
    "id": 1160483935,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/17615/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM5FK5Rf",
    "number": 17615,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/17615/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/17615/timeline",
    "title": "`Error executing lua callback: ... attempt to get length of local 'line' (a nil value)` when editting new files",
    "updated_at": "2023-08-13T18:03:36Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/17615",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/108725?v=4",
        "events_url": "https://api.github.com/users/fsouza/events{/privacy}",
        "followers_url": "https://api.github.com/users/fsouza/followers",
        "following_url": "https://api.github.com/users/fsouza/following{/other_user}",
        "gists_url": "https://api.github.com/users/fsouza/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/fsouza",
        "id": 108725,
        "login": "fsouza",
        "node_id": "MDQ6VXNlcjEwODcyNQ==",
        "organizations_url": "https://api.github.com/users/fsouza/orgs",
        "received_events_url": "https://api.github.com/users/fsouza/received_events",
        "repos_url": "https://api.github.com/users/fsouza/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/fsouza/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/fsouza/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/fsouza"
    }
}