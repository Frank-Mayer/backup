{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nFirstly, I apologize in advance if this is a duplicate. I can barely word it properly myself. I searched as best I could using the search bar and didn't find anything similar. If I missed something, please link the original and I'll be happy to close this.\r\n\r\nBasically, the problem is, when I have a line beginning with `%`, and I try to join it to the previous one (using `J`), the initial `%` vanishes. This does not occur on the latest release of vim. I'm running version 0.9.5 of Neovim, built from source. I can provide logs if required, but I don't know if they're pertinent.\n\n### Steps to reproduce\n\nconsider a text file that looks like this:\r\n```text\r\n%123\r\n%456\r\n```\r\nOpen this file in Neovim, with the cursor on line 1, column 1. Do a `J`. The file ends up like so:\r\n```text\r\n%123 456\r\n```\n\n### Expected behavior\n\nFollowing the above steps should produce a result like so:\r\n```text\r\n%123 %456\r\n```\n\n### Neovim version (nvim -v)\n\nNVIM v0.9.5\n\n### Vim (not Nvim) behaves the same?\n\nno, VIM - Vi IMproved 8.2 (2019 Dec 12, compiled Dec 05 2023 17:58:57)\n\n### Operating system/version\n\nUbuntu 22.04.3\n\n### Terminal name/version\n\nKonsole 21.12.3\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\nbuild from repo",
    "closed_at": "2024-01-29T18:23:15Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Please test a current version of Vim (9.1.xxxx) and make sure you test each time with `nvim --clean`.",
            "created_at": "2024-01-29T17:25:15Z",
            "html_url": "https://github.com/neovim/neovim/issues/27260#issuecomment-1915218972",
            "id": 1915218972,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27260",
            "node_id": "IC_kwDOAPphoM5yJ-wc",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1915218972/reactions"
            },
            "updated_at": "2024-01-29T17:25:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1915218972",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "And check your `:h 'formatoptions'` settings.",
            "created_at": "2024-01-29T17:26:57Z",
            "html_url": "https://github.com/neovim/neovim/issues/27260#issuecomment-1915222875",
            "id": 1915222875,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27260",
            "node_id": "IC_kwDOAPphoM5yJ_tb",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1915222875/reactions"
            },
            "updated_at": "2024-01-29T17:26:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1915222875",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "I did test with `nvim --clean`.\r\n\r\nI can also see the correct behaviour in vim 9.1.0061 (also built from source, with nothing special)\r\n\r\n`:set fo?` shows `jtcroql`, correlating with the table, I don't see anything that might cause this either\r\n`:set fo-=jtcroql` has no effect on this.",
            "created_at": "2024-01-29T17:47:03Z",
            "html_url": "https://github.com/neovim/neovim/issues/27260#issuecomment-1915256031",
            "id": 1915256031,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27260",
            "node_id": "IC_kwDOAPphoM5yKHzf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1915256031/reactions"
            },
            "updated_at": "2024-01-29T17:47:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1915256031",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/57328245?v=4",
                "events_url": "https://api.github.com/users/lmaotrigine/events{/privacy}",
                "followers_url": "https://api.github.com/users/lmaotrigine/followers",
                "following_url": "https://api.github.com/users/lmaotrigine/following{/other_user}",
                "gists_url": "https://api.github.com/users/lmaotrigine/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lmaotrigine",
                "id": 57328245,
                "login": "lmaotrigine",
                "node_id": "MDQ6VXNlcjU3MzI4MjQ1",
                "organizations_url": "https://api.github.com/users/lmaotrigine/orgs",
                "received_events_url": "https://api.github.com/users/lmaotrigine/received_events",
                "repos_url": "https://api.github.com/users/lmaotrigine/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lmaotrigine/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lmaotrigine/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lmaotrigine"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "You do know that these options are filetype-dependent? Can you show exact reproducing steps? (I get different `fo` for Vim and Neovim with `--clean`, for the record.)",
            "created_at": "2024-01-29T17:54:57Z",
            "html_url": "https://github.com/neovim/neovim/issues/27260#issuecomment-1915268663",
            "id": 1915268663,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27260",
            "node_id": "IC_kwDOAPphoM5yKK43",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1915268663/reactions"
            },
            "updated_at": "2024-01-29T17:54:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1915268663",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "`:h vim-differences`",
            "created_at": "2024-01-29T17:55:43Z",
            "html_url": "https://github.com/neovim/neovim/issues/27260#issuecomment-1915269921",
            "id": 1915269921,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27260",
            "node_id": "IC_kwDOAPphoM5yKLMh",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1915269921/reactions"
            },
            "updated_at": "2024-01-29T17:55:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1915269921",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "(and you can only \"subtract\" one flag at a time)",
            "created_at": "2024-01-29T17:56:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/27260#issuecomment-1915271045",
            "id": 1915271045,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27260",
            "node_id": "IC_kwDOAPphoM5yKLeF",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1915271045/reactions"
            },
            "updated_at": "2024-01-29T17:56:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1915271045",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "exact repro steps:\r\n- `nvim --clean`\r\n- `i`\r\n- ```\r\n  %foo\r\n  %bar\r\n  ```\r\n- `<ESC> 0 k`\r\n- `J`\r\n\r\nsince this is literally an empty buffer, does file type have any bearing?\r\n\r\n> you can only subtract one flag at a time\r\nah, that's my bad. sorry.\r\n\r\n> I get different fo for vim and nvim --clean\r\nyeah, so do I, nvim adds `j`...\r\n\r\nand.. you're right. that *is* the difference.\r\n\r\nit seems to consider `%` as a comment character, even in plain text files.\r\n\r\nthis is exactly what happens in vim too. i shall close this as resolved. thank you for your time.",
            "created_at": "2024-01-29T18:23:15Z",
            "html_url": "https://github.com/neovim/neovim/issues/27260#issuecomment-1915314498",
            "id": 1915314498,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27260",
            "node_id": "IC_kwDOAPphoM5yKWFC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1915314498/reactions"
            },
            "updated_at": "2024-01-29T18:25:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1915314498",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/57328245?v=4",
                "events_url": "https://api.github.com/users/lmaotrigine/events{/privacy}",
                "followers_url": "https://api.github.com/users/lmaotrigine/followers",
                "following_url": "https://api.github.com/users/lmaotrigine/following{/other_user}",
                "gists_url": "https://api.github.com/users/lmaotrigine/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lmaotrigine",
                "id": 57328245,
                "login": "lmaotrigine",
                "node_id": "MDQ6VXNlcjU3MzI4MjQ1",
                "organizations_url": "https://api.github.com/users/lmaotrigine/orgs",
                "received_events_url": "https://api.github.com/users/lmaotrigine/received_events",
                "repos_url": "https://api.github.com/users/lmaotrigine/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lmaotrigine/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lmaotrigine/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lmaotrigine"
            }
        }
    ],
    "comments": 7,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/27260/comments",
    "created_at": "2024-01-29T17:23:10Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/27260/events",
    "html_url": "https://github.com/neovim/neovim/issues/27260",
    "id": 2106046294,
    "labels": [
        {
            "color": "e6e6e6",
            "default": false,
            "description": "issues that are closed as duplicates of other issues",
            "id": 3221613764,
            "name": "closed:duplicate",
            "node_id": "MDU6TGFiZWwzMjIxNjEzNzY0",
            "url": "https://api.github.com/repos/neovim/neovim/labels/closed:duplicate"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/27260/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM59h7dW",
    "number": 27260,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/27260/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/27260/timeline",
    "title": "`%` gets removed using the `J` action",
    "updated_at": "2024-01-29T20:56:30Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/27260",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/57328245?v=4",
        "events_url": "https://api.github.com/users/lmaotrigine/events{/privacy}",
        "followers_url": "https://api.github.com/users/lmaotrigine/followers",
        "following_url": "https://api.github.com/users/lmaotrigine/following{/other_user}",
        "gists_url": "https://api.github.com/users/lmaotrigine/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/lmaotrigine",
        "id": 57328245,
        "login": "lmaotrigine",
        "node_id": "MDQ6VXNlcjU3MzI4MjQ1",
        "organizations_url": "https://api.github.com/users/lmaotrigine/orgs",
        "received_events_url": "https://api.github.com/users/lmaotrigine/received_events",
        "repos_url": "https://api.github.com/users/lmaotrigine/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/lmaotrigine/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/lmaotrigine/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/lmaotrigine"
    }
}