{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\r\n\r\nStarting wl-copy with `--foreground` causes https://sw.kovidgoyal.net/kitty/ to hang after the shell exits.\r\n\r\nThis happens because kitty waits for all processes connected by stdio to die, before it closes. Starting wl-copy with `--foreground` does not redirect stdio to `/dev/null`.\r\n\r\nThis can be fixed by removing `--foreground` from the wl-copy section in `runtime/autoload/provider/clipboard.vim`.\r\n\r\n### Steps to reproduce\r\n\r\n\\# use kitty terminal emulator in wayland\r\nnvim --clean\r\n\\# copy stuff with \"+\r\n:q\r\n\\# exit shell with CTRL-D\r\n\r\n### Expected behavior\r\n\r\nTerminal exits.\r\n\r\n### Neovim version (nvim -v)\r\n\r\nNVIM v0.9.2 Build type: Release LuaJIT 2.1.1694285958     system vimrc file: \"$VIM/sysinit.vim\"   fall-back for $VIM: \"/usr/share/nvim\"  Run :checkhealth for more info\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\nno\r\n\r\n### Operating system/version\r\n\r\nLinux\r\n\r\n### Terminal name/version\r\n\r\nkitty\r\n\r\n### $TERM environment variable\r\n\r\nxterm-kitty\r\n\r\n### Installation\r\n\r\nArch Linux",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Related #24470",
            "created_at": "2023-10-02T06:13:48Z",
            "html_url": "https://github.com/neovim/neovim/issues/25466#issuecomment-1742446643",
            "id": 1742446643,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25466",
            "node_id": "IC_kwDOAPphoM5n26Az",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1742446643/reactions"
            },
            "updated_at": "2023-10-02T07:13:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1742446643",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "cc @ainola",
            "created_at": "2023-10-02T06:18:03Z",
            "html_url": "https://github.com/neovim/neovim/issues/25466#issuecomment-1742450218",
            "id": 1742450218,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25466",
            "node_id": "IC_kwDOAPphoM5n264q",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1742450218/reactions"
            },
            "updated_at": "2023-10-02T06:18:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1742450218",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Related #24470\r\n\r\nNo that's not related. In that case neovim hangs, in this case kitty hangs.",
            "created_at": "2023-10-02T07:11:55Z",
            "html_url": "https://github.com/neovim/neovim/issues/25466#issuecomment-1742504188",
            "id": 1742504188,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25466",
            "node_id": "IC_kwDOAPphoM5n3ID8",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1742504188/reactions"
            },
            "updated_at": "2023-10-02T07:13:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1742504188",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/61089994?v=4",
                "events_url": "https://api.github.com/users/eNV25/events{/privacy}",
                "followers_url": "https://api.github.com/users/eNV25/followers",
                "following_url": "https://api.github.com/users/eNV25/following{/other_user}",
                "gists_url": "https://api.github.com/users/eNV25/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/eNV25",
                "id": 61089994,
                "login": "eNV25",
                "node_id": "MDQ6VXNlcjYxMDg5OTk0",
                "organizations_url": "https://api.github.com/users/eNV25/orgs",
                "received_events_url": "https://api.github.com/users/eNV25/received_events",
                "repos_url": "https://api.github.com/users/eNV25/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/eNV25/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/eNV25/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/eNV25"
            }
        },
        {
            "author_association": "NONE",
            "body": "The following `init.lua` file makes it work correctly:\r\n```lua\r\n-- init.lua\r\nif vim.env.WAYLAND_DISPLAY and vim.fn.executable(\"wl-copy\") and vim.fn.executable(\"wl-paste\") then\r\n  vim.g.clipboard = {\r\n    name = \"wl-copy\",\r\n    copy = {\r\n      [\"+\"] = { \"wl-copy\", \"--type\", \"text/plain\" },\r\n      [\"*\"] = { \"wl-copy\", \"--primary\", \"--type\", \"text/plain\" },\r\n    },\r\n    paste = {\r\n      [\"+\"] = { \"wl-paste\", \"--no-newline\" },\r\n      [\"*\"] = { \"wl-paste\", \"--no-newline\", \"--primary\" },\r\n    },\r\n  }\r\nend\r\n```\r\n```sh\r\nnvim -u init.lua\r\n```\r\n\r\nIt's the same as in `runtime/autoload/provider/clipboard.vim` but with `--foreground` removed.",
            "created_at": "2023-10-02T09:02:29Z",
            "html_url": "https://github.com/neovim/neovim/issues/25466#issuecomment-1742649699",
            "id": 1742649699,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25466",
            "node_id": "IC_kwDOAPphoM5n3rlj",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1742649699/reactions"
            },
            "updated_at": "2023-10-02T09:02:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1742649699",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/61089994?v=4",
                "events_url": "https://api.github.com/users/eNV25/events{/privacy}",
                "followers_url": "https://api.github.com/users/eNV25/followers",
                "following_url": "https://api.github.com/users/eNV25/following{/other_user}",
                "gists_url": "https://api.github.com/users/eNV25/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/eNV25",
                "id": 61089994,
                "login": "eNV25",
                "node_id": "MDQ6VXNlcjYxMDg5OTk0",
                "organizations_url": "https://api.github.com/users/eNV25/orgs",
                "received_events_url": "https://api.github.com/users/eNV25/received_events",
                "repos_url": "https://api.github.com/users/eNV25/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/eNV25/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/eNV25/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/eNV25"
            }
        },
        {
            "author_association": "NONE",
            "body": "@zeertzjq Can I just send a patch?",
            "created_at": "2023-10-02T17:07:10Z",
            "html_url": "https://github.com/neovim/neovim/issues/25466#issuecomment-1743422096",
            "id": 1743422096,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25466",
            "node_id": "IC_kwDOAPphoM5n6oKQ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1743422096/reactions"
            },
            "updated_at": "2023-10-02T17:07:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1743422096",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/61089994?v=4",
                "events_url": "https://api.github.com/users/eNV25/events{/privacy}",
                "followers_url": "https://api.github.com/users/eNV25/followers",
                "following_url": "https://api.github.com/users/eNV25/following{/other_user}",
                "gists_url": "https://api.github.com/users/eNV25/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/eNV25",
                "id": 61089994,
                "login": "eNV25",
                "node_id": "MDQ6VXNlcjYxMDg5OTk0",
                "organizations_url": "https://api.github.com/users/eNV25/orgs",
                "received_events_url": "https://api.github.com/users/eNV25/received_events",
                "repos_url": "https://api.github.com/users/eNV25/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/eNV25/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/eNV25/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/eNV25"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I wanted wait for an some information from @ainola on why `--foreground` was added.",
            "created_at": "2023-10-02T22:39:11Z",
            "html_url": "https://github.com/neovim/neovim/issues/25466#issuecomment-1743868913",
            "id": 1743868913,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25466",
            "node_id": "IC_kwDOAPphoM5n8VPx",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1743868913/reactions"
            },
            "updated_at": "2023-10-02T22:39:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1743868913",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Thanks for soliciting my feedback! I had put --foreground in the patch \nfor no particular technical reason IIRC - As long as testing doesn't \nbreak it I don't imagine there's an issue with removing the foreground.",
            "created_at": "2023-10-02T22:55:58Z",
            "html_url": "https://github.com/neovim/neovim/issues/25466#issuecomment-1743884171",
            "id": 1743884171,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25466",
            "node_id": "IC_kwDOAPphoM5n8Y-L",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1743884171/reactions"
            },
            "updated_at": "2023-10-02T22:55:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1743884171",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/42895189?v=4",
                "events_url": "https://api.github.com/users/ainola/events{/privacy}",
                "followers_url": "https://api.github.com/users/ainola/followers",
                "following_url": "https://api.github.com/users/ainola/following{/other_user}",
                "gists_url": "https://api.github.com/users/ainola/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ainola",
                "id": 42895189,
                "login": "ainola",
                "node_id": "MDQ6VXNlcjQyODk1MTg5",
                "organizations_url": "https://api.github.com/users/ainola/orgs",
                "received_events_url": "https://api.github.com/users/ainola/received_events",
                "repos_url": "https://api.github.com/users/ainola/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ainola/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ainola/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ainola"
            }
        }
    ],
    "comments": 7,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/25466/comments",
    "created_at": "2023-10-02T06:10:02Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/25466/events",
    "html_url": "https://github.com/neovim/neovim/issues/25466",
    "id": 1921302780,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "clipboard, paste",
            "id": 186192409,
            "name": "clipboard",
            "node_id": "MDU6TGFiZWwxODYxOTI0MDk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/clipboard"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/25466/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM5yhMD8",
    "number": 25466,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/25466/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/25466/timeline",
    "title": "clipboard: wl-copy: don't run with `--foreground`",
    "updated_at": "2023-10-02T22:55:58Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/25466",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/61089994?v=4",
        "events_url": "https://api.github.com/users/eNV25/events{/privacy}",
        "followers_url": "https://api.github.com/users/eNV25/followers",
        "following_url": "https://api.github.com/users/eNV25/following{/other_user}",
        "gists_url": "https://api.github.com/users/eNV25/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/eNV25",
        "id": 61089994,
        "login": "eNV25",
        "node_id": "MDQ6VXNlcjYxMDg5OTk0",
        "organizations_url": "https://api.github.com/users/eNV25/orgs",
        "received_events_url": "https://api.github.com/users/eNV25/received_events",
        "repos_url": "https://api.github.com/users/eNV25/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/eNV25/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eNV25/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/eNV25"
    }
}