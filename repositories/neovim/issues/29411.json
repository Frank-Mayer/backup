{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nCurrently (at least with neovim 0.10.0) when `autowrite` or `autowriteall` is set the buffers are not being written out when neovim receive a deadly signal such as SIGHUP or SIGQUIT.\n\n### Expected behavior\n\nNeovim should try to write out the buffers as it would with a normal exit in cases like this as this would be what one expects when they set `autowrite` or `autowriteall`.",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "How often does neovim crash that this becomes relevant lol?\n\nAlso I don't think it's as obvious as you say that autowrite \"should\" save on abort. In all cases now autowrite is triggered by a deliberate action by the user, while this will write on any random state it happens to be on. Do the recovery functionality/swap mechanism not essentially fulfill this need anyway?",
            "created_at": "2024-06-19T10:05:07Z",
            "html_url": "https://github.com/neovim/neovim/issues/29411#issuecomment-2178284947",
            "id": 2178284947,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29411",
            "node_id": "IC_kwDOAPphoM6B1f2T",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2178284947/reactions"
            },
            "updated_at": "2024-06-19T10:05:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2178284947",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/33953936?v=4",
                "events_url": "https://api.github.com/users/dundargoc/events{/privacy}",
                "followers_url": "https://api.github.com/users/dundargoc/followers",
                "following_url": "https://api.github.com/users/dundargoc/following{/other_user}",
                "gists_url": "https://api.github.com/users/dundargoc/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/dundargoc",
                "id": 33953936,
                "login": "dundargoc",
                "node_id": "MDQ6VXNlcjMzOTUzOTM2",
                "organizations_url": "https://api.github.com/users/dundargoc/orgs",
                "received_events_url": "https://api.github.com/users/dundargoc/received_events",
                "repos_url": "https://api.github.com/users/dundargoc/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/dundargoc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/dundargoc/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/dundargoc"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "`preserve_exit` is called on deadly signal: https://github.com/neovim/neovim/blob/a2d510e1015d57f28ab20c5d2897527cae15b9c4/src/nvim/os/signal.c#L180-L181\r\n\r\nIIUC, that only writes swap files. For SIGHUP/SIGQUIT (but not others like SIGTERM) maybe it makes sense to also write the buffer contents.",
            "created_at": "2024-06-19T10:06:44Z",
            "html_url": "https://github.com/neovim/neovim/issues/29411#issuecomment-2178287935",
            "id": 2178287935,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29411",
            "node_id": "IC_kwDOAPphoM6B1gk_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2178287935/reactions"
            },
            "updated_at": "2024-06-19T10:09:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2178287935",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "@dundargoc \r\n> How often does neovim crash that this becomes relevant lol?\r\n\r\nIt’s not relevant for crashes, but the use case that makes me want such a functionality is the following: I wanted a \"quick and dirty\" neovim scratchpad windows in my desktop environment, and I’m used to quit windows through my DE shorcuts, which calls a SIGHUP.\r\n\r\nI agree that there are multiple workarounds for this particular usage but as @justinmk says for signals like SIGHUP or SIGQUIT (but not SIGTERM, I agree), I thought it would make more sense that neovim goes through its usual exit sequence as a `:q` would.",
            "created_at": "2024-06-19T10:17:01Z",
            "html_url": "https://github.com/neovim/neovim/issues/29411#issuecomment-2178311194",
            "id": 2178311194,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29411",
            "node_id": "IC_kwDOAPphoM6B1mQa",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2178311194/reactions"
            },
            "updated_at": "2024-06-19T10:17:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2178311194",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/57142648?v=4",
                "events_url": "https://api.github.com/users/robin-carlier/events{/privacy}",
                "followers_url": "https://api.github.com/users/robin-carlier/followers",
                "following_url": "https://api.github.com/users/robin-carlier/following{/other_user}",
                "gists_url": "https://api.github.com/users/robin-carlier/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/robin-carlier",
                "id": 57142648,
                "login": "robin-carlier",
                "node_id": "MDQ6VXNlcjU3MTQyNjQ4",
                "organizations_url": "https://api.github.com/users/robin-carlier/orgs",
                "received_events_url": "https://api.github.com/users/robin-carlier/received_events",
                "repos_url": "https://api.github.com/users/robin-carlier/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/robin-carlier/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/robin-carlier/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/robin-carlier"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "'autowrite' already (should) works like this for `:suspend` (SIGTSTP). And 'autowriteall' is intended to extend 'autowrite' behavior for \"quit\" (`:help autowriteall` mentions \"closing the Vim window\"). \r\n\r\n## Proposal\r\n\r\n- Respect 'autowriteall' for SIGHUP/SIGQUIT.\r\n- Are `VimLeave`/`VimLeavePre` triggered on SIGHUP/SIGQUIT? Or should they be? Or should the `Signal` autocmd allow hooking into SIGHUP/SIGQUIT? \r\n",
            "created_at": "2024-06-19T10:45:00Z",
            "html_url": "https://github.com/neovim/neovim/issues/29411#issuecomment-2178358976",
            "id": 2178358976,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29411",
            "node_id": "IC_kwDOAPphoM6B1x7A",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2178358976/reactions"
            },
            "updated_at": "2024-06-19T10:45:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2178358976",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/29411/comments",
    "created_at": "2024-06-19T09:47:33Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/29411/events",
    "html_url": "https://github.com/neovim/neovim/issues/29411",
    "id": 2361899175,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 713599092,
            "name": "system",
            "node_id": "MDU6TGFiZWw3MTM1OTkwOTI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/system"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "events, autocommands",
            "id": 3341085842,
            "name": "events",
            "node_id": "MDU6TGFiZWwzMzQxMDg1ODQy",
            "url": "https://api.github.com/repos/neovim/neovim/labels/events"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/29411/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 626,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk"
        },
        "description": "Low priority. Not planned for the current target, may be reassigned.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 550,
        "state": "open",
        "title": "backlog",
        "updated_at": "2024-06-21T11:50:48Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM6Mx7in",
    "number": 29411,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/29411/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/29411/timeline",
    "title": "autowrite when receiving SIGHUP, SIGQUIT",
    "updated_at": "2024-06-19T10:45:01Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/29411",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/57142648?v=4",
        "events_url": "https://api.github.com/users/robin-carlier/events{/privacy}",
        "followers_url": "https://api.github.com/users/robin-carlier/followers",
        "following_url": "https://api.github.com/users/robin-carlier/following{/other_user}",
        "gists_url": "https://api.github.com/users/robin-carlier/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/robin-carlier",
        "id": 57142648,
        "login": "robin-carlier",
        "node_id": "MDQ6VXNlcjU3MTQyNjQ4",
        "organizations_url": "https://api.github.com/users/robin-carlier/orgs",
        "received_events_url": "https://api.github.com/users/robin-carlier/received_events",
        "repos_url": "https://api.github.com/users/robin-carlier/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/robin-carlier/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/robin-carlier/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/robin-carlier"
    }
}