{
    "active_lock_reason": "resolved",
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "It is really surprising that such a trivial thing as automatically disable highlight after some time when say cursor moved is impossible with vim and need to use [plugins](https://github.com/romainl/vim-cool/) for that, that remaps half of the keyboard and wouldn't work if I say remapped some search related keys. If `noh` could be called from user functions this would be as trivial as\r\n\r\n`au CursorMoved call timer_start(2000, 'DisableHighlight')`",
    "closed_at": "2021-10-11T13:33:59Z",
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "Am 2016-11-10 14:30, schrieb purpleP:\n\n> It is really surprising that such a trivial thing as automatically\n> disable highlight after some time when say cursor moved is impossible\n> with vim and need to use plugins [1] for that, that remaps half of the\n> keyboard and wouldn't work if I say remapped some search related keys.\n> If noh could be called from user functions this would be as trivial as\n> \n> au CursorMoved call timer_start(2000, 'DisableHighlight')\n\nits already possible with feedkeys.\n",
            "created_at": "2016-11-10T14:40:51Z",
            "html_url": "https://github.com/neovim/neovim/issues/5581#issuecomment-259706689",
            "id": 259706689,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/5581",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTcwNjY4OQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/259706689/reactions"
            },
            "updated_at": "2016-11-10T14:40:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/259706689",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/244927?v=4",
                "events_url": "https://api.github.com/users/chrisbra/events{/privacy}",
                "followers_url": "https://api.github.com/users/chrisbra/followers",
                "following_url": "https://api.github.com/users/chrisbra/following{/other_user}",
                "gists_url": "https://api.github.com/users/chrisbra/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/chrisbra",
                "id": 244927,
                "login": "chrisbra",
                "node_id": "MDQ6VXNlcjI0NDkyNw==",
                "organizations_url": "https://api.github.com/users/chrisbra/orgs",
                "received_events_url": "https://api.github.com/users/chrisbra/received_events",
                "repos_url": "https://api.github.com/users/chrisbra/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/chrisbra/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/chrisbra/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/chrisbra"
            }
        },
        {
            "author_association": "NONE",
            "body": "@chrisbra \nI still haven't figured out completely what feedkeys is doing and how it works, but your [suggestion](https://gist.github.com/chrisbra/737b4b0487a7798af6f179bda9ce8c09#file-searchhighlight-vim) isn't working properly in operator pending mode as all workarounds that I know are.\n",
            "created_at": "2016-11-10T19:28:41Z",
            "html_url": "https://github.com/neovim/neovim/issues/5581#issuecomment-259783977",
            "id": 259783977,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/5581",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTc4Mzk3Nw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/259783977/reactions"
            },
            "updated_at": "2016-11-10T19:28:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/259783977",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6205841?v=4",
                "events_url": "https://api.github.com/users/purpleP/events{/privacy}",
                "followers_url": "https://api.github.com/users/purpleP/followers",
                "following_url": "https://api.github.com/users/purpleP/following{/other_user}",
                "gists_url": "https://api.github.com/users/purpleP/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/purpleP",
                "id": 6205841,
                "login": "purpleP",
                "node_id": "MDQ6VXNlcjYyMDU4NDE=",
                "organizations_url": "https://api.github.com/users/purpleP/orgs",
                "received_events_url": "https://api.github.com/users/purpleP/received_events",
                "repos_url": "https://api.github.com/users/purpleP/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/purpleP/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/purpleP/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/purpleP"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "See the help `:h feedkeys()`\nBTW: the problem you are seeing is simply caused by the timer being triggered when you are in the wrong mode. Its no problem of feedkeys() per se.\n",
            "created_at": "2016-11-10T19:44:29Z",
            "html_url": "https://github.com/neovim/neovim/issues/5581#issuecomment-259787947",
            "id": 259787947,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/5581",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTc4Nzk0Nw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/259787947/reactions"
            },
            "updated_at": "2016-11-10T20:13:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/259787947",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/244927?v=4",
                "events_url": "https://api.github.com/users/chrisbra/events{/privacy}",
                "followers_url": "https://api.github.com/users/chrisbra/followers",
                "following_url": "https://api.github.com/users/chrisbra/following{/other_user}",
                "gists_url": "https://api.github.com/users/chrisbra/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/chrisbra",
                "id": 244927,
                "login": "chrisbra",
                "node_id": "MDQ6VXNlcjI0NDkyNw==",
                "organizations_url": "https://api.github.com/users/chrisbra/orgs",
                "received_events_url": "https://api.github.com/users/chrisbra/received_events",
                "repos_url": "https://api.github.com/users/chrisbra/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/chrisbra/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/chrisbra/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/chrisbra"
            }
        },
        {
            "author_association": "NONE",
            "body": "@chrisbra Yeah, I've read it. I still not sure how to avoid accidental strings that passed to feedkeys inserted into buffer. Do you know how to do that?\n",
            "created_at": "2016-11-10T21:03:19Z",
            "html_url": "https://github.com/neovim/neovim/issues/5581#issuecomment-259806764",
            "id": 259806764,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/5581",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTgwNjc2NA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/259806764/reactions"
            },
            "updated_at": "2016-11-10T21:03:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/259806764",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6205841?v=4",
                "events_url": "https://api.github.com/users/purpleP/events{/privacy}",
                "followers_url": "https://api.github.com/users/purpleP/followers",
                "following_url": "https://api.github.com/users/purpleP/following{/other_user}",
                "gists_url": "https://api.github.com/users/purpleP/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/purpleP",
                "id": 6205841,
                "login": "purpleP",
                "node_id": "MDQ6VXNlcjYyMDU4NDE=",
                "organizations_url": "https://api.github.com/users/purpleP/orgs",
                "received_events_url": "https://api.github.com/users/purpleP/received_events",
                "repos_url": "https://api.github.com/users/purpleP/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/purpleP/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/purpleP/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/purpleP"
            }
        },
        {
            "author_association": "NONE",
            "body": "I think this is already have been discussed, but what I really need is a way to react to pressed keys without remappings.\nSpecifically what I want is to disable highlight if I don't need to see search matches. Which translates to following behaviour.\n1. If I searched with `/` or `?` as soon as cursor moved (except when it moved because of `n` or `N` highlight should turn off.\n2. If I searched with `*` or `#` as soon as cursor moved (except the first move to next occurrence of the word or `n` or `N`) highlight should turn off.\n3. If I use search in operator pending mode don't highlight matches at all in the first place.\n\nWhat bugs me is this is full specification of what I want, not just some heuristic that would cover most of the cases, yet is seems to be impossible to express this simple idea in vim.\n",
            "created_at": "2016-11-10T21:19:59Z",
            "html_url": "https://github.com/neovim/neovim/issues/5581#issuecomment-259810598",
            "id": 259810598,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/5581",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTgxMDU5OA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/259810598/reactions"
            },
            "updated_at": "2016-11-10T21:19:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/259810598",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6205841?v=4",
                "events_url": "https://api.github.com/users/purpleP/events{/privacy}",
                "followers_url": "https://api.github.com/users/purpleP/followers",
                "following_url": "https://api.github.com/users/purpleP/following{/other_user}",
                "gists_url": "https://api.github.com/users/purpleP/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/purpleP",
                "id": 6205841,
                "login": "purpleP",
                "node_id": "MDQ6VXNlcjYyMDU4NDE=",
                "organizations_url": "https://api.github.com/users/purpleP/orgs",
                "received_events_url": "https://api.github.com/users/purpleP/received_events",
                "repos_url": "https://api.github.com/users/purpleP/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/purpleP/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/purpleP/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/purpleP"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> what I really need is a way to react to pressed keys without remappings.\n\nI have a work-in-progress local branch that enables something like that.\n\nIn the meantime regarding `:hlsearch` specifically, the limitation described at `:hlsearch` _could_ be worked around by a medium-risk refactoring. Patches welcome.\n",
            "created_at": "2016-11-11T08:07:58Z",
            "html_url": "https://github.com/neovim/neovim/issues/5581#issuecomment-259903275",
            "id": 259903275,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/5581",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTkwMzI3NQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/259903275/reactions"
            },
            "updated_at": "2016-11-11T08:07:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/259903275",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Isn't this what `v:hlsearch` is for?  `let v:hlsearch = 0` if you want to disable the highlight, and `let v:hlsearch = 1` if you want to enable it (if the user has `'hlsearch'` set).\n",
            "created_at": "2016-11-11T13:00:32Z",
            "html_url": "https://github.com/neovim/neovim/issues/5581#issuecomment-259952371",
            "id": 259952371,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/5581",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI1OTk1MjM3MQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/259952371/reactions"
            },
            "updated_at": "2016-11-11T13:00:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/259952371",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/112971?v=4",
                "events_url": "https://api.github.com/users/jamessan/events{/privacy}",
                "followers_url": "https://api.github.com/users/jamessan/followers",
                "following_url": "https://api.github.com/users/jamessan/following{/other_user}",
                "gists_url": "https://api.github.com/users/jamessan/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jamessan",
                "id": 112971,
                "login": "jamessan",
                "node_id": "MDQ6VXNlcjExMjk3MQ==",
                "organizations_url": "https://api.github.com/users/jamessan/orgs",
                "received_events_url": "https://api.github.com/users/jamessan/received_events",
                "repos_url": "https://api.github.com/users/jamessan/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jamessan/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jamessan/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jamessan"
            }
        },
        {
            "author_association": "NONE",
            "body": "@jamessan It actually works but what I've summarised what I really want from vim above. The way I see it to make vim do what I want I would have to either reimplement vim search functionality using vimscript (and I've just tried to play with `search` function and I can't find how to make it highlight matches) or if what I've asked initially would be possible this could be as simple as this\n\n``` python\n# python pseudo-code\ndef onKeyPressed(mode, key):\n     if mode is OPERATOR_PENDING_MODE and key is in {'/', '?'}:\n        highlight_search_off()\n     elif highlight_on() and key is not in {'n', 'N'}:\n        nohl()\n```\n",
            "created_at": "2016-11-14T10:45:46Z",
            "html_url": "https://github.com/neovim/neovim/issues/5581#issuecomment-260303959",
            "id": 260303959,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/5581",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDMwMzk1OQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/260303959/reactions"
            },
            "updated_at": "2016-11-14T10:45:46Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/260303959",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6205841?v=4",
                "events_url": "https://api.github.com/users/purpleP/events{/privacy}",
                "followers_url": "https://api.github.com/users/purpleP/followers",
                "following_url": "https://api.github.com/users/purpleP/following{/other_user}",
                "gists_url": "https://api.github.com/users/purpleP/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/purpleP",
                "id": 6205841,
                "login": "purpleP",
                "node_id": "MDQ6VXNlcjYyMDU4NDE=",
                "organizations_url": "https://api.github.com/users/purpleP/orgs",
                "received_events_url": "https://api.github.com/users/purpleP/received_events",
                "repos_url": "https://api.github.com/users/purpleP/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/purpleP/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/purpleP/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/purpleP"
            }
        },
        {
            "author_association": "NONE",
            "body": "You know what's funny, guys? Emacs with evil mode seems to be doing exactly what I want in this case. It fails in others like for some reason <C-w><C-h> doesn't work, only <C-w>h etc for switching windows.\n",
            "created_at": "2016-11-14T10:51:30Z",
            "html_url": "https://github.com/neovim/neovim/issues/5581#issuecomment-260305157",
            "id": 260305157,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/5581",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDMwNTE1Nw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/260305157/reactions"
            },
            "updated_at": "2016-11-14T10:51:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/260305157",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6205841?v=4",
                "events_url": "https://api.github.com/users/purpleP/events{/privacy}",
                "followers_url": "https://api.github.com/users/purpleP/followers",
                "following_url": "https://api.github.com/users/purpleP/following{/other_user}",
                "gists_url": "https://api.github.com/users/purpleP/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/purpleP",
                "id": 6205841,
                "login": "purpleP",
                "node_id": "MDQ6VXNlcjYyMDU4NDE=",
                "organizations_url": "https://api.github.com/users/purpleP/orgs",
                "received_events_url": "https://api.github.com/users/purpleP/received_events",
                "repos_url": "https://api.github.com/users/purpleP/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/purpleP/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/purpleP/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/purpleP"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Yes, there's no fundamental reason this couldn't be fixed, and I wouldn't expect evil-mode to replicate this bug. This bug exists because of a Vim implementation detail.\n",
            "created_at": "2016-11-14T11:43:50Z",
            "html_url": "https://github.com/neovim/neovim/issues/5581#issuecomment-260314892",
            "id": 260314892,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/5581",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI2MDMxNDg5Mg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/260314892/reactions"
            },
            "updated_at": "2016-11-14T11:43:50Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/260314892",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "@jamessan @justinmk \r\nHey, it started to bug me again and I've almost done everything I've wanted.\r\n\r\n```vim\r\nfu! HlSearch()\r\n    let s:pos = match(getline('.'), @/, col('.') - 1) + 1\r\n    echom s:pos . '|' . col('.')\r\n    if s:pos != col('.')\r\n        call StopHL()\r\n    endif\r\nendfu\r\n\r\nfu! StopHL()\r\n    if !v:hlsearch || mode() isnot 'n'\r\n        return\r\n    else\r\n        let cmd=\"\\<c-\\>\\<c-n>:let v:hlsearch=0\\<cr>\\<c-l>\"\r\n        sil call feedkeys(cmd, 'n')\r\n    endif\r\nendfu\r\n\r\naugroup SearchHighlight\r\nau!\r\n    au CursorMoved * call HlSearch()\r\n    au InsertLeave * call StopHL()\r\naugroup end\r\n```\r\n\r\nI have only one problem now - I can't use `InsertEnter` event with`StopHL` in operator pending mode because it messes my buffer (which is probably expected since it emulates me typing on keyboard and I don't want that emulation in insert mode). Which got me thinking - what if there would be an `InsertEnterPre` event or `NormalLeavepre`. As you've probably already guessed the idea is to use `feedkeys` just before going to insert mode but still in normal mode.",
            "created_at": "2016-12-20T15:15:44Z",
            "html_url": "https://github.com/neovim/neovim/issues/5581#issuecomment-268268488",
            "id": 268268488,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/5581",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODI2ODQ4OA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 1,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/268268488/reactions"
            },
            "updated_at": "2016-12-20T15:15:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/268268488",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6205841?v=4",
                "events_url": "https://api.github.com/users/purpleP/events{/privacy}",
                "followers_url": "https://api.github.com/users/purpleP/followers",
                "following_url": "https://api.github.com/users/purpleP/following{/other_user}",
                "gists_url": "https://api.github.com/users/purpleP/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/purpleP",
                "id": 6205841,
                "login": "purpleP",
                "node_id": "MDQ6VXNlcjYyMDU4NDE=",
                "organizations_url": "https://api.github.com/users/purpleP/orgs",
                "received_events_url": "https://api.github.com/users/purpleP/received_events",
                "repos_url": "https://api.github.com/users/purpleP/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/purpleP/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/purpleP/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/purpleP"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Does it help if you use `feedkeys(cmd, 'in')`?",
            "created_at": "2016-12-20T15:24:33Z",
            "html_url": "https://github.com/neovim/neovim/issues/5581#issuecomment-268270880",
            "id": 268270880,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/5581",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODI3MDg4MA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/268270880/reactions"
            },
            "updated_at": "2016-12-20T15:24:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/268270880",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/112971?v=4",
                "events_url": "https://api.github.com/users/jamessan/events{/privacy}",
                "followers_url": "https://api.github.com/users/jamessan/followers",
                "following_url": "https://api.github.com/users/jamessan/following{/other_user}",
                "gists_url": "https://api.github.com/users/jamessan/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jamessan",
                "id": 112971,
                "login": "jamessan",
                "node_id": "MDQ6VXNlcjExMjk3MQ==",
                "organizations_url": "https://api.github.com/users/jamessan/orgs",
                "received_events_url": "https://api.github.com/users/jamessan/received_events",
                "repos_url": "https://api.github.com/users/jamessan/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jamessan/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jamessan/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jamessan"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@purpleP Try using `<expr>` mappings instead:\r\n\r\n```VimL\r\nnoremap <expr> <Plug>(StopHL) execute('nohlsearch')[-1]\r\nnoremap! <expr> <Plug>(StopHL) execute('nohlsearch')[-1]\r\n\r\nfunction s:StopHL()\r\n    if !v:hlsearch\r\n        return\r\n    else\r\n        call feedkeys(\"\\<Plug>(StopHL)\", \"m\")\r\n    endif\r\nendfunction\r\n```\r\n\r\n. The main idea is that you need to use `<expr>` mapping with expression with a side-effect (running `nohlsearch`) which evaluates to an empty string (thus not adding anything to the buffer or disturbing your input; except for the cases when you partially typed a mapping before `s:StopHL()` interferred). This should work with any mode.",
            "created_at": "2016-12-20T21:21:01Z",
            "html_url": "https://github.com/neovim/neovim/issues/5581#issuecomment-268362912",
            "id": 268362912,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/5581",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODM2MjkxMg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/268362912/reactions"
            },
            "updated_at": "2016-12-20T21:21:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/268362912",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/322097?v=4",
                "events_url": "https://api.github.com/users/ZyX-I/events{/privacy}",
                "followers_url": "https://api.github.com/users/ZyX-I/followers",
                "following_url": "https://api.github.com/users/ZyX-I/following{/other_user}",
                "gists_url": "https://api.github.com/users/ZyX-I/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ZyX-I",
                "id": 322097,
                "login": "ZyX-I",
                "node_id": "MDQ6VXNlcjMyMjA5Nw==",
                "organizations_url": "https://api.github.com/users/ZyX-I/orgs",
                "received_events_url": "https://api.github.com/users/ZyX-I/received_events",
                "repos_url": "https://api.github.com/users/ZyX-I/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ZyX-I/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ZyX-I/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ZyX-I"
            }
        },
        {
            "author_association": "NONE",
            "body": "@ZyX-I Wow, thanks a lot! Thanks to you I've just removed the main frustration from vim. Now I don't need to turnoff highlight after searching something and it won't bother me in operator pending mode. Previously I've just disabled search highlight at all, because it turned out that the cons (needing to turn it off every time) are just outweigh the pros (sometimes it's not so obvious where is the next match). But with recent neovim `inccommand` feature it's super useful in search and replace. And I've started to turn it on before every `%s` command.",
            "created_at": "2016-12-21T07:58:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/5581#issuecomment-268459619",
            "id": 268459619,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/5581",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODQ1OTYxOQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/268459619/reactions"
            },
            "updated_at": "2016-12-21T07:58:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/268459619",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6205841?v=4",
                "events_url": "https://api.github.com/users/purpleP/events{/privacy}",
                "followers_url": "https://api.github.com/users/purpleP/followers",
                "following_url": "https://api.github.com/users/purpleP/following{/other_user}",
                "gists_url": "https://api.github.com/users/purpleP/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/purpleP",
                "id": 6205841,
                "login": "purpleP",
                "node_id": "MDQ6VXNlcjYyMDU4NDE=",
                "organizations_url": "https://api.github.com/users/purpleP/orgs",
                "received_events_url": "https://api.github.com/users/purpleP/received_events",
                "repos_url": "https://api.github.com/users/purpleP/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/purpleP/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/purpleP/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/purpleP"
            }
        },
        {
            "author_association": "NONE",
            "body": "```\r\n$ nvim i.c \"+au insertenter * echom v:hlsearch\"\r\n$ nvim -i NONE i.c \"+au insertenter * echom v:hlsearch\"\r\n```\r\nwhen using @romainl ' s `cool` plugin.\r\n\r\nis it a bug? when starting nvim with `-i NONE` v:hlsearch is 1 and `nohlsearch` is inserted",
            "created_at": "2017-05-30T01:54:47Z",
            "html_url": "https://github.com/neovim/neovim/issues/5581#issuecomment-304756072",
            "id": 304756072,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/5581",
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDc1NjA3Mg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/304756072/reactions"
            },
            "updated_at": "2017-05-30T01:59:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/304756072",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9332107?v=4",
                "events_url": "https://api.github.com/users/bounceme/events{/privacy}",
                "followers_url": "https://api.github.com/users/bounceme/followers",
                "following_url": "https://api.github.com/users/bounceme/following{/other_user}",
                "gists_url": "https://api.github.com/users/bounceme/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bounceme",
                "id": 9332107,
                "login": "bounceme",
                "node_id": "MDQ6VXNlcjkzMzIxMDc=",
                "organizations_url": "https://api.github.com/users/bounceme/orgs",
                "received_events_url": "https://api.github.com/users/bounceme/received_events",
                "repos_url": "https://api.github.com/users/bounceme/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bounceme/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bounceme/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bounceme"
            }
        },
        {
            "author_association": "NONE",
            "body": "after this commit: https://github.com/romainl/vim-cool/commit/df11d4cd43980f6f4a94cd24a272ac3397e1dfff",
            "created_at": "2017-05-30T01:55:38Z",
            "html_url": "https://github.com/neovim/neovim/issues/5581#issuecomment-304756177",
            "id": 304756177,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/5581",
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwNDc1NjE3Nw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/304756177/reactions"
            },
            "updated_at": "2017-05-30T01:55:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/304756177",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/9332107?v=4",
                "events_url": "https://api.github.com/users/bounceme/events{/privacy}",
                "followers_url": "https://api.github.com/users/bounceme/followers",
                "following_url": "https://api.github.com/users/bounceme/following{/other_user}",
                "gists_url": "https://api.github.com/users/bounceme/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bounceme",
                "id": 9332107,
                "login": "bounceme",
                "node_id": "MDQ6VXNlcjkzMzIxMDc=",
                "organizations_url": "https://api.github.com/users/bounceme/orgs",
                "received_events_url": "https://api.github.com/users/bounceme/received_events",
                "repos_url": "https://api.github.com/users/bounceme/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bounceme/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bounceme/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bounceme"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> React to keypresses without remaps\r\n\r\nNvim 0.5.1 has `vim.on_key`. It needs some improvements though.\r\n\r\nBut I'm closing this issue because there isn't much useful or actionable here.",
            "created_at": "2021-10-11T13:33:59Z",
            "html_url": "https://github.com/neovim/neovim/issues/5581#issuecomment-940037799",
            "id": 940037799,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/5581",
            "node_id": "IC_kwDOAPphoM44B9an",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/940037799/reactions"
            },
            "updated_at": "2021-10-11T13:33:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/940037799",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "@ZyX-I Thanks a lot for your suggestion. However would you mind explaining the point and effect of using `[-1]` after the `execute` ? Cause when testing with or without it in a simple mapping that I call manually, I am failing to see any difference in practice, whether it be in Normal, Insert, or Operator-pending mode, the `execute()` seems to already return nothing.",
            "created_at": "2023-10-12T15:22:29Z",
            "html_url": "https://github.com/neovim/neovim/issues/5581#issuecomment-1759823042",
            "id": 1759823042,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/5581",
            "node_id": "IC_kwDOAPphoM5o5MTC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759823042/reactions"
            },
            "updated_at": "2023-10-12T15:39:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759823042",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/77821695?v=4",
                "events_url": "https://api.github.com/users/adamency/events{/privacy}",
                "followers_url": "https://api.github.com/users/adamency/followers",
                "following_url": "https://api.github.com/users/adamency/following{/other_user}",
                "gists_url": "https://api.github.com/users/adamency/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/adamency",
                "id": 77821695,
                "login": "adamency",
                "node_id": "MDQ6VXNlcjc3ODIxNjk1",
                "organizations_url": "https://api.github.com/users/adamency/orgs",
                "received_events_url": "https://api.github.com/users/adamency/received_events",
                "repos_url": "https://api.github.com/users/adamency/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/adamency/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/adamency/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/adamency"
            }
        }
    ],
    "comments": 18,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/5581/comments",
    "created_at": "2016-11-10T13:30:42Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/5581/events",
    "html_url": "https://github.com/neovim/neovim/issues/5581",
    "id": 188508747,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "wrong behavior inherited from vim",
            "id": 154310492,
            "name": "bug-vim",
            "node_id": "MDU6TGFiZWwxNTQzMTA0OTI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-vim"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 396626349,
            "name": "input",
            "node_id": "MDU6TGFiZWwzOTY2MjYzNDk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/input"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 520282574,
            "name": "event-loop",
            "node_id": "MDU6TGFiZWw1MjAyODI1NzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/event-loop"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "key bindings",
            "id": 3304938718,
            "name": "mappings",
            "node_id": "MDU6TGFiZWwzMzA0OTM4NzE4",
            "url": "https://api.github.com/repos/neovim/neovim/labels/mappings"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/5581/labels{/name}",
    "locked": true,
    "milestone": {
        "closed_at": "2021-11-30T20:46:23Z",
        "closed_issues": 236,
        "created_at": "2015-06-27T22:05:13Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk"
        },
        "description": "",
        "due_on": "2021-11-30T08:00:00Z",
        "html_url": "https://github.com/neovim/neovim/milestone/11",
        "id": 1183890,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/11/labels",
        "node_id": "MDk6TWlsZXN0b25lMTE4Mzg5MA==",
        "number": 11,
        "open_issues": 0,
        "state": "closed",
        "title": "0.6",
        "updated_at": "2021-11-30T20:46:23Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/11"
    },
    "node_id": "MDU6SXNzdWUxODg1MDg3NDc=",
    "number": 5581,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 2,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 2,
        "url": "https://api.github.com/repos/neovim/neovim/issues/5581/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/5581/timeline",
    "title": "React to keypresses without remaps (WAS: \"nohlsearch from user functions\")",
    "updated_at": "2023-10-12T15:44:11Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/5581",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/6205841?v=4",
        "events_url": "https://api.github.com/users/purpleP/events{/privacy}",
        "followers_url": "https://api.github.com/users/purpleP/followers",
        "following_url": "https://api.github.com/users/purpleP/following{/other_user}",
        "gists_url": "https://api.github.com/users/purpleP/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/purpleP",
        "id": 6205841,
        "login": "purpleP",
        "node_id": "MDQ6VXNlcjYyMDU4NDE=",
        "organizations_url": "https://api.github.com/users/purpleP/orgs",
        "received_events_url": "https://api.github.com/users/purpleP/received_events",
        "repos_url": "https://api.github.com/users/purpleP/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/purpleP/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/purpleP/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/purpleP"
    }
}