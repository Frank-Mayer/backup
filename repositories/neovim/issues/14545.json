{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "<!-- Before reporting: search existing issues and check the FAQ. -->\r\n\r\n- `NVIM v0.5.0-dev+1311-gf8173df4d`:\r\n- Operating system/version: Linux\r\n- Terminal name/version: tmux 3.3next\r\n- `xterm-256color`:\r\n\r\n### Steps to reproduce using `nvim -u NORC`\r\n\r\n\r\nsee: https://github.com/tmux/tmux/issues/2645#issuecomment-839470889\r\nand https://gist.github.com/smhc/7b873a553d75af7142f38b7993f5f0ec\r\n\r\n```\r\n\r\nset clipboard+=unnamedplus\r\n\r\n\" Default setting for g:clipboard, taken from doc\r\nlet g:clipboard = {\r\n          \\   'name': 'myClipboard',\r\n          \\   'copy': {\r\n          \\      '+': ['tmux', 'load-buffer', '-'],\r\n          \\      '*': ['tmux', 'load-buffer', '-'],\r\n          \\    },\r\n          \\   'paste': {\r\n          \\      '+': ['tmux', 'save-buffer', '-'],\r\n          \\      '*': ['tmux', 'save-buffer', '-'],\r\n          \\   },\r\n          \\   'cache_enabled': 1,\r\n          \\ }\r\n```\r\n\r\n### Actual behaviour\r\n\r\nWhen neovim uses the `tmux load-buffer` command it copies the text to the tmux buffer but does not copy to the system clipboard via OSC 52. The new '-w' switch introduced in tmux 3.2 is required to do this.\r\n\r\n### Expected behaviour\r\n\r\n\r\n```\r\nlet g:clipboard = {\r\n          \\   'name': 'myClipboard',\r\n          \\   'copy': {\r\n          \\      '+': ['tmux', 'load-buffer', '-w', '-'],\r\n          \\      '*': ['tmux', 'load-buffer', '-w', '-'],\r\n          \\    },\r\n          \\   'paste': {\r\n          \\      '+': ['tmux', 'save-buffer', '-'],\r\n          \\      '*': ['tmux', 'save-buffer', '-'],\r\n          \\   },\r\n          \\   'cache_enabled': 1,\r\n          \\ }\r\n```\r\n\r\nNote that the '-w' switch will cause an error with older versions of tmux so this may need to be configurable (or the tmux version auto detected somehow). Unfortunately tmux doesn't seem to want to add it as an option for default behaviour - so a new option may be required in neovim. ",
    "closed_at": "2023-09-25T14:57:11Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "I'm not sure we need a specific knob for this.  If anything, it probably just needs some documentation.  We already describe the tmux config in the help, so adding something about this new switch and putting a `tmux-clipboard` tag on it is probably enough.",
            "created_at": "2021-05-14T01:03:08Z",
            "html_url": "https://github.com/neovim/neovim/issues/14545#issuecomment-840924810",
            "id": 840924810,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/14545",
            "node_id": "MDEyOklzc3VlQ29tbWVudDg0MDkyNDgxMA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/840924810/reactions"
            },
            "updated_at": "2021-05-14T01:03:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/840924810",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/112971?v=4",
                "events_url": "https://api.github.com/users/jamessan/events{/privacy}",
                "followers_url": "https://api.github.com/users/jamessan/followers",
                "following_url": "https://api.github.com/users/jamessan/following{/other_user}",
                "gists_url": "https://api.github.com/users/jamessan/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jamessan",
                "id": 112971,
                "login": "jamessan",
                "node_id": "MDQ6VXNlcjExMjk3MQ==",
                "organizations_url": "https://api.github.com/users/jamessan/orgs",
                "received_events_url": "https://api.github.com/users/jamessan/received_events",
                "repos_url": "https://api.github.com/users/jamessan/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jamessan/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jamessan/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jamessan"
            }
        },
        {
            "author_association": "NONE",
            "body": "We could do. But it'd be a shame to have to dig through the doco when neovims philosophy is to have sensible defaults without lengthy config. Neovim already uses tmux load-buffer when it detects $TMUX or uses win32yank etc - so the intent is there to do the desirable thing automatically. \r\n\r\nIMHO tmux should do it automatically if configured to rather than neovim having to work out when it is applicable, but that doesn't seem like it will change.\r\n\r\nThat said, it would probably need to be off by default unless tmux had some of exposing the users preference. \r\n\r\nSo whether you copy a small dictionary from the doc to your config vs a global flag there isn't too much difference.",
            "created_at": "2021-05-14T02:47:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/14545#issuecomment-840969257",
            "id": 840969257,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/14545",
            "node_id": "MDEyOklzc3VlQ29tbWVudDg0MDk2OTI1Nw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/840969257/reactions"
            },
            "updated_at": "2021-05-14T02:53:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/840969257",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6404304?v=4",
                "events_url": "https://api.github.com/users/smhc/events{/privacy}",
                "followers_url": "https://api.github.com/users/smhc/followers",
                "following_url": "https://api.github.com/users/smhc/following{/other_user}",
                "gists_url": "https://api.github.com/users/smhc/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/smhc",
                "id": 6404304,
                "login": "smhc",
                "node_id": "MDQ6VXNlcjY0MDQzMDQ=",
                "organizations_url": "https://api.github.com/users/smhc/orgs",
                "received_events_url": "https://api.github.com/users/smhc/received_events",
                "repos_url": "https://api.github.com/users/smhc/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/smhc/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/smhc/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/smhc"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "There's a reasonable concern around enabling OCS 52 by default.  Pretty much every tool I have seen add support for OCS 52 has required the user to explicitly enable it's usage.\r\n\r\nYes, it would be preferable if a user could configure tmux to use OCS 52 by default, but I don't think it's up to nvim to work around that.\r\n\r\nNvim is still doing a reasonable thing by default by leveraging tmux to allow copy/pasting between different panes of tmux.",
            "created_at": "2021-05-14T03:10:16Z",
            "html_url": "https://github.com/neovim/neovim/issues/14545#issuecomment-840975845",
            "id": 840975845,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/14545",
            "node_id": "MDEyOklzc3VlQ29tbWVudDg0MDk3NTg0NQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/840975845/reactions"
            },
            "updated_at": "2021-05-14T03:10:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/840975845",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/112971?v=4",
                "events_url": "https://api.github.com/users/jamessan/events{/privacy}",
                "followers_url": "https://api.github.com/users/jamessan/followers",
                "following_url": "https://api.github.com/users/jamessan/following{/other_user}",
                "gists_url": "https://api.github.com/users/jamessan/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jamessan",
                "id": 112971,
                "login": "jamessan",
                "node_id": "MDQ6VXNlcjExMjk3MQ==",
                "organizations_url": "https://api.github.com/users/jamessan/orgs",
                "received_events_url": "https://api.github.com/users/jamessan/received_events",
                "repos_url": "https://api.github.com/users/jamessan/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jamessan/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jamessan/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jamessan"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "This was implemented in https://github.com/neovim/neovim/pull/20936.",
            "created_at": "2023-09-25T14:57:12Z",
            "html_url": "https://github.com/neovim/neovim/issues/14545#issuecomment-1733891770",
            "id": 1733891770,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/14545",
            "node_id": "IC_kwDOAPphoM5nWRa6",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1733891770/reactions"
            },
            "updated_at": "2023-09-25T14:57:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1733891770",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
                "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
                "followers_url": "https://api.github.com/users/gpanders/followers",
                "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
                "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/gpanders",
                "id": 8965202,
                "login": "gpanders",
                "node_id": "MDQ6VXNlcjg5NjUyMDI=",
                "organizations_url": "https://api.github.com/users/gpanders/orgs",
                "received_events_url": "https://api.github.com/users/gpanders/received_events",
                "repos_url": "https://api.github.com/users/gpanders/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/gpanders"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/14545/comments",
    "created_at": "2021-05-13T06:09:58Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/14545/events",
    "html_url": "https://github.com/neovim/neovim/issues/14545",
    "id": 890746001,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "clipboard, paste",
            "id": 186192409,
            "name": "clipboard",
            "node_id": "MDU6TGFiZWwxODYxOTI0MDk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/clipboard"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/14545/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU4OTA3NDYwMDE=",
    "number": 14545,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/14545/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/14545/timeline",
    "title": "tmux clipboard load-buffer command should use -w switch",
    "updated_at": "2023-09-25T14:57:12Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/14545",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/6404304?v=4",
        "events_url": "https://api.github.com/users/smhc/events{/privacy}",
        "followers_url": "https://api.github.com/users/smhc/followers",
        "following_url": "https://api.github.com/users/smhc/following{/other_user}",
        "gists_url": "https://api.github.com/users/smhc/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/smhc",
        "id": 6404304,
        "login": "smhc",
        "node_id": "MDQ6VXNlcjY0MDQzMDQ=",
        "organizations_url": "https://api.github.com/users/smhc/orgs",
        "received_events_url": "https://api.github.com/users/smhc/received_events",
        "repos_url": "https://api.github.com/users/smhc/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/smhc/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/smhc/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/smhc"
    }
}