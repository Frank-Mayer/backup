{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nWhen I execute `:InspectTree` on a buffer I get a new buffer with a text representation of the document tree. The file type is set to `query`, but the text is not an actual Tree-sitter query syntax. If the file type was actually correct we would get integration with file-type specific settings and plugins.\n\n### Steps to reproduce\n\nLet's take the following piece of Lua code:\r\n\r\n```lua\r\nif not success then return end\r\n```\r\n\r\nIf I execute `:InspectTree` I get the following output:\r\n\r\n```\r\n(if_statement) ; [1:1 - 31:0]\r\n condition: (unary_expression) ; [1:4 - 15:0]\r\n  operand: (identifier) ; [1:8 - 15:0]\r\n consequence: (block) ; [1:21 - 27:0]\r\n  (return_statement) ; [1:21 - 27:0]\r\n```\n\n### Expected behavior\n\nI would expect either the file type to be set to something else, or this output:\r\n\r\n```\r\n(if_statement ; [3:1 - 31:2]\r\n \"if\" ; [3:1 - 2]\r\n condition: (unary_expression ; [3:4 - 15:2]\r\n  \"not\" ; [3:4 - 7:2]\r\n  operand: (identifier)) ; [3:8 - 15:2]\r\n \"then\" ; [3:16 - 20:2]\r\n consequence: (block ; [3:21 - 27:2]\r\n  (return_statement ; [3:21 - 27:2]\r\n   \"return\")) ; [3:21 - 27:2]\r\n \"end\") ; [3:28 - 31:2]\r\n```\n\n### Neovim version (nvim -v)\n\n0.10, 0.9\n\n### Vim (not Nvim) behaves the same?\n\nN/A\n\n### Operating system/version\n\nGNU/Linux\n\n### Terminal name/version\n\nalacritty 0.12.3\n\n### $TERM environment variable\n\nalacritty\n\n### Installation\n\nXBPS (Void package manager)",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "You can press the `a` key in the tree window to show anonymous nodes. That will give you your expected output.\r\n\r\nUsing a separate filetype for the tree buffer is something I proposed in https://github.com/neovim/neovim/pull/22887 as well. That PR just lost momentum, but I donâ€™t think we ever decided on it either way. ",
            "created_at": "2023-11-09T23:49:19Z",
            "html_url": "https://github.com/neovim/neovim/issues/25958#issuecomment-1804855133",
            "id": 1804855133,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25958",
            "node_id": "IC_kwDOAPphoM5rk-dd",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1804855133/reactions"
            },
            "updated_at": "2023-11-09T23:49:19Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1804855133",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8965202?v=4",
                "events_url": "https://api.github.com/users/gpanders/events{/privacy}",
                "followers_url": "https://api.github.com/users/gpanders/followers",
                "following_url": "https://api.github.com/users/gpanders/following{/other_user}",
                "gists_url": "https://api.github.com/users/gpanders/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/gpanders",
                "id": 8965202,
                "login": "gpanders",
                "node_id": "MDQ6VXNlcjg5NjUyMDI=",
                "organizations_url": "https://api.github.com/users/gpanders/orgs",
                "received_events_url": "https://api.github.com/users/gpanders/received_events",
                "repos_url": "https://api.github.com/users/gpanders/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/gpanders/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/gpanders/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/gpanders"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "This isn't about the anonymous nodes, but the wrong or missing parentheses around named nodes. Tree-sitter query syntax looks like s-expressions, but here indentation is used to represent nesting.\n\n\n",
            "created_at": "2023-11-10T23:57:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/25958#issuecomment-1806574819",
            "id": 1806574819,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25958",
            "node_id": "IC_kwDOAPphoM5rriTj",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1806574819/reactions"
            },
            "updated_at": "2023-11-10T23:57:34Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1806574819",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4954650?v=4",
                "events_url": "https://api.github.com/users/HiPhish/events{/privacy}",
                "followers_url": "https://api.github.com/users/HiPhish/followers",
                "following_url": "https://api.github.com/users/HiPhish/following{/other_user}",
                "gists_url": "https://api.github.com/users/HiPhish/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/HiPhish",
                "id": 4954650,
                "login": "HiPhish",
                "node_id": "MDQ6VXNlcjQ5NTQ2NTA=",
                "organizations_url": "https://api.github.com/users/HiPhish/orgs",
                "received_events_url": "https://api.github.com/users/HiPhish/received_events",
                "repos_url": "https://api.github.com/users/HiPhish/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/HiPhish/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/HiPhish/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/HiPhish"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "What is the actual problem here? What harm is done by (ab)using the query filetype here inorder to get a bit of syntax highlighting?",
            "created_at": "2023-11-11T08:04:30Z",
            "html_url": "https://github.com/neovim/neovim/issues/25958#issuecomment-1806738811",
            "id": 1806738811,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25958",
            "node_id": "IC_kwDOAPphoM5rsKV7",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1806738811/reactions"
            },
            "updated_at": "2023-11-11T08:04:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1806738811",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "If I have a file type plugin for the `query` file type and it expects Tree-sitter query syntax while the content is not according to that syntax things will be broken. I noticed this in https://github.com/hiphish/rainbow-delimiters.nvim where the parentheses were not correctly highlighted.\n\nIf you just want to reuse the existing highlight definitions you can do `runtime! syntax/query` inside `syntax/tstree.vim` (or whatever you want to call that file type). Or generate actual Tree-sitter query output, but that might be harder.\n",
            "created_at": "2023-11-11T08:12:54Z",
            "html_url": "https://github.com/neovim/neovim/issues/25958#issuecomment-1806741905",
            "id": 1806741905,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25958",
            "node_id": "IC_kwDOAPphoM5rsLGR",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1806741905/reactions"
            },
            "updated_at": "2023-11-11T08:12:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1806741905",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/4954650?v=4",
                "events_url": "https://api.github.com/users/HiPhish/events{/privacy}",
                "followers_url": "https://api.github.com/users/HiPhish/followers",
                "following_url": "https://api.github.com/users/HiPhish/following{/other_user}",
                "gists_url": "https://api.github.com/users/HiPhish/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/HiPhish",
                "id": 4954650,
                "login": "HiPhish",
                "node_id": "MDQ6VXNlcjQ5NTQ2NTA=",
                "organizations_url": "https://api.github.com/users/HiPhish/orgs",
                "received_events_url": "https://api.github.com/users/HiPhish/received_events",
                "repos_url": "https://api.github.com/users/HiPhish/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/HiPhish/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/HiPhish/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/HiPhish"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Thank you; the fact that there _is_ such a plugin was the missing information. Then we should resurrect @gpanders PR. ",
            "created_at": "2023-11-11T08:29:51Z",
            "html_url": "https://github.com/neovim/neovim/issues/25958#issuecomment-1806749634",
            "id": 1806749634,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25958",
            "node_id": "IC_kwDOAPphoM5rsM_C",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1806749634/reactions"
            },
            "updated_at": "2023-11-11T08:29:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1806749634",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        }
    ],
    "comments": 5,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/25958/comments",
    "created_at": "2023-11-09T23:18:23Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/25958/events",
    "html_url": "https://github.com/neovim/neovim/issues/25958",
    "id": 1986567497,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 1799626557,
            "name": "treesitter",
            "node_id": "MDU6TGFiZWwxNzk5NjI2NTU3",
            "url": "https://api.github.com/repos/neovim/neovim/labels/treesitter"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/25958/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM52aJ1J",
    "number": 25958,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/25958/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/25958/timeline",
    "title": "InspectTree: wrong file type or output?",
    "updated_at": "2023-11-11T08:29:51Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/25958",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/4954650?v=4",
        "events_url": "https://api.github.com/users/HiPhish/events{/privacy}",
        "followers_url": "https://api.github.com/users/HiPhish/followers",
        "following_url": "https://api.github.com/users/HiPhish/following{/other_user}",
        "gists_url": "https://api.github.com/users/HiPhish/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/HiPhish",
        "id": 4954650,
        "login": "HiPhish",
        "node_id": "MDQ6VXNlcjQ5NTQ2NTA=",
        "organizations_url": "https://api.github.com/users/HiPhish/orgs",
        "received_events_url": "https://api.github.com/users/HiPhish/received_events",
        "repos_url": "https://api.github.com/users/HiPhish/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/HiPhish/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/HiPhish/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/HiPhish"
    }
}