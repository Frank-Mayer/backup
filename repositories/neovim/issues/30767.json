{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nEditing .nix files using nixd becomes impossible if file contains nerdfonts glyphs (not commented or included in function. \n\nCheck nix-community/nixvim#2390\n\n### Steps to reproduce using \"nvim -u minimal_init.lua\"\n\n```Lua\nlocal pattern = 'nix'\nlocal cmd = {'nixd'}\n-- Add files/folders here that indicate the root of a project\nlocal root_markers = {'.git', '.editorconfig'}\n-- Change to table with settings if required\nlocal settings = vim.empty_dict()\n\nvim.api.nvim_create_autocmd('FileType', {\n  pattern = pattern,\n  callback = function(args)\n    local match = vim.fs.find(root_markers, { path = args.file, upward = true })[1]\n    local root_dir = match and vim.fn.fnamemodify(match, ':p:h') or nil\n    vim.lsp.start({\n      name = 'nixd',\n      cmd = cmd,\n      root_dir = root_dir,\n      settings = settings\n    })\n  end\n})\n```\nTho I configured this via NixVim, its config:\n```Nix\nprograms.nixvim = {\n  enable = true;\n  lsp = {\n  enable = true;\n  inlayHints = true;\n  servers = {\n    nixd = {\n      enable = true;\n    };\n  };\n}\n```\n\n### Expected behavior\n\nNo errors idk\n\n### Nvim version (nvim -v)\n\n0.10.2\n\n### Language server name/version\n\nlatest idk\n\n### Operating system/version\n\nNixOS 24.11\n\n### Log file\n\n[START][2024-10-08 20:06:15] LSP logging initiated [ERROR][2024-10-08 20:06:15] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/nix/store/2dx04iayp5nl6zwsa60dsm82c58ghwk7-nixd-2.4.0/bin/nixd\"\t\"stderr\"\t\"I[20:06:15.636] 16509: <-- initialize(1)\\n\" [ERROR][2024-10-08 20:06:15] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/nix/store/2dx04iayp5nl6zwsa60dsm82c58ghwk7-nixd-2.4.0/bin/nixd\"\t\"stderr\"\t\"I[20:06:15.636] 16509: --> reply:initialize(1)\\n\" [ERROR][2024-10-08 20:06:15] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/nix/store/2dx04iayp5nl6zwsa60dsm82c58ghwk7-nixd-2.4.0/bin/nixd\"\t\"stderr\"\t\"I[20:06:15.637] 16509: --> call window/workDoneProgress/create(1)\\nI[20:06:15.637] 16509: --> notify $/progress\\nI[20:06:15.637] 16509: --> call attrset/evalExpr(1)\\nI[20:06:15.637] 16509: --> call window/workDoneProgress/create(2)\\nI[20:06:15.637] 16509: --> notify $/progress\\nI[20:06:15.637] 16509: --> call attrset/evalExpr(1)\\nI[20:06:15.637] 16509: --> call workspace/configuration(3)\\nI[20:06:15.638] 16509: <-- initialized\\nI[20:06:15.638] 16509: <-- textDocument/didOpen\\n\" [ERROR][2024-10-08 20:06:15] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/nix/store/2dx04iayp5nl6zwsa60dsm82c58ghwk7-nixd-2.4.0/bin/nixd\"\t\"stderr\"\t\"I[20:06:15.639] 16509: --> notify textDocument/publishDiagnostics\\n\" [ERROR][2024-10-08 20:06:15] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/nix/store/2dx04iayp5nl6zwsa60dsm82c58ghwk7-nixd-2.4.0/bin/nixd\"\t\"stderr\"\t\"I[20:06:15.639] 16509: <-- textDocument/inlayHint(2)\\n\" [ERROR][2024-10-08 20:06:15] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/nix/store/2dx04iayp5nl6zwsa60dsm82c58ghwk7-nixd-2.4.0/bin/nixd\"\t\"stderr\"\t\"I[20:06:15.639] 16509: <-- textDocument/inlayHint(3)\\nI[20:06:15.639] 16509: <-- reply(1)\\nI[20:06:15.639] 16509: --> call attrset/attrpathInfo(2)\\nI[20:06:15.639] 16509: --> call attrset/attrpathInfo(3)\\n\" [ERROR][2024-10-08 20:06:15] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/nix/store/2dx04iayp5nl6zwsa60dsm82c58ghwk7-nixd-2.4.0/bin/nixd\"\t\"stderr\"\t\"I[20:06:15.639] 16509: <-- reply(2)\\n\" [ERROR][2024-10-08 20:06:15] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/nix/store/2dx04iayp5nl6zwsa60dsm82c58ghwk7-nixd-2.4.0/bin/nixd\"\t\"stderr\"\t\"I[20:06:15.640] 16509: <-- reply(3)\\nE[20:06:15.640] 16509: workspace/configuration: parse error expected object\\n\" [ERROR][2024-10-08 20:06:15] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/nix/store/2dx04iayp5nl6zwsa60dsm82c58ghwk7-nixd-2.4.0/bin/nixd\"\t\"stderr\"\t\"I[20:06:15.640] 16509: <-- textDocument/semanticTokens/full(4)\\n\" [ERROR][2024-10-08 20:06:15] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/nix/store/2dx04iayp5nl6zwsa60dsm82c58ghwk7-nixd-2.4.0/bin/nixd\"\t\"stderr\"\t\"I[20:06:15.643] 16509: --> reply:textDocument/semanticTokens/full(4)\\n\" [ERROR][2024-10-08 20:06:15] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/nix/store/2dx04iayp5nl6zwsa60dsm82c58ghwk7-nixd-2.4.0/bin/nixd\"\t\"stderr\"\t\"I[20:06:15.793] \" [ERROR][2024-10-08 20:06:15] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/nix/store/2dx04iayp5nl6zwsa60dsm82c58ghwk7-nixd-2.4.0/bin/nixd\"\t\"stderr\"\t\"16509: <-- reply(1)\\nI[20:06:15.793] 16509: --> notify $/progress\\n\" [ERROR][2024-10-08 20:06:15] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/nix/store/2dx04iayp5nl6zwsa60dsm82c58ghwk7-nixd-2.4.0/bin/nixd\"\t\"stderr\"\t\"I[20:06:15.794] 16509: <-- reply(2)\\n\" [ERROR][2024-10-08 20:06:15] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/nix/store/2dx04iayp5nl6zwsa60dsm82c58ghwk7-nixd-2.4.0/bin/nixd\"\t\"stderr\"\t\"I[20:06:15.794] 16509: <-- reply(3)\\n\" [ERROR][2024-10-08 20:06:15] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/nix/store/2dx04iayp5nl6zwsa60dsm82c58ghwk7-nixd-2.4.0/bin/nixd\"\t\"stderr\"\t\"I[\" [ERROR][2024-10-08 20:06:15] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/nix/store/2dx04iayp5nl6zwsa60dsm82c58ghwk7-nixd-2.4.0/bin/nixd\"\t\"stderr\"\t\"20:06:15.794] 16509: --> reply:textDocument/inlayHint(2)\\n\" [ERROR][2024-10-08 20:06:15] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/nix/store/2dx04iayp5nl6zwsa60dsm82c58ghwk7-nixd-2.4.0/bin/nixd\"\t\"stderr\"\t\"I[20:06:15.794] 16509: --> reply:textDocument/inlayHint(3)\\n\" [ERROR][2024-10-08 20:06:16] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/nix/store/2dx04iayp5nl6zwsa60dsm82c58ghwk7-nixd-2.4.0/bin/nixd\"\t\"stderr\"\t\"I[20:06:16.157] 16509: <-- reply(1)\\nI[20:06:16.157] 16509: --> notify $/progress\\n\"",
    "closed_at": "2024-10-12T05:39:57Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
        "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
        "followers_url": "https://api.github.com/users/glepnir/followers",
        "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
        "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/glepnir",
        "id": 41671631,
        "login": "glepnir",
        "node_id": "MDQ6VXNlcjQxNjcxNjMx",
        "organizations_url": "https://api.github.com/users/glepnir/orgs",
        "received_events_url": "https://api.github.com/users/glepnir/received_events",
        "repos_url": "https://api.github.com/users/glepnir/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/glepnir"
    },
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "This is likely a duplicate of https://github.com/neovim/neovim/issues/30675",
            "created_at": "2024-10-11T20:59:18Z",
            "html_url": "https://github.com/neovim/neovim/issues/30767#issuecomment-2408113706",
            "id": 2408113706,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30767",
            "node_id": "IC_kwDOAPphoM6PiOYq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2408113706/reactions"
            },
            "updated_at": "2024-10-11T20:59:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2408113706",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/83901271?v=4",
                "events_url": "https://api.github.com/users/eljamm/events{/privacy}",
                "followers_url": "https://api.github.com/users/eljamm/followers",
                "following_url": "https://api.github.com/users/eljamm/following{/other_user}",
                "gists_url": "https://api.github.com/users/eljamm/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/eljamm",
                "id": 83901271,
                "login": "eljamm",
                "node_id": "MDQ6VXNlcjgzOTAxMjcx",
                "organizations_url": "https://api.github.com/users/eljamm/orgs",
                "received_events_url": "https://api.github.com/users/eljamm/received_events",
                "repos_url": "https://api.github.com/users/eljamm/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/eljamm/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/eljamm/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/eljamm"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "duplicate #30675 ",
            "created_at": "2024-10-12T05:39:55Z",
            "html_url": "https://github.com/neovim/neovim/issues/30767#issuecomment-2408402444",
            "id": 2408402444,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30767",
            "node_id": "IC_kwDOAPphoM6PjU4M",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2408402444/reactions"
            },
            "updated_at": "2024-10-12T05:39:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2408402444",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/30767/comments",
    "created_at": "2024-10-11T20:30:03Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/30767/events",
    "html_url": "https://github.com/neovim/neovim/issues/30767",
    "id": 2582136913,
    "labels": [
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        },
        {
            "color": "e6e6e6",
            "default": false,
            "description": "issues that are closed as duplicates of other issues",
            "id": 3221613764,
            "name": "closed:duplicate",
            "node_id": "MDU6TGFiZWwzMjIxNjEzNzY0",
            "url": "https://api.github.com/repos/neovim/neovim/labels/closed:duplicate"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/30767/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6Z6EhR",
    "number": 30767,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/30767/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/30767/timeline",
    "title": "LSP:  NixD throws 'semantic tokens' errors after update to 0.10.2",
    "updated_at": "2024-10-12T15:20:16Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/30767",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/159684143?v=4",
        "events_url": "https://api.github.com/users/Sk7Str1pe/events{/privacy}",
        "followers_url": "https://api.github.com/users/Sk7Str1pe/followers",
        "following_url": "https://api.github.com/users/Sk7Str1pe/following{/other_user}",
        "gists_url": "https://api.github.com/users/Sk7Str1pe/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Sk7Str1pe",
        "id": 159684143,
        "login": "Sk7Str1pe",
        "node_id": "U_kgDOCYSWLw",
        "organizations_url": "https://api.github.com/users/Sk7Str1pe/orgs",
        "received_events_url": "https://api.github.com/users/Sk7Str1pe/received_events",
        "repos_url": "https://api.github.com/users/Sk7Str1pe/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Sk7Str1pe/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Sk7Str1pe/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Sk7Str1pe"
    }
}