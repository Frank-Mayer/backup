{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "- Neovim version: v0.1.5-215-gc9b1ad3\n- [X ] Vim behaves differently? Vim version: 7.3\n- Operating system/version: OS X Yosemite (10.10.5)\n- Terminal name/version: iTerm 2.1.4\n- `$TERM`: xterm-256color\n### Actual behaviour\n\nCalling `histdel()` on the command history deletes the history for the current session, but does not persist across sessions.\n### Expected behaviour\n\nHistory should remain deleted on neovim restart\n### Steps to reproduce using `nvim -u NORC`\n1. Start neovim `nvim -u NORC`\n2. Create a command history with `:tabnew`\n3. Check that command is saved with `q:`\n4. Delete history with `:call histdel(':')`\n5. Check that history is cleared with `q:`\n6. Quit and restart neovim\n7. History in `q:` should remain cleared, but isn't.\n",
    "closed_at": "2016-05-31T10:32:02Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Vim has exactly the same behaviour:\n\n```\n% vim -u NONE -i /tmp/viminfo -N --cmd 'call histadd(\":\", \"test\")' --cmd cq\n% vim -u NONE -i /tmp/viminfo -N --cmd 'call histdel(\":\", \"test\")' --cmd cq\n% cat /tmp/viminfo | grep '^:test'\n:test\n```\n\nProblem is that there is no way to know whether `test` entry is the deleted one or the new one coming from another session (and deleted entries are not actually kept).\n\nThe only way to fix this is to keep deleted history entries list, but this again is not going to help if you have more then one Neovim instance running: other Neovim instances will simply write that history line again if they were run before histdel and exit after. And I do not like the idea of keeping deleted entries in the file marked as deleted. Note that e.g. shells have _no_ way to delete history entries at all, except for “kill all shells, edit the file” which works with Neovim as well (need to edit with `-i NONE` if done by Neovim).\n",
            "created_at": "2016-05-31T10:32:02Z",
            "html_url": "https://github.com/neovim/neovim/issues/4848#issuecomment-222651512",
            "id": 222651512,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4848",
            "node_id": "MDEyOklzc3VlQ29tbWVudDIyMjY1MTUxMg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/222651512/reactions"
            },
            "updated_at": "2016-05-31T10:32:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/222651512",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/322097?v=4",
                "events_url": "https://api.github.com/users/ZyX-I/events{/privacy}",
                "followers_url": "https://api.github.com/users/ZyX-I/followers",
                "following_url": "https://api.github.com/users/ZyX-I/following{/other_user}",
                "gists_url": "https://api.github.com/users/ZyX-I/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ZyX-I",
                "id": 322097,
                "login": "ZyX-I",
                "node_id": "MDQ6VXNlcjMyMjA5Nw==",
                "organizations_url": "https://api.github.com/users/ZyX-I/orgs",
                "received_events_url": "https://api.github.com/users/ZyX-I/received_events",
                "repos_url": "https://api.github.com/users/ZyX-I/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ZyX-I/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ZyX-I/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ZyX-I"
            }
        },
        {
            "author_association": "NONE",
            "body": "Sensitive info was record in main.shada, but I cannot delete it. Finally, I found out a very ungraceful way to remove the history, but it works: Copy main.shada, edit, and move it back. Open neovim, there will be an error message. Close and reopen it, then there is no error message anymore.",
            "created_at": "2023-11-25T15:03:41Z",
            "html_url": "https://github.com/neovim/neovim/issues/4848#issuecomment-1826353085",
            "id": 1826353085,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4848",
            "node_id": "IC_kwDOAPphoM5s2--9",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1826353085/reactions"
            },
            "updated_at": "2023-11-25T15:03:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1826353085",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/42512930?v=4",
                "events_url": "https://api.github.com/users/BenSYZ/events{/privacy}",
                "followers_url": "https://api.github.com/users/BenSYZ/followers",
                "following_url": "https://api.github.com/users/BenSYZ/following{/other_user}",
                "gists_url": "https://api.github.com/users/BenSYZ/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/BenSYZ",
                "id": 42512930,
                "login": "BenSYZ",
                "node_id": "MDQ6VXNlcjQyNTEyOTMw",
                "organizations_url": "https://api.github.com/users/BenSYZ/orgs",
                "received_events_url": "https://api.github.com/users/BenSYZ/received_events",
                "repos_url": "https://api.github.com/users/BenSYZ/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/BenSYZ/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/BenSYZ/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/BenSYZ"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Sensitive info was record in main.shada, but I cannot delete it.\r\n\r\nYou can overwrite it, via `:wshada`. You also didn't say what Nvim version you are using.",
            "created_at": "2023-11-25T16:45:22Z",
            "html_url": "https://github.com/neovim/neovim/issues/4848#issuecomment-1826374533",
            "id": 1826374533,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4848",
            "node_id": "IC_kwDOAPphoM5s3EOF",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1826374533/reactions"
            },
            "updated_at": "2023-11-25T16:46:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1826374533",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "Sorry for not reading the manual carefully, and thanks for your reply. I've tried `:wshada`, and it works fine.Thanks again!\r\n\r\nBecause I did not find a solution to solve this problem, I tried to post a way to do it. By the way, my neovim version info:\r\n\r\n```\r\nNVIM v0.9.4\r\nBuild type: Release\r\nLuaJIT 2.1.1700008891\r\n```",
            "created_at": "2023-11-25T17:38:07Z",
            "html_url": "https://github.com/neovim/neovim/issues/4848#issuecomment-1826384189",
            "id": 1826384189,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/4848",
            "node_id": "IC_kwDOAPphoM5s3Gk9",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1826384189/reactions"
            },
            "updated_at": "2023-11-25T17:38:07Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1826384189",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/42512930?v=4",
                "events_url": "https://api.github.com/users/BenSYZ/events{/privacy}",
                "followers_url": "https://api.github.com/users/BenSYZ/followers",
                "following_url": "https://api.github.com/users/BenSYZ/following{/other_user}",
                "gists_url": "https://api.github.com/users/BenSYZ/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/BenSYZ",
                "id": 42512930,
                "login": "BenSYZ",
                "node_id": "MDQ6VXNlcjQyNTEyOTMw",
                "organizations_url": "https://api.github.com/users/BenSYZ/orgs",
                "received_events_url": "https://api.github.com/users/BenSYZ/received_events",
                "repos_url": "https://api.github.com/users/BenSYZ/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/BenSYZ/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/BenSYZ/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/BenSYZ"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/4848/comments",
    "created_at": "2016-05-31T00:11:07Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/4848/events",
    "html_url": "https://github.com/neovim/neovim/issues/4848",
    "id": 157568440,
    "labels": [
        {
            "color": "e6e6e6",
            "default": false,
            "description": "current behavior is by design, and change is not desired",
            "id": 77997479,
            "name": "closed:wontfix",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3OQ==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/closed:wontfix"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "wrong behavior inherited from vim",
            "id": 154310492,
            "name": "bug-vim",
            "node_id": "MDU6TGFiZWwxNTQzMTA0OTI=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-vim"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/4848/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWUxNTc1Njg0NDA=",
    "number": 4848,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/4848/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/4848/timeline",
    "title": "Effects of histdel() does not persist",
    "updated_at": "2023-11-25T17:38:08Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/4848",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/624737?v=4",
        "events_url": "https://api.github.com/users/justinnhli/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinnhli/followers",
        "following_url": "https://api.github.com/users/justinnhli/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinnhli/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinnhli",
        "id": 624737,
        "login": "justinnhli",
        "node_id": "MDQ6VXNlcjYyNDczNw==",
        "organizations_url": "https://api.github.com/users/justinnhli/orgs",
        "received_events_url": "https://api.github.com/users/justinnhli/received_events",
        "repos_url": "https://api.github.com/users/justinnhli/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinnhli/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinnhli/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinnhli"
    }
}