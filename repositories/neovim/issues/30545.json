{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nRef: https://github.com/typescript-language-server/typescript-language-server/issues/917\r\n\r\nFeel free to close this issue if it's not on neovim's side. \n\n### Steps to reproduce using \"nvim -u minimal_init.lua\"\n\nMinimal nvim config (based on `kickstart.nvim`):\r\n\r\n```lua\r\nvim.g.mapleader = ' '\r\nvim.g.maplocalleader = ' '\r\nvim.opt.number = true\r\n\r\nlocal lazypath = vim.fn.stdpath 'data' .. '/lazy/lazy.nvim'\r\nif not (vim.uv or vim.loop).fs_stat(lazypath) then\r\n  local lazyrepo = 'https://github.com/folke/lazy.nvim.git'\r\n  local out = vim.fn.system { 'git', 'clone', '--filter=blob:none', '--branch=stable', lazyrepo, lazypath }\r\n  if vim.v.shell_error ~= 0 then\r\n    error('Error cloning lazy.nvim:\\n' .. out)\r\n  end\r\nend\r\nvim.opt.rtp:prepend(lazypath)\r\n\r\nrequire('lazy').setup {\r\n  {\r\n    'neovim/nvim-lspconfig',\r\n    dependencies = {\r\n      { 'williamboman/mason.nvim', config = true },\r\n      'williamboman/mason-lspconfig.nvim',\r\n      'WhoIsSethDaniel/mason-tool-installer.nvim',\r\n      { 'j-hui/fidget.nvim', opts = {} },\r\n      'hrsh7th/cmp-nvim-lsp',\r\n    },\r\n    config = function()\r\n      local servers = { ts_ls = {} }\r\n      local ensure_installed = vim.tbl_keys(servers or {})\r\n      local capabilities = vim.lsp.protocol.make_client_capabilities()\r\n      capabilities = vim.tbl_deep_extend('force', capabilities, require('cmp_nvim_lsp').default_capabilities())\r\n\r\n      require('mason').setup()\r\n      require('mason-tool-installer').setup { ensure_installed = ensure_installed }\r\n      require('mason-lspconfig').setup {\r\n        handlers = {\r\n          function(server_name)\r\n            local server = servers[server_name] or {}\r\n            server.capabilities = vim.tbl_deep_extend('force', {}, capabilities, server.capabilities or {})\r\n            require('lspconfig')[server_name].setup(server)\r\n          end,\r\n        },\r\n      }\r\n    end,\r\n  },\r\n\r\n  {\r\n    'hrsh7th/nvim-cmp',\r\n    event = 'InsertEnter',\r\n    dependencies = {\r\n      {\r\n        'L3MON4D3/LuaSnip',\r\n        build = (function()\r\n          if vim.fn.has 'win32' == 1 or vim.fn.executable 'make' == 0 then\r\n            return\r\n          end\r\n          return 'make install_jsregexp'\r\n        end)(),\r\n      },\r\n      'saadparwaiz1/cmp_luasnip',\r\n      'hrsh7th/cmp-nvim-lsp',\r\n    },\r\n    config = function()\r\n      -- See `:help cmp`\r\n      local cmp = require 'cmp'\r\n      local luasnip = require 'luasnip'\r\n      luasnip.config.setup {}\r\n\r\n      cmp.setup {\r\n        snippet = {\r\n          expand = function(args)\r\n            luasnip.lsp_expand(args.body)\r\n          end,\r\n        },\r\n        completion = { completeopt = 'menu,menuone,noinsert' },\r\n        mapping = cmp.mapping.preset.insert {\r\n          ['<C-n>'] = cmp.mapping.select_next_item(),\r\n          ['<C-p>'] = cmp.mapping.select_prev_item(),\r\n          ['<C-b>'] = cmp.mapping.scroll_docs(-4),\r\n          ['<C-f>'] = cmp.mapping.scroll_docs(4),\r\n          ['<C-y>'] = cmp.mapping.confirm { select = true },\r\n          ['<C-Space>'] = cmp.mapping.complete {},\r\n          ['<C-l>'] = cmp.mapping(function()\r\n            if luasnip.expand_or_locally_jumpable() then\r\n              luasnip.expand_or_jump()\r\n            end\r\n          end, { 'i', 's' }),\r\n          ['<C-h>'] = cmp.mapping(function()\r\n            if luasnip.locally_jumpable(-1) then\r\n              luasnip.jump(-1)\r\n            end\r\n          end, { 'i', 's' }),\r\n        },\r\n        sources = {\r\n          { name = 'nvim_lsp' },\r\n          { name = 'luasnip' },\r\n        },\r\n      }\r\n    end,\r\n  },\r\n}\r\n```\n\n### Expected behavior\n\nTypes between VS Code and Neovim should be the same.\n\n### Nvim version (nvim -v)\n\nNVIM v0.10.1\n\n### Language server name/version\n\ntypescript-language-server / ts_ls\n\n### Operating system/version\n\nArch Linux\n\n### Log file\n\n_No response_",
    "closed_at": "2024-09-27T16:09:44Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/51372520?v=4",
        "events_url": "https://api.github.com/users/schardev/events{/privacy}",
        "followers_url": "https://api.github.com/users/schardev/followers",
        "following_url": "https://api.github.com/users/schardev/following{/other_user}",
        "gists_url": "https://api.github.com/users/schardev/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/schardev",
        "id": 51372520,
        "login": "schardev",
        "node_id": "MDQ6VXNlcjUxMzcyNTIw",
        "organizations_url": "https://api.github.com/users/schardev/orgs",
        "received_events_url": "https://api.github.com/users/schardev/received_events",
        "repos_url": "https://api.github.com/users/schardev/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/schardev/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/schardev/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/schardev"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Sorry, but this is not minimal. You should not need any plugins, but especially not `nvim-cmp` -- please test using the builtin autocompletion. (You can replace `nvim-lspconfig` with an explicit call to `vim.lsp.start()`, too. Likewise, lazy is not required; just clone each plugin manually like you install lazy here.)",
            "created_at": "2024-09-27T14:17:18Z",
            "html_url": "https://github.com/neovim/neovim/issues/30545#issuecomment-2379391448",
            "id": 2379391448,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30545",
            "node_id": "IC_kwDOAPphoM6N0qHY",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2379391448/reactions"
            },
            "updated_at": "2024-09-27T14:17:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2379391448",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "I can reproduce this with just `vim.lsp.start` but I do need an autocompletion plugin to trigger this behavior (more context in the linked issue above).\r\n\r\nAlso cross posting from the linked issue: \r\n> ... technically we can still reproduce this on neovim with an autocompletion plugin. But omnifunc autocompletion are not ready yet so it's not much of an issue for now This could be a problem in future though once the built-in completion gets mature.\r\n\r\nFor now I'll just close this. Will reopen when the builtin completion is mature enough.",
            "created_at": "2024-09-27T16:09:45Z",
            "html_url": "https://github.com/neovim/neovim/issues/30545#issuecomment-2379625350",
            "id": 2379625350,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30545",
            "node_id": "IC_kwDOAPphoM6N1jOG",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 1,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2379625350/reactions"
            },
            "updated_at": "2024-09-27T16:09:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2379625350",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/51372520?v=4",
                "events_url": "https://api.github.com/users/schardev/events{/privacy}",
                "followers_url": "https://api.github.com/users/schardev/followers",
                "following_url": "https://api.github.com/users/schardev/following{/other_user}",
                "gists_url": "https://api.github.com/users/schardev/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/schardev",
                "id": 51372520,
                "login": "schardev",
                "node_id": "MDQ6VXNlcjUxMzcyNTIw",
                "organizations_url": "https://api.github.com/users/schardev/orgs",
                "received_events_url": "https://api.github.com/users/schardev/received_events",
                "repos_url": "https://api.github.com/users/schardev/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/schardev/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/schardev/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/schardev"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/30545/comments",
    "created_at": "2024-09-27T14:10:48Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/30545/events",
    "html_url": "https://github.com/neovim/neovim/issues/30545",
    "id": 2553046155,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "FBCA04",
            "default": false,
            "description": "We need minimal steps to reproduce the issue",
            "id": 298863445,
            "name": "needs:repro",
            "node_id": "MDU6TGFiZWwyOTg4NjM0NDU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:repro"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/30545/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6YLGSL",
    "number": 30545,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/30545/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/30545/timeline",
    "title": "LSP: shows incorrect type completion item between VSCode and Neovim",
    "updated_at": "2024-09-27T16:09:59Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/30545",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/51372520?v=4",
        "events_url": "https://api.github.com/users/schardev/events{/privacy}",
        "followers_url": "https://api.github.com/users/schardev/followers",
        "following_url": "https://api.github.com/users/schardev/following{/other_user}",
        "gists_url": "https://api.github.com/users/schardev/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/schardev",
        "id": 51372520,
        "login": "schardev",
        "node_id": "MDQ6VXNlcjUxMzcyNTIw",
        "organizations_url": "https://api.github.com/users/schardev/orgs",
        "received_events_url": "https://api.github.com/users/schardev/received_events",
        "repos_url": "https://api.github.com/users/schardev/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/schardev/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/schardev/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/schardev"
    }
}