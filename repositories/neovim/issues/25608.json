{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nWith treesitter installed and enabled, set the following options:\r\n\r\n```lua\r\nvim.opt.foldenable = false\r\nvim.opt.foldmethod = 'expr'\r\nvim.opt.foldexpr = 'v:lua.vim.treesitter.foldexpr()'\r\n```\r\n\r\nInstall treesitter with the following options:\r\n\r\n```lua\r\nopts = {\r\n\tauto_install = true,\r\n\thighlight = {\r\n\t\tenable = true,\r\n\t},\r\n\tincremental_selection = {\r\n\t\tenable = true,\r\n\t\tkeymaps = {\r\n\t\t\tinit_selection = '<c-i>',\r\n\t\t\tnode_incremental = '<c-i>',\r\n\t\t\tscope_incremental = false,\r\n\t\t\tnode_decremental = '<bs>',\r\n\t\t},\r\n\t},\r\n\tindent = {\r\n\t\tenable = true,\r\n\t},\r\n}\r\n```\r\n\r\n1. Modify a git-tracked file inside neovim and save it. Leave the buffer visible and open.\r\n2. In a separate terminal, restore the file using git restore\r\n3. Go back to neovim\r\n\r\nIt will hang with high cpu utilization.\n\n### Steps to reproduce\n\nWith treesitter installed and enabled, set the following options:\r\n\r\n```lua\r\nvim.opt.foldenable = false\r\nvim.opt.foldmethod = 'expr'\r\nvim.opt.foldexpr = 'v:lua.vim.treesitter.foldexpr()'\r\n```\r\n\r\nInstall treesitter with the following options:\r\n\r\n```lua\r\nopts = {\r\n\tauto_install = true,\r\n\thighlight = {\r\n\t\tenable = true,\r\n\t},\r\n\tincremental_selection = {\r\n\t\tenable = true,\r\n\t\tkeymaps = {\r\n\t\t\tinit_selection = '<c-i>',\r\n\t\t\tnode_incremental = '<c-i>',\r\n\t\t\tscope_incremental = false,\r\n\t\t\tnode_decremental = '<bs>',\r\n\t\t},\r\n\t},\r\n\tindent = {\r\n\t\tenable = true,\r\n\t},\r\n}\r\n```\r\n\r\n1. Modify a git-tracked file inside neovim and save it. Leave the buffer visible and open.\r\n2. In a separate terminal, restore the file using git restore\r\n3. Go back to neovim\r\n\r\nIt will hang with high cpu utilization.\n\n### Expected behavior\n\nNo hang.\n\n### Neovim version (nvim -v)\n\n0.9.4\n\n### Vim (not Nvim) behaves the same?\n\nNA\n\n### Operating system/version\n\nArch Linux\n\n### Terminal name/version\n\nAlacritty / TMUX\n\n### $TERM environment variable\n\ntmux-256color\n\n### Installation\n\nsystem package manager",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Please provide a _full_ (not just a snippet from your config, a concrete file it happens with, etc.) and _minimal_ reproducing example (no lazy, no `indent` unless the bug doesn't happen without it, etc.)",
            "created_at": "2023-10-12T07:31:18Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759083885",
            "id": 1759083885,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o2X1t",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759083885/reactions"
            },
            "updated_at": "2023-10-12T07:31:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759083885",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Suffice it to say, I cannot reproduce this with just the three options and treesitter highlighting enabled.",
            "created_at": "2023-10-12T10:12:47Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759323873",
            "id": 1759323873,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o3Sbh",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759323873/reactions"
            },
            "updated_at": "2023-10-12T10:12:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759323873",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "I can do it with any file.. As far as a minimal config, it doesn't get more minimal than what I provided. I deleted all neovim files with:\r\n\r\n```bash\r\nrm -rfv \"$HOME\"/.local/{state,share}/nvim \"$HOME\"/.cache/nvim \"$HOME\"/.config/nvim/{lazy-lock,.luarc,package-lock}.json\r\n```\r\n\r\nA full config would be (I just tested with this):\r\n\r\n```lua\r\nlocal lazypath = vim.fn.stdpath('data') .. '/lazy/lazy.nvim'\r\nlocal lazy_is_installed = vim.loop.fs_stat(lazypath)\r\nif not lazy_is_installed then vim.fn.system({\r\n\t'git',\r\n\t'clone',\r\n\t'--filter=blob:none',\r\n\t'https://github.com/folke/lazy.nvim.git',\r\n\t'--branch=stable',\r\n\tlazypath,\r\n}) end\r\nvim.opt.runtimepath:prepend(lazypath)\r\n\r\nrequire('lazy').setup({\r\n\t'nvim-treesitter/nvim-treesitter',\r\n\tbuild = ':TSUpdate',\r\n\tinit = function()\r\n\t\tvim.opt.foldenable = false\r\n\t\tvim.opt.foldmethod = 'expr'\r\n\t\tvim.opt.foldexpr = 'v:lua.vim.treesitter.foldexpr()'\r\n\tend,\r\n\tmain = 'nvim-treesitter.configs',\r\n\topts = {\r\n\t\tauto_install = true,\r\n\t\thighlight = {\r\n\t\t\tenable = true,\r\n\t\t},\r\n\t\tincremental_selection = {\r\n\t\t\tenable = true,\r\n\t\t\tkeymaps = {\r\n\t\t\t\tinit_selection = '<c-i>',\r\n\t\t\t\tnode_incremental = '<c-i>',\r\n\t\t\t\tscope_incremental = false,\r\n\t\t\t\tnode_decremental = '<bs>',\r\n\t\t\t},\r\n\t\t},\r\n\t\tindent = {\r\n\t\t\tenable = false,\r\n\t\t},\r\n\t},\r\n})\r\n```\r\n\r\n1. Put this setup in `init.lua`, initalize a git repo, and commit the file.\r\n2. Open init.lua in neovim, edit and save it. Leave the buffer open and visible.\r\n3. Open a separate terminal and `git restore init.lua`\r\n4. Go back to neovim and it will hang.\r\n\r\n100% reproducible.\r\n\r\nCommenting out the following lines makes the issue go away:\r\n\r\n```lua\r\nvim.opt.foldenable = false\r\nvim.opt.foldmethod = 'expr'\r\nvim.opt.foldexpr = 'v:lua.vim.treesitter.foldexpr()'\r\n```\r\n\r\nCan be demonstrated by commenting the lines out, opening neovim with those options not set, then repeating the steps of editing and git restore.",
            "created_at": "2023-10-12T11:26:08Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759426086",
            "id": 1759426086,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o3rYm",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759426086/reactions"
            },
            "updated_at": "2023-10-12T11:52:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759426086",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6127369?v=4",
                "events_url": "https://api.github.com/users/freddiehaddad/events{/privacy}",
                "followers_url": "https://api.github.com/users/freddiehaddad/followers",
                "following_url": "https://api.github.com/users/freddiehaddad/following{/other_user}",
                "gists_url": "https://api.github.com/users/freddiehaddad/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/freddiehaddad",
                "id": 6127369,
                "login": "freddiehaddad",
                "node_id": "MDQ6VXNlcjYxMjczNjk=",
                "organizations_url": "https://api.github.com/users/freddiehaddad/orgs",
                "received_events_url": "https://api.github.com/users/freddiehaddad/received_events",
                "repos_url": "https://api.github.com/users/freddiehaddad/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/freddiehaddad/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/freddiehaddad/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/freddiehaddad"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Does it happen with `:set noautoread`? And if not, does `:edit` then trigger it? Then try `:edit!`. ",
            "created_at": "2023-10-12T11:53:59Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759461637",
            "id": 1759461637,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o30EF",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759461637/reactions"
            },
            "updated_at": "2023-10-12T11:53:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759461637",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "With `noautoread`, when I return to neovim, I see the following prompt:\r\n\r\n```\r\nW11: Warning: File \"lua/plugins/treesitter.lua\" has changed since editing started\r\nSee \":help W11\" for more info.\r\n[O]K, (L)oad File, Load File (a)nd Options:\r\n```\r\n\r\n- Upon selecting L, neovim hangs.\r\n- If I select O instead, neovim does NOT hang. Typing `:edit` after triggers the hang.\r\n   - If I type `:edit!` instead, neovim also hangs.\r\n\r\nIn all scenarios, disabling the following settings prevents the hang.\r\n\r\n```lua\r\n-- vim.opt.foldenable = false\r\n-- vim.opt.foldmethod = 'expr'\r\n-- vim.opt.foldexpr = 'v:lua.vim.treesitter.foldexpr()'\r\n```\r\n",
            "created_at": "2023-10-12T12:07:36Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759478784",
            "id": 1759478784,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o34QA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759478784/reactions"
            },
            "updated_at": "2023-10-12T12:14:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759478784",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6127369?v=4",
                "events_url": "https://api.github.com/users/freddiehaddad/events{/privacy}",
                "followers_url": "https://api.github.com/users/freddiehaddad/followers",
                "following_url": "https://api.github.com/users/freddiehaddad/following{/other_user}",
                "gists_url": "https://api.github.com/users/freddiehaddad/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/freddiehaddad",
                "id": 6127369,
                "login": "freddiehaddad",
                "node_id": "MDQ6VXNlcjYxMjczNjk=",
                "organizations_url": "https://api.github.com/users/freddiehaddad/orgs",
                "received_events_url": "https://api.github.com/users/freddiehaddad/received_events",
                "repos_url": "https://api.github.com/users/freddiehaddad/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/freddiehaddad/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/freddiehaddad/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/freddiehaddad"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Suffice it to say, I cannot reproduce this with just the three options and treesitter highlighting enabled.\r\n\r\nThis issue was opened because https://github.com/neovim/neovim/issues/24186 was closed. \r\n\r\nThe minimal example to reproduce it remains the same (at least for me): https://github.com/neovim/neovim/issues/24186#issuecomment-1612109306\r\n\r\nUsing `'nvim_treesitter#foldexpr()'` instead of `'v:lua.vim.treesitter.foldexpr()'` doesn't trigger the issue.\r\n\r\nI'm sorry I couldn't debug (bisect) this any further, I'll try doing it during the weekend.",
            "created_at": "2023-10-12T12:28:30Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759514496",
            "id": 1759514496,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o4A-A",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759514496/reactions"
            },
            "updated_at": "2023-10-12T12:47:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759514496",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11463919?v=4",
                "events_url": "https://api.github.com/users/itaranto/events{/privacy}",
                "followers_url": "https://api.github.com/users/itaranto/followers",
                "following_url": "https://api.github.com/users/itaranto/following{/other_user}",
                "gists_url": "https://api.github.com/users/itaranto/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/itaranto",
                "id": 11463919,
                "login": "itaranto",
                "node_id": "MDQ6VXNlcjExNDYzOTE5",
                "organizations_url": "https://api.github.com/users/itaranto/orgs",
                "received_events_url": "https://api.github.com/users/itaranto/received_events",
                "repos_url": "https://api.github.com/users/itaranto/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/itaranto/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/itaranto/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/itaranto"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Using 'nvim_treesitter#foldexpr()' instead of 'v:lua.vim.treesitter.foldexpr()' doesn't trigger the issue.\r\n\r\nCan also confirm this.",
            "created_at": "2023-10-12T12:39:10Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759536973",
            "id": 1759536973,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o4GdN",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759536973/reactions"
            },
            "updated_at": "2023-10-12T12:47:39Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759536973",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6127369?v=4",
                "events_url": "https://api.github.com/users/freddiehaddad/events{/privacy}",
                "followers_url": "https://api.github.com/users/freddiehaddad/followers",
                "following_url": "https://api.github.com/users/freddiehaddad/following{/other_user}",
                "gists_url": "https://api.github.com/users/freddiehaddad/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/freddiehaddad",
                "id": 6127369,
                "login": "freddiehaddad",
                "node_id": "MDQ6VXNlcjYxMjczNjk=",
                "organizations_url": "https://api.github.com/users/freddiehaddad/orgs",
                "received_events_url": "https://api.github.com/users/freddiehaddad/received_events",
                "repos_url": "https://api.github.com/users/freddiehaddad/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/freddiehaddad/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/freddiehaddad/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/freddiehaddad"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> This issue was opened because https://github.com/neovim/neovim/issues/24186 was closed.\r\n\r\nThat is why you should not open duplicate posts without clear indication. Can you reproduce it completely without nvim-treesitter (and lazy)?\r\n\r\n> Using 'nvim_treesitter#foldexpr()' instead of 'v:lua.vim.treesitter.foldexpr()' doesn't trigger the issue.\r\n\r\nThat _is_ useful information. Can you bisect Neovim (you only need to check [these commits](https://github.com/neovim/neovim/commits/master/runtime/lua/vim/treesitter/_fold.lua), i.e. pass `runtime/lua/vim/treesitter/_fold.lua` to `git bisect`)?\r\n\r\n",
            "created_at": "2023-10-12T12:50:21Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759552929",
            "id": 1759552929,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o4KWh",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759552929/reactions"
            },
            "updated_at": "2023-10-12T12:50:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759552929",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> With `noautoread`, when I return to neovim, I see the following prompt: `W11: Warning: File \"lua/plugins/treesitter.lua\" has changed ...`\r\n\r\nInteresting, I wouldn't have expected that with 'autoread' _disabled_. Is `vim.treesitter.foldexpr()` triggering a file read and causing a loop somehow?\r\n\r\n> If I type `:edit!` instead, neovim also hangs.\r\n\r\nHmm, that suggests the `W11` prompt isn't part of the repro.",
            "created_at": "2023-10-12T12:54:10Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759558710",
            "id": 1759558710,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o4Lw2",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759558710/reactions"
            },
            "updated_at": "2023-10-12T12:55:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759558710",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Interesting, I wouldn't have expected that with 'autoread' disabled. Is vim.treesitter.foldexpr() triggering a file read and causing a loop somehow?\r\n\r\nNo, the file is read either automatically (with autoread) or manually (after entering `L`). Must be some sort of race between the highlighter and `foldexpr` for (re-)parsing the document when the edits are not performed by Neovim.\r\n\r\n(Again, this is why a minimal example is needed -- can you reproduce this with _only_ `foldexpr`? Nvim-treesitter should not be part of these steps.)",
            "created_at": "2023-10-12T12:57:42Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759564109",
            "id": 1759564109,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o4NFN",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759564109/reactions"
            },
            "updated_at": "2023-10-12T12:57:42Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759564109",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "> That is why you should not open duplicate posts without clear indication.\r\n\r\nI didn't. \r\n\r\nIn the previous issue I said that I couldn't reproduce it in `master` (at that time), that's why the issue was closed.\r\n\r\nBut then I tested in 0.9.2 when it came out and realized that the issue was still present.\r\n\r\n> Can you reproduce it completely without nvim-treesitter (and lazy)?\r\n\r\nThe `minimal.lua` is the one I linked in my comment above, it doesn't use any plugin.",
            "created_at": "2023-10-12T12:57:58Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759564525",
            "id": 1759564525,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o4NLt",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759564525/reactions"
            },
            "updated_at": "2023-10-12T13:21:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759564525",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11463919?v=4",
                "events_url": "https://api.github.com/users/itaranto/events{/privacy}",
                "followers_url": "https://api.github.com/users/itaranto/followers",
                "following_url": "https://api.github.com/users/itaranto/following{/other_user}",
                "gists_url": "https://api.github.com/users/itaranto/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/itaranto",
                "id": 11463919,
                "login": "itaranto",
                "node_id": "MDQ6VXNlcjExNDYzOTE5",
                "organizations_url": "https://api.github.com/users/itaranto/orgs",
                "received_events_url": "https://api.github.com/users/itaranto/received_events",
                "repos_url": "https://api.github.com/users/itaranto/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/itaranto/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/itaranto/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/itaranto"
            }
        },
        {
            "author_association": "NONE",
            "body": "> That *is* useful information.\r\n\r\nYes, somehow I forgot to mention this in my previous posts :man_facepalming: \r\n\r\n> Can you bisect Neovim (you only need to check [these commits](https://github.com/neovim/neovim/commits/master/runtime/lua/vim/treesitter/_fold.lua`), i.e. pass `runtime/lua/vim/treesitter/_fold.lua` to `git bisect`)?\r\n\r\nYes, I'll do it when I can (tomorrow probably).",
            "created_at": "2023-10-12T13:02:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759570991",
            "id": 1759570991,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o4Owv",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759570991/reactions"
            },
            "updated_at": "2023-10-12T14:18:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759570991",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11463919?v=4",
                "events_url": "https://api.github.com/users/itaranto/events{/privacy}",
                "followers_url": "https://api.github.com/users/itaranto/followers",
                "following_url": "https://api.github.com/users/itaranto/following{/other_user}",
                "gists_url": "https://api.github.com/users/itaranto/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/itaranto",
                "id": 11463919,
                "login": "itaranto",
                "node_id": "MDQ6VXNlcjExNDYzOTE5",
                "organizations_url": "https://api.github.com/users/itaranto/orgs",
                "received_events_url": "https://api.github.com/users/itaranto/received_events",
                "repos_url": "https://api.github.com/users/itaranto/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/itaranto/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/itaranto/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/itaranto"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> No, the file is read either automatically (with autoread) or manually (after entering `L`)\r\n\r\nThen what is triggering the _W11 prompt_ for the 'noautoread' case? ",
            "created_at": "2023-10-12T13:21:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759603311",
            "id": 1759603311,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o4Wpv",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759603311/reactions"
            },
            "updated_at": "2023-10-12T13:22:02Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759603311",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "> (Again, this is why a minimal example is needed -- can you reproduce this with only foldexpr? Nvim-treesitter should not be part of these steps.)\r\n\r\nAre you asking for a repro with the following inside `init.lua`:\r\n\r\n```lua\r\nvim.opt.foldenable = false\r\nvim.opt.foldmethod = 'expr'\r\n-- https://github.com/neovim/neovim/issues/25608\r\nvim.opt.foldexpr = 'v:lua.vim.treesitter.foldexpr()'\r\n-- vim.opt.foldexpr = 'nvim_treesitter#foldexpr()'\r\n```",
            "created_at": "2023-10-12T14:05:47Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759678653",
            "id": 1759678653,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o4pC9",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759678653/reactions"
            },
            "updated_at": "2023-10-12T14:06:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759678653",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6127369?v=4",
                "events_url": "https://api.github.com/users/freddiehaddad/events{/privacy}",
                "followers_url": "https://api.github.com/users/freddiehaddad/followers",
                "following_url": "https://api.github.com/users/freddiehaddad/following{/other_user}",
                "gists_url": "https://api.github.com/users/freddiehaddad/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/freddiehaddad",
                "id": 6127369,
                "login": "freddiehaddad",
                "node_id": "MDQ6VXNlcjYxMjczNjk=",
                "organizations_url": "https://api.github.com/users/freddiehaddad/orgs",
                "received_events_url": "https://api.github.com/users/freddiehaddad/received_events",
                "repos_url": "https://api.github.com/users/freddiehaddad/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/freddiehaddad/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/freddiehaddad/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/freddiehaddad"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@itaranto \r\n\r\n> The minimal.lua is the one I linked in my comment above, it doesn't use any plugin.\r\n\r\nAnd does it _need_ to be the `go` parser? @freddiehaddad reports the issue with a Lua file.\r\n\r\n(It's really difficult to handle two people reporting slightly different issues at the same time. I appreciate you trying to help, but right now we're talking about _this_ issue, with a related by different example.)\r\n\r\n@freddiehaddad \r\n\r\n> Are you asking for a repro with the following inside init.lua:\r\n\r\nI am asking for a _full_ `init.lua` I can run with `nvim --clean -u init.lua` and observe the problem you describe. The three lines by themselves are not enough to reproduce this (I tested).",
            "created_at": "2023-10-12T14:24:09Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759714873",
            "id": 1759714873,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o4x45",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759714873/reactions"
            },
            "updated_at": "2023-10-12T14:24:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759714873",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "With treesitter disabled, and the following vim settings set the issue does not occur:\r\n\r\n```lua\r\nvim.opt.foldenable = false\r\nvim.opt.foldmethod = 'expr'\r\nvim.opt.foldexpr = 'nvim_treesitter#foldexpr()'\r\n```\r\n\r\nWith treesitter enabled, all settings disabled and foldexpr set to `'v:lua.vim.treesitter.foldexpr()'`, the issue happens:\r\n\r\n\r\n```lua\r\nopts = {\r\n\tauto_install = true,\r\n\thighlight = {\r\n\t\tenable = false,\r\n\t},\r\n\tincremental_selection = {\r\n\t\tenable = false,\r\n\t\tkeymaps = {\r\n\t\t\tinit_selection = '<c-i>',\r\n\t\t\tnode_incremental = '<c-i>',\r\n\t\t\tscope_incremental = false,\r\n\t\t\tnode_decremental = '<bs>',\r\n\t\t},\r\n\t},\r\n\tindent = {\r\n\t\tenable = false,\r\n\t},\r\n},\r\n```\r\n\r\nHowever, in every case, setting foldexpr to `'nvim_treesitter#foldexpr()'` doesn't cause the hang.\r\n\r\n**I was able to reproduce this by opening a file and undoing a change `u` from the undo file history.**\r\n",
            "created_at": "2023-10-12T14:25:52Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759718798",
            "id": 1759718798,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o4y2O",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759718798/reactions"
            },
            "updated_at": "2023-10-12T14:27:52Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759718798",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6127369?v=4",
                "events_url": "https://api.github.com/users/freddiehaddad/events{/privacy}",
                "followers_url": "https://api.github.com/users/freddiehaddad/followers",
                "following_url": "https://api.github.com/users/freddiehaddad/following{/other_user}",
                "gists_url": "https://api.github.com/users/freddiehaddad/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/freddiehaddad",
                "id": 6127369,
                "login": "freddiehaddad",
                "node_id": "MDQ6VXNlcjYxMjczNjk=",
                "organizations_url": "https://api.github.com/users/freddiehaddad/orgs",
                "received_events_url": "https://api.github.com/users/freddiehaddad/received_events",
                "repos_url": "https://api.github.com/users/freddiehaddad/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/freddiehaddad/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/freddiehaddad/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/freddiehaddad"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Again, don't show snippets! Please provide a full, minimal config _I_ can test!",
            "created_at": "2023-10-12T14:27:15Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759721046",
            "id": 1759721046,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o4zZW",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759721046/reactions"
            },
            "updated_at": "2023-10-12T14:27:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759721046",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "You have the config.. I just changed enabled to disabled.. do you really need a new config each time? Happy to provide that, but seems unnecessary.\r\n\r\ntest for both cases: open a file with previous edits and undo a change.\r\n\r\ninit.lua v1 (treesitter not installed) -- no hang:\r\n\r\n```lua\r\nvim.opt.foldenable = false\r\nvim.opt.foldmethod = 'expr'\r\nvim.opt.foldexpr = 'nvim_treesitter#foldexpr()'\r\n```\r\n\r\ninit.lua v2 (treesitter not installed) -- hang:\r\n\r\n```lua\r\nvim.opt.foldenable = false\r\nvim.opt.foldmethod = 'expr'\r\nvim.opt.foldexpr = 'v:lua.vim.treesitter.foldexpr()'\r\n```",
            "created_at": "2023-10-12T14:28:53Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759725209",
            "id": 1759725209,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o40aZ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759725209/reactions"
            },
            "updated_at": "2023-10-12T14:32:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759725209",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6127369?v=4",
                "events_url": "https://api.github.com/users/freddiehaddad/events{/privacy}",
                "followers_url": "https://api.github.com/users/freddiehaddad/followers",
                "following_url": "https://api.github.com/users/freddiehaddad/following{/other_user}",
                "gists_url": "https://api.github.com/users/freddiehaddad/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/freddiehaddad",
                "id": 6127369,
                "login": "freddiehaddad",
                "node_id": "MDQ6VXNlcjYxMjczNjk=",
                "organizations_url": "https://api.github.com/users/freddiehaddad/orgs",
                "received_events_url": "https://api.github.com/users/freddiehaddad/received_events",
                "repos_url": "https://api.github.com/users/freddiehaddad/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/freddiehaddad/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/freddiehaddad/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/freddiehaddad"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I need a _full_ config that can be tested with `nvim --clean -u test.lua`. You have not provided one in this issue so far.",
            "created_at": "2023-10-12T14:32:11Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759732058",
            "id": 1759732058,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o42Fa",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759732058/reactions"
            },
            "updated_at": "2023-10-12T14:32:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759732058",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "> I need a full config that can be tested with nvim --clean -u test.lua. You have not provided one in this issue so far.\r\n\r\nhttps://github.com/neovim/neovim/issues/25608#issuecomment-1759426086",
            "created_at": "2023-10-12T14:33:17Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759734079",
            "id": 1759734079,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o42k_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759734079/reactions"
            },
            "updated_at": "2023-10-12T14:33:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759734079",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6127369?v=4",
                "events_url": "https://api.github.com/users/freddiehaddad/events{/privacy}",
                "followers_url": "https://api.github.com/users/freddiehaddad/followers",
                "following_url": "https://api.github.com/users/freddiehaddad/following{/other_user}",
                "gists_url": "https://api.github.com/users/freddiehaddad/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/freddiehaddad",
                "id": 6127369,
                "login": "freddiehaddad",
                "node_id": "MDQ6VXNlcjYxMjczNjk=",
                "organizations_url": "https://api.github.com/users/freddiehaddad/orgs",
                "received_events_url": "https://api.github.com/users/freddiehaddad/received_events",
                "repos_url": "https://api.github.com/users/freddiehaddad/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/freddiehaddad/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/freddiehaddad/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/freddiehaddad"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "That is not minimal.",
            "created_at": "2023-10-12T14:33:33Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759734855",
            "id": 1759734855,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o42xH",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759734855/reactions"
            },
            "updated_at": "2023-10-12T14:33:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759734855",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "> @itaranto\r\n> \r\n> > The minimal.lua is the one I linked in my comment above, it doesn't use any plugin.\r\n> \r\n> And does it _need_ to be the `go` parser? @freddiehaddad reports the issue with a Lua file.\r\n\r\nNo, it doesn't.\r\n\r\n I assumed the reader would understand it could be *any* kind of file. The only thing I found out to be required is to have a parser initialized via the `vim.treesitter.language.add` API.\r\n\r\nI  used Go just as an example, since that was the kind of file I was using at the moment, nothing special.\r\n\r\nMaybe there could be an even more minimal to reproduce this.\r\n\r\n> \r\n> (It's really difficult to handle two people reporting slightly different issues at the same time. I appreciate you trying to help, but right now we're talking about _this_ issue, with a related by different example.)\r\n\r\nI know, and I apologize if I contributed to the \"communication noise\".\r\n\r\nI think @freddiehaddad created this new issue after commenting in the [previous one](https://github.com/neovim/neovim/issues/24186) and realizing no one was paying attention to it.\r\n",
            "created_at": "2023-10-12T14:33:39Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759735001",
            "id": 1759735001,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o42zZ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759735001/reactions"
            },
            "updated_at": "2023-10-12T14:36:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759735001",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11463919?v=4",
                "events_url": "https://api.github.com/users/itaranto/events{/privacy}",
                "followers_url": "https://api.github.com/users/itaranto/followers",
                "following_url": "https://api.github.com/users/itaranto/following{/other_user}",
                "gists_url": "https://api.github.com/users/itaranto/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/itaranto",
                "id": 11463919,
                "login": "itaranto",
                "node_id": "MDQ6VXNlcjExNDYzOTE5",
                "organizations_url": "https://api.github.com/users/itaranto/orgs",
                "received_events_url": "https://api.github.com/users/itaranto/received_events",
                "repos_url": "https://api.github.com/users/itaranto/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/itaranto/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/itaranto/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/itaranto"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> I assumed the reader would understand it could be any kind of file. The only thing I found out is required is to have a parser initialized via the vim.treesitter.language.add for that particular file type.\r\n\r\nAnother interesting point, but adds to the confusion. I'm not sure how that particular function could affect that.\r\n\r\nA simple `vim.treesitter.start()` doesn't work?",
            "created_at": "2023-10-12T14:35:09Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759737845",
            "id": 1759737845,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o43f1",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759737845/reactions"
            },
            "updated_at": "2023-10-12T14:35:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759737845",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "> That is not minimal.\r\n\r\nOkay, it doesn't get more minimal than these two files: https://github.com/neovim/neovim/issues/25608#issuecomment-1759725209\r\n",
            "created_at": "2023-10-12T14:35:43Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759739449",
            "id": 1759739449,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o4345",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759739449/reactions"
            },
            "updated_at": "2023-10-12T14:35:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759739449",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6127369?v=4",
                "events_url": "https://api.github.com/users/freddiehaddad/events{/privacy}",
                "followers_url": "https://api.github.com/users/freddiehaddad/followers",
                "following_url": "https://api.github.com/users/freddiehaddad/following{/other_user}",
                "gists_url": "https://api.github.com/users/freddiehaddad/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/freddiehaddad",
                "id": 6127369,
                "login": "freddiehaddad",
                "node_id": "MDQ6VXNlcjYxMjczNjk=",
                "organizations_url": "https://api.github.com/users/freddiehaddad/orgs",
                "received_events_url": "https://api.github.com/users/freddiehaddad/received_events",
                "repos_url": "https://api.github.com/users/freddiehaddad/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/freddiehaddad/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/freddiehaddad/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/freddiehaddad"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "And you can reproduce the hang with just these two files and any version tracked Lua file? Because I cannot.",
            "created_at": "2023-10-12T14:37:16Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759741916",
            "id": 1759741916,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o44fc",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759741916/reactions"
            },
            "updated_at": "2023-10-12T14:37:16Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759741916",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "Sorry, just doublechecked and those examples do NOT work. I'll try to provide you a more minimal config. I'm assuming you don't want any plugin manger either?",
            "created_at": "2023-10-12T14:45:40Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759756509",
            "id": 1759756509,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o48Dd",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759756509/reactions"
            },
            "updated_at": "2023-10-12T14:45:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759756509",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6127369?v=4",
                "events_url": "https://api.github.com/users/freddiehaddad/events{/privacy}",
                "followers_url": "https://api.github.com/users/freddiehaddad/followers",
                "following_url": "https://api.github.com/users/freddiehaddad/following{/other_user}",
                "gists_url": "https://api.github.com/users/freddiehaddad/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/freddiehaddad",
                "id": 6127369,
                "login": "freddiehaddad",
                "node_id": "MDQ6VXNlcjYxMjczNjk=",
                "organizations_url": "https://api.github.com/users/freddiehaddad/orgs",
                "received_events_url": "https://api.github.com/users/freddiehaddad/received_events",
                "repos_url": "https://api.github.com/users/freddiehaddad/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/freddiehaddad/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/freddiehaddad/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/freddiehaddad"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "[Minimal-reproduction-template](https://github.com/neovim/neovim/wiki/Minimal-reproduction-template)",
            "created_at": "2023-10-12T14:47:32Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759759735",
            "id": 1759759735,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o4813",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 1,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 3,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759759735/reactions"
            },
            "updated_at": "2023-10-12T14:47:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759759735",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/29790821?v=4",
                "events_url": "https://api.github.com/users/lucario387/events{/privacy}",
                "followers_url": "https://api.github.com/users/lucario387/followers",
                "following_url": "https://api.github.com/users/lucario387/following{/other_user}",
                "gists_url": "https://api.github.com/users/lucario387/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lucario387",
                "id": 29790821,
                "login": "lucario387",
                "node_id": "MDQ6VXNlcjI5NzkwODIx",
                "organizations_url": "https://api.github.com/users/lucario387/orgs",
                "received_events_url": "https://api.github.com/users/lucario387/received_events",
                "repos_url": "https://api.github.com/users/lucario387/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lucario387/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lucario387/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lucario387"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> I'm assuming you don't want any plugin manger either?\r\n\r\nIndeed (unless you can verify that it is _necessary_); you shouldn't need anything besides the built-in `foldexpr`, the bundled parsers (Lua, C, vim), and possibly `vim.treesitter.start()` in a Filetype autocommand. No plugins, no plugin manager.",
            "created_at": "2023-10-12T14:47:40Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759759928",
            "id": 1759759928,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o4844",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759759928/reactions"
            },
            "updated_at": "2023-10-12T14:48:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759759928",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "> And you can reproduce the hang with just these two files and any version tracked Lua file? Because I cannot.\r\n\r\nI think the key is to have a buffer opened for a file you are modifying from the outside, for example, with Git.\r\n\r\n> > I assumed the reader would understand it could be any kind of file. The only thing I found out is required is to have a parser initialized via the vim.treesitter.language.add for that particular file type.\r\n> \r\n> Another interesting point, but adds to the confusion. I'm not sure how that particular function could affect that.\r\n> \r\n> A simple `vim.treesitter.start()` doesn't work?\r\n\r\nSo far I cannot go more minimal than this:\r\n\r\n`minimal.lua`\r\n\r\n```lua\r\nvim.opt.foldmethod = \"expr\"\r\nvim.opt.foldexpr = \"v:lua.vim.treesitter.foldexpr()\"\r\n\r\nvim.treesitter.language.add(\"go\", { path = \"/home/ignacio/.local/share/nvim/lazy/nvim-treesitter/parser/go.so\" })\r\n\r\nvim.api.nvim_create_autocmd(\"FileType\", {\r\n\tpattern = \"*.go\",\r\n\tcallback = function(args)\r\n\t\tvim.treesitter.start(args.buf, \"go\")\r\n\tend,\r\n})\r\n```\r\n\r\n(Replace the language to any language you want to test, remember to also modify the `pattern`  accordingly).\r\n\r\nAlso, to reproduce this, you don't actually need to use Git.\r\n\r\nAssuming you are using `\"go\"` files, the repro steps would be:\r\n- `nvim --clean -u minimal.lua`\r\n- Run  `:e foo.go`\r\n- In another terminal `echo hello >> foo.go`\r\n\r\nResult:\r\nNeovim hangs",
            "created_at": "2023-10-12T14:53:14Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759771840",
            "id": 1759771840,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o4_zA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759771840/reactions"
            },
            "updated_at": "2023-10-12T15:05:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759771840",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11463919?v=4",
                "events_url": "https://api.github.com/users/itaranto/events{/privacy}",
                "followers_url": "https://api.github.com/users/itaranto/followers",
                "following_url": "https://api.github.com/users/itaranto/following{/other_user}",
                "gists_url": "https://api.github.com/users/itaranto/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/itaranto",
                "id": 11463919,
                "login": "itaranto",
                "node_id": "MDQ6VXNlcjExNDYzOTE5",
                "organizations_url": "https://api.github.com/users/itaranto/orgs",
                "received_events_url": "https://api.github.com/users/itaranto/received_events",
                "repos_url": "https://api.github.com/users/itaranto/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/itaranto/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/itaranto/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/itaranto"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Thank you. I cannot reproduce the issue with that (on master), though. The only thought is that this may be specific to (Arch) Linux, possibly due to libuv's `io_uring` use.\r\n\r\n(`pattern` should be just `\"go\"` for a `FileType` autocommand, btw.)",
            "created_at": "2023-10-12T14:56:54Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759778508",
            "id": 1759778508,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o5BbM",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759778508/reactions"
            },
            "updated_at": "2023-10-12T15:00:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759778508",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Thank you. I cannot reproduce the issue with that (on master), though. The only thought is that this may be specific to (Arch) Linux, possibly due to libuv's `io_uring` use.\r\n\r\nI'll try a build with all bundled dependencies (which the Arch team removed recently) and I'll also try with the AppImage.\r\n",
            "created_at": "2023-10-12T15:01:17Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759785999",
            "id": 1759785999,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o5DQP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759785999/reactions"
            },
            "updated_at": "2023-10-12T15:07:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759785999",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11463919?v=4",
                "events_url": "https://api.github.com/users/itaranto/events{/privacy}",
                "followers_url": "https://api.github.com/users/itaranto/followers",
                "following_url": "https://api.github.com/users/itaranto/following{/other_user}",
                "gists_url": "https://api.github.com/users/itaranto/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/itaranto",
                "id": 11463919,
                "login": "itaranto",
                "node_id": "MDQ6VXNlcjExNDYzOTE5",
                "organizations_url": "https://api.github.com/users/itaranto/orgs",
                "received_events_url": "https://api.github.com/users/itaranto/received_events",
                "repos_url": "https://api.github.com/users/itaranto/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/itaranto/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/itaranto/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/itaranto"
            }
        },
        {
            "author_association": "NONE",
            "body": "Okay, this minimal config produces the issue:\r\n\r\n`init.lua`\r\n\r\n```lua\r\nfor name, url in pairs{\r\n  treesitter = 'https://github.com/nvim-treesitter/nvim-treesitter'\r\n} do\r\n  local install_path = vim.fn.fnamemodify('nvim_issue/'..name, ':p')\r\n  if vim.fn.isdirectory(install_path) == 0 then\r\n    vim.fn.system { 'git', 'clone', '--depth=1', url, install_path }\r\n  end\r\n  vim.opt.runtimepath:append(install_path)\r\nend\r\n\r\nvim.opt.foldenable = false\r\nvim.opt.foldmethod = 'expr'\r\n-- https://github.com/neovim/neovim/issues/25608\r\nvim.opt.foldexpr = 'v:lua.vim.treesitter.foldexpr()'\r\n-- vim.opt.foldexpr = 'nvim_treesitter#foldexpr()'\r\n\r\nrequire('nvim-treesitter.configs').setup({\r\n    auto_install = true,\r\n    highlight = {\r\n        enable = true,\r\n    },\r\n    incremental_selection = {\r\n        enable = true,\r\n        keymaps = {\r\n            init_selection = '<c-i>',\r\n            node_incremental = '<c-i>',\r\n            scope_incremental = false,\r\n            node_decremental = '<bs>',\r\n        },\r\n    },\r\n    indent = {\r\n        enable = true,\r\n    },\r\n})\r\n```\r\n\r\nI will provide additional examples manipulating different settings.",
            "created_at": "2023-10-12T15:01:25Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759786216",
            "id": 1759786216,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o5DTo",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759786216/reactions"
            },
            "updated_at": "2023-10-12T15:01:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759786216",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6127369?v=4",
                "events_url": "https://api.github.com/users/freddiehaddad/events{/privacy}",
                "followers_url": "https://api.github.com/users/freddiehaddad/followers",
                "following_url": "https://api.github.com/users/freddiehaddad/following{/other_user}",
                "gists_url": "https://api.github.com/users/freddiehaddad/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/freddiehaddad",
                "id": 6127369,
                "login": "freddiehaddad",
                "node_id": "MDQ6VXNlcjYxMjczNjk=",
                "organizations_url": "https://api.github.com/users/freddiehaddad/orgs",
                "received_events_url": "https://api.github.com/users/freddiehaddad/received_events",
                "repos_url": "https://api.github.com/users/freddiehaddad/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/freddiehaddad/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/freddiehaddad/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/freddiehaddad"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Just to confirm: it is _necessary_ to have `nvim-treesitter` installed, with everything enabled? Disabling even one thing will not let you reproduce? (\"Minimal\" really means minimal, no line can be removed without removing the issue.)",
            "created_at": "2023-10-12T15:02:46Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759788310",
            "id": 1759788310,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o5D0W",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759788310/reactions"
            },
            "updated_at": "2023-10-12T15:03:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759788310",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Just to confirm: it is _necessary_ to have `nvim-treesitter` installed, with everything enabled? Disabling even one thing will not let you reproduce?\r\n\r\nIt's not necessary, the `minimal.lua` file I provided is all you need, at least on my system.",
            "created_at": "2023-10-12T15:04:42Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759791512",
            "id": 1759791512,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o5EmY",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759791512/reactions"
            },
            "updated_at": "2023-10-12T15:05:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759791512",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11463919?v=4",
                "events_url": "https://api.github.com/users/itaranto/events{/privacy}",
                "followers_url": "https://api.github.com/users/itaranto/followers",
                "following_url": "https://api.github.com/users/itaranto/following{/other_user}",
                "gists_url": "https://api.github.com/users/itaranto/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/itaranto",
                "id": 11463919,
                "login": "itaranto",
                "node_id": "MDQ6VXNlcjExNDYzOTE5",
                "organizations_url": "https://api.github.com/users/itaranto/orgs",
                "received_events_url": "https://api.github.com/users/itaranto/received_events",
                "repos_url": "https://api.github.com/users/itaranto/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/itaranto/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/itaranto/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/itaranto"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> I'll try a build with all bundled dependencies (which Arch's team removed recently) and I'll also try with the AppImage.\r\n\r\nYes, please try the appimage.  We cannot support distro builds, they make too many changes outside our control.",
            "created_at": "2023-10-12T15:07:17Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759796283",
            "id": 1759796283,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o5Fw7",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759796283/reactions"
            },
            "updated_at": "2023-10-12T15:07:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759796283",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Just to confirm: it is necessary to have nvim-treesitter installed, with everything enabled? Disabling even one thing will not let you reproduce?\r\n\r\nYes, it looks like treesitter MUST be installed. Don't think I've reproduced without it.  Still working through all my test scenarios to confirm.\r\n\r\nIn this example, I've disabled highlight, incremental_selection, and indent.  This issue STILL happens:\r\n\r\n```lua\r\nfor name, url in pairs{\r\n  treesitter = 'https://github.com/nvim-treesitter/nvim-treesitter'\r\n} do\r\n  local install_path = vim.fn.fnamemodify('nvim_issue/'..name, ':p')\r\n  if vim.fn.isdirectory(install_path) == 0 then\r\n    vim.fn.system { 'git', 'clone', '--depth=1', url, install_path }\r\n  end\r\n  vim.opt.runtimepath:append(install_path)\r\nend\r\n\r\nvim.opt.foldenable = false\r\nvim.opt.foldmethod = 'expr'\r\n-- https://github.com/neovim/neovim/issues/25608\r\nvim.opt.foldexpr = 'v:lua.vim.treesitter.foldexpr()'\r\n-- vim.opt.foldexpr = 'nvim_treesitter#foldexpr()'\r\n\r\nrequire('nvim-treesitter.configs').setup({\r\n    auto_install = true,\r\n    highlight = {\r\n        enable = false,\r\n    },\r\n    incremental_selection = {\r\n        enable = false,\r\n        keymaps = {\r\n            init_selection = '<c-i>',\r\n            node_incremental = '<c-i>',\r\n            scope_incremental = false,\r\n            node_decremental = '<bs>',\r\n        },\r\n    },\r\n    indent = {\r\n        enable = false,\r\n    },\r\n})\r\n```",
            "created_at": "2023-10-12T15:07:35Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759796883",
            "id": 1759796883,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o5F6T",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759796883/reactions"
            },
            "updated_at": "2023-10-12T15:08:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759796883",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6127369?v=4",
                "events_url": "https://api.github.com/users/freddiehaddad/events{/privacy}",
                "followers_url": "https://api.github.com/users/freddiehaddad/followers",
                "following_url": "https://api.github.com/users/freddiehaddad/following{/other_user}",
                "gists_url": "https://api.github.com/users/freddiehaddad/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/freddiehaddad",
                "id": 6127369,
                "login": "freddiehaddad",
                "node_id": "MDQ6VXNlcjYxMjczNjk=",
                "organizations_url": "https://api.github.com/users/freddiehaddad/orgs",
                "received_events_url": "https://api.github.com/users/freddiehaddad/received_events",
                "repos_url": "https://api.github.com/users/freddiehaddad/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/freddiehaddad/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/freddiehaddad/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/freddiehaddad"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Please test with the (nightly) appimage, not the Arch package.",
            "created_at": "2023-10-12T15:08:26Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759798301",
            "id": 1759798301,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o5GQd",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759798301/reactions"
            },
            "updated_at": "2023-10-12T15:08:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759798301",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "> > Just to confirm: it is necessary to have nvim-treesitter installed, with everything enabled? Disabling even one thing will not let you reproduce?\r\n> \r\n> Yes, it looks like treesitter MUST be installed. Don't think I've reproduced without it. Still working through all my test scenarios to confirm.\r\n> \r\n> In this example, I've disabled highlight, incremental_selection, and indent. This issue STILL happens:\r\n> \r\n> ```lua\r\n> for name, url in pairs{\r\n>   treesitter = 'https://github.com/nvim-treesitter/nvim-treesitter'\r\n> } do\r\n>   local install_path = vim.fn.fnamemodify('nvim_issue/'..name, ':p')\r\n>   if vim.fn.isdirectory(install_path) == 0 then\r\n>     vim.fn.system { 'git', 'clone', '--depth=1', url, install_path }\r\n>   end\r\n>   vim.opt.runtimepath:append(install_path)\r\n> end\r\n> \r\n> vim.opt.foldenable = false\r\n> vim.opt.foldmethod = 'expr'\r\n> -- https://github.com/neovim/neovim/issues/25608\r\n> vim.opt.foldexpr = 'v:lua.vim.treesitter.foldexpr()'\r\n> -- vim.opt.foldexpr = 'nvim_treesitter#foldexpr()'\r\n> \r\n> require('nvim-treesitter.configs').setup({\r\n>     auto_install = true,\r\n>     highlight = {\r\n>         enable = false,\r\n>     },\r\n>     incremental_selection = {\r\n>         enable = false,\r\n>         keymaps = {\r\n>             init_selection = '<c-i>',\r\n>             node_incremental = '<c-i>',\r\n>             scope_incremental = false,\r\n>             node_decremental = '<bs>',\r\n>         },\r\n>     },\r\n>     indent = {\r\n>         enable = false,\r\n>     },\r\n> })\r\n> ```\r\n\r\nCan you try the `minimal.lua` file I provided?\r\n\r\nYou can do it with `nvim --clean -u minimal.lua`.",
            "created_at": "2023-10-12T15:10:12Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759801065",
            "id": 1759801065,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o5G7p",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759801065/reactions"
            },
            "updated_at": "2023-10-12T15:10:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759801065",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11463919?v=4",
                "events_url": "https://api.github.com/users/itaranto/events{/privacy}",
                "followers_url": "https://api.github.com/users/itaranto/followers",
                "following_url": "https://api.github.com/users/itaranto/following{/other_user}",
                "gists_url": "https://api.github.com/users/itaranto/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/itaranto",
                "id": 11463919,
                "login": "itaranto",
                "node_id": "MDQ6VXNlcjExNDYzOTE5",
                "organizations_url": "https://api.github.com/users/itaranto/orgs",
                "received_events_url": "https://api.github.com/users/itaranto/received_events",
                "repos_url": "https://api.github.com/users/itaranto/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/itaranto/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/itaranto/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/itaranto"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Please test with the (nightly) appimage, not the Arch package.\r\n\r\nThe nightly AppImage (`v0.10.0-dev-d2d3885`) doesn't have the issue while the `0.9.4` AppImage does.\r\n",
            "created_at": "2023-10-12T15:21:28Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759819644",
            "id": 1759819644,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o5Ld8",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759819644/reactions"
            },
            "updated_at": "2023-10-12T15:21:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759819644",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11463919?v=4",
                "events_url": "https://api.github.com/users/itaranto/events{/privacy}",
                "followers_url": "https://api.github.com/users/itaranto/followers",
                "following_url": "https://api.github.com/users/itaranto/following{/other_user}",
                "gists_url": "https://api.github.com/users/itaranto/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/itaranto",
                "id": 11463919,
                "login": "itaranto",
                "node_id": "MDQ6VXNlcjExNDYzOTE5",
                "organizations_url": "https://api.github.com/users/itaranto/orgs",
                "received_events_url": "https://api.github.com/users/itaranto/received_events",
                "repos_url": "https://api.github.com/users/itaranto/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/itaranto/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/itaranto/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/itaranto"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Can you try the minimal.lua file I provided?\r\n\r\nConfirmed in a Go file and can reproduce with neovim system package provided by Arch. Will also test with nightly.\r\n\r\n`minimal.lua`\r\n\r\n```lua\r\nvim.opt.foldmethod = \"expr\"\r\nvim.opt.foldexpr = \"v:lua.vim.treesitter.foldexpr()\"\r\n\r\nvim.treesitter.language.add(\"go\", { path = \"/home/freddiehaddad/.local/share/nvim/lazy/nvim-treesitter/parser/go.so\" })\r\n\r\nvim.api.nvim_create_autocmd(\"FileType\", {\r\n    pattern = \"go\",\r\n    callback = function(args)\r\n        vim.treesitter.start(args.buf, \"go\")\r\n    end,\r\n})\r\n```",
            "created_at": "2023-10-12T15:24:35Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759834369",
            "id": 1759834369,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o5PEB",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759834369/reactions"
            },
            "updated_at": "2023-10-12T15:40:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759834369",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6127369?v=4",
                "events_url": "https://api.github.com/users/freddiehaddad/events{/privacy}",
                "followers_url": "https://api.github.com/users/freddiehaddad/followers",
                "following_url": "https://api.github.com/users/freddiehaddad/following{/other_user}",
                "gists_url": "https://api.github.com/users/freddiehaddad/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/freddiehaddad",
                "id": 6127369,
                "login": "freddiehaddad",
                "node_id": "MDQ6VXNlcjYxMjczNjk=",
                "organizations_url": "https://api.github.com/users/freddiehaddad/orgs",
                "received_events_url": "https://api.github.com/users/freddiehaddad/received_events",
                "repos_url": "https://api.github.com/users/freddiehaddad/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/freddiehaddad/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/freddiehaddad/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/freddiehaddad"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> > Please test with the (nightly) appimage, not the Arch package.\r\n> \r\n> The nightly AppImage (`v0.10.0-dev-d2d3885`) doesn't have the issue while the `0.9.4` AppImage does.\r\n\r\nThank you. Also found https://github.com/LazyVim/LazyVim/issues/1581, which corroborates that https://github.com/neovim/neovim/pull/24230 would have to be backported to fix this.\r\n\r\n@lewis6991 @tomtomjhj ",
            "created_at": "2023-10-12T15:37:43Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759869774",
            "id": 1759869774,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o5XtO",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 1,
                "heart": 0,
                "hooray": 2,
                "laugh": 0,
                "rocket": 0,
                "total_count": 3,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759869774/reactions"
            },
            "updated_at": "2023-10-12T15:41:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759869774",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "#24230 does not fix this issue. I have tried cherry-picking that commit on top of 0.9.4, but nvim still hangs.\r\n\r\n> I do see a comment about infinite recursion here: https://github.com/neovim/neovim/blob/1e7e9ee91f73c62b8c5ba9dbdabba3a3b6dc0130/runtime/lua/vim/treesitter/_fold.lua#L280\r\n\r\n The logic \"to avoid infinite recursion\" was already there before that PR, and I added that comment only to make it clear. ",
            "created_at": "2023-10-12T16:53:38Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1759997707",
            "id": 1759997707,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o528L",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759997707/reactions"
            },
            "updated_at": "2023-10-12T16:54:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1759997707",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/19489738?v=4",
                "events_url": "https://api.github.com/users/tomtomjhj/events{/privacy}",
                "followers_url": "https://api.github.com/users/tomtomjhj/followers",
                "following_url": "https://api.github.com/users/tomtomjhj/following{/other_user}",
                "gists_url": "https://api.github.com/users/tomtomjhj/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/tomtomjhj",
                "id": 19489738,
                "login": "tomtomjhj",
                "node_id": "MDQ6VXNlcjE5NDg5NzM4",
                "organizations_url": "https://api.github.com/users/tomtomjhj/orgs",
                "received_events_url": "https://api.github.com/users/tomtomjhj/received_events",
                "repos_url": "https://api.github.com/users/tomtomjhj/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/tomtomjhj/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/tomtomjhj/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/tomtomjhj"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Is there a prior commit we forgot (or decided not) to backport?",
            "created_at": "2023-10-12T17:54:38Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1760096591",
            "id": 1760096591,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o6PFP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1760096591/reactions"
            },
            "updated_at": "2023-10-12T17:54:38Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1760096591",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "@clason I learned a lot from this bug, thanks for your patience :)\r\n\r\n- minimal config\r\n- git bisect\r\n- neovim treesitter core vs nvim-treesetter plugin",
            "created_at": "2023-10-12T22:30:33Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1760459243",
            "id": 1760459243,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o7nnr",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1760459243/reactions"
            },
            "updated_at": "2023-10-12T22:31:05Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1760459243",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6127369?v=4",
                "events_url": "https://api.github.com/users/freddiehaddad/events{/privacy}",
                "followers_url": "https://api.github.com/users/freddiehaddad/followers",
                "following_url": "https://api.github.com/users/freddiehaddad/following{/other_user}",
                "gists_url": "https://api.github.com/users/freddiehaddad/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/freddiehaddad",
                "id": 6127369,
                "login": "freddiehaddad",
                "node_id": "MDQ6VXNlcjYxMjczNjk=",
                "organizations_url": "https://api.github.com/users/freddiehaddad/orgs",
                "received_events_url": "https://api.github.com/users/freddiehaddad/received_events",
                "repos_url": "https://api.github.com/users/freddiehaddad/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/freddiehaddad/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/freddiehaddad/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/freddiehaddad"
            }
        },
        {
            "author_association": "NONE",
            "body": "I was about to do a \"reverse\" bisect between `master` (at d2d38858d1f33a2cd92e9a6182ece2459b0d6f75) and `v0.9.0` which is the common ancestor between the `release-0.9.0` and `master` branches, when I discovered that `v0.9.0` doesn't have the issue.\r\n\r\nSo, I did a \"normal\" bisect between `v0.9.0`  (good) and `v0.9.4` (bad) and I found the offending commit: 1b09bcef522754452e46294a2340050f390a590b.\r\n\r\nI tested using `VIMRUNTIME=~/devel/external/neovim/runtime ~/devel/external/neovim/build/bin/nvim --clean -u minimal.lua`.\r\n",
            "created_at": "2023-10-12T23:06:58Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1760493332",
            "id": 1760493332,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5o7v8U",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 2,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1760493332/reactions"
            },
            "updated_at": "2023-10-12T23:13:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1760493332",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11463919?v=4",
                "events_url": "https://api.github.com/users/itaranto/events{/privacy}",
                "followers_url": "https://api.github.com/users/itaranto/followers",
                "following_url": "https://api.github.com/users/itaranto/following{/other_user}",
                "gists_url": "https://api.github.com/users/itaranto/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/itaranto",
                "id": 11463919,
                "login": "itaranto",
                "node_id": "MDQ6VXNlcjExNDYzOTE5",
                "organizations_url": "https://api.github.com/users/itaranto/orgs",
                "received_events_url": "https://api.github.com/users/itaranto/received_events",
                "repos_url": "https://api.github.com/users/itaranto/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/itaranto/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/itaranto/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/itaranto"
            }
        },
        {
            "author_association": "NONE",
            "body": "I used to have this issue and now it is resolved for me on the current master.\r\n\r\nThere is another similar bug though that I've found only when using [fugitive.vim](https://github.com/tpope/vim-fugitive) and its `:Git log` command. I was not able to reproduce it anywhere else. Neovim does not hang indefinitely, but just takes a very long time to execute that command.\r\n\r\n- with `vim.opt.foldexpr = \"v:lua.vim.treesitter.foldexpr()\"` - it hangs for 1-2 minutes before opening the log\r\n- with `vim.opt.foldexpr = \"nvim_treesitter#foldexpr()\"` (or `vim.opt.foldmethod = indent`) - it opens the log immediately\r\n\r\n",
            "created_at": "2024-01-08T22:04:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/25608#issuecomment-1881894198",
            "id": 1881894198,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25608",
            "node_id": "IC_kwDOAPphoM5wK202",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1881894198/reactions"
            },
            "updated_at": "2024-01-09T14:51:00Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1881894198",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13033392?v=4",
                "events_url": "https://api.github.com/users/konradmalik/events{/privacy}",
                "followers_url": "https://api.github.com/users/konradmalik/followers",
                "following_url": "https://api.github.com/users/konradmalik/following{/other_user}",
                "gists_url": "https://api.github.com/users/konradmalik/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/konradmalik",
                "id": 13033392,
                "login": "konradmalik",
                "node_id": "MDQ6VXNlcjEzMDMzMzky",
                "organizations_url": "https://api.github.com/users/konradmalik/orgs",
                "received_events_url": "https://api.github.com/users/konradmalik/received_events",
                "repos_url": "https://api.github.com/users/konradmalik/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/konradmalik/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/konradmalik/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/konradmalik"
            }
        }
    ],
    "comments": 46,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/25608/comments",
    "created_at": "2023-10-12T02:12:58Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/25608/events",
    "html_url": "https://github.com/neovim/neovim/issues/25608",
    "id": 1939049687,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "FBCA04",
            "default": false,
            "description": "We need minimal steps to reproduce the issue",
            "id": 298863445,
            "name": "needs:repro",
            "node_id": "MDU6TGFiZWwyOTg4NjM0NDU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:repro"
        },
        {
            "color": "FBCA04",
            "default": false,
            "description": "",
            "id": 392811090,
            "name": "revisit-at-release",
            "node_id": "MDU6TGFiZWwzOTI4MTEwOTA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/revisit-at-release"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 1799626557,
            "name": "treesitter",
            "node_id": "MDU6TGFiZWwxNzk5NjI2NTU3",
            "url": "https://api.github.com/repos/neovim/neovim/labels/treesitter"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "UI messages, log messages",
            "id": 5637083595,
            "name": "messages",
            "node_id": "LA_kwDOAPphoM8AAAABT_8Ryw",
            "url": "https://api.github.com/repos/neovim/neovim/labels/messages"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/25608/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM5zk4zX",
    "number": 25608,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 3,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 3,
        "url": "https://api.github.com/repos/neovim/neovim/issues/25608/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/25608/timeline",
    "title": "Neovim hangs when an open buffer is modified externally and foldexpr is enabled.",
    "updated_at": "2024-01-09T14:51:00Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/25608",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/6127369?v=4",
        "events_url": "https://api.github.com/users/freddiehaddad/events{/privacy}",
        "followers_url": "https://api.github.com/users/freddiehaddad/followers",
        "following_url": "https://api.github.com/users/freddiehaddad/following{/other_user}",
        "gists_url": "https://api.github.com/users/freddiehaddad/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/freddiehaddad",
        "id": 6127369,
        "login": "freddiehaddad",
        "node_id": "MDQ6VXNlcjYxMjczNjk=",
        "organizations_url": "https://api.github.com/users/freddiehaddad/orgs",
        "received_events_url": "https://api.github.com/users/freddiehaddad/received_events",
        "repos_url": "https://api.github.com/users/freddiehaddad/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/freddiehaddad/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/freddiehaddad/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/freddiehaddad"
    }
}