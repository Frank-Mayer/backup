{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\r\n\r\n```cpp\r\n#0  __pthread_kill_implementation (threadid=<optimized out>, signo=signo@entry=6, no_tid=no_tid@entry=0) at ./nptl/pthread_kill.c:44\r\n#1  0x00007ff667f5315f in __pthread_kill_internal (signo=6, threadid=<optimized out>) at ./nptl/pthread_kill.c:78\r\n#2  0x00007ff667f05472 in __GI_raise (sig=sig@entry=6) at ../sysdeps/posix/raise.c:26\r\n#3  0x00007ff667eef4b2 in __GI_abort () at ./stdlib/abort.c:79\r\n#4  0x00007ff667eef3d5 in __assert_fail_base (fmt=0x7ff668063dc8 \"%s%s%s:%u: %s%sAssertion `%s' failed.\\n%n\", assertion=assertion@entry=0x55da9372964d \"seen\",\r\n    file=file@entry=0x55da9374a730 \".../src/nvim/marktree.c\", line=line@entry=375, function=function@entry=0x55da936f8a40 <__PRETTY_FUNCTION__.19> \"unintersect_node\") at ./assert/assert.c:92\r\n#5  0x00007ff667efe3a2 in __assert_fail (assertion=assertion@entry=0x55da9372964d \"seen\", file=file@entry=0x55da9374a730 \".../src/nvim/marktree.c\", line=line@entry=375,\r\n    function=function@entry=0x55da936f8a40 <__PRETTY_FUNCTION__.19> \"unintersect_node\") at ./assert/assert.c:101\r\n#6  0x000055da934a12b6 in unintersect_node (b=b@entry=0x55da93f147e0, x=0x55da958a7590, id=id@entry=8589935750, strict=strict@entry=true) at .../src/nvim/marktree.c:375\r\n#7  0x000055da934a32cf in marktree_intersect_pair (b=b@entry=0x55da93f147e0, id=id@entry=8589935750, itr=itr@entry=0x7ffc8a862090, end_itr=end_itr@entry=0x7ffc8a861fb0, delete=delete@entry=true)\r\n    at .../src/nvim/marktree.c:427\r\n#8  0x000055da934a9b58 in marktree_splice (b=0x55da93f147e0, start_line=<optimized out>, start_col=<optimized out>, old_extent_line=<optimized out>, old_extent_col=<optimized out>, new_extent_line=<optimized out>, new_extent_col=0)\r\n    at .../src/nvim/marktree.c:2085\r\n#9  0x000055da9345085e in extmark_splice_impl (buf=buf@entry=0x55da93f11850, start_row=start_row@entry=91, start_col=start_col@entry=0, start_byte=2408, old_row=old_row@entry=1, old_col=old_col@entry=0, old_byte=49, new_row=1, new_col=0,\r\n    new_byte=52, undo=kExtmarkUndo) at .../src/nvim/extmark.c:530\r\n#10 0x000055da93450c0c in extmark_splice (buf=0x55da93f11850, start_row=91, start_col=0, old_row=1, old_col=0, old_byte=49, new_row=1, new_col=0, new_byte=52, undo=kExtmarkUndo) at .../src/nvim/extmark.c:498\r\n#11 0x000055da933726e0 in nvim_buf_set_lines (channel_id=<optimized out>, buffer=<optimized out>, start=92, end=93, strict_indexing=<optimized out>, replacement=..., err=0x7ffc8a8625b0)\r\n    at .../src/nvim/api/buffer.c:461\r\n#12 0x000055da9335c00a in nlua_api_nvim_buf_set_lines (lstate=0x7ff667ea7380) at .../build/src/nvim/auto/lua_api_c_bindings.generated.c:574\r\n#13 0x000055da93662256 in lj_BC_FUNCC ()\r\n#14 0x000055da9364e4d5 in lua_pcall (L=L@entry=0x7ff667ea7380, nargs=nargs@entry=0, nresults=nresults@entry=1, errfunc=errfunc@entry=-2) at lj_api.c:1121\r\n#15 0x000055da93481769 in nlua_pcall (lstate=lstate@entry=0x7ff667ea7380, nargs=nargs@entry=0, nresults=nresults@entry=1) at .../src/nvim/lua/executor.c:172\r\n#16 0x000055da93486bff in nlua_call_ref (ref=<optimized out>, name=<optimized out>, args=..., retval=false, err=0x7ffc8a862790) at .../src/nvim/lua/executor.c:1610\r\n#17 0x000055da934659c4 in map_execute_lua (may_repeat=true) at .../src/nvim/getchar.c:3030\r\n#18 0x000055da934d9d9b in nv_colon (cap=0x7ffc8a8628d0) at .../src/nvim/normal.c:3220\r\n#19 0x000055da934d440b in normal_execute (state=0x7ffc8a862860, key=<optimized out>) at .../src/nvim/normal.c:1227\r\n#20 0x000055da9357533a in state_enter (s=0x7ffc8a862860) at .../src/nvim/state.c:101\r\n#21 0x000055da934d1594 in normal_enter (cmdwin=<optimized out>, noexmode=<optimized out>) at .../src/nvim/normal.c:516\r\n--Type <RET> for more, q to quit, c to continue without paging--\r\n#22 0x000055da934963d9 in main (argc=3, argv=<optimized out>) at .../src/nvim/main.c:651\r\n```\r\n\r\n@bfredl @luukvbaal could you look?\r\n\r\n### Steps to reproduce\r\n\r\nI have no idea how to reproduce it. This happened while deleting (or maybe commenting out) line in lua file (with luals). \r\n- `statuscol.nvim` plugin on `0.10` branch\r\n\r\n\r\n### Expected behavior\r\n\r\nNo crash\r\n\r\n### Neovim version (nvim -v)\r\n\r\nv0.10.0-dev-2196+g1e0996b57\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\n-\r\n\r\n### Operating system/version\r\n\r\nDebian Sid\r\n\r\n### Terminal name/version\r\n\r\nalacritty 0.13.1\r\n\r\n### $TERM environment variable\r\n\r\nalacritty\r\n\r\n### Installation\r\n\r\nfrom repo",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "Unlike #27137 this only happened once (at the moment), after many hours without such failure.",
            "created_at": "2024-01-25T20:48:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/27196#issuecomment-1910973164",
            "id": 1910973164,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27196",
            "node_id": "IC_kwDOAPphoM5x5yLs",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1910973164/reactions"
            },
            "updated_at": "2024-01-25T20:48:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1910973164",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/27196/comments",
    "created_at": "2024-01-25T20:44:55Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/27196/events",
    "html_url": "https://github.com/neovim/neovim/issues/27196",
    "id": 2101139442,
    "labels": [
        {
            "color": "FBCA04",
            "default": false,
            "description": "We need minimal steps to reproduce the issue",
            "id": 298863445,
            "name": "needs:repro",
            "node_id": "MDU6TGFiZWwyOTg4NjM0NDU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:repro"
        },
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue contains a stacktrace/ASAN log",
            "id": 435854079,
            "name": "has:backtrace",
            "node_id": "MDU6TGFiZWw0MzU4NTQwNzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:backtrace"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "issue reporting a crash or segfault",
            "id": 435854234,
            "name": "bug-crash",
            "node_id": "MDU6TGFiZWw0MzU4NTQyMzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-crash"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "extmarks, decorations, virtual text, namespaces",
            "id": 1680119719,
            "name": "extmarks",
            "node_id": "MDU6TGFiZWwxNjgwMTE5NzE5",
            "url": "https://api.github.com/repos/neovim/neovim/labels/extmarks"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/27196/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM59PNfy",
    "number": 27196,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/27196/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/27196/timeline",
    "title": "Assertion `seen` failure on marktree",
    "updated_at": "2024-01-25T21:49:13Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/27196",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
        "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
        "followers_url": "https://api.github.com/users/przepompownia/followers",
        "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
        "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/przepompownia",
        "id": 11404453,
        "login": "przepompownia",
        "node_id": "MDQ6VXNlcjExNDA0NDUz",
        "organizations_url": "https://api.github.com/users/przepompownia/orgs",
        "received_events_url": "https://api.github.com/users/przepompownia/received_events",
        "repos_url": "https://api.github.com/users/przepompownia/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/przepompownia"
    }
}