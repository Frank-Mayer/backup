{
    "active_lock_reason": null,
    "assignee": {
        "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
        "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
        "followers_url": "https://api.github.com/users/zeertzjq/followers",
        "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
        "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/zeertzjq",
        "id": 35768171,
        "login": "zeertzjq",
        "node_id": "MDQ6VXNlcjM1NzY4MTcx",
        "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
        "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
        "repos_url": "https://api.github.com/users/zeertzjq/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/zeertzjq"
    },
    "assignees": [
        {
            "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
            "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
            "followers_url": "https://api.github.com/users/zeertzjq/followers",
            "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
            "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/zeertzjq",
            "id": 35768171,
            "login": "zeertzjq",
            "node_id": "MDQ6VXNlcjM1NzY4MTcx",
            "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
            "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
            "repos_url": "https://api.github.com/users/zeertzjq/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/zeertzjq"
        }
    ],
    "author_association": "NONE",
    "body": "### Problem\r\n\r\nI have this setting in my init file:\r\n\r\n```\r\nset listchars=tab:<->,eol:$,lead:-,leadmultispace:\\|-->,trail:·,extends:>,precedes:<\r\nset emoji\r\n```\r\n\r\nBut when I have more than 1 space in front of a word, I get something like this with random kanji symbols:\r\n\r\n![image](https://github.com/neovim/neovim/assets/16250196/57d7213b-a2aa-4854-ac53-c1089a9109f3)\r\n\r\nThe last time I know for sure that it worked was with `NVIM v0.10.0-dev-e59cf3b3a`\r\nI know it has been broken for at least a week now. I'm not sure when this error started.\r\n\r\nWhen doing this manually and not loading it from a config file, doing `:set emoji` or `:set noemoji` sometimes crashes nvim\r\n\r\n### Steps to reproduce\r\n\r\n1. nvim --clean\r\n2. `:set list`\r\n3. `:set listchars=tab:<->,eol:$,lead:-,leadmultispace:\\|-->,trail:·,extends:>,precedes:<`\r\n4. type some text, for example\r\n```text\r\n    f\r\n    f    f\r\nf    \r\n```\r\n5. `:set emoji`\r\n\r\nYou will then either get a segfault or the leadmultispace characters are displayed with random symbols.\r\n\r\n[![asciicast](https://asciinema.org/a/hd6XkgevrxQAr9fPnoUZr41Xk.svg)](https://asciinema.org/a/hd6XkgevrxQAr9fPnoUZr41Xk)\r\n\r\n### Expected behavior\r\n\r\n- No crash\r\n- Characters are displayed correctly\r\n\r\n### Neovim version (nvim -v)\r\n\r\nNVIM v0.10.0-dev-8c6b0a5f2\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\nno\r\n\r\n### Operating system/version\r\n\r\nUbuntu Mate 22.04\r\n\r\n### Terminal name/version\r\n\r\nkitty 0.30.1\r\n\r\n### $TERM environment variable\r\n\r\nxterm-kitty\r\n\r\n### Installation\r\n\r\nbuilt from repo",
    "closed_at": "2023-11-23T22:52:52Z",
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "I just put `set noemoji` in my config, but it still displays the wrong symbols. I'm not sure what's going on.",
            "created_at": "2023-11-23T05:30:18Z",
            "html_url": "https://github.com/neovim/neovim/issues/26160#issuecomment-1823839023",
            "id": 1823839023,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26160",
            "node_id": "IC_kwDOAPphoM5stZMv",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1823839023/reactions"
            },
            "updated_at": "2023-11-23T05:30:18Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1823839023",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/16250196?v=4",
                "events_url": "https://api.github.com/users/FalcoGer/events{/privacy}",
                "followers_url": "https://api.github.com/users/FalcoGer/followers",
                "following_url": "https://api.github.com/users/FalcoGer/following{/other_user}",
                "gists_url": "https://api.github.com/users/FalcoGer/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/FalcoGer",
                "id": 16250196,
                "login": "FalcoGer",
                "node_id": "MDQ6VXNlcjE2MjUwMTk2",
                "organizations_url": "https://api.github.com/users/FalcoGer/orgs",
                "received_events_url": "https://api.github.com/users/FalcoGer/received_events",
                "repos_url": "https://api.github.com/users/FalcoGer/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/FalcoGer/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/FalcoGer/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/FalcoGer"
            }
        },
        {
            "author_association": "NONE",
            "body": "Here is a backtrace for a crash on `:set noemoji`, with `free(): double free detected in tcache 2`.\r\nAt other times I also get `malloc_consolidate(): unaligned fastbin chunk detected`. Seems pretty erratic.\r\n\r\n```text\r\n#0  __pthread_kill_implementation (no_tid=0, signo=6, threadid=140434286128000) at ./nptl/pthread_kill.c:44\r\n        tid = <optimized out>\r\n        ret = 0\r\n        pd = 0x7fb967bd2b80\r\n        old_mask = {\r\n          __val = {94429909587448, 94429900300584, 140727484950538, 4294967295, 140727484789168, 0, 0, 140727484789136, 140727484788560, 140434283443821, 94429909713712,\r\n            94429898958662, 140727484788512, 94429894109398, 140727484788816, 140727484788816}\r\n        }\r\n        ret = <optimized out>\r\n        pd = <optimized out>\r\n        old_mask = <optimized out>\r\n        ret = <optimized out>\r\n        tid = <optimized out>\r\n        ret = <optimized out>\r\n        resultvar = <optimized out>\r\n        resultvar = <optimized out>\r\n        __arg3 = <optimized out>\r\n        __arg2 = <optimized out>\r\n        __arg1 = <optimized out>\r\n        _a3 = <optimized out>\r\n        _a2 = <optimized out>\r\n        _a1 = <optimized out>\r\n        __futex = <optimized out>\r\n        resultvar = <optimized out>\r\n        __arg3 = <optimized out>\r\n        __arg2 = <optimized out>\r\n        __arg1 = <optimized out>\r\n        _a3 = <optimized out>\r\n        _a2 = <optimized out>\r\n        _a1 = <optimized out>\r\n        __futex = <optimized out>\r\n        __private = <optimized out>\r\n        __oldval = <optimized out>\r\n        result = <optimized out>\r\n#1  __pthread_kill_internal (signo=6, threadid=140434286128000) at ./nptl/pthread_kill.c:78\r\nNo locals.\r\n#2  __GI___pthread_kill (threadid=140434286128000, signo=signo@entry=6) at ./nptl/pthread_kill.c:89\r\nNo locals.\r\n#3  0x00007fb9678a0476 in __GI_raise (sig=sig@entry=6) at ../sysdeps/posix/raise.c:26\r\n        ret = <optimized out>\r\n#4  0x00007fb9678867f3 in __GI_abort () at ./stdlib/abort.c:79\r\n        save_stage = 1\r\n        act = {\r\n          __sigaction_handler = {\r\n            sa_handler = 0x55e22d3900b0,\r\n            sa_sigaction = 0x55e22d3900b0\r\n          },\r\n          sa_mask = {\r\n            __val = {94429894104954, 94429909680392, 94429899431758, 94429909680304, 94429894085577, 16, 140727484790624, 72057594037927936, 94429909680400,\r\n              10983823949590186496, 94429909680304, 94429910368864, 46, 94429909680400, 46, 94429900378024}\r\n          },\r\n          sa_flags = 743135853,\r\n          sa_restorer = 0x55e22d3900b0\r\n        }\r\n        sigs = {\r\n          __val = {32, 0, 2, 140727484788624, 140727484788752, 0, 0, 0, 0, 0, 0, 94429898958662, 10983823949590186496, 3, 1, 94429909711440}\r\n        }\r\n#5  0x00007fb9678e7676 in __libc_message (action=action@entry=do_abort, fmt=fmt@entry=0x7fb967a39b8c \"%s\\n\") at ../sysdeps/posix/libc_fatal.c:155\r\n        ap = {{\r\n            gp_offset = 24,\r\n            fp_offset = 0,\r\n            overflow_arg_area = 0x7ffdabbdb1c0,\r\n            reg_save_area = 0x7ffdabbdb150\r\n          }}\r\n        fd = <optimized out>\r\n        list = <optimized out>\r\n        nlist = <optimized out>\r\n        cp = <optimized out>\r\n#6  0x00007fb9678fecfc in malloc_printerr (str=str@entry=0x7fb967a3c710 \"free(): double free detected in tcache 2\") at ./malloc/malloc.c:5664\r\nNo locals.\r\n#7  0x00007fb9679010ab in _int_free (av=0x7fb967a77c80 <main_arena>, p=0x55e22d427150, have_lock=0) at ./malloc/malloc.c:4473\r\n        tmp = <optimized out>\r\n        cnt = <optimized out>\r\n        e = 0x55e22d427160\r\n        tc_idx = 2\r\n        size = 64\r\n        fb = <optimized out>\r\n        nextchunk = <optimized out>\r\n        nextsize = <optimized out>\r\n        nextinuse = <optimized out>\r\n        prevsize = <optimized out>\r\n        bck = <optimized out>\r\n        fwd = <optimized out>\r\n        __PRETTY_FUNCTION__ = \"_int_free\"\r\n#8  0x00007fb967903453 in __GI___libc_free (mem=<optimized out>) at ./malloc/malloc.c:3391\r\n        ar_ptr = <optimized out>\r\n        p = <optimized out>\r\n        err = 0\r\n#9  0x000055e22c6e90f8 in set_chars_option.llvm ()\r\nNo symbol table info available.\r\n#10 0x000055e22c6e0e69 in check_chars_options ()\r\nNo symbol table info available.\r\n#11 0x000055e22c6d4bb8 in set_option.llvm ()\r\nNo symbol table info available.\r\n#12 0x000055e22c6d069c in do_set ()\r\nNo symbol table info available.\r\n#13 0x000055e22c5b8bef in execute_cmd0 ()\r\nNo symbol table info available.\r\n#14 0x000055e22c5b402a in do_cmdline ()\r\nNo symbol table info available.\r\n#15 0x000055e22c6ae105 in nv_colon.llvm ()\r\nNo symbol table info available.\r\n#16 0x000055e22c6aa391 in normal_execute.llvm ()\r\nNo symbol table info available.\r\n#17 0x000055e22c7bb016 in state_enter ()\r\nNo symbol table info available.\r\n#18 0x000055e22c4629c3 in main ()\r\nNo symbol table info available.\r\n#19 0x00007fb967887d90 in __libc_start_call_main (main=main@entry=0x55e22c45e380 <main>, argc=argc@entry=3, argv=argv@entry=0x7ffdabbdc688)\r\n    at ../sysdeps/nptl/libc_start_call_main.h:58\r\n        self = <optimized out>\r\n        result = <optimized out>\r\n        unwind_buf = {\r\n          cancel_jmp_buf = {{\r\n              jmp_buf = {0, 2009278470812189197, 140727484794504, 94429893747584, 94429900115048, 140434286379072, -2010519253372911091, -1976892154008059379},\r\n              mask_was_saved = 0\r\n            }},\r\n          priv = {\r\n            pad = {0x0, 0x0, 0x0, 0x0},\r\n            data = {\r\n              prev = 0x0,\r\n              cleanup = 0x0,\r\n              canceltype = 0\r\n            }\r\n          }\r\n        }\r\n        not_first_call = <optimized out>\r\n#20 0x00007fb967887e40 in __libc_start_main_impl (main=0x55e22c45e380 <main>, argc=3, argv=0x7ffdabbdc688, init=<optimized out>, fini=<optimized out>,\r\n    rtld_fini=<optimized out>, stack_end=0x7ffdabbdc678) at ../csu/libc-start.c:392\r\nNo locals.\r\n#21 0x000055e22c45d725 in _start ()\r\nNo symbol table info available.\r\n```",
            "created_at": "2023-11-23T07:19:29Z",
            "html_url": "https://github.com/neovim/neovim/issues/26160#issuecomment-1823908161",
            "id": 1823908161,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26160",
            "node_id": "IC_kwDOAPphoM5stqFB",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1823908161/reactions"
            },
            "updated_at": "2023-11-23T07:26:12Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1823908161",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/16250196?v=4",
                "events_url": "https://api.github.com/users/FalcoGer/events{/privacy}",
                "followers_url": "https://api.github.com/users/FalcoGer/followers",
                "following_url": "https://api.github.com/users/FalcoGer/following{/other_user}",
                "gists_url": "https://api.github.com/users/FalcoGer/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/FalcoGer",
                "id": 16250196,
                "login": "FalcoGer",
                "node_id": "MDQ6VXNlcjE2MjUwMTk2",
                "organizations_url": "https://api.github.com/users/FalcoGer/orgs",
                "received_events_url": "https://api.github.com/users/FalcoGer/received_events",
                "repos_url": "https://api.github.com/users/FalcoGer/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/FalcoGer/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/FalcoGer/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/FalcoGer"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/26160/comments",
    "created_at": "2023-11-23T05:17:19Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/26160/events",
    "html_url": "https://github.com/neovim/neovim/issues/26160",
    "id": 2007501640,
    "labels": [
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue contains a stacktrace/ASAN log",
            "id": 435854079,
            "name": "has:backtrace",
            "node_id": "MDU6TGFiZWw0MzU4NTQwNzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:backtrace"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "issue reporting a crash or segfault",
            "id": 435854234,
            "name": "bug-crash",
            "node_id": "MDU6TGFiZWw0MzU4NTQyMzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-crash"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 4242493821,
            "name": "options",
            "node_id": "LA_kwDOAPphoM7831F9",
            "url": "https://api.github.com/repos/neovim/neovim/labels/options"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/26160/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 190,
        "created_at": "2023-02-02T14:11:43Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
            "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
            "followers_url": "https://api.github.com/users/bfredl/followers",
            "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
            "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/bfredl",
            "id": 1363104,
            "login": "bfredl",
            "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
            "organizations_url": "https://api.github.com/users/bfredl/orgs",
            "received_events_url": "https://api.github.com/users/bfredl/received_events",
            "repos_url": "https://api.github.com/users/bfredl/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/bfredl"
        },
        "description": "",
        "due_on": "2024-03-01T08:00:00Z",
        "html_url": "https://github.com/neovim/neovim/milestone/36",
        "id": 8997654,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/36/labels",
        "node_id": "MI_kwDOAPphoM4AiUsW",
        "number": 36,
        "open_issues": 131,
        "state": "open",
        "title": "0.10",
        "updated_at": "2023-11-23T22:52:52Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/36"
    },
    "node_id": "I_kwDOAPphoM53qAtI",
    "number": 26160,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/26160/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/26160/timeline",
    "title": "set emoji crashes nvim, listchars leadmultispace displays wrong symbols",
    "updated_at": "2023-11-23T22:52:52Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/26160",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/16250196?v=4",
        "events_url": "https://api.github.com/users/FalcoGer/events{/privacy}",
        "followers_url": "https://api.github.com/users/FalcoGer/followers",
        "following_url": "https://api.github.com/users/FalcoGer/following{/other_user}",
        "gists_url": "https://api.github.com/users/FalcoGer/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/FalcoGer",
        "id": 16250196,
        "login": "FalcoGer",
        "node_id": "MDQ6VXNlcjE2MjUwMTk2",
        "organizations_url": "https://api.github.com/users/FalcoGer/orgs",
        "received_events_url": "https://api.github.com/users/FalcoGer/received_events",
        "repos_url": "https://api.github.com/users/FalcoGer/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/FalcoGer/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/FalcoGer/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/FalcoGer"
    }
}