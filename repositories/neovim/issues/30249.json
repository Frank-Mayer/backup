{
    "active_lock_reason": "off-topic",
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nTrying to install `neovim` from brew with `brew install --HEAD neovim` is failing since the weekend with the following:\r\n\r\n```\r\n==> Installing neovim --HEAD\r\n==> cmake -S . -B build -DLUV_LIBRARY=/opt/homebrew/opt/luv/lib/libluv.dylib -DLIBUV_LIBRARY=/opt/homebrew/opt/libuv/lib/libuv.dylib -DLPEG_LIBRARY=/opt/homebrew/opt/lpeg/lib/liblpeg.dylib\r\n==> cmake --build build\r\nLast 15 lines from /Users/thiago/Library/Logs/Homebrew/neovim/02.cmake:\r\n  if (p_emoji && c >= 0x1f000 && !prop->ambiguous_width && prop_is_emojilike(prop)) {\r\n                                  ~~~~  ^\r\n/tmp/neovim-20240903-98382-44xsr9/src/nvim/mbyte.c:1350:15: error: no member named 'ambiguous_width' in 'struct utf8proc_property_struct'\r\n    if (prop->ambiguous_width || prop_is_emojilike(prop)) {\r\n        ~~~~  ^\r\n[ 80%] Building C object src/nvim/CMakeFiles/nvim_bin.dir/message.c.o\r\ncd /tmp/neovim-20240903-98382-44xsr9/build/src/nvim && /opt/homebrew/Library/Homebrew/shims/mac/super/clang -DHAVE_UNIBILIUM -DINCLUDE_GENERATED_DECLARATIONS -DUNIT_TESTING -DUTF8PROC_STATIC -D_GNU_SOURCE -Dnvim_bin_EXPORTS -I/tmp/neovim-20240903-98382-44xsr9/build/src/nvim/auto -I/tmp/neovim-20240903-98382-44xsr9/build/include -I/tmp/neovim-20240903-98382-44xsr9/build/cmake.config -I/tmp/neovim-20240903-98382-44xsr9/src -isystem /opt/homebrew/include/luajit-2.1 -isystem /opt/homebrew/opt/gettext/include -O3 -DNDEBUG -flto=thin -arch arm64 -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX14.sdk -mmacosx-version-min=14.6.1 -Wall -Wextra -pedantic -Wno-unused-parameter -Wstrict-prototypes -std=gnu99 -Wshadow -Wconversion -Wvla -Wdouble-promotion -Wmissing-noreturn -Wmissing-format-attribute -Wmissing-prototypes -fsigned-char -fstack-protector-strong -Wimplicit-fallthrough -fdiagnostics-color=auto -MD -MT src/nvim/CMakeFiles/nvim_bin.dir/message.c.o -MF CMakeFiles/nvim_bin.dir/message.c.o.d -o CMakeFiles/nvim_bin.dir/message.c.o -c /tmp/neovim-20240903-98382-44xsr9/src/nvim/message.c\r\n3 errors generated.\r\ngmake[2]: *** [src/nvim/CMakeFiles/nvim_bin.dir/build.make:5452: src/nvim/CMakeFiles/nvim_bin.dir/mbyte.c.o] Error 1\r\ngmake[2]: *** Waiting for unfinished jobs....\r\ngmake[2]: Leaving directory '/private/tmp/neovim-20240903-98382-44xsr9/build'\r\ngmake[1]: *** [CMakeFiles/Makefile2:626: src/nvim/CMakeFiles/nvim_bin.dir/all] Error 2\r\ngmake[1]: Leaving directory '/private/tmp/neovim-20240903-98382-44xsr9/build'\r\ngmake: *** [Makefile:159: all] Error 2\r\n```\n\n### Steps to reproduce\n\nbrew install --HEAD neovim\n\n### Expected behavior\n\nBrew to be installed correctly\n\n### Neovim version (nvim -v)\n\nd1d7d5468\n\n### Vim (not Nvim) behaves the same?\n\nno\n\n### Operating system/version\n\nmacOS Sonoma 14.6.1\n\n### Terminal name/version\n\niterm2\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\nBrew HEAD",
    "closed_at": "2024-09-03T13:28:48Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "ambiguous_width was very recently added to utf8proc, probably the brew formula needs to update its utf8proc dependency.",
            "created_at": "2024-09-03T13:28:48Z",
            "html_url": "https://github.com/neovim/neovim/issues/30249#issuecomment-2326531131",
            "id": 2326531131,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30249",
            "node_id": "IC_kwDOAPphoM6KrAw7",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326531131/reactions"
            },
            "updated_at": "2024-09-03T13:28:48Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326531131",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "And to repeat myself: `brew install --HEAD neovim` **IS NOT SUPPORTED**, neither by us nor -- more importantly -- by homebrew. It's provided at your own risk; things _will_ break.\r\n\r\n(So to make this perfectly clear: even though this is technically a homebrew issue, DO NOT report it upstream, as there is no intention of \"fixing\" it. It will resolve itself in due course.)",
            "created_at": "2024-09-03T14:20:14Z",
            "html_url": "https://github.com/neovim/neovim/issues/30249#issuecomment-2326654392",
            "id": 2326654392,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30249",
            "node_id": "IC_kwDOAPphoM6Kre24",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326654392/reactions"
            },
            "updated_at": "2024-09-03T14:20:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2326654392",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "related issue, not home-brew related: I cloned latest master branch and it fails to build\r\n```\r\n[ 80%] Building C object src/nvim/CMakeFiles/nvim_bin.dir/menu.c.o\r\n/tmp/neovim/src/nvim/mbyte.c:482:31: error: no member named 'ambiguous_width' in 'struct utf8proc_property_struct'\r\n  if (*p_ambw == 'd' && prop->ambiguous_width) {\r\n                        ~~~~  ^\r\n/tmp/neovim/src/nvim/mbyte.c:488:41: error: no member named 'ambiguous_width' in 'struct utf8proc_property_struct'\r\n  if (p_emoji && c >= 0x1f000 && !prop->ambiguous_width && prop_is_emojilike(prop)) {\r\n                                  ~~~~  ^\r\n/tmp/neovim/src/nvim/mbyte.c:1350:15: error: no member named 'ambiguous_width' in 'struct utf8proc_property_struct'\r\n    if (prop->ambiguous_width || prop_is_emojilike(prop)) {\r\n        ~~~~  ^\r\n[ 80%] Building C object src/nvim/CMakeFiles/nvim_bin.dir/message.c.o\r\n3 errors generated.\r\nmake[2]: *** [src/nvim/CMakeFiles/nvim_bin.dir/mbyte.c.o] Error 1\r\nmake[2]: *** Waiting for unfinished jobs....\r\nmake[1]: *** [src/nvim/CMakeFiles/nvim_bin.dir/all] Error 2\r\nmake: *** [all] Error 2\r\n```\r\nlatest master fails to build on macosx 14.6  please advise , thanks!",
            "created_at": "2024-09-04T13:01:39Z",
            "html_url": "https://github.com/neovim/neovim/issues/30249#issuecomment-2328969803",
            "id": 2328969803,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30249",
            "node_id": "IC_kwDOAPphoM6K0UJL",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2328969803/reactions"
            },
            "updated_at": "2024-09-04T13:12:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2328969803",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41779116?v=4",
                "events_url": "https://api.github.com/users/ssh352/events{/privacy}",
                "followers_url": "https://api.github.com/users/ssh352/followers",
                "following_url": "https://api.github.com/users/ssh352/following{/other_user}",
                "gists_url": "https://api.github.com/users/ssh352/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ssh352",
                "id": 41779116,
                "login": "ssh352",
                "node_id": "MDQ6VXNlcjQxNzc5MTE2",
                "organizations_url": "https://api.github.com/users/ssh352/orgs",
                "received_events_url": "https://api.github.com/users/ssh352/received_events",
                "repos_url": "https://api.github.com/users/ssh352/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ssh352/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ssh352/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ssh352"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/30249/comments",
    "created_at": "2024-09-03T13:24:52Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/30249/events",
    "html_url": "https://github.com/neovim/neovim/issues/30249",
    "id": 2502880922,
    "labels": [
        {
            "color": "e6e6e6",
            "default": false,
            "description": "issues that are closed as usage questions",
            "id": 77997478,
            "name": "closed:question",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3OA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/closed:question"
        },
        {
            "color": "e6e6e6",
            "default": false,
            "description": "packaging and distributing Nvim to users",
            "id": 124686703,
            "name": "distribution",
            "node_id": "MDU6TGFiZWwxMjQ2ODY3MDM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/distribution"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/30249/labels{/name}",
    "locked": true,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6VLu6a",
    "number": 30249,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 1,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/neovim/neovim/issues/30249/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/30249/timeline",
    "title": "Brew install from HEAD error: no member named 'ambiguous_width' in 'struct utf8proc_property_struct'",
    "updated_at": "2024-09-04T13:29:20Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/30249",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/134025?v=4",
        "events_url": "https://api.github.com/users/bellini666/events{/privacy}",
        "followers_url": "https://api.github.com/users/bellini666/followers",
        "following_url": "https://api.github.com/users/bellini666/following{/other_user}",
        "gists_url": "https://api.github.com/users/bellini666/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/bellini666",
        "id": 134025,
        "login": "bellini666",
        "node_id": "MDQ6VXNlcjEzNDAyNQ==",
        "organizations_url": "https://api.github.com/users/bellini666/orgs",
        "received_events_url": "https://api.github.com/users/bellini666/received_events",
        "repos_url": "https://api.github.com/users/bellini666/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/bellini666/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/bellini666/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/bellini666"
    }
}