{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nThe neovim lsp client default capabilities [does not include](https://github.com/neovim/neovim/blob/cbad7f8c21abae1f8aeacee0d171f0eca8790564/runtime/lua/vim/lsp/protocol.lua#L842) `workspace.didChangeConfiguration` however it [does send](https://github.com/neovim/neovim/blob/cbad7f8c21abae1f8aeacee0d171f0eca8790564/runtime/lua/vim/lsp.lua#L1448) the `workspace/didChangeConfiguration` notification after init.\r\n\r\nFor some language servers, the notification sent after init is ignored because the capability is not advertised so the server's handlers aren't setup.\r\n\r\nThis problem was detected on https://github.com/dev-cycles/contextive/pull/55 which uses the .NET OmniSharp language server library.  The library provides automatic server-side in-memory on-demand access to settings provided via didChangeNotification, but only if the client capability is advertised.\n\n### Steps to reproduce\n\nStart a language client with a settings property and TRACE level diagnostics.\r\nConfirm the logs indicate that `workspace.didChangeConfiguration` client capability is undefined.\r\nSince the issue is an integration issue, the problem will only be seen with a language server that is strict about not handling messages for capabilities that are not advertised - as noted above, if a language server is built in .NET using the OmniSharp library, the automatic configuration cache does not work.\r\n\r\n\r\n\n\n### Expected behavior\n\nSince the client does send the `workspace/didChangeConfiguration` notification, to be spec compliant it should advertise that it supports the `workspace.didChangeConfiguration` capability.\r\n\r\nI appreciate this may seem odd, since in fact, the client does not support on the fly changes to the configuration values,  but since it is using the capability to initialize server caches on startup, it does need to advertise the capability, even if it doesn't go on to actually make use of it during the remainder of the run time.\n\n### Neovim version (nvim -v)\n\nNVIM v0.10.0-dev-9af03bc\n\n### Vim (not Nvim) behaves the same?\n\nno, does not have LSP support\n\n### Operating system/version\n\nDebian GNU/Linux 11 (bullseye)\n\n### Terminal name/version\n\nGNOME Terminal v3.44.0\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\nappimage",
    "closed_at": "2023-11-13T18:53:53Z",
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/26026/comments",
    "created_at": "2023-11-13T09:55:16Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/26026/events",
    "html_url": "https://github.com/neovim/neovim/issues/26026",
    "id": 1990283911,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/26026/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 181,
        "created_at": "2023-02-02T14:11:43Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
            "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
            "followers_url": "https://api.github.com/users/bfredl/followers",
            "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
            "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/bfredl",
            "id": 1363104,
            "login": "bfredl",
            "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
            "organizations_url": "https://api.github.com/users/bfredl/orgs",
            "received_events_url": "https://api.github.com/users/bfredl/received_events",
            "repos_url": "https://api.github.com/users/bfredl/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/bfredl"
        },
        "description": "",
        "due_on": "2024-03-01T08:00:00Z",
        "html_url": "https://github.com/neovim/neovim/milestone/36",
        "id": 8997654,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/36/labels",
        "node_id": "MI_kwDOAPphoM4AiUsW",
        "number": 36,
        "open_issues": 131,
        "state": "open",
        "title": "0.10",
        "updated_at": "2023-11-13T21:43:50Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/36"
    },
    "node_id": "I_kwDOAPphoM52oVKH",
    "number": 26026,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/26026/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/26026/timeline",
    "title": "LSP: client capabilities does not include `didChangeConfiguration`, but a `didChangeConfiguration` notification is sent automatically after init",
    "updated_at": "2023-11-13T18:53:53Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/26026",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/11002331?v=4",
        "events_url": "https://api.github.com/users/chrissimon-au/events{/privacy}",
        "followers_url": "https://api.github.com/users/chrissimon-au/followers",
        "following_url": "https://api.github.com/users/chrissimon-au/following{/other_user}",
        "gists_url": "https://api.github.com/users/chrissimon-au/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/chrissimon-au",
        "id": 11002331,
        "login": "chrissimon-au",
        "node_id": "MDQ6VXNlcjExMDAyMzMx",
        "organizations_url": "https://api.github.com/users/chrissimon-au/orgs",
        "received_events_url": "https://api.github.com/users/chrissimon-au/received_events",
        "repos_url": "https://api.github.com/users/chrissimon-au/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/chrissimon-au/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/chrissimon-au/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/chrissimon-au"
    }
}