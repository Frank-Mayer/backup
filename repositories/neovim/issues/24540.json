{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\r\n\r\nI am developing go language.\r\n\r\nIn go language, I am using gopls as LSP Server, and when I tried to use 'go to implementation' in neovim through several plugins such as vim-go and coc, I found that tag stack does not work normally. I kept testing to find the cause, and eventually found that vim.lsp.buf.implentation in neovim is an error.\r\nI used the same plugin in vim and the tag stack worked fine in the same situation.\r\n\r\nI found that if there is only one implementation of the interface that is the target of the 'go to implementation', the tag stack works fine, but if there is more than one implementation, it jumps to that location, but the tag stack does not stack.\r\n\r\nThe 'go to definition' works fine, which makes sense when you think about it. I would like the tag stack to work fine for the jump behavior for 2 or more implementations.\r\n\r\n### Steps to reproduce using \"nvim -u minimal_init.lua\"\r\n\r\nlocal pattern = 'go' \r\nlocal cmd = {'gopls'}\r\n-- Add files/folders here that indicate the root of a project\r\nlocal root_markers = {'.git', '.editorconfig'}\r\n-- Change to table with settings if required\r\nlocal settings = vim.empty_dict()\r\n\r\nvim.api.nvim_create_autocmd('FileType', {\r\n▏ pattern = pattern,\r\n▏ callback = function(args)\r\n▏ ▏ local match = vim.fs.find(root_markers, { path = args.file, upward = true })[1]\r\n▏ ▏ local root_dir = match and vim.fn.fnamemodify(match, ':p:h') or nil\r\n▏ ▏ vim.lsp.start({\r\n▏ ▏ ▏ name = 'bugged-ls',\r\n▏ ▏ ▏ cmd = cmd,\r\n▏ ▏ ▏ root_dir = root_dir,\r\n▏ ▏ ▏ settings = settings\r\n▏ ▏ })\r\n▏ end\r\n})\r\n\r\n\r\n### Expected behavior\r\n\r\nStoring in the tag stack normally\r\n\r\n### Neovim version (nvim -v)\r\n\r\nNVIM v0.9.1\r\n\r\n### Language server name/version\r\n\r\ngolang.org/x/tools/gopls v0.13.1\r\n\r\n### Operating system/version\r\n\r\nmac osx 13.4.1 ventura\r\n\r\n### Log file\r\n\r\n_No response_",
    "closed_at": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/24540/comments",
    "created_at": "2023-08-03T12:34:25Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/24540/events",
    "html_url": "https://github.com/neovim/neovim/issues/24540",
    "id": 1834976246,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/24540/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 569,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk"
        },
        "description": "Low priority. Not planned for the current target, may be reassigned.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 415,
        "state": "open",
        "title": "backlog",
        "updated_at": "2023-08-04T00:06:59Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM5tX4P2",
    "number": 24540,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/24540/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/24540/timeline",
    "title": "vim.lsp.buf.implementation doesn't push to tag stack.",
    "updated_at": "2023-08-03T13:53:26Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/24540",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/2032376?v=4",
        "events_url": "https://api.github.com/users/newro/events{/privacy}",
        "followers_url": "https://api.github.com/users/newro/followers",
        "following_url": "https://api.github.com/users/newro/following{/other_user}",
        "gists_url": "https://api.github.com/users/newro/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/newro",
        "id": 2032376,
        "login": "newro",
        "node_id": "MDQ6VXNlcjIwMzIzNzY=",
        "organizations_url": "https://api.github.com/users/newro/orgs",
        "received_events_url": "https://api.github.com/users/newro/received_events",
        "repos_url": "https://api.github.com/users/newro/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/newro/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/newro/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/newro"
    }
}