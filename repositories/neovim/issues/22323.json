{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Describe the bug\n\nI wrote a plugin to enable language features for code embedded in other documents (e.g. markdown code blocks) by maintaining hidden buffers with only the language content and relaying language server requests to those hidden buffers. This enables things like autocompletion, go to definition and hover documentation.\r\n\r\nBut hover documentation will be broken by https://github.com/neovim/neovim/commit/cfdf5e6f372928c11a2b1459b14c4c2de5f69c51 because it explicitly disables hovers that come from buffers other than the current one.\n\n### Steps to reproduce\n\nSee https://github.com/quarto-dev/quarto-nvim/issues/32\n\n### Expected behavior\n\nHovers from other buffers can still be shown. Some form of opt-in or opt-out via a flag is necessary to serve both usecases.\n\n### Neovim version (nvim -v)\n\nv0.9.0-dev-974+g631775c05d\n\n### Vim (not Nvim) behaves the same?\n\nno\n\n### Operating system/version\n\nlinux\n\n### Terminal name/version\n\nkitty\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\napt",
    "closed_at": "2024-10-31T10:35:17Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
        "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
        "followers_url": "https://api.github.com/users/lewis6991/followers",
        "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
        "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/lewis6991",
        "id": 7904185,
        "login": "lewis6991",
        "node_id": "MDQ6VXNlcjc5MDQxODU=",
        "organizations_url": "https://api.github.com/users/lewis6991/orgs",
        "received_events_url": "https://api.github.com/users/lewis6991/received_events",
        "repos_url": "https://api.github.com/users/lewis6991/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/lewis6991",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "use `api.nvim_buf_call` can allow you run the function in a target buffer.",
            "created_at": "2023-02-19T09:54:36Z",
            "html_url": "https://github.com/neovim/neovim/issues/22323#issuecomment-1435942856",
            "id": 1435942856,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22323",
            "node_id": "IC_kwDOAPphoM5Vlr_I",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1435942856/reactions"
            },
            "updated_at": "2023-02-19T09:55:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1435942856",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "This does allow me to open up the hover, but the hover won't close again (due to being executed in another buffer) and it breaks the other lsp requests I am handling like go to defintion.\r\n\r\nThe cleanest solution would be a different solution to https://github.com/neovim/neovim/commit/cfdf5e6f372928c11a2b1459b14c4c2de5f69c51 , as this makes hovers handle differently from other lsp requests and introduces arbitrary constraints. I will try to come up with something as well. In its current form I think this is a regression.",
            "created_at": "2023-02-19T10:10:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/22323#issuecomment-1435946274",
            "id": 1435946274,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22323",
            "node_id": "IC_kwDOAPphoM5Vls0i",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1435946274/reactions"
            },
            "updated_at": "2023-02-19T10:10:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1435946274",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/17450586?v=4",
                "events_url": "https://api.github.com/users/jmbuhr/events{/privacy}",
                "followers_url": "https://api.github.com/users/jmbuhr/followers",
                "following_url": "https://api.github.com/users/jmbuhr/following{/other_user}",
                "gists_url": "https://api.github.com/users/jmbuhr/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jmbuhr",
                "id": 17450586,
                "login": "jmbuhr",
                "node_id": "MDQ6VXNlcjE3NDUwNTg2",
                "organizations_url": "https://api.github.com/users/jmbuhr/orgs",
                "received_events_url": "https://api.github.com/users/jmbuhr/received_events",
                "repos_url": "https://api.github.com/users/jmbuhr/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jmbuhr/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jmbuhr/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jmbuhr",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "also why you don't try rewrite the default handler in your local ?\r\n\r\n```lua\r\nvim.lsp.handler['textDocument/hover'] = function(_, result)\r\n  --your logic.\r\nend\r\n```\r\n\r\nor send the request by yourself by using `lsp.buf_request` `lsp.buf_request_all`",
            "created_at": "2023-02-19T10:12:33Z",
            "html_url": "https://github.com/neovim/neovim/issues/22323#issuecomment-1435946786",
            "id": 1435946786,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22323",
            "node_id": "IC_kwDOAPphoM5Vls8i",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1435946786/reactions"
            },
            "updated_at": "2023-02-19T10:13:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1435946786",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Thanks for the suggestion! But won't this break or not work for users that configured their handlers e.g. to use a certain type of border for hover windows?\r\n\r\nI think the default handler shouldn't make an assumption about the buffer, since all the other handlers don't do so either (this is handled by the request and response content). The commit I linked that introduces this assumption also mentions that it is a workaround for which we would eventually need a better solution. So I would prefer to not release it in in its current form to not break uses of the api. Otherwise I'll end up with a workaround around a workaround in my plugin.",
            "created_at": "2023-02-19T12:18:33Z",
            "html_url": "https://github.com/neovim/neovim/issues/22323#issuecomment-1435973788",
            "id": 1435973788,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22323",
            "node_id": "IC_kwDOAPphoM5Vlzic",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1435973788/reactions"
            },
            "updated_at": "2023-02-19T12:18:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1435973788",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/17450586?v=4",
                "events_url": "https://api.github.com/users/jmbuhr/events{/privacy}",
                "followers_url": "https://api.github.com/users/jmbuhr/followers",
                "following_url": "https://api.github.com/users/jmbuhr/following{/other_user}",
                "gists_url": "https://api.github.com/users/jmbuhr/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jmbuhr",
                "id": 17450586,
                "login": "jmbuhr",
                "node_id": "MDQ6VXNlcjE3NDUwNTg2",
                "organizations_url": "https://api.github.com/users/jmbuhr/orgs",
                "received_events_url": "https://api.github.com/users/jmbuhr/received_events",
                "repos_url": "https://api.github.com/users/jmbuhr/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jmbuhr/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jmbuhr/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jmbuhr",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "like i said you can use `lsp.buf_request` or `lsp.buf_request_all` to do it in your plugin.  it not break any handlers. \r\n\r\n```lua\r\n vim.lsp.buf_request(buffernumber, 'textDocument/hover', params, function(_, result, ctx)\r\n         -- your logic\r\n end)\r\n```\r\n\r\nexamplay what i do in lspsaga https://github.com/glepnir/lspsaga.nvim/blob/main/lua/lspsaga/hover.lua",
            "created_at": "2023-02-19T12:22:37Z",
            "html_url": "https://github.com/neovim/neovim/issues/22323#issuecomment-1435974710",
            "id": 1435974710,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22323",
            "node_id": "IC_kwDOAPphoM5Vlzw2",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1435974710/reactions"
            },
            "updated_at": "2023-02-19T12:22:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1435974710",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Thanks you for your helpful comments! I am indeed already using that and have now added my own handler to handle hovers (just a copy and past of the nvim one without the buffer check) here: https://github.com/jmbuhr/otter.nvim/pull/19/commits/f29a9f303a956c266c19d36598f3f0edb6a23bbc. This works, but can be improved.\r\n\r\nBy handling the hover in the plugin I am loosing user configuration done with `vim.lsp.with`, e.g. a user may have something like this in their config:\r\n\r\n```lua\r\n    vim.lsp.handlers[\"textDocument/hover\"] = vim.lsp.with(vim.lsp.handlers.hover,\r\n      { border = ....... })\r\n```\r\n\r\nI tried various debugging functions to get the `config` out of the overwritten handler function, but was unable to to so.\r\nDo you know if this is possible? Thanks for all your help!",
            "created_at": "2023-02-19T16:22:06Z",
            "html_url": "https://github.com/neovim/neovim/issues/22323#issuecomment-1436030701",
            "id": 1436030701,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22323",
            "node_id": "IC_kwDOAPphoM5VmBbt",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 1,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1436030701/reactions"
            },
            "updated_at": "2023-02-19T16:22:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1436030701",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/17450586?v=4",
                "events_url": "https://api.github.com/users/jmbuhr/events{/privacy}",
                "followers_url": "https://api.github.com/users/jmbuhr/followers",
                "following_url": "https://api.github.com/users/jmbuhr/following{/other_user}",
                "gists_url": "https://api.github.com/users/jmbuhr/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jmbuhr",
                "id": 17450586,
                "login": "jmbuhr",
                "node_id": "MDQ6VXNlcjE3NDUwNTg2",
                "organizations_url": "https://api.github.com/users/jmbuhr/orgs",
                "received_events_url": "https://api.github.com/users/jmbuhr/received_events",
                "repos_url": "https://api.github.com/users/jmbuhr/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jmbuhr/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jmbuhr/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jmbuhr",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> I tried various debugging functions to get the `config` out of the overwritten handler function, but was unable to to so.\r\n\r\nWith https://github.com/neovim/neovim/pull/22598 you could sniff the `config` via:\r\n\r\n```lua\r\nvim.on_fun(vim.lsp.handlers, 'textDocument/hover', function(...)\r\n  return function(err, result, ctx, config)\r\n    -- `config` passed here is the user-specified config.\r\n  end, ...\r\nend)\r\n```\r\n\r\nthis is kinda hacky though.",
            "created_at": "2023-03-10T12:32:16Z",
            "html_url": "https://github.com/neovim/neovim/issues/22323#issuecomment-1463740183",
            "id": 1463740183,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22323",
            "node_id": "IC_kwDOAPphoM5XPucX",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1463740183/reactions"
            },
            "updated_at": "2023-03-12T03:39:33Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1463740183",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "`vim.lsp.handlers[\"textDocument/hover\"]` is no longer used. (see #30935).\n\nTo address the requirement here, one needs to implement a custom version of `vim.lsp.buf.hover()`.",
            "created_at": "2024-10-31T10:35:17Z",
            "html_url": "https://github.com/neovim/neovim/issues/22323#issuecomment-2449537118",
            "id": 2449537118,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22323",
            "node_id": "IC_kwDOAPphoM6SAPhe",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2449537118/reactions"
            },
            "updated_at": "2024-10-31T10:35:51Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2449537118",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> To address the requirement here, one needs to implement a custom version of `vim.lsp.buf.hover()`.\n\nDo we have (or do you plan to) guidance on that in the docs?",
            "created_at": "2024-10-31T11:07:21Z",
            "html_url": "https://github.com/neovim/neovim/issues/22323#issuecomment-2449594002",
            "id": 2449594002,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22323",
            "node_id": "IC_kwDOAPphoM6SAdaS",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2449594002/reactions"
            },
            "updated_at": "2024-10-31T11:07:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2449594002",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "The request here is pretty advanced. It's essentially to enable LSP features in injected languages. What kind of guidance could we suggest? I would have thought it should be fairly straightforward for anyone working in this area to use our source code for guidance.",
            "created_at": "2024-10-31T11:32:17Z",
            "html_url": "https://github.com/neovim/neovim/issues/22323#issuecomment-2449635163",
            "id": 2449635163,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22323",
            "node_id": "IC_kwDOAPphoM6SAndb",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2449635163/reactions"
            },
            "updated_at": "2024-10-31T11:32:17Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2449635163",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "My initial request in this thread is no longer required, because I implemented `otter.nvim` (https://github.com/jmbuhr/otter.nvim) as being a language server itself. So because it is it's own client-server-combo the results now do look like they come from the current buffer, even though behind the scenes the requests were forwarded to a different buffer.",
            "created_at": "2024-10-31T12:10:10Z",
            "html_url": "https://github.com/neovim/neovim/issues/22323#issuecomment-2449697549",
            "id": 2449697549,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22323",
            "node_id": "IC_kwDOAPphoM6SA2sN",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 1,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2449697549/reactions"
            },
            "updated_at": "2024-10-31T12:14:58Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2449697549",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/17450586?v=4",
                "events_url": "https://api.github.com/users/jmbuhr/events{/privacy}",
                "followers_url": "https://api.github.com/users/jmbuhr/followers",
                "following_url": "https://api.github.com/users/jmbuhr/following{/other_user}",
                "gists_url": "https://api.github.com/users/jmbuhr/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jmbuhr",
                "id": 17450586,
                "login": "jmbuhr",
                "node_id": "MDQ6VXNlcjE3NDUwNTg2",
                "organizations_url": "https://api.github.com/users/jmbuhr/orgs",
                "received_events_url": "https://api.github.com/users/jmbuhr/received_events",
                "repos_url": "https://api.github.com/users/jmbuhr/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jmbuhr/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jmbuhr/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jmbuhr",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Schema for how this works: https://github.com/jmbuhr/otter.nvim?tab=readme-ov-file#a-group-of-otters-is-called-a-raft",
            "created_at": "2024-10-31T12:12:03Z",
            "html_url": "https://github.com/neovim/neovim/issues/22323#issuecomment-2449700879",
            "id": 2449700879,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22323",
            "node_id": "IC_kwDOAPphoM6SA3gP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2449700879/reactions"
            },
            "updated_at": "2024-10-31T12:12:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2449700879",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/17450586?v=4",
                "events_url": "https://api.github.com/users/jmbuhr/events{/privacy}",
                "followers_url": "https://api.github.com/users/jmbuhr/followers",
                "following_url": "https://api.github.com/users/jmbuhr/following{/other_user}",
                "gists_url": "https://api.github.com/users/jmbuhr/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jmbuhr",
                "id": 17450586,
                "login": "jmbuhr",
                "node_id": "MDQ6VXNlcjE3NDUwNTg2",
                "organizations_url": "https://api.github.com/users/jmbuhr/orgs",
                "received_events_url": "https://api.github.com/users/jmbuhr/received_events",
                "repos_url": "https://api.github.com/users/jmbuhr/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jmbuhr/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jmbuhr/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jmbuhr",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I believe it should still work with https://github.com/neovim/neovim/pull/30935 because otter will modify the response before passing it on to the (new) neovim hover handler and pretend it is coming from the current buffer:\n\nhttps://github.com/jmbuhr/otter.nvim/blob/ca9ce67d0399380b659923381b58d174344c9ee7/lua/otter/lsp/handlers.lua#L21-L37\n\n```lua\n--- see e.g.\n--- vim.lsp.handlers.hover(_, result, ctx, conf)\n---@param err lsp.ResponseError?\n---@param response lsp.Hover\n---@param ctx lsp.HandlerContext\nM[ms.textDocument_hover] = function(err, response, ctx, conf)\n  if not response then\n    -- no response, nothing to do\n    return\n  end\n\n\n  -- pretend the response is coming from the main buffer\n  ctx.params.textDocument.uri = ctx.params.otter.main_uri\n\n\n  -- pass modified response on to the default handler\n  return err, response, ctx, conf\nend\n```\n\nThanks for tagging me (or this issue) on this! I will test this with the latest nightly.",
            "created_at": "2024-10-31T12:21:59Z",
            "html_url": "https://github.com/neovim/neovim/issues/22323#issuecomment-2449718521",
            "id": 2449718521,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22323",
            "node_id": "IC_kwDOAPphoM6SA7z5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2449718521/reactions"
            },
            "updated_at": "2024-10-31T12:21:59Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2449718521",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/17450586?v=4",
                "events_url": "https://api.github.com/users/jmbuhr/events{/privacy}",
                "followers_url": "https://api.github.com/users/jmbuhr/followers",
                "following_url": "https://api.github.com/users/jmbuhr/following{/other_user}",
                "gists_url": "https://api.github.com/users/jmbuhr/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jmbuhr",
                "id": 17450586,
                "login": "jmbuhr",
                "node_id": "MDQ6VXNlcjE3NDUwNTg2",
                "organizations_url": "https://api.github.com/users/jmbuhr/orgs",
                "received_events_url": "https://api.github.com/users/jmbuhr/received_events",
                "repos_url": "https://api.github.com/users/jmbuhr/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jmbuhr/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jmbuhr/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jmbuhr",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Tested and still works :)",
            "created_at": "2024-10-31T13:41:55Z",
            "html_url": "https://github.com/neovim/neovim/issues/22323#issuecomment-2449873445",
            "id": 2449873445,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/22323",
            "node_id": "IC_kwDOAPphoM6SBhol",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 1,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2449873445/reactions"
            },
            "updated_at": "2024-10-31T13:41:55Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2449873445",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/17450586?v=4",
                "events_url": "https://api.github.com/users/jmbuhr/events{/privacy}",
                "followers_url": "https://api.github.com/users/jmbuhr/followers",
                "following_url": "https://api.github.com/users/jmbuhr/following{/other_user}",
                "gists_url": "https://api.github.com/users/jmbuhr/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jmbuhr",
                "id": 17450586,
                "login": "jmbuhr",
                "node_id": "MDQ6VXNlcjE3NDUwNTg2",
                "organizations_url": "https://api.github.com/users/jmbuhr/orgs",
                "received_events_url": "https://api.github.com/users/jmbuhr/received_events",
                "repos_url": "https://api.github.com/users/jmbuhr/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jmbuhr/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jmbuhr/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jmbuhr",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 14,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/22323/comments",
    "created_at": "2023-02-19T09:29:14Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/22323/events",
    "html_url": "https://github.com/neovim/neovim/issues/22323",
    "id": 1590621065,
    "labels": [
        {
            "color": "f9d0c4",
            "default": false,
            "description": "wrong behavior that was introduced in a previous commit (please bisect)",
            "id": 619474658,
            "name": "bug-regression",
            "node_id": "MDU6TGFiZWw2MTk0NzQ2NTg=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-regression"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        },
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue has been tracked to a specific commit",
            "id": 1481421490,
            "name": "has:bisected",
            "node_id": "MDU6TGFiZWwxNDgxNDIxNDkw",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:bisected"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/22323/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 92,
        "created_at": "2023-12-07T23:09:35Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": "2024-12-25T08:00:00Z",
        "html_url": "https://github.com/neovim/neovim/milestone/41",
        "id": 10283236,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/41/labels",
        "node_id": "MI_kwDOAPphoM4AnOjk",
        "number": 41,
        "open_issues": 54,
        "state": "open",
        "title": "0.11",
        "updated_at": "2024-10-31T12:07:28Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/41"
    },
    "node_id": "I_kwDOAPphoM5ezvOJ",
    "number": 22323,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/22323/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "not_planned",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/22323/timeline",
    "title": "(re-)allow hovers from language servers of other buffers",
    "updated_at": "2024-10-31T13:41:57Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/22323",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/17450586?v=4",
        "events_url": "https://api.github.com/users/jmbuhr/events{/privacy}",
        "followers_url": "https://api.github.com/users/jmbuhr/followers",
        "following_url": "https://api.github.com/users/jmbuhr/following{/other_user}",
        "gists_url": "https://api.github.com/users/jmbuhr/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/jmbuhr",
        "id": 17450586,
        "login": "jmbuhr",
        "node_id": "MDQ6VXNlcjE3NDUwNTg2",
        "organizations_url": "https://api.github.com/users/jmbuhr/orgs",
        "received_events_url": "https://api.github.com/users/jmbuhr/received_events",
        "repos_url": "https://api.github.com/users/jmbuhr/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/jmbuhr/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jmbuhr/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/jmbuhr",
        "user_view_type": "public"
    }
}