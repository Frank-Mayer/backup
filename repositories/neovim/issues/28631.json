{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nWorking with PHP in neovim, I found a consistent code folding issue. System is Alma Linux 8.7.\r\n\r\nThe key to replicating this issue is the position of a multiline comment.\r\n\r\nWhen a multiline comment exists on the first line of a class method, when the method is folded, then copied, then pasted to another location in the file, when you attempt to fold the newly-pasted method, the entire class folds instead. At this point it is impossible to fold any single method.\r\n\r\n```\r\npublic function MyFun() {\r\n  /*\r\n    This function will not fold properly after copying/pasting the entire method (while folded).\r\n  */\r\n\r\n  return 0;\r\n\r\n}\r\n```\r\n\r\nThe only solution is the insert a blank line between method name and the multiline comment. Once this is done, then the method, and all other methods now fold properly.\r\n\r\n```\r\npublic function MyFun() {\r\n\r\n  /*\r\n    By inserting the blank line above. this method will now begin folding without folding the entire class.\r\n  */\r\n\r\n  return 0;\r\n\r\n}\r\n```\r\n\r\n\n\n### Steps to reproduce\n\n1. Create a class in PHP containing 3 methods. All methods should contain a multiline comment (/* comment (newline) comment */) as the first line in the method.\r\n2. Fold the second method.\r\n3. Copy the second method.\r\n4. Paste the second method to another location in the file. The method pastes in the \"open\" state (as expected).\r\n5. Fold the newly-pasted method. The entire class folds instead of only the newly-pasted method.\n\n### Expected behavior\n\nWe expect the newly-pasted method to fold without folding the entire class.\r\n\r\nInserting a blank line between method name and the multiline comment restores normal folding behavior.\n\n### Neovim version (nvim -v)\n\n0.10.0-dev-2930+g47ba96a6b\n\n### Vim (not Nvim) behaves the same?\n\nNo, neovim only\n\n### Operating system/version\n\nAlma Linux 8.7\n\n### Terminal name/version\n\nSecureCRT 9.4.1\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\ndnf package mgr",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Where does the folding come from? Please follow the instruction for \"Steps to reproduce\":\r\n> Use the provided [minimal reproduction template](https://github.com/neovim/neovim/blob/master/contrib/minimal.lua) to create a minimal configuration. After you fill it out with necessary information, run with `nvim --clean -u minimal.lua`.",
            "created_at": "2024-05-03T22:25:49Z",
            "html_url": "https://github.com/neovim/neovim/issues/28631#issuecomment-2093838960",
            "id": 2093838960,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28631",
            "node_id": "IC_kwDOAPphoM58zXJw",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2093838960/reactions"
            },
            "updated_at": "2024-05-03T22:25:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2093838960",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "NONE",
            "body": "The folding comes from TreeSitter I think.\r\n\r\nI'm not a neovim config expert by any means, but I followed instructions for installing neovim with TreeSitter, Packer, and the RosePine color scheme and have had this issue consistently from the beginning.",
            "created_at": "2024-05-04T05:46:30Z",
            "html_url": "https://github.com/neovim/neovim/issues/28631#issuecomment-2094036778",
            "id": 2094036778,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28631",
            "node_id": "IC_kwDOAPphoM580Hcq",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2094036778/reactions"
            },
            "updated_at": "2024-05-04T05:46:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2094036778",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31843495?v=4",
                "events_url": "https://api.github.com/users/russtanner/events{/privacy}",
                "followers_url": "https://api.github.com/users/russtanner/followers",
                "following_url": "https://api.github.com/users/russtanner/following{/other_user}",
                "gists_url": "https://api.github.com/users/russtanner/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/russtanner",
                "id": 31843495,
                "login": "russtanner",
                "node_id": "MDQ6VXNlcjMxODQzNDk1",
                "organizations_url": "https://api.github.com/users/russtanner/orgs",
                "received_events_url": "https://api.github.com/users/russtanner/received_events",
                "repos_url": "https://api.github.com/users/russtanner/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/russtanner/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/russtanner/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/russtanner"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Sorry, but we need a complete, minimal, config we can test with `nvim --clean -u test.lua`.",
            "created_at": "2024-05-04T08:00:03Z",
            "html_url": "https://github.com/neovim/neovim/issues/28631#issuecomment-2094070162",
            "id": 2094070162,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/28631",
            "node_id": "IC_kwDOAPphoM580PmS",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2094070162/reactions"
            },
            "updated_at": "2024-05-04T08:00:03Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2094070162",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/28631/comments",
    "created_at": "2024-05-03T22:11:45Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/28631/events",
    "html_url": "https://github.com/neovim/neovim/issues/28631",
    "id": 2278497690,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "FBCA04",
            "default": false,
            "description": "waiting for reply from the author",
            "id": 248229439,
            "name": "needs:response",
            "node_id": "MDU6TGFiZWwyNDgyMjk0Mzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:response"
        },
        {
            "color": "FBCA04",
            "default": false,
            "description": "We need minimal steps to reproduce the issue",
            "id": 298863445,
            "name": "needs:repro",
            "node_id": "MDU6TGFiZWwyOTg4NjM0NDU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/needs:repro"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 1799626557,
            "name": "treesitter",
            "node_id": "MDU6TGFiZWwxNzk5NjI2NTU3",
            "url": "https://api.github.com/repos/neovim/neovim/labels/treesitter"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 2598645343,
            "name": "folds",
            "node_id": "MDU6TGFiZWwyNTk4NjQ1MzQz",
            "url": "https://api.github.com/repos/neovim/neovim/labels/folds"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/28631/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6Hzx2a",
    "number": 28631,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/28631/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/28631/timeline",
    "title": "Folding Breaks When First Line of Method Is A Multiline Comment",
    "updated_at": "2024-05-04T08:00:09Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/28631",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/31843495?v=4",
        "events_url": "https://api.github.com/users/russtanner/events{/privacy}",
        "followers_url": "https://api.github.com/users/russtanner/followers",
        "following_url": "https://api.github.com/users/russtanner/following{/other_user}",
        "gists_url": "https://api.github.com/users/russtanner/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/russtanner",
        "id": 31843495,
        "login": "russtanner",
        "node_id": "MDQ6VXNlcjMxODQzNDk1",
        "organizations_url": "https://api.github.com/users/russtanner/orgs",
        "received_events_url": "https://api.github.com/users/russtanner/received_events",
        "repos_url": "https://api.github.com/users/russtanner/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/russtanner/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/russtanner/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/russtanner"
    }
}