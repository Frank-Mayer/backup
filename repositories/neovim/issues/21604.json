{
    "active_lock_reason": null,
    "assignee": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
        "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
        "followers_url": "https://api.github.com/users/bfredl/followers",
        "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
        "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/bfredl",
        "id": 1363104,
        "login": "bfredl",
        "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
        "organizations_url": "https://api.github.com/users/bfredl/orgs",
        "received_events_url": "https://api.github.com/users/bfredl/received_events",
        "repos_url": "https://api.github.com/users/bfredl/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/bfredl"
    },
    "assignees": [
        {
            "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
            "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
            "followers_url": "https://api.github.com/users/bfredl/followers",
            "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
            "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/bfredl",
            "id": 1363104,
            "login": "bfredl",
            "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
            "organizations_url": "https://api.github.com/users/bfredl/orgs",
            "received_events_url": "https://api.github.com/users/bfredl/received_events",
            "repos_url": "https://api.github.com/users/bfredl/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/bfredl"
        }
    ],
    "author_association": "CONTRIBUTOR",
    "body": "### Neovim version (nvim -v)\n\n6ba34e21fee2a81677e8261dfeaf24c8cd320500\n\n### Vim (not Nvim) behaves the same?\n\nno\n\n### Operating system/version\n\nDebian Sid\n\n### Terminal name/version\n\nKitty 0.26.5-2, XTerm 377-1\n\n### $TERM environment variable\n\nxterm-kitty for kitty, xterm-256color for xterm\n\n### Installation\n\nfrom source\n\n### How to reproduce the issue\n\nHaving `~/tmp/noice-min.lua` (from https://github.com/folke/noice.nvim/wiki/Minimal-%60init.lua%60-to-Reproduce-an-Issue + modifications) with\r\n```lua\r\nlocal root = vim.fn.fnamemodify(\"./.repro\", \":p\")\r\n\r\n-- set stdpaths to use .repro\r\nfor _, name in ipairs({ \"config\", \"data\", \"state\", \"cache\" }) do\r\n  vim.env[(\"XDG_%s_HOME\"):format(name:upper())] = root .. \"/\" .. name\r\nend\r\n\r\n-- bootstrap lazy\r\nlocal lazypath = root .. \"/plugins/lazy.nvim\"\r\nif not vim.loop.fs_stat(lazypath) then\r\n  vim.fn.system({\r\n    \"git\",\r\n    \"clone\",\r\n    \"--filter=blob:none\",\r\n    \"--single-branch\",\r\n    \"https://github.com/folke/lazy.nvim.git\",\r\n    lazypath,\r\n  })\r\nend\r\nvim.opt.runtimepath:prepend(lazypath)\r\n\r\n-- install plugins\r\nlocal plugins = {\r\n  \"folke/tokyonight.nvim\",\r\n  {\r\n    \"folke/noice.nvim\",\r\n    dependencies = {\r\n      \"MunifTanjim/nui.nvim\",\r\n      \"rcarriga/nvim-notify\",\r\n    },\r\n  },\r\n}\r\nrequire(\"lazy\").setup(plugins, {\r\n  root = root .. \"/plugins\",\r\n})\r\n\r\n-- add anything else here\r\nvim.opt.termguicolors = true\r\nvim.cmd([[colorscheme tokyonight]])\r\nrequire(\"noice\").setup({\r\n  messages = {\r\n    view = 'mini',\r\n    view_search = false,\r\n    view_error = 'mini',\r\n    view_warn = 'mini',\r\n  },\r\n  notify = {\r\n    enabled = true,\r\n    view = 'mini',\r\n  },\r\n  lsp = {\r\n    signature = {\r\n      enabled = false,\r\n    },\r\n    hover = {\r\n      enabled = false,\r\n    }\r\n  },\r\n  views = {\r\n    mini = {\r\n      timeout = 5000,\r\n    },\r\n  },\r\n})\r\n\r\nvim.keymap.set('c', '<C-x>', function()\r\n  require('noice').redirect(vim.fn.getcmdline())\r\n  vim.api.nvim_input('<esc>')\r\nend, { desc = 'Redirect Cmdline' })\r\n```\r\n`local.mk` used to build with \r\n```makefile\r\nCMAKE_BUILD_TYPE=RelWithDebInfo\r\nCMAKE_EXTRA_FLAGS=\"-DCMAKE_INSTALL_PREFIX=${HOME}/tmp/nvim-from-src\"\r\nCMAKE_EXTRA_FLAGS += -DENABLE_LIBINTL=OFF\r\n```\r\nrun \r\n```\r\n~/tmp/nvim-from-src/bin/nvim -u ~/tmp/noice-min.lua\r\n```\r\ntype `:version` and submit with `C-x`. \n\n### Expected behavior\n\nNvim does not crash.\n\n### Actual behavior\n\nNvim crashes without message on xterm and kitty, works as expected with nvim-qt.\r\n\r\n",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "```\r\n=================================================================\r\n==111737==ERROR: AddressSanitizer: heap-use-after-free on address 0x6110000cdb80 at pc 0x55a3905bf5f0 bp 0x7ffd7ad902f0 sp 0x7ffd7ad902e8\r\nREAD of size 4 at 0x6110000cdb80 thread T0\r\n    #0 0x55a3905bf5ef in msgpack_rpc_from_object **/src/nvim/msgpack_rpc/helpers.c:337:23\r\n    #1 0x55a3905c48cd in msgpack_rpc_from_array **/src/nvim/msgpack_rpc/helpers.c:420:5\r\n    #2 0x55a38f96a563 in push_call **/src/nvim/api/ui.c:646:3\r\n    #3 0x55a38f9642a6 in remote_ui_event **/src/nvim/api/ui.c:1088:3\r\n    #4 0x55a390dc5543 in ui_composed_call_event **/build/src/nvim/auto/ui_events_call.generated.h:250:3\r\n    #5 0x55a390dfa468 in ui_comp_event **/src/nvim/ui_compositor.c:724:5\r\n    #6 0x55a390dbbb93 in ui_call_event **/build/src/nvim/auto/ui_events_call.generated.h:245:3\r\n    #7 0x55a390dd2ae6 in ui_call_msg_show **/build/src/nvim/auto/ui_events_call.generated.h:457:3\r\n    #8 0x55a39051009b in msg_ext_ui_flush **/src/nvim/message.c:3171:5\r\n    #9 0x55a3904fa3fe in msg_end **/src/nvim/message.c:3158:3\r\n    #10 0x55a3904f5fed in msg_attr_keep **/src/nvim/message.c:351:12\r\n    #11 0x55a3904f5818 in msg **/src/nvim/message.c:222:10\r\n    #12 0x55a390e6a843 in list_version **/src/nvim/version.c:2726:3\r\n    #13 0x55a390e6a826 in ex_version **/src/nvim/version.c:2591:5\r\n    #14 0x55a38ff9b92f in execute_cmd0 **/src/nvim/ex_docmd.c:1621:7\r\n    #15 0x55a38ff77caa in do_one_cmd **/src/nvim/ex_docmd.c:2280:7\r\n    #16 0x55a38ff6858e in do_cmdline **/src/nvim/ex_docmd.c:579:20\r\n    #17 0x55a39099aabf in source_using_linegetter **/src/nvim/runtime.c:1823:16\r\n    #18 0x55a39099a331 in do_source_str **/src/nvim/runtime.c:1874:10\r\n    #19 0x55a38f9a3006 in nvim_exec **/src/nvim/api/vimscript.c:72:3\r\n    #20 0x55a38f795bef in nlua_api_nvim_exec **/build/src/nvim/auto/lua_api_c_bindings.generated.c:5487:22\r\n    #21 0x55a39116b1d5 in lj_BC_FUNCC (**/build/bin/nvim+0x27671d5) (BuildId: dbd31e0d8b09a9a93c57146cc66a610cbc5ce86e)\r\n    #22 0x55a391154eda in lua_pcall **/.deps/build/src/luajit/src/lj_api.c:1145:12\r\n    #23 0x55a3902b842d in nlua_pcall **/src/nvim/lua/executor.c:153:16\r\n    #24 0x55a3902baa7f in nlua_call_ref **/src/nvim/lua/executor.c:1531:7\r\n    #25 0x55a39013c3ed in map_execute_lua **/src/nvim/getchar.c:3041:3\r\n    #26 0x55a390023862 in command_line_execute **/src/nvim/ex_getln.c:1144:7\r\n    #27 0x55a390c0b8f7 in state_enter **/src/nvim/state.c:99:26\r\n    #28 0x55a3900097a8 in command_line_enter **/src/nvim/ex_getln.c:822:3\r\n    #29 0x55a3900059dc in getcmdline **/src/nvim/ex_getln.c:2603:10\r\n    #30 0x55a39000e678 in getexline **/src/nvim/ex_getln.c:2848:18\r\n    #31 0x55a38ff6787f in do_cmdline **/src/nvim/ex_docmd.c:514:30\r\n    #32 0x55a39060e89b in nv_colon **/src/nvim/normal.c:3221:20\r\n    #33 0x55a3905faad5 in normal_execute **/src/nvim/normal.c:1181:3\r\n    #34 0x55a390c0b8f7 in state_enter **/src/nvim/state.c:99:26\r\n    #35 0x55a3905de3b0 in normal_enter **/src/nvim/normal.c:478:3\r\n    #36 0x55a3902e9680 in main **/src/nvim/main.c:617:3\r\n    #37 0x7f0f3f7f728f  (/usr/lib/libc.so.6+0x2328f) (BuildId: 1e94beb079e278ac4f2c8bce1f53091548ea1584)\r\n    #38 0x7f0f3f7f7349 in __libc_start_main (/usr/lib/libc.so.6+0x23349) (BuildId: 1e94beb079e278ac4f2c8bce1f53091548ea1584)\r\n    #39 0x55a38f660d44 in _start /build/glibc/src/glibc/csu/../sysdeps/x86_64/start.S:115\r\n\r\n0x6110000cdb80 is located 0 bytes inside of 256-byte region [0x6110000cdb80,0x6110000cdc80)\r\nfreed by thread T0 here:\r\n    #0 0x55a38f714c02 in __interceptor_free.part.0 asan_malloc_linux.cpp.o\r\n    #1 0x55a3904d25c4 in xfree **/src/nvim/memory.c:137:3\r\n    #2 0x55a38f93b11f in api_free_array **/src/nvim/api/private/helpers.c:582:3\r\n    #3 0x55a390510142 in msg_ext_ui_flush **/src/nvim/message.c:3177:5\r\n    #4 0x55a390ddc47c in ui_flush **/src/nvim/ui.c:514:3\r\n    #5 0x55a38ffd1eb8 in ex_redraw **/src/nvim/ex_docmd.c:6133:3\r\n    #6 0x55a38ff9b92f in execute_cmd0 **/src/nvim/ex_docmd.c:1621:7\r\n    #7 0x55a38ff77caa in do_one_cmd **/src/nvim/ex_docmd.c:2280:7\r\n    #8 0x55a38ff6858e in do_cmdline **/src/nvim/ex_docmd.c:579:20\r\n    #9 0x55a38ff6d6a0 in do_cmdline_cmd **/src/nvim/ex_docmd.c:282:10\r\n    #10 0x55a38f9a3b9e in nvim_command **/src/nvim/api/vimscript.c:122:3\r\n    #11 0x55a38f7962f4 in nlua_api_nvim_command **/build/src/nvim/auto/lua_api_c_bindings.generated.c:5522:3\r\n    #12 0x55a39116b1d5 in lj_BC_FUNCC (**/build/bin/nvim+0x27671d5) (BuildId: dbd31e0d8b09a9a93c57146cc66a610cbc5ce86e)\r\n\r\npreviously allocated by thread T0 here:\r\n    #0 0x55a38f714d4a in __interceptor_realloc.part.0 asan_malloc_linux.cpp.o\r\n    #1 0x55a3904d27f2 in xrealloc **/src/nvim/memory.c:173:15\r\n    #2 0x55a39052380b in msg_ext_emit_chunk **/src/nvim/message.c:2128:3\r\n    #3 0x55a39050ff70 in msg_ext_ui_flush **/src/nvim/message.c:3169:3\r\n    #4 0x55a3904fa3fe in msg_end **/src/nvim/message.c:3158:3\r\n    #5 0x55a3904f5fed in msg_attr_keep **/src/nvim/message.c:351:12\r\n    #6 0x55a3904f5818 in msg **/src/nvim/message.c:222:10\r\n    #7 0x55a390e6a843 in list_version **/src/nvim/version.c:2726:3\r\n    #8 0x55a390e6a826 in ex_version **/src/nvim/version.c:2591:5\r\n    #9 0x55a38ff9b92f in execute_cmd0 **/src/nvim/ex_docmd.c:1621:7\r\n    #10 0x55a38ff77caa in do_one_cmd **/src/nvim/ex_docmd.c:2280:7\r\n    #11 0x55a38ff6858e in do_cmdline **/src/nvim/ex_docmd.c:579:20\r\n    #12 0x55a39099aabf in source_using_linegetter **/src/nvim/runtime.c:1823:16\r\n    #13 0x55a39099a331 in do_source_str **/src/nvim/runtime.c:1874:10\r\n    #14 0x55a38f9a3006 in nvim_exec **/src/nvim/api/vimscript.c:72:3\r\n    #15 0x55a38f795bef in nlua_api_nvim_exec **/build/src/nvim/auto/lua_api_c_bindings.generated.c:5487:22\r\n    #16 0x55a39116b1d5 in lj_BC_FUNCC (**/build/bin/nvim+0x27671d5) (BuildId: dbd31e0d8b09a9a93c57146cc66a610cbc5ce86e)\r\n\r\nSUMMARY: AddressSanitizer: heap-use-after-free **/src/nvim/msgpack_rpc/helpers.c:337:23 in msgpack_rpc_from_object\r\nShadow bytes around the buggy address:\r\n  0x0c2280011b20: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n  0x0c2280011b30: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n  0x0c2280011b40: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd\r\n  0x0c2280011b50: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n  0x0c2280011b60: fd fd fd fd fd fd fd fd fa fa fa fa fa fa fa fa\r\n=>0x0c2280011b70:[fd]fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n  0x0c2280011b80: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n  0x0c2280011b90: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd\r\n  0x0c2280011ba0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\n  0x0c2280011bb0: fd fd fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x0c2280011bc0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\r\nShadow byte legend (one shadow byte represents 8 application bytes):\r\n  Addressable:           00\r\n  Partially addressable: 01 02 03 04 05 06 07 \r\n  Heap left redzone:       fa\r\n  Freed heap region:       fd\r\n  Stack left redzone:      f1\r\n  Stack mid redzone:       f2\r\n  Stack right redzone:     f3\r\n  Stack after return:      f5\r\n  Stack use after scope:   f8\r\n  Global redzone:          f9\r\n  Global init order:       f6\r\n  Poisoned by user:        f7\r\n  Container overflow:      fc\r\n  Array cookie:            ac\r\n  Intra object redzone:    bb\r\n  ASan internal:           fe\r\n  Left alloca redzone:     ca\r\n  Right alloca redzone:    cb\r\n==111737==ABORTING\r\n```",
            "created_at": "2022-12-31T22:17:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/21604#issuecomment-1368286865",
            "id": 1368286865,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21604",
            "node_id": "IC_kwDOAPphoM5RjmaR",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368286865/reactions"
            },
            "updated_at": "2022-12-31T22:17:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368286865",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Hmm, I can reproduce this crash with neovim-qt as well.",
            "created_at": "2022-12-31T22:26:14Z",
            "html_url": "https://github.com/neovim/neovim/issues/21604#issuecomment-1368287715",
            "id": 1368287715,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21604",
            "node_id": "IC_kwDOAPphoM5Rjmnj",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368287715/reactions"
            },
            "updated_at": "2022-12-31T22:26:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368287715",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Yes. root cause is not related to TUI (but internal inconsistency of ext_messages memory handling)",
            "created_at": "2022-12-31T22:42:30Z",
            "html_url": "https://github.com/neovim/neovim/issues/21604#issuecomment-1368289239",
            "id": 1368289239,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21604",
            "node_id": "IC_kwDOAPphoM5Rjm_X",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368289239/reactions"
            },
            "updated_at": "2022-12-31T22:42:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368289239",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
                "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
                "followers_url": "https://api.github.com/users/bfredl/followers",
                "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
                "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/bfredl",
                "id": 1363104,
                "login": "bfredl",
                "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
                "organizations_url": "https://api.github.com/users/bfredl/orgs",
                "received_events_url": "https://api.github.com/users/bfredl/received_events",
                "repos_url": "https://api.github.com/users/bfredl/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/bfredl"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@zeertzjq do you have master version of nvim-qt? I tested it on equalsraf/neovim-qt@2b4cb87d66f3ab7b282a5736c2e7fe79aa77959e\r\n\r\n\r\nhttps://user-images.githubusercontent.com/11404453/210156897-cbd0fa21-04bb-482a-bee8-63b9d0a1577d.mp4\r\n\r\nLooks strange (and `:qa` closes only one window) but with no crash for me. ",
            "created_at": "2022-12-31T22:44:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/21604#issuecomment-1368289383",
            "id": 1368289383,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21604",
            "node_id": "IC_kwDOAPphoM5RjnBn",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368289383/reactions"
            },
            "updated_at": "2022-12-31T22:44:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368289383",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "This can simply be reproduced by:\r\n```lua\r\nlocal ns = vim.api.nvim_create_namespace('foo')\r\nlocal opts = {ext_messages = true, ext_cmdline = true}\r\nvim.ui_attach(ns, opts, function()\r\n  vim.cmd('redraw')\r\nend)\r\nvim.cmd('version')\r\n```",
            "created_at": "2023-01-01T04:49:29Z",
            "html_url": "https://github.com/neovim/neovim/issues/21604#issuecomment-1368351584",
            "id": 1368351584,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21604",
            "node_id": "IC_kwDOAPphoM5Rj2Ng",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 7,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 7,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368351584/reactions"
            },
            "updated_at": "2023-01-01T04:49:29Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1368351584",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "NONE",
            "body": "Would be very nice to have a fix for this because I think that this makes it impossible to do `diB` for example.",
            "created_at": "2023-01-02T17:49:26Z",
            "html_url": "https://github.com/neovim/neovim/issues/21604#issuecomment-1369117681",
            "id": 1369117681,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21604",
            "node_id": "IC_kwDOAPphoM5RmxPx",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1369117681/reactions"
            },
            "updated_at": "2023-01-02T17:49:26Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1369117681",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/50843046?v=4",
                "events_url": "https://api.github.com/users/TornaxO7/events{/privacy}",
                "followers_url": "https://api.github.com/users/TornaxO7/followers",
                "following_url": "https://api.github.com/users/TornaxO7/following{/other_user}",
                "gists_url": "https://api.github.com/users/TornaxO7/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/TornaxO7",
                "id": 50843046,
                "login": "TornaxO7",
                "node_id": "MDQ6VXNlcjUwODQzMDQ2",
                "organizations_url": "https://api.github.com/users/TornaxO7/orgs",
                "received_events_url": "https://api.github.com/users/TornaxO7/received_events",
                "repos_url": "https://api.github.com/users/TornaxO7/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/TornaxO7/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/TornaxO7/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/TornaxO7"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "On `v0.9.0-dev-619+gc889f7543 ` I get crash with\r\n```\r\nsrc/nvim/rbuffer.c:144: rbuffer_consumed: Assertion `count && count <= buf->size' failed.\r\n```",
            "created_at": "2023-01-05T11:51:45Z",
            "html_url": "https://github.com/neovim/neovim/issues/21604#issuecomment-1372120310",
            "id": 1372120310,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21604",
            "node_id": "IC_kwDOAPphoM5RyOT2",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1372120310/reactions"
            },
            "updated_at": "2023-01-05T11:51:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1372120310",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
                "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
                "followers_url": "https://api.github.com/users/przepompownia/followers",
                "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
                "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/przepompownia",
                "id": 11404453,
                "login": "przepompownia",
                "node_id": "MDQ6VXNlcjExNDA0NDUz",
                "organizations_url": "https://api.github.com/users/przepompownia/orgs",
                "received_events_url": "https://api.github.com/users/przepompownia/received_events",
                "repos_url": "https://api.github.com/users/przepompownia/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/przepompownia"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Now, this script\r\n```lua\r\nlocal ns = vim.api.nvim_create_namespace('foo')\r\nlocal opts = {ext_messages = true, ext_cmdline = true}\r\nvim.ui_attach(ns, opts, function()\r\n  vim.cmd('redraw')\r\nend)\r\nvim.cmd('version')\r\n```\r\n- Crashes with ``src/nvim/rbuffer.c:144: rbuffer_consumed: Assertion `count && count <= buf->size' failed`` with TUI\r\n- Gives a lot of `Received unexpected redraw arguments, expecting list QVariant(QByteArray, \"redraw\")` with nvim-qt\r\n- With ASAN the heap-use-after-free still happens",
            "created_at": "2023-01-05T23:20:05Z",
            "html_url": "https://github.com/neovim/neovim/issues/21604#issuecomment-1372918925",
            "id": 1372918925,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21604",
            "node_id": "IC_kwDOAPphoM5R1RSN",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1372918925/reactions"
            },
            "updated_at": "2023-06-30T01:32:11Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1372918925",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "fyi: these segfaults are now fixed by a work-around in Noice. The `vim.ui_attach` handler now returns `true` for **TUI**.\r\n\r\nhttps://github.com/folke/noice.nvim/commit/176ec31026ec4baf64638fba1a180701257380f1",
            "created_at": "2023-01-14T14:07:12Z",
            "html_url": "https://github.com/neovim/neovim/issues/21604#issuecomment-1382749371",
            "id": 1382749371,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21604",
            "node_id": "IC_kwDOAPphoM5SaxS7",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1382749371/reactions"
            },
            "updated_at": "2023-01-14T14:08:28Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1382749371",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/292349?v=4",
                "events_url": "https://api.github.com/users/folke/events{/privacy}",
                "followers_url": "https://api.github.com/users/folke/followers",
                "following_url": "https://api.github.com/users/folke/following{/other_user}",
                "gists_url": "https://api.github.com/users/folke/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/folke",
                "id": 292349,
                "login": "folke",
                "node_id": "MDQ6VXNlcjI5MjM0OQ==",
                "organizations_url": "https://api.github.com/users/folke/orgs",
                "received_events_url": "https://api.github.com/users/folke/received_events",
                "repos_url": "https://api.github.com/users/folke/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/folke/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/folke/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/folke"
            }
        }
    ],
    "comments": 9,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/21604/comments",
    "created_at": "2022-12-31T22:02:11Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/21604/events",
    "html_url": "https://github.com/neovim/neovim/issues/21604",
    "id": 1515213654,
    "labels": [
        {
            "color": "c7def8",
            "default": false,
            "description": null,
            "id": 242522707,
            "name": "rpc",
            "node_id": "MDU6TGFiZWwyNDI1MjI3MDc=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/rpc"
        },
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue contains minimal reproducing steps",
            "id": 435851959,
            "name": "has:repro",
            "node_id": "MDU6TGFiZWw0MzU4NTE5NTk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:repro"
        },
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue contains a stacktrace/ASAN log",
            "id": 435854079,
            "name": "has:backtrace",
            "node_id": "MDU6TGFiZWw0MzU4NTQwNzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:backtrace"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "issue reporting a crash or segfault",
            "id": 435854234,
            "name": "bug-crash",
            "node_id": "MDU6TGFiZWw0MzU4NTQyMzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-crash"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "stdlib",
            "id": 573222693,
            "name": "lua",
            "node_id": "MDU6TGFiZWw1NzMyMjI2OTM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lua"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "UI extensibility, events, protocol",
            "id": 640132777,
            "name": "ui-extensibility",
            "node_id": "MDU6TGFiZWw2NDAxMzI3Nzc=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/ui-extensibility"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "UI messages, log messages",
            "id": 5637083595,
            "name": "messages",
            "node_id": "LA_kwDOAPphoM8AAAABT_8Ryw",
            "url": "https://api.github.com/repos/neovim/neovim/labels/messages"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/21604/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 1,
        "created_at": "2023-12-07T23:09:35Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk"
        },
        "description": "",
        "due_on": "2024-10-31T07:00:00Z",
        "html_url": "https://github.com/neovim/neovim/milestone/41",
        "id": 10283236,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/41/labels",
        "node_id": "MI_kwDOAPphoM4AnOjk",
        "number": 41,
        "open_issues": 23,
        "state": "open",
        "title": "0.11",
        "updated_at": "2024-04-15T12:35:03Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/41"
    },
    "node_id": "I_kwDOAPphoM5aUFNW",
    "number": 21604,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 3,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 2,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 5,
        "url": "https://api.github.com/repos/neovim/neovim/issues/21604/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/21604/timeline",
    "title": "Crash with :redraw from vim.ui_attach() callback",
    "updated_at": "2024-04-15T12:20:53Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/21604",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/11404453?v=4",
        "events_url": "https://api.github.com/users/przepompownia/events{/privacy}",
        "followers_url": "https://api.github.com/users/przepompownia/followers",
        "following_url": "https://api.github.com/users/przepompownia/following{/other_user}",
        "gists_url": "https://api.github.com/users/przepompownia/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/przepompownia",
        "id": 11404453,
        "login": "przepompownia",
        "node_id": "MDQ6VXNlcjExNDA0NDUz",
        "organizations_url": "https://api.github.com/users/przepompownia/orgs",
        "received_events_url": "https://api.github.com/users/przepompownia/received_events",
        "repos_url": "https://api.github.com/users/przepompownia/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/przepompownia/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/przepompownia/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/przepompownia"
    }
}