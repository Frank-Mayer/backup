{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nIn both Neovim 0.10.1 and the latest nightly, when the command `%bd` is executed, and there is a floating window in a different tab, the process crashes with a SIGSEGV.\r\n\r\nThe problem can be reproduced with these commands:\r\n\r\n```vim\r\n:LspInfo\r\n:tabnew\r\n:%bd\r\n```\r\n\n\n### Steps to reproduce\n\n1. Install Neovim nightly with the lspconfig plugin in an empty HOME.\r\n\r\n    ```console\r\n    $ HOME=$(mktemp -d)\r\n\r\n    $ cd\r\n\r\n    $ wget https://github.com/neovim/neovim/releases/download/nightly/nvim-linux64.tar.gz\r\n\r\n    $ tar xf nvim-linux64.tar.gz\r\n\r\n    $ cd nvim-linux64\r\n\r\n    $ bin/nvim --version\r\n    NVIM v0.11.0-dev-789+g0ba388847\r\n    Build type: RelWithDebInfo\r\n    LuaJIT 2.1.1724512491\r\n\r\n    $ git clone https://github.com/neovim/nvim-lspconfig ~/.config/nvim/pack/nvim/start/nvim-lspconfig\r\n\r\n    $ bin/nvim\r\n    ```\r\n\r\n\r\n2. In Neovim, execute these Ex commands.\r\n\r\n    ```vim\r\n    :LspInfo\r\n    :tabnew\r\n    :%bd\r\n    ```\r\n\r\nAfter `:%bd`, the program crashes with a `SIGSEGV`.\r\n\r\n\n\n### Expected behavior\n\nDelete all buffers without crashing.\n\n### Neovim version (nvim -v)\n\nv0.11.0-dev-789+g0ba388847\n\n### Vim (not Nvim) behaves the same?\n\nNo\n\n### Operating system/version\n\nDebian 12\n\n### Terminal name/version\n\nAlacritty (git)\n\n### $TERM environment variable\n\nalacritty\n\n### Installation\n\nPrebuilt package and nixpkgs",
    "closed_at": "2024-09-19T23:09:08Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
        "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
        "followers_url": "https://api.github.com/users/zeertzjq/followers",
        "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
        "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/zeertzjq",
        "id": 35768171,
        "login": "zeertzjq",
        "node_id": "MDQ6VXNlcjM1NzY4MTcx",
        "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
        "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
        "repos_url": "https://api.github.com/users/zeertzjq/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/zeertzjq"
    },
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "### Address Sanitizer\r\n\r\nI built Neovim with the address sanitizer. It throws this error after `:%bd`:\r\n\r\n```\r\n../neovim/src/nvim/window.c:3198:25: runtime error: null pointer passed as argument 1, which is declared to never be null\r\n../neovim/build/include/window.h.generated.h:49:42: note: nonnull attribute specified here\r\n    #0 0x55e228468e2f in winframe_find_altwin ../neovim/src/nvim/window.c:3198:15\r\n    #1 0x55e228454e28 in winframe_remove ../neovim/src/nvim/window.c:3135:15\r\n    #2 0x55e228465da5 in win_free_mem ../neovim/src/nvim/window.c:3059:10\r\n    #3 0x55e228462b00 in win_close_othertab ../neovim/src/nvim/window.c:3037:3\r\n    #4 0x55e2284612d2 in close_windows ../neovim/src/nvim/window.c:2497:11\r\n    #5 0x55e226daa51e in do_buffer_ext ../neovim/src/nvim/buffer.c:1396:7\r\n    #6 0x55e226db213c in do_buffer ../neovim/src/nvim/buffer.c:1577:10\r\n    #7 0x55e226db192b in do_bufdel ../neovim/src/nvim/buffer.c:1095:18\r\n    #8 0x55e2273c514e in ex_bunload ../neovim/src/nvim/ex_docmd.c:4494:17\r\n    #9 0x55e22739d718 in execute_cmd0 ../neovim/src/nvim/ex_docmd.c:1714:7\r\n    #10 0x55e227378f4a in do_one_cmd ../neovim/src/nvim/ex_docmd.c:2358:7\r\n    #11 0x55e22736a223 in do_cmdline ../neovim/src/nvim/ex_docmd.c:667:20\r\n    #12 0x55e227a6014f in nv_colon ../neovim/src/nvim/normal.c:3176:18\r\n    #13 0x55e227a4b6f4 in normal_execute ../neovim/src/nvim/normal.c:1234:3\r\n    #14 0x55e228047745 in state_enter ../neovim/src/nvim/state.c:100:26\r\n    #15 0x55e227a28bf2 in normal_enter ../neovim/src/nvim/normal.c:520:3\r\n    #16 0x55e22774214b in main ../neovim/src/nvim/main.c:660:3\r\n    #17 0x7f9740fe91c9  (/lib/x86_64-linux-gnu/libc.so.6+0x271c9) (BuildId: 22d638056fb5a842787ab92b025c3ecdf4bef3ba)\r\n    #18 0x7f9740fe9284 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x27284) (BuildId: 22d638056fb5a842787ab92b025c3ecdf4bef3ba)\r\n    #19 0x55e226a4dfd0 in _start (/usr/local/bin/nvim+0xceffd0) (BuildId: 966beea3ccf05b0f49ed5abb32c2587606063e07)\r\n\r\nSUMMARY: UndefinedBehaviorSanitizer: undefined-behavior ../neovim/src/nvim/window.c:3198:25 in\r\n```\r\n",
            "created_at": "2024-09-19T20:11:45Z",
            "html_url": "https://github.com/neovim/neovim/issues/30425#issuecomment-2362089356",
            "id": 2362089356,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30425",
            "node_id": "IC_kwDOAPphoM6Myp-M",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2362089356/reactions"
            },
            "updated_at": "2024-09-19T20:11:45Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2362089356",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/37484?v=4",
                "events_url": "https://api.github.com/users/ayosec/events{/privacy}",
                "followers_url": "https://api.github.com/users/ayosec/followers",
                "following_url": "https://api.github.com/users/ayosec/following{/other_user}",
                "gists_url": "https://api.github.com/users/ayosec/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ayosec",
                "id": 37484,
                "login": "ayosec",
                "node_id": "MDQ6VXNlcjM3NDg0",
                "organizations_url": "https://api.github.com/users/ayosec/orgs",
                "received_events_url": "https://api.github.com/users/ayosec/received_events",
                "repos_url": "https://api.github.com/users/ayosec/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ayosec/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ayosec/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ayosec"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Duplicate of #21409",
            "created_at": "2024-09-19T23:09:08Z",
            "html_url": "https://github.com/neovim/neovim/issues/30425#issuecomment-2362352238",
            "id": 2362352238,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/30425",
            "node_id": "IC_kwDOAPphoM6MzqJu",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2362352238/reactions"
            },
            "updated_at": "2024-09-19T23:09:08Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2362352238",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/30425/comments",
    "created_at": "2024-09-19T20:11:27Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/30425/events",
    "html_url": "https://github.com/neovim/neovim/issues/30425",
    "id": 2537281539,
    "labels": [
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue contains a stacktrace/ASAN log",
            "id": 435854079,
            "name": "has:backtrace",
            "node_id": "MDU6TGFiZWw0MzU4NTQwNzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:backtrace"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "issue reporting a crash or segfault",
            "id": 435854234,
            "name": "bug-crash",
            "node_id": "MDU6TGFiZWw0MzU4NTQyMzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-crash"
        },
        {
            "color": "e6e6e6",
            "default": false,
            "description": "issues that are closed as duplicates of other issues",
            "id": 3221613764,
            "name": "closed:duplicate",
            "node_id": "MDU6TGFiZWwzMjIxNjEzNzY0",
            "url": "https://api.github.com/repos/neovim/neovim/labels/closed:duplicate"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "floating windows",
            "id": 3234818716,
            "name": "floatwin",
            "node_id": "MDU6TGFiZWwzMjM0ODE4NzE2",
            "url": "https://api.github.com/repos/neovim/neovim/labels/floatwin"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/30425/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6XO9gD",
    "number": 30425,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/30425/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/30425/timeline",
    "title": "SIGSEGV after deleting buffers with a floating window in a different tab.",
    "updated_at": "2024-09-19T23:09:19Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/30425",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/37484?v=4",
        "events_url": "https://api.github.com/users/ayosec/events{/privacy}",
        "followers_url": "https://api.github.com/users/ayosec/followers",
        "following_url": "https://api.github.com/users/ayosec/following{/other_user}",
        "gists_url": "https://api.github.com/users/ayosec/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/ayosec",
        "id": 37484,
        "login": "ayosec",
        "node_id": "MDQ6VXNlcjM3NDg0",
        "organizations_url": "https://api.github.com/users/ayosec/orgs",
        "received_events_url": "https://api.github.com/users/ayosec/received_events",
        "repos_url": "https://api.github.com/users/ayosec/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/ayosec/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ayosec/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/ayosec"
    }
}