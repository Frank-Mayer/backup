{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nI have repro it on several commits on neovim master branch, and `nvim-treesitter/nvim-treesitter#main` on several old commits, and on my personal laptop and workplace's laptop.\r\n\r\nNeovim will freeze and have high cpu when typing `{` on the first line in tsx file.\r\n\r\nCheckout the video:\r\n\r\n\r\nhttps://github.com/neovim/neovim/assets/8279858/8051afe2-c834-42ae-957c-f17a122d094a\r\n\r\n\n\n### Steps to reproduce\n\nminimal config:\r\n\r\n```lua\r\nfor name, url in pairs {\r\n  -- ADD PLUGINS _NECESSARY_ TO REPRODUCE THE ISSUE, e.g:\r\n  -- some_plugin = 'https://github.com/author/plugin.nvim'\r\n  ['nvim-treesitter'] = 'https://github.com/nvim-treesitter/nvim-treesitter'\r\n} do\r\n  local install_path = vim.fn.fnamemodify('nvim_issue/' .. name, ':p')\r\n  if vim.fn.isdirectory(install_path) == 0 then\r\n    vim.fn.system { 'git', 'clone', '--depth=1', '--branch=main', url, install_path }\r\n  end\r\n  vim.opt.runtimepath:append(install_path)\r\nend\r\n\r\nrequire('nvim-treesitter').setup {\r\n  ensure_installed = { 'javascript',\r\n    'typescript', 'tsx' },\r\n\r\n  auto_install = false,\r\n}\r\n```\r\nmake sure `tsx` is installed.\r\n\r\ncode sample `demo.tsx`:\r\n\r\n```tsx\r\nimport { Vue, Component, Prop } from 'vue-property-decorator'\r\n\r\n@Component({\r\n  name: 'NotMatter',\r\n  components: {},\r\n})\r\nexport default class PositionCard extends Vue {\r\n  @Prop({\r\n    type: Object,\r\n    default: () => ({}),\r\n  })\r\n  positionInfo!: any\r\n  // computes\r\n  // hooks\r\n  created() {}\r\n  mounted() {}\r\n  // methods\r\n  // views\r\n  render() {\r\n    return (\r\n      <div class=\"PositionCard py-4 px-4 h-auto\">\r\n        <div class=\"text-lg font-semibold overflow-ellipsis overflow-hidden whitespace-nowrap\">\r\n          {this.positionInfo.positionName}\r\n        </div>\r\n        <div class=\"text-sm\">\r\n          <div v-show={this.positionInfo.companyName} class=\"inline-block\">\r\n            {this.positionInfo.companyName}\r\n          </div>{' '}\r\n          <div v-show={this.positionInfo.department} class=\"inline-block\">\r\n            | {this.positionInfo.department}\r\n          </div>\r\n        </div>\r\n        <div\r\n          v-show={this.positionInfo?.tags?.length}\r\n          class=\"PositionCard__tags mt-1\"\r\n        >\r\n          {this.positionInfo.tags?.map((item: string) => (\r\n            <div class=\"tag\">{item}</div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n```\r\n\r\nI think this part code `</div>{' '}` triggered this freeze issue.\r\n\r\nsteps:\r\n\r\n1. `nvim -u init.lua demo.tsx`\r\n2. run `vim.treesitter.start(0)`\r\n3. on first line of tsx code, start typing `onClick={`.\n\n### Expected behavior\n\nDo not freeze on tsx code.\n\n### Neovim version (nvim -v)\n\nNVIM v0.10.0-dev-build-20231109-187-gd667e0e41\n\n### Vim (not Nvim) behaves the same?\n\nno\n\n### Operating system/version\n\nmacOs\n\n### Terminal name/version\n\nkitty\n\n### $TERM environment variable\n\nfish\n\n### Installation\n\nbuild",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "I've been having this issue as well on Gentoo writing Dart code.\r\nI have to kill the processes and recover the swap to continue working.\r\nIt's usually consistently replicable, so if it freezes when putting a curly in a specific spot, and if you re-open and put it in the same spot, it'll freeze again.\r\n\r\n```none\r\n$ nvim --version\r\nNVIM v0.9.4\r\nBuild type: Release\r\nLuaJIT 2.1.0-beta3\r\nCompilation: /usr/bin/x86_64-pc-linux-gnu-gcc  -Wall -Wextra -pedantic -Wno-unused-parameter -Wstrict-prototypes -std=gnu99 -Wshadow -Wconversion -Wvla -Wdouble-promotion -Wmissing-noreturn -Wmissing-format-attribute -Wmissing-prototypes -fno-common -Wno-unused-result -Wimplicit-fallthrough -fdiagnostics-color=always -fstack-protector-strong -DUNIT_TESTING -DINCLUDE_GENERATED_DECLARATIONS -D_GNU_SOURCE -I/usr/include/luajit-2.1 -I/usr/include -I/usr/include -I/var/tmp/portage/app-editors/neovim-0.9.4/work/neovim-0.9.4_build/src/nvim/auto -I/var/tmp/portage/app-editors/neovim-0.9.4/work/neovim-0.9.4_build/include -I/var/tmp/portage/app-editors/neovim-0.9.4/work/neovim-0.9.4_build/cmake.config -I/var/tmp/portage/app-editors/neovim-0.9.4/work/neovim-0.9.4/src -I/usr/include -I/usr/include -I/usr/include -I/usr/include -I/usr/include -I/usr/include -I/usr/include\r\n```",
            "created_at": "2023-12-03T17:27:16Z",
            "html_url": "https://github.com/neovim/neovim/issues/26134#issuecomment-1837545384",
            "id": 1837545384,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26134",
            "node_id": "IC_kwDOAPphoM5threo",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1837545384/reactions"
            },
            "updated_at": "2023-12-03T22:09:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1837545384",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/14015672?v=4",
                "events_url": "https://api.github.com/users/kroppt/events{/privacy}",
                "followers_url": "https://api.github.com/users/kroppt/followers",
                "following_url": "https://api.github.com/users/kroppt/following{/other_user}",
                "gists_url": "https://api.github.com/users/kroppt/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/kroppt",
                "id": 14015672,
                "login": "kroppt",
                "node_id": "MDQ6VXNlcjE0MDE1Njcy",
                "organizations_url": "https://api.github.com/users/kroppt/orgs",
                "received_events_url": "https://api.github.com/users/kroppt/received_events",
                "repos_url": "https://api.github.com/users/kroppt/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/kroppt/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/kroppt/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/kroppt"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/26134/comments",
    "created_at": "2023-11-21T12:07:34Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/26134/events",
    "html_url": "https://github.com/neovim/neovim/issues/26134",
    "id": 2004134831,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "FEF2C0",
            "default": false,
            "description": "issues reporting performance problems",
            "id": 101930601,
            "name": "performance",
            "node_id": "MDU6TGFiZWwxMDE5MzA2MDE=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/performance"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 1799626557,
            "name": "treesitter",
            "node_id": "MDU6TGFiZWwxNzk5NjI2NTU3",
            "url": "https://api.github.com/repos/neovim/neovim/labels/treesitter"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/26134/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM53dKuv",
    "number": 26134,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 1,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/neovim/neovim/issues/26134/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/26134/timeline",
    "title": "neovim freeze on tsx when typing bracket `{` with treesitter highlight enabled.",
    "updated_at": "2023-12-03T22:09:22Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/26134",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8279858?v=4",
        "events_url": "https://api.github.com/users/towry/events{/privacy}",
        "followers_url": "https://api.github.com/users/towry/followers",
        "following_url": "https://api.github.com/users/towry/following{/other_user}",
        "gists_url": "https://api.github.com/users/towry/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/towry",
        "id": 8279858,
        "login": "towry",
        "node_id": "MDQ6VXNlcjgyNzk4NTg=",
        "organizations_url": "https://api.github.com/users/towry/orgs",
        "received_events_url": "https://api.github.com/users/towry/received_events",
        "repos_url": "https://api.github.com/users/towry/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/towry/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/towry/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/towry"
    }
}