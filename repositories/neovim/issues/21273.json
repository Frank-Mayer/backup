{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "body": "- Extract docstrings and C attributes with Treesitter\r\n- Parse Doxygen and Emmylua syntax with a handwritten parser\r\n- Format into vimdoc\r\n- Also ship parsed docs as a Lua file, so other tools (like completion plugins) can easily look up documentation for a particular function\r\n\r\nOne problem is that the C parser neovim ships with can't parse function attributes (`FUNC_API_*`) properly. It parses API functions as a function declaration node with missing semicolon error, then a varying node type for attributes, and lastly the function body as a compound statement. This still can be used to parse all necessary information, but it's relying on invalid syntax. The alternative is to use the https://github.com/nvim-treesitter/tree-sitter-c fork that supports neovim's function attributes.\r\n\r\ncc @justinmk @clason",
    "closed_at": "2024-05-08T10:51:53Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Just to add to that: I just rebased that parser (which we then would want to pull into the neovim org) on latest upstream master, so it looks like maintaining that fork would not take significant effort. The forked parser is also compatible with the currently bundled queries for the upstream parser, so it would be a drop-in replacement.\r\n\r\nThe benefit (besides massively simplifying the `gen_vimdoc` pipeline) would be that we can use standard markdown codeblocks instead of the `<pre>lua` hack we use now (because doxygen will insist on highlighting Markdown codeblocks itself, which breaks the vimdoc generation).",
            "created_at": "2022-12-03T11:48:46Z",
            "html_url": "https://github.com/neovim/neovim/issues/21273#issuecomment-1336142478",
            "id": 1336142478,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21273",
            "node_id": "IC_kwDOAPphoM5Po-qO",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1336142478/reactions"
            },
            "updated_at": "2022-12-03T12:11:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1336142478",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> The benefit ... would be that we can use standard markdown codeblocks instead of the `<pre>lua` hack we use now\r\n\r\nThat definitely will be nice, but it's not mentioned in the main description here. Or does \"EmmyLua\" imply markdown parsing. Helpful to explicitly mention markdown parsing as requirement in any case.\r\n\r\n> Parse Doxygen and Emmylua syntax with a handwritten parser\r\n\r\n\"handwritten\" means what exactly? Does that risk something more complicated than the current Doxygen-based solution?",
            "created_at": "2022-12-04T01:33:09Z",
            "html_url": "https://github.com/neovim/neovim/issues/21273#issuecomment-1336296335",
            "id": 1336296335,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21273",
            "node_id": "IC_kwDOAPphoM5PpkOP",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1336296335/reactions"
            },
            "updated_at": "2022-12-04T01:33:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1336296335",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> \"handwritten\" means what exactly? Does that risk something more complicated than the current Doxygen-based solution?\r\n\r\nJust processing extracted comments in Lua. Doxygen and emmylua commands can be parsed with simple regexes, and in case of doxygen at least we just need to handle the subset that we're actually using. The slightly more complicated part is the general text processing - splitting text into paragraphs, constructing nested lists, text wrapping - but I don't think it's going to be that bad.",
            "created_at": "2022-12-04T12:19:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/21273#issuecomment-1336398413",
            "id": 1336398413,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21273",
            "node_id": "IC_kwDOAPphoM5Pp9JN",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1336398413/reactions"
            },
            "updated_at": "2022-12-04T12:19:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1336398413",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> Doxygen and emmylua commands can be parsed with simple regexes\r\n\r\nThis isn't true as emmylua types used by https://github.com/LuaLS/lua-language-server are very non-trivial to parse and do require a dedicated parser. See #22158",
            "created_at": "2023-02-09T11:26:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/21273#issuecomment-1424036091",
            "id": 1424036091,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21273",
            "node_id": "IC_kwDOAPphoM5U4RD7",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1424036091/reactions"
            },
            "updated_at": "2023-02-09T11:26:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1424036091",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Closed by https://github.com/neovim/neovim/pull/27480",
            "created_at": "2024-05-08T10:51:53Z",
            "html_url": "https://github.com/neovim/neovim/issues/21273#issuecomment-2100303958",
            "id": 2100303958,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/21273",
            "node_id": "IC_kwDOAPphoM59MBhW",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2100303958/reactions"
            },
            "updated_at": "2024-05-08T10:51:53Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2100303958",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        }
    ],
    "comments": 5,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/21273/comments",
    "created_at": "2022-12-03T11:43:00Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/21273/events",
    "html_url": "https://github.com/neovim/neovim/issues/21273",
    "id": 1473947720,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "c5def5",
            "default": true,
            "description": "",
            "id": 84744038,
            "name": "documentation",
            "node_id": "MDU6TGFiZWw4NDc0NDAzOA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/documentation"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 1799626557,
            "name": "treesitter",
            "node_id": "MDU6TGFiZWwxNzk5NjI2NTU3",
            "url": "https://api.github.com/repos/neovim/neovim/labels/treesitter"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/21273/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 420,
        "created_at": "2023-02-02T14:11:43Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1363104?v=4",
            "events_url": "https://api.github.com/users/bfredl/events{/privacy}",
            "followers_url": "https://api.github.com/users/bfredl/followers",
            "following_url": "https://api.github.com/users/bfredl/following{/other_user}",
            "gists_url": "https://api.github.com/users/bfredl/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/bfredl",
            "id": 1363104,
            "login": "bfredl",
            "node_id": "MDQ6VXNlcjEzNjMxMDQ=",
            "organizations_url": "https://api.github.com/users/bfredl/orgs",
            "received_events_url": "https://api.github.com/users/bfredl/received_events",
            "repos_url": "https://api.github.com/users/bfredl/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/bfredl/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/bfredl/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/bfredl"
        },
        "description": "",
        "due_on": "2024-05-12T07:00:00Z",
        "html_url": "https://github.com/neovim/neovim/milestone/36",
        "id": 8997654,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/36/labels",
        "node_id": "MI_kwDOAPphoM4AiUsW",
        "number": 36,
        "open_issues": 7,
        "state": "open",
        "title": "0.10",
        "updated_at": "2024-05-13T19:47:36Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/36"
    },
    "node_id": "I_kwDOAPphoM5X2qhI",
    "number": 21273,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 5,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 5,
        "url": "https://api.github.com/repos/neovim/neovim/issues/21273/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/21273/timeline",
    "title": "Generate docs with treesitter",
    "updated_at": "2024-05-08T10:51:59Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/21273",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
        "events_url": "https://api.github.com/users/ii14/events{/privacy}",
        "followers_url": "https://api.github.com/users/ii14/followers",
        "following_url": "https://api.github.com/users/ii14/following{/other_user}",
        "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/ii14",
        "id": 59243201,
        "login": "ii14",
        "node_id": "MDQ6VXNlcjU5MjQzMjAx",
        "organizations_url": "https://api.github.com/users/ii14/orgs",
        "received_events_url": "https://api.github.com/users/ii14/received_events",
        "repos_url": "https://api.github.com/users/ii14/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/ii14"
    }
}