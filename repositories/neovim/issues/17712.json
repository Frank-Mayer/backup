{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Neovim version (nvim -v)\n\n0.6.1\n\n### Language server name/version\n\nvhdl-tool, vhdl_ls\n\n### Operating system/version\n\nWindows 10 Pro\n\n### Steps to reproduce using \"nvim -u minimal_init.lua\"\n\nMy minimal `init.lua`:\r\n\r\n```lua\r\n-- https://github.com/neovim/nvim-lspconfig/blob/master/test/minimal_init.lua\r\nlocal on_windows = vim.loop.os_uname().version:match 'Windows'\r\n\r\nlocal function join_paths(...)\r\n  local path_sep = on_windows and '\\\\' or '/'\r\n  local result = table.concat({ ... }, path_sep)\r\n  return result\r\nend\r\n\r\n-- Set runtimepath so that .lua files are found when required\r\nvim.cmd [[set runtimepath=$VIMRUNTIME]]\r\n\r\nlocal temp_dir = vim.loop.os_getenv 'USERPROFILE'\r\n\r\nvim.cmd('set packpath=' .. join_paths(temp_dir, 'nvim', 'site'))\r\n\r\nlocal package_root = join_paths(temp_dir, 'nvim', 'site', 'pack')\r\nlocal install_path = join_paths(package_root, 'packer', 'start', 'packer.nvim')\r\nlocal compile_path = join_paths(install_path, 'plugin', 'packer_compiled.lua')\r\n\r\nlocal function load_plugins()\r\n  require('packer').startup {\r\n    {\r\n      'wbthomason/packer.nvim',\r\n      'neovim/nvim-lspconfig',\r\n    },\r\n    config = {\r\n      package_root = package_root,\r\n      compile_path = compile_path,\r\n    },\r\n  }\r\nend\r\n\r\n_G.load_config = function()\r\n  vim.lsp.set_log_level 'trace'\r\n  if vim.fn.has 'nvim-0.5.1' == 1 then\r\n    require('vim.lsp.log').set_format_func(vim.inspect)\r\n  end\r\n  local status_ok, nvim_lsp = pcall(require, \"lspconfig\")\r\n  if not status_ok then\r\n    return\r\n  end\r\n  local on_attach_key_opt = function(_, bufnr)\r\n    local function buf_set_keymap(...)\r\n      vim.api.nvim_buf_set_keymap(bufnr, ...)\r\n    end\r\n    local function buf_set_option(...)\r\n      vim.api.nvim_buf_set_option(bufnr, ...)\r\n    end\r\n\r\n    buf_set_option('omnifunc', 'v:lua.vim.lsp.omnifunc')\r\n\r\n    -- Mappings.\r\n    local opts = { noremap = true, silent = true }\r\n    buf_set_keymap('n', 'gD', '<Cmd>lua vim.lsp.buf.declaration()<CR>', opts)\r\n    buf_set_keymap('n', 'gd', '<Cmd>lua vim.lsp.buf.definition()<CR>', opts)\r\n    buf_set_keymap('n', 'K', '<Cmd>lua vim.lsp.buf.hover()<CR>', opts)\r\n    buf_set_keymap('n', 'gi', '<cmd>lua vim.lsp.buf.implementation()<CR>', opts)\r\n    buf_set_keymap('n', '<C-k>', '<cmd>lua vim.lsp.buf.signature_help()<CR>', opts)\r\n    buf_set_keymap('n', '<space>wa', '<cmd>lua vim.lsp.buf.add_workspace_folder()<CR>', opts)\r\n    buf_set_keymap('n', '<space>wr', '<cmd>lua vim.lsp.buf.remove_workspace_folder()<CR>', opts)\r\n    buf_set_keymap('n', '<space>wl', '<cmd>lua print(vim.inspect(vim.lsp.buf.list_workspace_folders()))<CR>', opts)\r\n    buf_set_keymap('n', '<space>D', '<cmd>lua vim.lsp.buf.type_definition()<CR>', opts)\r\n    buf_set_keymap('n', '<space>rn', '<cmd>lua vim.lsp.buf.rename()<CR>', opts)\r\n    buf_set_keymap('n', 'gr', '<cmd>lua vim.lsp.buf.references()<CR>', opts)\r\n    buf_set_keymap('n', '<space>e', '<cmd>lua vim.lsp.diagnostic.show_line_diagnostics()<CR>', opts)\r\n    buf_set_keymap('n', '[d', '<cmd>lua vim.lsp.diagnostic.goto_prev()<CR>', opts)\r\n    buf_set_keymap('n', ']d', '<cmd>lua vim.lsp.diagnostic.goto_next()<CR>', opts)\r\n    buf_set_keymap('n', '<space>q', '<cmd>lua vim.lsp.diagnostic.set_loclist()<CR>', opts)\r\n  end\r\n\r\n  local lsp_configs = require \"lspconfig.configs\"\r\n\r\n  -- -----------------------------\r\n  -- LSP: vhdl-tool\r\n  -- -----------------------------\r\n  lsp_configs.vhdl_tool = {\r\n    default_config = {\r\n      -- Update the path to vhdl-tool\r\n      cmd = { 'vhdl-tool', 'lsp' }, -- needed for elixirls, omnisharp, sumneko_lua\r\n      filetypes = { \"vhdl\" },\r\n      -- NOTE: For hdl_checker:\r\n      root_dir = function(fname)\r\n        local util = require \"lspconfig.util\"\r\n        local root_files = {\r\n          \"vhdltool-config.yaml\",\r\n        }\r\n        return util.root_pattern(unpack(root_files))(fname) or util.root_pattern \".git\"(fname) or util.path.dirname(fname)\r\n      end,\r\n      settings = {},\r\n    },\r\n  }\r\n\r\n  if nvim_lsp.vhdl_tool.setup then\r\n    nvim_lsp.vhdl_tool.setup {\r\n      on_attach = function(client, bufnr)\r\n        on_attach_key_opt(client, bufnr)\r\n      end,\r\n    }\r\n  end\r\n\r\n  -- -----------------------------\r\n  -- LSP: vhdl_ls\r\n  -- -----------------------------\r\n  lsp_configs.vhdl_ls = {\r\n    default_config = {\r\n      -- Update the path to vhdl_ls\r\n      cmd = { 'vhdl_ls', 'enable_linter' }, -- needed for elixirls, omnisharp, sumneko_lua\r\n      filetypes = { \"vhdl\" },\r\n      -- NOTE: For hdl_checker:\r\n      root_dir = function(fname)\r\n        local util = require \"lspconfig.util\"\r\n        local root_files = {\r\n          \"vhdl_ls.toml\",\r\n        }\r\n        return util.root_pattern(unpack(root_files))(fname) or util.root_pattern \".git\"(fname) or util.path.dirname(fname)\r\n      end,\r\n      settings = {},\r\n    },\r\n  }\r\n\r\n  if nvim_lsp.vhdl_ls.setup then\r\n    nvim_lsp.vhdl_ls.setup {\r\n      on_attach = function(client, bufnr)\r\n        on_attach_key_opt(client, bufnr)\r\n      end,\r\n    }\r\n  end\r\n  print [[You can find your log at $HOME/.cache/nvim/lsp.log. Please paste in a github issue under a details tag as described in the issue template.]]\r\nend\r\n\r\nif vim.fn.isdirectory(install_path) == 0 then\r\n  vim.fn.system { 'git', 'clone', 'https://github.com/wbthomason/packer.nvim', install_path }\r\n  load_plugins()\r\n  require('packer').sync()\r\n  vim.cmd [[autocmd User PackerComplete ++once lua load_config()]]\r\nelse\r\n  load_plugins()\r\n  require('packer').sync()\r\n  _G.load_config()\r\nend\r\n```\r\n\n\n### Expected behavior\n\nWhen looking for references, I would not expect `vhdl_ls` LSP to overwrite the find references output of `vhdl-tool`.\n\n### Actual behavior\n\nWhen both `vhdl_ls` and `vhdl-tool` LSP are enabled, the find references outputs are not joined: `vhdl_ls` overwrites the ones of `vhdl-tool`.\r\n\n\n### Log file\n\nhttps://gist.github.com/pidgeon777/3390a8cec5236b673eebfb63ce267e06",
    "closed_at": "2024-10-31T10:22:40Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
        "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
        "followers_url": "https://api.github.com/users/lewis6991/followers",
        "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
        "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/lewis6991",
        "id": 7904185,
        "login": "lewis6991",
        "node_id": "MDQ6VXNlcjc5MDQxODU=",
        "organizations_url": "https://api.github.com/users/lewis6991/orgs",
        "received_events_url": "https://api.github.com/users/lewis6991/received_events",
        "repos_url": "https://api.github.com/users/lewis6991/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/lewis6991",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "Hello!\r\nI have same issue with tsserver and angularls\r\n\r\ntsserver shows references in typescript files, and angularls additionally in angular templates. When I ran gr command I able to see list from angularls with html files and then tsserver overrides them and I can't see html files\r\n\r\nIs there possible way to merge results from different lsp's? ",
            "created_at": "2022-06-27T12:43:55Z",
            "html_url": "https://github.com/neovim/neovim/issues/17712#issuecomment-1167306592",
            "id": 1167306592,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17712",
            "node_id": "IC_kwDOAPphoM5Fk69g",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1167306592/reactions"
            },
            "updated_at": "2023-07-04T12:49:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1167306592",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1387604?v=4",
                "events_url": "https://api.github.com/users/instingt/events{/privacy}",
                "followers_url": "https://api.github.com/users/instingt/followers",
                "following_url": "https://api.github.com/users/instingt/following{/other_user}",
                "gists_url": "https://api.github.com/users/instingt/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/instingt",
                "id": 1387604,
                "login": "instingt",
                "node_id": "MDQ6VXNlcjEzODc2MDQ=",
                "organizations_url": "https://api.github.com/users/instingt/orgs",
                "received_events_url": "https://api.github.com/users/instingt/received_events",
                "repos_url": "https://api.github.com/users/instingt/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/instingt/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/instingt/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/instingt",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "+1:ing this.\r\n\r\nI think this is something that needs to be looked at. Especially in the frontend development scene, there's multiple cases where results are fed from more than one language servers. \r\n\r\nI have a situations where I have my Custom Elements Language Server's response getting overridden by the TSServer ones on some cases, where the two LS's are returning input for the same request type",
            "created_at": "2023-02-06T20:27:21Z",
            "html_url": "https://github.com/neovim/neovim/issues/17712#issuecomment-1419705502",
            "id": 1419705502,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17712",
            "node_id": "IC_kwDOAPphoM5Unvye",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1419705502/reactions"
            },
            "updated_at": "2023-07-04T12:49:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1419705502",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/16068444?v=4",
                "events_url": "https://api.github.com/users/Matsuuu/events{/privacy}",
                "followers_url": "https://api.github.com/users/Matsuuu/followers",
                "following_url": "https://api.github.com/users/Matsuuu/following{/other_user}",
                "gists_url": "https://api.github.com/users/Matsuuu/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Matsuuu",
                "id": 16068444,
                "login": "Matsuuu",
                "node_id": "MDQ6VXNlcjE2MDY4NDQ0",
                "organizations_url": "https://api.github.com/users/Matsuuu/orgs",
                "received_events_url": "https://api.github.com/users/Matsuuu/received_events",
                "repos_url": "https://api.github.com/users/Matsuuu/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Matsuuu/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Matsuuu/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Matsuuu",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "This is likely the root cause of https://github.com/neovim/neovim/issues/13766",
            "created_at": "2023-07-04T12:52:04Z",
            "html_url": "https://github.com/neovim/neovim/issues/17712#issuecomment-1620195712",
            "id": 1620195712,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17712",
            "node_id": "IC_kwDOAPphoM5gkjmA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1620195712/reactions"
            },
            "updated_at": "2023-07-04T12:52:04Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1620195712",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "`vim.lsp.buf.references` is fixed in #30722 . General support for multiple clients is ongoing.",
            "created_at": "2024-10-31T10:22:40Z",
            "html_url": "https://github.com/neovim/neovim/issues/17712#issuecomment-2449515060",
            "id": 2449515060,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/17712",
            "node_id": "IC_kwDOAPphoM6SAKI0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2449515060/reactions"
            },
            "updated_at": "2024-10-31T10:22:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2449515060",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/17712/comments",
    "created_at": "2022-03-13T22:59:37Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/17712/events",
    "html_url": "https://github.com/neovim/neovim/issues/17712",
    "id": 1167718859,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "BFDADC",
            "default": false,
            "description": "High-risk, potential for delicate/cascading effects",
            "id": 407247013,
            "name": "complexity:high",
            "node_id": "MDU6TGFiZWw0MDcyNDcwMTM=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/complexity:high"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": null,
            "id": 662566370,
            "name": "lsp",
            "node_id": "MDU6TGFiZWw2NjI1NjYzNzA=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/lsp"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/17712/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 92,
        "created_at": "2023-12-07T23:09:35Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk",
            "user_view_type": "public"
        },
        "description": "",
        "due_on": "2024-12-25T08:00:00Z",
        "html_url": "https://github.com/neovim/neovim/milestone/41",
        "id": 10283236,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/41/labels",
        "node_id": "MI_kwDOAPphoM4AnOjk",
        "number": 41,
        "open_issues": 54,
        "state": "open",
        "title": "0.11",
        "updated_at": "2024-10-31T12:07:28Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/41"
    },
    "node_id": "I_kwDOAPphoM5FmfnL",
    "number": 17712,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/17712/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/17712/timeline",
    "title": "LSP: merge results of multiple LSP servers",
    "updated_at": "2024-10-31T10:27:42Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/17712",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/13739892?v=4",
        "events_url": "https://api.github.com/users/pidgeon777/events{/privacy}",
        "followers_url": "https://api.github.com/users/pidgeon777/followers",
        "following_url": "https://api.github.com/users/pidgeon777/following{/other_user}",
        "gists_url": "https://api.github.com/users/pidgeon777/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/pidgeon777",
        "id": 13739892,
        "login": "pidgeon777",
        "node_id": "MDQ6VXNlcjEzNzM5ODky",
        "organizations_url": "https://api.github.com/users/pidgeon777/orgs",
        "received_events_url": "https://api.github.com/users/pidgeon777/received_events",
        "repos_url": "https://api.github.com/users/pidgeon777/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/pidgeon777/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/pidgeon777/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/pidgeon777",
        "user_view_type": "public"
    }
}