{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nCurrently, functions in [`eval.lua`](https://github.com/neovim/neovim/blob/master/src/nvim/eval.lua) can only have one return type, which is independent of parameters. This works for most functions, but there are some, that return different types depending on some parameter, so they use a union type to annotate that. This results in a diagnostic by the LSP when the return value is passed to a function that only takes one of the types.\r\nAn example of this is `expand()` which returns `string|string[]`, and thus results in a diagnostic when passed to a function that takes only strings.\n\n### Expected behavior\n\nMake it so that functions can have multiple return types depending on the parameter type. And when the _meta file is generated for these functions, it will generate two copies, basically overloading the function.\r\n\r\nFor example, let's have a function called `foo(list)` which returns `string` if list is falsy or `string[]` if list is truthy. Then the table for the function in `eval.lua` would look something like this:\r\n```lua\r\nfoo={...,returns={{list='false|nil'}='string',{list='true|string|number|...'}='string[]'}},\r\n```\r\nWhich would generate the meta file:\r\n```lua\r\n---@param list true|number|string|...\r\n---@return string[]\r\nfunction vim.fn.foo(list) end\r\n\r\n---@param list nil|false\r\n---@return string\r\nfunction vim.fn.foo(list) end\r\n```",
    "closed_at": "2023-12-31T15:33:13Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "We already support this. See https://github.com/neovim/neovim/blob/master/runtime%2Flua%2Fvim%2F_meta%2Fvimfn.lua#L2478",
            "created_at": "2023-12-31T15:30:36Z",
            "html_url": "https://github.com/neovim/neovim/issues/26825#issuecomment-1872976029",
            "id": 1872976029,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26825",
            "node_id": "IC_kwDOAPphoM5vo1id",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1872976029/reactions"
            },
            "updated_at": "2023-12-31T15:30:36Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1872976029",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7904185?v=4",
                "events_url": "https://api.github.com/users/lewis6991/events{/privacy}",
                "followers_url": "https://api.github.com/users/lewis6991/followers",
                "following_url": "https://api.github.com/users/lewis6991/following{/other_user}",
                "gists_url": "https://api.github.com/users/lewis6991/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/lewis6991",
                "id": 7904185,
                "login": "lewis6991",
                "node_id": "MDQ6VXNlcjc5MDQxODU=",
                "organizations_url": "https://api.github.com/users/lewis6991/orgs",
                "received_events_url": "https://api.github.com/users/lewis6991/received_events",
                "repos_url": "https://api.github.com/users/lewis6991/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/lewis6991/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/lewis6991/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/lewis6991"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Ok.",
            "created_at": "2023-12-31T15:33:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/26825#issuecomment-1872976555",
            "id": 1872976555,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26825",
            "node_id": "IC_kwDOAPphoM5vo1qr",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1872976555/reactions"
            },
            "updated_at": "2023-12-31T15:33:13Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1872976555",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/107814000?v=4",
                "events_url": "https://api.github.com/users/altermo/events{/privacy}",
                "followers_url": "https://api.github.com/users/altermo/followers",
                "following_url": "https://api.github.com/users/altermo/following{/other_user}",
                "gists_url": "https://api.github.com/users/altermo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/altermo",
                "id": 107814000,
                "login": "altermo",
                "node_id": "U_kgDOBm0ccA",
                "organizations_url": "https://api.github.com/users/altermo/orgs",
                "received_events_url": "https://api.github.com/users/altermo/received_events",
                "repos_url": "https://api.github.com/users/altermo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/altermo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/altermo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/altermo"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/26825/comments",
    "created_at": "2023-12-31T15:15:21Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/26825/events",
    "html_url": "https://github.com/neovim/neovim/issues/26825",
    "id": 2061090397,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/26825/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM562b5d",
    "number": 26825,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/26825/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/26825/timeline",
    "title": "Return type depending on paramater for functions in src/nvim/eval.lua",
    "updated_at": "2023-12-31T15:33:13Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/26825",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/107814000?v=4",
        "events_url": "https://api.github.com/users/altermo/events{/privacy}",
        "followers_url": "https://api.github.com/users/altermo/followers",
        "following_url": "https://api.github.com/users/altermo/following{/other_user}",
        "gists_url": "https://api.github.com/users/altermo/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/altermo",
        "id": 107814000,
        "login": "altermo",
        "node_id": "U_kgDOBm0ccA",
        "organizations_url": "https://api.github.com/users/altermo/orgs",
        "received_events_url": "https://api.github.com/users/altermo/received_events",
        "repos_url": "https://api.github.com/users/altermo/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/altermo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/altermo/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/altermo"
    }
}