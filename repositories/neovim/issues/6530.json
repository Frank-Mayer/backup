{
    "active_lock_reason": null,
    "assignee": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk"
    },
    "assignees": [
        {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk"
        }
    ],
    "author_association": "NONE",
    "body": "- `nvim --version`: 0.1.7\r\n- Operating system/version: Linux Mint 17.3\r\n- Terminal name/version: Konsole 2.14.2\r\n- `$TERM`: xterm\r\n\r\n### Actual behaviour\r\n\r\nCalling `jobstop()` on a process which does not respond to SIGTERM will not later send SIGKILL, per `:help jobstop()`.\r\n\r\n### Expected behaviour\r\n\r\n`jobstop()` should kill the process with effectively `kill -9` after 2 seconds of waiting, in the background.\r\n\r\n### Additional Information\r\n\r\nI am not certain if this is happening on all machines, or on specific machines, etc. I started getting a few users of my plugin ALE reporting issues with processes hanging around when they are running NeoVim on Mac OSX, and I'm pretty certain `jobstop()` is being called with the job ID. Vim 8 users of the plugin don't seem to be having the same issues. After some experimenting, I was finally able to put together a simple Vim script for reproducing the bug, as far as I'm aware.\r\n\r\nI'll create this issue, and see if others can reproduce the same bug. If there is no bug, and there's something or other I can do in my plugin to fix this instead, then I'll be just as happy.\r\n\r\n### Steps to reproduce using `nvim -u NORC`\r\n\r\nRun these lines of VimL.\r\n\r\n```vim\r\n\" Run a command which doesn't respond to SIGTERM, and kill it right away.\r\ncall jobstop(jobstart('/bin/bash -c ''trap true SIGTERM; sleep 20000000000000'''))\r\n\" Wait longer than the 2 second timer for calling SIGKILL\r\nsleep 3\r\n\" A PID will be printed here.\r\necho system('pgrep -f ''sleep 20000000000000''')\r\n```",
    "closed_at": "2018-03-18T17:36:03Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "The SIGKILL kills the `bash` process, but not `sleep` because that's a child process.",
            "created_at": "2017-04-15T21:27:06Z",
            "html_url": "https://github.com/neovim/neovim/issues/6530#issuecomment-294318772",
            "id": 294318772,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/6530",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDMxODc3Mg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/294318772/reactions"
            },
            "updated_at": "2017-04-15T21:27:06Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/294318772",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/972014?v=4",
                "events_url": "https://api.github.com/users/mhinz/events{/privacy}",
                "followers_url": "https://api.github.com/users/mhinz/followers",
                "following_url": "https://api.github.com/users/mhinz/following{/other_user}",
                "gists_url": "https://api.github.com/users/mhinz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mhinz",
                "id": 972014,
                "login": "mhinz",
                "node_id": "MDQ6VXNlcjk3MjAxNA==",
                "organizations_url": "https://api.github.com/users/mhinz/orgs",
                "received_events_url": "https://api.github.com/users/mhinz/received_events",
                "repos_url": "https://api.github.com/users/mhinz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mhinz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mhinz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mhinz"
            }
        },
        {
            "author_association": "NONE",
            "body": "Maybe that's the bug then. Killing the process should kill the child processes, or there should be some way of doing that.",
            "created_at": "2017-04-15T21:32:23Z",
            "html_url": "https://github.com/neovim/neovim/issues/6530#issuecomment-294319032",
            "id": 294319032,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/6530",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDMxOTAzMg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/294319032/reactions"
            },
            "updated_at": "2017-04-15T21:32:23Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/294319032",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3518142?v=4",
                "events_url": "https://api.github.com/users/w0rp/events{/privacy}",
                "followers_url": "https://api.github.com/users/w0rp/followers",
                "following_url": "https://api.github.com/users/w0rp/following{/other_user}",
                "gists_url": "https://api.github.com/users/w0rp/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/w0rp",
                "id": 3518142,
                "login": "w0rp",
                "node_id": "MDQ6VXNlcjM1MTgxNDI=",
                "organizations_url": "https://api.github.com/users/w0rp/orgs",
                "received_events_url": "https://api.github.com/users/w0rp/received_events",
                "repos_url": "https://api.github.com/users/w0rp/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/w0rp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/w0rp/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/w0rp"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@w0rp In Vim what `job_stop()` invocation are you using? In Vim, happens if you do `job_stop({job}, \"kill\")` ?\r\n\r\nI think the problem is we send the signal to the process, not its group. Vim sends to the process group (see `mch_stop_job()`. On Windows it iterates all processes... `terminate_all()`).\r\n\r\nIn `children_kill_cb` we iterate \"watched children\" but I wonder if that really is doing what it implies. `loop->children` is never magically filled with children AFAICT.\r\n\r\n- could be useful: https://github.com/libuv/libuv/pull/836\r\n- also: https://github.com/libuv/libuv/pull/761\r\n- libuv 1.16 added `uv_os_getppid()` to get parent process id",
            "created_at": "2017-04-15T21:57:50Z",
            "html_url": "https://github.com/neovim/neovim/issues/6530#issuecomment-294320167",
            "id": 294320167,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/6530",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDMyMDE2Nw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/294320167/reactions"
            },
            "updated_at": "2018-02-15T21:30:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/294320167",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "In Vim 8, running `job_stop(job, 'kill')` will kill the process and its children.\r\n\r\n```vim\r\ncall job_stop(\r\n\\    job_start(['/bin/bash', '-c', 'trap true SIGTERM; sleep 20000000000000']),\r\n\\    'kill'\r\n\\)\r\n\" Nothing will be printed here, unless you have something running already.\r\necho system('pgrep -af ''^sleep 20000000000000''')\r\n```\r\n\r\nI had to change the pgrep regex slightly, as it was matching the command generated by Vim 8's `system` function itself. (`prep -af ...` prints the actual sleep command in NeoVim for me.) I also had to pass the arguments in a `List` to get it to behave more like NeoVim in this case. (My plugin does basically this just for Vim 8.)\r\n\r\nOne thing I noticed here is that `job_stop()` in Vim without the `'kill'` argument will actually kill both processes here, but results will vary for other long running commands, like compilers.",
            "created_at": "2017-04-15T22:23:27Z",
            "html_url": "https://github.com/neovim/neovim/issues/6530#issuecomment-294321212",
            "id": 294321212,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/6530",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDMyMTIxMg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/294321212/reactions"
            },
            "updated_at": "2017-04-15T22:23:27Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/294321212",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3518142?v=4",
                "events_url": "https://api.github.com/users/w0rp/events{/privacy}",
                "followers_url": "https://api.github.com/users/w0rp/followers",
                "following_url": "https://api.github.com/users/w0rp/following{/other_user}",
                "gists_url": "https://api.github.com/users/w0rp/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/w0rp",
                "id": 3518142,
                "login": "w0rp",
                "node_id": "MDQ6VXNlcjM1MTgxNDI=",
                "organizations_url": "https://api.github.com/users/w0rp/orgs",
                "received_events_url": "https://api.github.com/users/w0rp/received_events",
                "repos_url": "https://api.github.com/users/w0rp/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/w0rp/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/w0rp/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/w0rp"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Since libuv doesn't seem (https://github.com/libuv/libuv/pull/836) to provide a proper way to handle child processes, I guess we should copy Vim's approach.\r\n\r\nFor Unix, this works:\r\n\r\n```diff\r\ndiff --git i/src/nvim/event/process.c w/src/nvim/event/process.c\r\nindex 4429a65f9..2b284c68a 100644\r\n--- i/src/nvim/event/process.c\r\n+++ w/src/nvim/event/process.c\r\n@@ -266,0 +267,2 @@ static void children_kill_cb(uv_timer_t *handle)\r\n+    int pid = -getpgid(proc->pid);\r\n+\r\n@@ -268,2 +270,2 @@ static void children_kill_cb(uv_timer_t *handle)\r\n-      ILOG(\"Sending SIGTERM to pid %d\", proc->pid);\r\n-      uv_kill(proc->pid, SIGTERM);\r\n+      ILOG(\"Sending SIGTERM to pid %d\", pid);\r\n+      uv_kill(pid, SIGTERM);\r\n@@ -272,2 +274,2 @@ static void children_kill_cb(uv_timer_t *handle)\r\n-      ILOG(\"Sending SIGKILL to pid %d\", proc->pid);\r\n-      uv_kill(proc->pid, SIGKILL);\r\n+      ILOG(\"Sending SIGKILL to pid %d\", pid);\r\n+      uv_kill(pid, SIGKILL);\r\n```\r\n\r\nAnd for Windows.. well, `terminate_all()`. :>",
            "created_at": "2017-04-15T23:26:37Z",
            "html_url": "https://github.com/neovim/neovim/issues/6530#issuecomment-294323685",
            "id": 294323685,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/6530",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5NDMyMzY4NQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/294323685/reactions"
            },
            "updated_at": "2017-04-15T23:26:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/294323685",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/972014?v=4",
                "events_url": "https://api.github.com/users/mhinz/events{/privacy}",
                "followers_url": "https://api.github.com/users/mhinz/followers",
                "following_url": "https://api.github.com/users/mhinz/following{/other_user}",
                "gists_url": "https://api.github.com/users/mhinz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mhinz",
                "id": 972014,
                "login": "mhinz",
                "node_id": "MDQ6VXNlcjk3MjAxNA==",
                "organizations_url": "https://api.github.com/users/mhinz/orgs",
                "received_events_url": "https://api.github.com/users/mhinz/received_events",
                "repos_url": "https://api.github.com/users/mhinz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mhinz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mhinz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mhinz"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "@mhinz, do we change the process group for jobs so that it is different from nvim's process group? Otherwise this would also kill nvim.",
            "created_at": "2017-04-20T10:46:44Z",
            "html_url": "https://github.com/neovim/neovim/issues/6530#issuecomment-295678710",
            "id": 295678710,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/6530",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5NTY3ODcxMA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/295678710/reactions"
            },
            "updated_at": "2017-04-20T10:46:44Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/295678710",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2077655?v=4",
                "events_url": "https://api.github.com/users/oni-link/events{/privacy}",
                "followers_url": "https://api.github.com/users/oni-link/followers",
                "following_url": "https://api.github.com/users/oni-link/following{/other_user}",
                "gists_url": "https://api.github.com/users/oni-link/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/oni-link",
                "id": 2077655,
                "login": "oni-link",
                "node_id": "MDQ6VXNlcjIwNzc2NTU=",
                "organizations_url": "https://api.github.com/users/oni-link/orgs",
                "received_events_url": "https://api.github.com/users/oni-link/received_events",
                "repos_url": "https://api.github.com/users/oni-link/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/oni-link/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/oni-link/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/oni-link"
            }
        },
        {
            "author_association": "NONE",
            "body": "@oni-link According to alexchricton in this issue you should do that yes https://github.com/rust-lang/cargo/issues/3950",
            "created_at": "2017-05-01T13:24:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/6530#issuecomment-298332883",
            "id": 298332883,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/6530",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODMzMjg4Mw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/298332883/reactions"
            },
            "updated_at": "2017-05-01T13:24:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/298332883",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/492753?v=4",
                "events_url": "https://api.github.com/users/NickeZ/events{/privacy}",
                "followers_url": "https://api.github.com/users/NickeZ/followers",
                "following_url": "https://api.github.com/users/NickeZ/following{/other_user}",
                "gists_url": "https://api.github.com/users/NickeZ/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/NickeZ",
                "id": 492753,
                "login": "NickeZ",
                "node_id": "MDQ6VXNlcjQ5Mjc1Mw==",
                "organizations_url": "https://api.github.com/users/NickeZ/orgs",
                "received_events_url": "https://api.github.com/users/NickeZ/received_events",
                "repos_url": "https://api.github.com/users/NickeZ/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/NickeZ/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/NickeZ/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/NickeZ"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "FWIW the win32 API also appears to have the concept of a process group:\r\n\r\nhttps://msdn.microsoft.com/en-us/library/windows/desktop/ms684863(v=vs.85).aspx\r\n\r\nthough it looks like the only time libuv sets the CREATE_NEW_PROCESS_GROUP flag is for UV_PROCESS_DETACHED:\r\n\r\nhttps://github.com/libuv/libuv/blob/87df1448a48fb64c2b9ebe37e3344f7e5b81dd88/src/win/process.c#L1074\r\n\r\nperhaps there is a way to modify the process group after we `uv_spawn` it, or maybe there is an option we can pass to `uv_spawn()` ?",
            "created_at": "2017-05-01T16:56:47Z",
            "html_url": "https://github.com/neovim/neovim/issues/6530#issuecomment-298373473",
            "id": 298373473,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/6530",
            "node_id": "MDEyOklzc3VlQ29tbWVudDI5ODM3MzQ3Mw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/298373473/reactions"
            },
            "updated_at": "2017-05-01T16:56:47Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/298373473",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "On UNIX it is certainly necessary to kill the entire process group (which has to be separate from nvim's), otherwise detached children will not also be killed. As @NickeZ referred to above (rust-lang/cargo#3950), this is important for builder tools that spawn a number of separate build processes, but does not relay signals to them (I'm only currently aware of this being the case for Rust's `cargo`, but I'm sure there are others). This is currently a major issue for both neovim syntastic clones (neomake/neomake#1216 and w0rp/ale#380), so landing a fix to this would be really nice!",
            "created_at": "2017-06-05T18:57:21Z",
            "html_url": "https://github.com/neovim/neovim/issues/6530#issuecomment-306273560",
            "id": 306273560,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/6530",
            "node_id": "MDEyOklzc3VlQ29tbWVudDMwNjI3MzU2MA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/306273560/reactions"
            },
            "updated_at": "2017-06-05T18:57:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/306273560",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/176295?v=4",
                "events_url": "https://api.github.com/users/jonhoo/events{/privacy}",
                "followers_url": "https://api.github.com/users/jonhoo/followers",
                "following_url": "https://api.github.com/users/jonhoo/following{/other_user}",
                "gists_url": "https://api.github.com/users/jonhoo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jonhoo",
                "id": 176295,
                "login": "jonhoo",
                "node_id": "MDQ6VXNlcjE3NjI5NQ==",
                "organizations_url": "https://api.github.com/users/jonhoo/orgs",
                "received_events_url": "https://api.github.com/users/jonhoo/received_events",
                "repos_url": "https://api.github.com/users/jonhoo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jonhoo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jonhoo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jonhoo"
            }
        },
        {
            "author_association": "NONE",
            "body": "Consider sending `HUP` to the process group (which would be `-PID` (yes, negative) where PID is the PID of the process group leader).\r\n\r\nThis is normally how you handle things in shell scripting from a `trap` to terminate all children assuming you don't immediately disown them for a subreaper or PID 1 to reparent them.\r\nProbably not as reliable as you'd like it though, and pretty much why Linux has cgroups now.",
            "created_at": "2017-11-06T23:02:43Z",
            "html_url": "https://github.com/neovim/neovim/issues/6530#issuecomment-342317703",
            "id": 342317703,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/6530",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0MjMxNzcwMw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/342317703/reactions"
            },
            "updated_at": "2017-11-06T23:14:20Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/342317703",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/521538?v=4",
                "events_url": "https://api.github.com/users/Earnestly/events{/privacy}",
                "followers_url": "https://api.github.com/users/Earnestly/followers",
                "following_url": "https://api.github.com/users/Earnestly/following{/other_user}",
                "gists_url": "https://api.github.com/users/Earnestly/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Earnestly",
                "id": 521538,
                "login": "Earnestly",
                "node_id": "MDQ6VXNlcjUyMTUzOA==",
                "organizations_url": "https://api.github.com/users/Earnestly/orgs",
                "received_events_url": "https://api.github.com/users/Earnestly/received_events",
                "repos_url": "https://api.github.com/users/Earnestly/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Earnestly/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Earnestly/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Earnestly"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "To make it clear: the [diff posted above](https://github.com/neovim/neovim/issues/6530#issuecomment-294323685) works as expected on macOS.\r\n\r\nIt takes the negated PID of the job and kills it plus all the children. So, at least on macOS, the job _does_ create a new process group.",
            "created_at": "2017-11-07T21:20:13Z",
            "html_url": "https://github.com/neovim/neovim/issues/6530#issuecomment-342625722",
            "id": 342625722,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/6530",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0MjYyNTcyMg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/342625722/reactions"
            },
            "updated_at": "2017-11-07T21:22:10Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/342625722",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/972014?v=4",
                "events_url": "https://api.github.com/users/mhinz/events{/privacy}",
                "followers_url": "https://api.github.com/users/mhinz/followers",
                "following_url": "https://api.github.com/users/mhinz/following{/other_user}",
                "gists_url": "https://api.github.com/users/mhinz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mhinz",
                "id": 972014,
                "login": "mhinz",
                "node_id": "MDQ6VXNlcjk3MjAxNA==",
                "organizations_url": "https://api.github.com/users/mhinz/orgs",
                "received_events_url": "https://api.github.com/users/mhinz/received_events",
                "repos_url": "https://api.github.com/users/mhinz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mhinz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mhinz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mhinz"
            }
        },
        {
            "author_association": "NONE",
            "body": "In the hope this might help with https://github.com/neomake/neomake/issues/1704 I applied this patch (slightly modified against master, see below), but while this patch is the \"Right Thing\" to do regardless, it didn't make any difference.\r\n\r\n```diff\r\ndiff --git a/src/nvim/event/process.c b/src/nvim/event/process.c\r\nindex 8371d3cd4..6a016f745 100644\r\n--- a/src/nvim/event/process.c\r\n+++ b/src/nvim/event/process.c\r\n@@ -263,6 +263,7 @@ static void children_kill_cb(uv_timer_t *handle)\r\n {\r\n   Loop *loop = handle->loop->data;\r\n   uint64_t now = os_hrtime();\r\n+  int pid = -getpgid(proc->pid);\r\n \r\n   kl_iter(WatcherPtr, loop->children, current) {\r\n     Process *proc = (*current)->data;\r\n@@ -275,9 +276,8 @@ static void children_kill_cb(uv_timer_t *handle)\r\n       int sig = proc->type == kProcessTypePty && elapsed < KILL_TIMEOUT_MS * 2\r\n                     ? SIGTERM\r\n                     : SIGKILL;\r\n-      ILOG(\"Sending %s to pid %d\", sig == SIGTERM ? \"SIGTERM\" : \"SIGKILL\",\r\n-           proc->pid);\r\n-      uv_kill(proc->pid, sig);\r\n+      ILOG(\"Sending %s to pid %d\", sig == SIGTERM ? \"SIGTERM\" : \"SIGKILL\", pid);\r\n+      uv_kill(pid, sig);\r\n     }\r\n   }\r\n }\r\n```\r\n",
            "created_at": "2017-11-08T11:19:30Z",
            "html_url": "https://github.com/neovim/neovim/issues/6530#issuecomment-342788140",
            "id": 342788140,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/6530",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0Mjc4ODE0MA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/342788140/reactions"
            },
            "updated_at": "2017-11-08T11:19:30Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/342788140",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/521538?v=4",
                "events_url": "https://api.github.com/users/Earnestly/events{/privacy}",
                "followers_url": "https://api.github.com/users/Earnestly/followers",
                "following_url": "https://api.github.com/users/Earnestly/following{/other_user}",
                "gists_url": "https://api.github.com/users/Earnestly/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Earnestly",
                "id": 521538,
                "login": "Earnestly",
                "node_id": "MDQ6VXNlcjUyMTUzOA==",
                "organizations_url": "https://api.github.com/users/Earnestly/orgs",
                "received_events_url": "https://api.github.com/users/Earnestly/received_events",
                "repos_url": "https://api.github.com/users/Earnestly/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Earnestly/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Earnestly/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Earnestly"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Why the issue is suspended?\r\n\r\n* neovim can use terminate_all() from Vim source code for Windows.\r\n\r\n* https://github.com/neovim/neovim/issues/6530#issuecomment-294323685  patch exists.\r\n\r\nRelated issue? https://github.com/neovim/neovim/issues/7691\r\n",
            "created_at": "2017-12-05T09:46:22Z",
            "html_url": "https://github.com/neovim/neovim/issues/6530#issuecomment-349250893",
            "id": 349250893,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/6530",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTI1MDg5Mw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 4,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 2,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 6,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/349250893/reactions"
            },
            "updated_at": "2017-12-05T09:46:22Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/349250893",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41495?v=4",
                "events_url": "https://api.github.com/users/Shougo/events{/privacy}",
                "followers_url": "https://api.github.com/users/Shougo/followers",
                "following_url": "https://api.github.com/users/Shougo/following{/other_user}",
                "gists_url": "https://api.github.com/users/Shougo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Shougo",
                "id": 41495,
                "login": "Shougo",
                "node_id": "MDQ6VXNlcjQxNDk1",
                "organizations_url": "https://api.github.com/users/Shougo/orgs",
                "received_events_url": "https://api.github.com/users/Shougo/received_events",
                "repos_url": "https://api.github.com/users/Shougo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Shougo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Shougo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Shougo"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "This needs a bit more work than meets the eye.\r\n\r\nA normal `jobstart()` doesn't create a new process group. Not good. In the meantime we got `jobstart(..., {'detach': 1})` which _does_ create a new process group. Good.\r\n\r\nBut in the best case we would want it to work for both cases. Unfortunately I don't see a way to create a new process group with libuv without also creating a detached process.\r\n\r\nMaybe it should be the jobs themselves who should manage the child processes, not Neovim.",
            "created_at": "2018-02-15T21:12:34Z",
            "html_url": "https://github.com/neovim/neovim/issues/6530#issuecomment-366063185",
            "id": 366063185,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/6530",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM2NjA2MzE4NQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/366063185/reactions"
            },
            "updated_at": "2018-02-15T21:18:49Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/366063185",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/972014?v=4",
                "events_url": "https://api.github.com/users/mhinz/events{/privacy}",
                "followers_url": "https://api.github.com/users/mhinz/followers",
                "following_url": "https://api.github.com/users/mhinz/following{/other_user}",
                "gists_url": "https://api.github.com/users/mhinz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mhinz",
                "id": 972014,
                "login": "mhinz",
                "node_id": "MDQ6VXNlcjk3MjAxNA==",
                "organizations_url": "https://api.github.com/users/mhinz/orgs",
                "received_events_url": "https://api.github.com/users/mhinz/received_events",
                "repos_url": "https://api.github.com/users/mhinz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mhinz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mhinz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mhinz"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "https://github.com/neovim/neovim/pull/8107 should fix this.",
            "created_at": "2018-03-06T08:54:15Z",
            "html_url": "https://github.com/neovim/neovim/issues/6530#issuecomment-370708832",
            "id": 370708832,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/6530",
            "node_id": "MDEyOklzc3VlQ29tbWVudDM3MDcwODgzMg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 5,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 5,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/370708832/reactions"
            },
            "updated_at": "2018-03-06T08:54:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/370708832",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        }
    ],
    "comments": 15,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/6530/comments",
    "created_at": "2017-04-15T18:31:37Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/6530/events",
    "html_url": "https://github.com/neovim/neovim/issues/6530",
    "id": 221964835,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "OS processes, spawn",
            "id": 182884815,
            "name": "job-control",
            "node_id": "MDU6TGFiZWwxODI4ODQ4MTU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/job-control"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/6530/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": "2018-06-16T19:59:43Z",
        "closed_issues": 119,
        "created_at": "2017-11-13T01:08:52Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk"
        },
        "description": "",
        "due_on": "2018-06-10T07:00:00Z",
        "html_url": "https://github.com/neovim/neovim/milestone/18",
        "id": 2906664,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/18/labels",
        "node_id": "MDk6TWlsZXN0b25lMjkwNjY2NA==",
        "number": 18,
        "open_issues": 0,
        "state": "closed",
        "title": "0.3",
        "updated_at": "2018-06-26T14:51:16Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/18"
    },
    "node_id": "MDU6SXNzdWUyMjE5NjQ4MzU=",
    "number": 6530,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 10,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 10,
        "url": "https://api.github.com/repos/neovim/neovim/issues/6530/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/6530/timeline",
    "title": "jobstop does not kill process children/descendants",
    "updated_at": "2023-08-05T08:51:21Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/6530",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/3518142?v=4",
        "events_url": "https://api.github.com/users/w0rp/events{/privacy}",
        "followers_url": "https://api.github.com/users/w0rp/followers",
        "following_url": "https://api.github.com/users/w0rp/following{/other_user}",
        "gists_url": "https://api.github.com/users/w0rp/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/w0rp",
        "id": 3518142,
        "login": "w0rp",
        "node_id": "MDQ6VXNlcjM1MTgxNDI=",
        "organizations_url": "https://api.github.com/users/w0rp/orgs",
        "received_events_url": "https://api.github.com/users/w0rp/received_events",
        "repos_url": "https://api.github.com/users/w0rp/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/w0rp/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/w0rp/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/w0rp"
    }
}