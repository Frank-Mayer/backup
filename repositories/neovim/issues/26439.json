{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\r\n\r\nWhen `'inccommand'` is defined (either 'split' or 'nosplit'), it interacts badly with the `:substitute` command when the range is `'[,']`.\r\n\r\nFor example, if the marks range across the whole buffer, not all matches will be replaced.\r\n\r\nThe command `'[,']s/pattern/string/` is used by plugins like https://github.com/svermeulen/vim-subversive and https://github.com/gbprod/substitute.nvim to implement a \"substitute over range\" action.\r\n\r\n### Steps to reproduce\r\n\r\nWith the following content in `file.py`:\r\n\r\n<details>\r\n\r\n```python\r\ndef hello01():\r\n    return \"world\"\r\n\r\n\r\ndef hello02():\r\n    return \"world\"\r\n\r\n\r\ndef hello03():\r\n    return \"world\"\r\n\r\n\r\ndef hello04():\r\n    return \"world\"\r\n\r\n\r\ndef hello05():\r\n    return \"world\"\r\n\r\n\r\ndef hello06():\r\n    return \"world\"\r\n\r\n\r\ndef hello07():\r\n    return \"world\"\r\n\r\n\r\ndef hello08():\r\n    return \"world\"\r\n\r\n\r\ndef hello09():\r\n    return \"world\"\r\n\r\n\r\ndef hello10():\r\n    return \"world\"\r\n\r\n\r\ndef hello11():\r\n    return \"world\"\r\n\r\n\r\ndef hello12():\r\n    return \"world\"\r\n\r\n\r\ndef hello13():\r\n    return \"world\"\r\n\r\n\r\ndef hello14():\r\n    return \"world\"\r\n\r\n\r\ndef hello15():\r\n    return \"world\"\r\n\r\n\r\ndef hello16():\r\n    return \"world\"\r\n```\r\n\r\n</details>\r\n\r\n```\r\n$ nvim --clean file.py\r\nggyG\r\n:marks  \" (1)\r\n:'[,']s/def/DEF/\r\n:marks  \" (2)\r\n```\r\n\r\nWe see that only the first few instances of `def` were replaced by `DEF`.\r\n\r\nHere is what the `'[` and `']` marks look like at (1):\r\n\r\n```\r\n[      1    0 def hello01():\r\n]     62 2147483647 return \"world\"\r\n```\r\n\r\nHere is what the `'[` and `']` marks look like at (2):\r\n\r\n```\r\n[      1    0 DEF hello01():\r\n]     45    0 DEF hello12()\r\n```\r\n\r\nIt looks like the marks are modified by `'inccommand'` during the execution of the `:substitute` command.\r\n\r\nI suspect that the values at (2) (and thus the number of substitutions that end up being made) might vary based on what's actually visible in the window. If the 62 lines of `file.py` all fits within your terminal screen, you'll likely need to add more lines to it to reproduce the issue.\r\n\r\nThe problem doesn't happen when `'inccommand'` is empty.\r\n\r\n\r\n### Expected behavior\r\n\r\nThe substitutions should be made across the whole range that is specified for the `:s` command.\r\n\r\n### Neovim version (nvim -v)\r\n\r\nNVIM v0.10.0-dev-1777+g3198598e6\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\nNo\r\n\r\n### Operating system/version\r\n\r\nArch Linux\r\n\r\n### Terminal name/version\r\n\r\nkitty 0.31.0\r\n\r\n### $TERM environment variable\r\n\r\nxterm-kitty\r\n\r\n### Installation\r\n\r\nBuild from repo",
    "closed_at": "2023-12-07T04:04:03Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "It seems that undoing a change moves `'[` and `']` marks.",
            "created_at": "2023-12-07T03:10:25Z",
            "html_url": "https://github.com/neovim/neovim/issues/26439#issuecomment-1844159049",
            "id": 1844159049,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26439",
            "node_id": "IC_kwDOAPphoM5t66JJ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1844159049/reactions"
            },
            "updated_at": "2023-12-07T03:10:25Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1844159049",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Thank you for the quick fix!",
            "created_at": "2023-12-07T11:54:32Z",
            "html_url": "https://github.com/neovim/neovim/issues/26439#issuecomment-1845209896",
            "id": 1845209896,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26439",
            "node_id": "IC_kwDOAPphoM5t-6so",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1845209896/reactions"
            },
            "updated_at": "2023-12-07T11:54:32Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1845209896",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/767223?v=4",
                "events_url": "https://api.github.com/users/rafikdraoui/events{/privacy}",
                "followers_url": "https://api.github.com/users/rafikdraoui/followers",
                "following_url": "https://api.github.com/users/rafikdraoui/following{/other_user}",
                "gists_url": "https://api.github.com/users/rafikdraoui/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rafikdraoui",
                "id": 767223,
                "login": "rafikdraoui",
                "node_id": "MDQ6VXNlcjc2NzIyMw==",
                "organizations_url": "https://api.github.com/users/rafikdraoui/orgs",
                "received_events_url": "https://api.github.com/users/rafikdraoui/received_events",
                "repos_url": "https://api.github.com/users/rafikdraoui/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rafikdraoui/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rafikdraoui/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rafikdraoui"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/26439/comments",
    "created_at": "2023-12-07T02:34:01Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/26439/events",
    "html_url": "https://github.com/neovim/neovim/issues/26439",
    "id": 2029755590,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 5581608985,
            "name": "marks",
            "node_id": "LA_kwDOAPphoM8AAAABTLCYGQ",
            "url": "https://api.github.com/repos/neovim/neovim/labels/marks"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/26439/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 37,
        "created_at": "2023-10-09T10:31:49Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
            "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
            "followers_url": "https://api.github.com/users/zeertzjq/followers",
            "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
            "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/zeertzjq",
            "id": 35768171,
            "login": "zeertzjq",
            "node_id": "MDQ6VXNlcjM1NzY4MTcx",
            "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
            "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
            "repos_url": "https://api.github.com/users/zeertzjq/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/zeertzjq"
        },
        "description": "",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/40",
        "id": 10019067,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/40/labels",
        "node_id": "MI_kwDOAPphoM4AmOD7",
        "number": 40,
        "open_issues": 8,
        "state": "open",
        "title": "0.9.5",
        "updated_at": "2023-12-07T08:39:31Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/40"
    },
    "node_id": "I_kwDOAPphoM54-5zG",
    "number": 26439,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/26439/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/26439/timeline",
    "title": "inccommand breaks `:s` when the range is `'[,']`.",
    "updated_at": "2023-12-07T11:54:33Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/26439",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/767223?v=4",
        "events_url": "https://api.github.com/users/rafikdraoui/events{/privacy}",
        "followers_url": "https://api.github.com/users/rafikdraoui/followers",
        "following_url": "https://api.github.com/users/rafikdraoui/following{/other_user}",
        "gists_url": "https://api.github.com/users/rafikdraoui/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/rafikdraoui",
        "id": 767223,
        "login": "rafikdraoui",
        "node_id": "MDQ6VXNlcjc2NzIyMw==",
        "organizations_url": "https://api.github.com/users/rafikdraoui/orgs",
        "received_events_url": "https://api.github.com/users/rafikdraoui/received_events",
        "repos_url": "https://api.github.com/users/rafikdraoui/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/rafikdraoui/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rafikdraoui/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/rafikdraoui"
    }
}