{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nWhen using the LSP function `goto definition` on certain places I get the error:\r\n\r\n```\r\nError executing vim.schedule lua callback: /home/will/.local/share/nvim/runtime/lua/vim/lsp/util.lua:1157: Cursor position outside buffer\r\nstack traceback:\r\n        [C]: in function 'nvim_win_set_cursor'\r\n        /home/will/.local/share/nvim/runtime/lua/vim/lsp/util.lua:1157: in function 'jump_to_location'\r\n        .../will/.local/share/nvim/runtime/lua/vim/lsp/handlers.lua:405: in function 'handler'\r\n        /home/will/.local/share/nvim/runtime/lua/vim/lsp.lua:1393: in function ''\r\n        vim/_editor.lua: in function <vim/_editor.lua:0>\r\n```\r\n\r\nCuriously, I just downloaded the llama_index python code and most of the class definitions I'm trying to go is returning this error. At times it does work after the failure but sometimes the cursor stays stuck at place.\r\n\r\nI recorded the error being thrown, first I execute the `goto` LSP function, the error throws but the cursor still finds the definition in this case. Then I hit `<Ctrl + O>` to go back and it lands in the file `app.py` from another package (don't know why) and hitting `<Ctrl + O>` the cursor returns from where it started which seems to indicate the `goto` is first jumping to the wrong place and then going to the proper one.\r\n\r\nhttps://github.com/neovim/neovim/assets/4665485/be7142b0-97e8-4a45-86ab-e4f8d5aa9aea\r\n\r\n\n\n### Steps to reproduce\n\ngit clone git@github.com:run-llama/llama_index.git\r\ncd llama_index\r\nlvim experimental/splitter_playground/app.py\r\n(take cursor to `Document` class)\r\nrun LSP go to definition: `lua vim.lsp.buf.definition()`\n\n### Expected behavior\n\nNo errors\n\n### Neovim version (nvim -v)\n\nNVIM v0.9.4 Build type: Release LuaJIT 2.1.1692716794\n\n### Vim (not Nvim) behaves the same?\n\nhaven't tested\n\n### Operating system/version\n\nUbuntu 20.04\n\n### Terminal name/version\n\nterminator 1.91\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\nlunarvim script",
    "closed_at": "2023-11-17T14:48:54Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Sorry, we don't support LunarVim; it messes too much with Neovim internals. Please provide a minimal example without LunarVim and a standalone config we can test with `nvim --clean -u test.lua`.",
            "created_at": "2023-11-17T14:48:54Z",
            "html_url": "https://github.com/neovim/neovim/issues/26094#issuecomment-1816562938",
            "id": 1816562938,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/26094",
            "node_id": "IC_kwDOAPphoM5sRoz6",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1816562938/reactions"
            },
            "updated_at": "2023-11-17T14:48:54Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1816562938",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/26094/comments",
    "created_at": "2023-11-17T14:46:47Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/26094/events",
    "html_url": "https://github.com/neovim/neovim/issues/26094",
    "id": 1999293152,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/26094/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM53Ksrg",
    "number": 26094,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/26094/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "not_planned",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/26094/timeline",
    "title": "Error executing vim.schedule lua callback: Cursor position outside buffer",
    "updated_at": "2023-11-17T14:48:54Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/26094",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/4665485?v=4",
        "events_url": "https://api.github.com/users/WillianFuks/events{/privacy}",
        "followers_url": "https://api.github.com/users/WillianFuks/followers",
        "following_url": "https://api.github.com/users/WillianFuks/following{/other_user}",
        "gists_url": "https://api.github.com/users/WillianFuks/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/WillianFuks",
        "id": 4665485,
        "login": "WillianFuks",
        "node_id": "MDQ6VXNlcjQ2NjU0ODU=",
        "organizations_url": "https://api.github.com/users/WillianFuks/orgs",
        "received_events_url": "https://api.github.com/users/WillianFuks/received_events",
        "repos_url": "https://api.github.com/users/WillianFuks/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/WillianFuks/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/WillianFuks/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/WillianFuks"
    }
}