{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nCrash when opened floating window with centered long title.\r\n\r\n```\r\nbuild/bin/nvim --clean --headless +'luafile minimal.lua'\r\n```\r\n\r\n<details>\r\n<summary>Full backtrace</summary>\r\n\r\n```\r\n\r\nwarning: Can't open file anon_inode:[io_uring] which was expanded to anon_inode:[io_uring] during file-backed mapping note processing\r\n\r\nwarning: Can't open file anon_inode:[io_uring] which was expanded to anon_inode:[io_uring] during file-backed mapping note processing\r\n\r\nwarning: Can't open file anon_inode:[io_uring] which was expanded to anon_inode:[io_uring] during file-backed mapping note processing\r\n\r\nwarning: Can't open file anon_inode:[io_uring] which was expanded to anon_inode:[io_uring] during file-backed mapping note processing\r\n[New LWP 10694]\r\n[New LWP 10695]\r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\r\nCore was generated by `/home/notomo/workspace/neovim/build/bin/nvim --clean --headless +luafile ./mini'.\r\nProgram terminated with signal SIGSEGV, Segmentation fault.\r\n#0  0x00007f5e061768c0 in ?? () from /lib/x86_64-linux-gnu/libc.so.6\r\n[Current thread is 1 (Thread 0x7f5e060d3b80 (LWP 10694))]\r\n\r\nThread 2 (LWP 10695):\r\n#0  0x0000000000000000 in ?? ()\r\nNo symbol table info available.\r\nBacktrace stopped: Cannot access memory at address 0x0\r\n\r\nThread 1 (Thread 0x7f5e060d3b80 (LWP 10694)):\r\n#0  0x00007f5e061768c0 in ?? () from /lib/x86_64-linux-gnu/libc.so.6\r\nNo symbol table info available.\r\n#1  0x00007f5e06178c5b in ?? () from /lib/x86_64-linux-gnu/libc.so.6\r\nNo symbol table info available.\r\n#2  0x00007f5e0617a2e2 in malloc () from /lib/x86_64-linux-gnu/libc.so.6\r\nNo symbol table info available.\r\n#3  0x0000561d48945dc7 in try_malloc (size=7680) at /home/notomo/workspace/neovim/src/nvim/memory.c:89\r\n        allocated_size = 7680\r\n        ret = 0xb00000000\r\n#4  0x0000561d48945eb5 in xmalloc (size=7680) at /home/notomo/workspace/neovim/src/nvim/memory.c:123\r\n        ret = 0x0\r\n#5  0x0000561d488ccd9b in grid_alloc (grid=0x561d48d3ada0 <msg_grid>, rows=24, columns=80, copy=false, valid=true) at /home/notomo/workspace/neovim/src/nvim/grid.c:789\r\n        new_row = 999\r\n        ngrid = {handle = 4, chars = 0x0, attrs = 0x0, vcols = 0x0, line_offset = 0x0, dirty_col = 0x0, rows = 0, cols = 0, valid = false, throttled = false, row_offset = 0, col_offset = 0, target = 0x0, blending = false, focusable = true, zindex = 0, comp_row = 0, comp_col = 0, comp_width = 0, comp_height = 0, comp_index = 0, comp_disabled = false}\r\n        ncells = 1920\r\n#6  0x0000561d4894c3da in msg_grid_validate () at /home/notomo/workspace/neovim/src/nvim/message.c:178\r\n        pos = 10\r\n        should_alloc = true\r\n        max_rows = 23\r\n#7  0x0000561d487f8e6a in showmode () at /home/notomo/workspace/neovim/src/nvim/drawscreen.c:933\r\n        length = 0\r\n        do_mode = -1\r\n        can_show_mode = 73\r\n        ruler_win = 0x7ffc006aac58\r\n#8  0x0000561d487f4d6b in update_screen () at /home/notomo/workspace/neovim/src/nvim/drawscreen.c:679\r\n        did_intro = false\r\n        is_stl_global = false\r\n        type = 40\r\n        hl_changed = true\r\n        providers = {size = 0, capacity = 4, items = 0x7ffc246aad88, init_array = {0x561d494a55b0, 0x0, 0x463e39db7d1f1200, 0x7ffc246aadb0}}\r\n        did_one = true\r\n#9  0x0000561d48894222 in ex_redraw (eap=0x7ffc246ab180) at /home/notomo/workspace/neovim/src/nvim/ex_docmd.c:6256\r\n        r = 1\r\n        p = 0\r\n#10 0x0000561d4888ac4c in execute_cmd0 (retv=0x7ffc246aae74, eap=0x7ffc246ab180, errormsg=0x7ffc246aae78, preview=false) at /home/notomo/workspace/neovim/src/nvim/ex_docmd.c:1632\r\nNo locals.\r\n#11 0x0000561d4888a5f6 in execute_cmd (eap=0x7ffc246ab180, cmdinfo=0x7ffc246ab2e8, preview=false) at /home/notomo/workspace/neovim/src/nvim/ex_docmd.c:1710\r\n        errormsg = 0x0\r\n        retv = 0\r\n        save_cmdmod = {cmod_flags = 0, cmod_split = 0, cmod_tab = 0, cmod_filter_pat = 0x0, cmod_filter_regmatch = {regprog = 0x0, startp = {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}, endp = {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}, rm_matchcol = 0, rm_ic = false}, cmod_filter_force = false, cmod_verbose = 0, cmod_save_ei = 0x0, cmod_did_sandbox = 0, cmod_verbose_save = 0, cmod_save_msg_silent = 0, cmod_save_msg_scroll = 0, cmod_did_esilent = 0}\r\n#12 0x0000561d487525e1 in nvim_cmd (channel_id=9223372036854775809, cmd=0x7ffc246ab430, opts=0x7ffc246ab528, err=0x7ffc246ab538) at /home/notomo/workspace/neovim/src/nvim/api/command.c:661\r\n        save_current_sctx = {sc_sid = -3, sc_seq = 0, sc_lnum = 0}\r\n        save_channel_id = 0\r\n        saved_msg_list = 0x7ffc246abb38\r\n        private_msg_list = 0x0\r\n        ea = {arg = 0x561d494a33c6 \"\", args = 0x0, arglens = 0x0, argc = 0, nextcmd = 0x0, cmd = 0x561d494a33c0 \"redraw\", cmdlinep = 0x7ffc246ab178, cmdline_tofree = 0x0, cmdidx = CMD_redraw, argt = 17301762, skip = 0, forceit = 0, addr_count = 0, line1 = 1, line2 = 1, addr_type = ADDR_NONE, flags = 0, do_ecmd_cmd = 0x0, do_ecmd_lnum = 0, append = 0, usefilter = 0, amount = 0, regname = 0, force_bin = 0, read_edit = 0, mkdir_p = 0, force_ff = 0, force_enc = 0, bad_char = 0, useridx = 0, errmsg = 0x0, getline = 0x0, cookie = 0x0, cstack = 0x0}\r\n        cmdinfo = {cmdmod = {cmod_flags = 0, cmod_split = 0, cmod_tab = 0, cmod_filter_pat = 0x0, cmod_filter_regmatch = {regprog = 0x0, startp = {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}, endp = {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}, rm_matchcol = 0, rm_ic = false}, cmod_filter_force = false, cmod_verbose = 0, cmod_save_ei = 0x0, cmod_did_sandbox = 0, cmod_verbose_save = 0, cmod_save_msg_silent = 0, cmod_save_msg_scroll = 0, cmod_did_esilent = 0}, magic = {file = false, bar = true}}\r\n        cmdline = 0x561d494a33c0 \"redraw\"\r\n        cmdname = 0x561d494a3f00 \"redraw\"\r\n        args = {size = 0, capacity = 0, items = 0x0}\r\n        retv = {data = 0x0, size = 0}\r\n        p = 0x561d494a3f06 \"\"\r\n        fullname = 0x561d48c7890d \"redraw\"\r\n        capture_local = {ga_len = 152, ga_maxlen = 0, ga_itemsize = 0, ga_growsize = 0, ga_data = 0x0}\r\n        save_msg_silent = 0\r\n        save_capture_ga = 0x0\r\n        save_msg_col = 0\r\n#13 0x0000561d48733752 in nlua_api_nvim_cmd (lstate=0x7f5e05dc6380) at /home/notomo/workspace/neovim/build/src/nvim/auto/lua_api_c_bindings.generated.c:1607\r\n        err = {type = kErrorTypeNone, msg = 0x0}\r\n        err_param = 0x0\r\n        arg2 = {output = false}\r\n        arg1 = {is_set__cmd_ = 66, cmd = {data = 0x561d494a3ea0 \"redraw\", size = 6}, range = {size = 0, capacity = 0, items = 0x0}, count = 0, reg = {data = 0x0, size = 0}, bang = false, args = {size = 0, capacity = 0, items = 0x0}, magic = {size = 0, capacity = 0, items = 0x0}, mods = {size = 0, capacity = 0, items = 0x0}, nargs = {type = kObjectTypeNil, data = {boolean = false, integer = 0, floating = 0, string = {data = 0x0, size = 0}, array = {size = 0, capacity = 0, items = 0x0}, dictionary = {size = 0, capacity = 0, items = 0x0}, luaref = 0}}, addr = {type = kObjectTypeNil, data = {boolean = false, integer = 0, floating = 0, string = {data = 0x0, size = 0}, array = {size = 0, capacity = 0, items = 0x0}, dictionary = {size = 0, capacity = 0, items = 0x0}, luaref = 0}}, nextcmd = {type = kObjectTypeNil, data = {boolean = false, integer = 0, floating = 0, string = {data = 0x0, size = 0}, array = {size = 0, capacity = 0, items = 0x0}, dictionary = {size = 0, capacity = 0, items = 0x0}, luaref = 0}}}\r\n        ret = {data = 0x7f5e05dc6380 \"(\\026\\333\\005^\\177\", size = 5513868316}\r\n#14 0x0000561d48ba9096 in lj_BC_FUNCC ()\r\nNo symbol table info available.\r\n#15 0x0000561d48b92efa in lua_pcall (L=0x561d494a52c0, nargs=<optimized out>, nresults=<optimized out>, errfunc=592) at lj_api.c:1150\r\n        g = 0x7f5e05dc63e0\r\n        oldh = <optimized out>\r\n        ef = 416611828305\r\n        status = <optimized out>\r\n#16 0x0000561d48900c42 in nlua_pcall (lstate=0x7f5e05dc6380, nargs=0, nresults=0) at /home/notomo/workspace/neovim/src/nvim/lua/executor.c:165\r\n        status = 0\r\n#17 0x0000561d4890187e in nlua_exec_file (path=0x561d494a3ec8 \"./minimal.lua\") at /home/notomo/workspace/neovim/src/nvim/lua/executor.c:1818\r\n        lstate = 0x7f5e05dc6380\r\n#18 0x0000561d48903378 in ex_luafile (eap=0x7ffc246ab7e8) at /home/notomo/workspace/neovim/src/nvim/lua/executor.c:1749\r\nNo locals.\r\n#19 0x0000561d4888ac4c in execute_cmd0 (retv=0x7ffc246ab7e4, eap=0x7ffc246ab7e8, errormsg=0x7ffc246ab8a8, preview=false) at /home/notomo/workspace/neovim/src/nvim/ex_docmd.c:1632\r\nNo locals.\r\n#20 0x0000561d48886bd1 in do_one_cmd (cmdlinep=0x7ffc246abb98, flags=11, cstack=0x7ffc246abba0, fgetline=0x0, cookie=0x0) at /home/notomo/workspace/neovim/src/nvim/ex_docmd.c:2291\r\n        errormsg = 0x0\r\n        save_reg_executing = 0\r\n        save_pending_end_reg_executing = false\r\n        ea = {arg = 0x561d494a3ec8 \"./minimal.lua\", args = 0x0, arglens = 0x0, argc = 0, nextcmd = 0x0, cmd = 0x561d494a3ec0 \"luafile ./minimal.lua\", cmdlinep = 0x7ffc246abb98, cmdline_tofree = 0x0, cmdidx = CMD_luafile, argt = 17301661, skip = 0, forceit = 0, addr_count = 0, line1 = 1, line2 = 1, addr_type = ADDR_LINES, flags = 0, do_ecmd_cmd = 0x0, do_ecmd_lnum = 0, append = 0, usefilter = 0, amount = 0, regname = 0, force_bin = 0, read_edit = 0, mkdir_p = 0, force_ff = 0, force_enc = 0, bad_char = 0, useridx = 0, errmsg = 0x0, getline = 0x0, cookie = 0x0, cstack = 0x7ffc246abba0}\r\n        save_cmdmod = {cmod_flags = 0, cmod_split = 0, cmod_tab = 0, cmod_filter_pat = 0x0, cmod_filter_regmatch = {regprog = 0x0, startp = {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}, endp = {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}, rm_matchcol = 0, rm_ic = false}, cmod_filter_force = false, cmod_verbose = 0, cmod_save_ei = 0x0, cmod_did_sandbox = 0, cmod_verbose_save = 0, cmod_save_msg_silent = 0, cmod_save_msg_scroll = 0, cmod_did_esilent = 0}\r\n        after_modifier = 0x561d494a3ec0 \"luafile ./minimal.lua\"\r\n        cmd = 0x561d494a3ec0 \"luafile ./minimal.lua\"\r\n        p = 0x561d494a3ec7 \" ./minimal.lua\"\r\n        ni = 0\r\n        retv = 0\r\n#21 0x0000561d48884682 in do_cmdline (cmdline=0x7ffc246acc49 \"luafile ./minimal.lua\", fgetline=0x0, cookie=0x0, flags=11) at /home/notomo/workspace/neovim/src/nvim/ex_docmd.c:590\r\n        current_line_before = 0\r\n        recursive = 1\r\n        call_depth = 1\r\n        next_cmdline = 0x561d494a3ec0 \"luafile ./minimal.lua\"\r\n        cmdline_copy = 0x561d494a3ec0 \"luafile ./minimal.lua\"\r\n        used_getline = false\r\n        msg_didout_before_start = false\r\n        count = 1\r\n        did_inc = false\r\n        retval = 1\r\n        cstack = {cs_flags = {0 <repeats 50 times>}, cs_pending = '\\000' <repeats 49 times>, cs_pend = {csp_rv = {0x0 <repeats 50 times>}, csp_ex = {0x0 <repeats 50 times>}}, cs_forinfo = {0x0 <repeats 50 times>}, cs_line = {0 <repeats 50 times>}, cs_idx = -1, cs_looplevel = 0, cs_trylevel = 0, cs_emsg_silent_list = 0x0, cs_lflags = 0}\r\n        lines_ga = {ga_len = 0, ga_maxlen = 0, ga_itemsize = 16, ga_growsize = 10, ga_data = 0x0}\r\n        current_line = 0\r\n        fname = 0x0\r\n        breakpoint = 0x0\r\n        dbg_tick = 0x0\r\n        debug_saved = {trylevel = 0, force_abort = 0, caught_stack = 0x0, vv_exception = 0x0, vv_throwpoint = 0x0, did_emsg = 0, got_int = 0, did_throw = false, need_rethrow = 0, check_cstack = 0, current_exception = 0x0}\r\n        initial_trylevel = 0\r\n        saved_msg_list = 0x0\r\n        private_msg_list = 0x0\r\n        cmd_getline = 0x0\r\n        cmd_cookie = 0x0\r\n        cmd_loop_cookie = {lines_gap = 0x0, current_line = 0, repeating = 0, getline = 0x0, cookie = 0x0}\r\n        real_cookie = 0x0\r\n        getline_is_func = 0\r\n#22 0x0000561d48885411 in do_cmdline_cmd (cmd=0x7ffc246acc49 \"luafile ./minimal.lua\") at /home/notomo/workspace/neovim/src/nvim/ex_docmd.c:289\r\nNo locals.\r\n#23 0x0000561d4872b307 in exe_commands (parmp=0x7ffc246ac240) at /home/notomo/workspace/neovim/src/nvim/main.c:1914\r\n        i = 0\r\n#24 0x0000561d487277f5 in main (argc=5, argv=0x7ffc246ac498) at /home/notomo/workspace/neovim/src/nvim/main.c:575\r\n        fname = 0x0\r\n        params = {argc = 5, argv = 0x7ffc246ac498, use_vimrc = 0x561d48c591aa \"NONE\", clean = true, n_commands = 2, commands = {0x7ffc246acc49 \"luafile ./minimal.lua\", 0x7ffc246acc60 \"quitall!\", 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}, cmds_tofree = \"\\000\\000\\000\\000\\000\\000\\000\\000\\000\", n_pre_commands = 0, pre_commands = {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0}, luaf = 0x0, lua_arg0 = -1, edit_type = 0, tagname = 0x0, use_ef = 0x0, input_istext = false, no_swap_file = 0, use_debug_break_level = -1, window_count = 1, window_layout = 0, diff_mode = 0, listen_addr = 0x0, remote = 0, server_addr = 0x0, scriptin = 0x0, scriptout = 0x0, scriptout_append = false, had_stdin_file = false}\r\n        cwd = 0x0\r\n        has_term = true\r\n        use_builtin_ui = false\r\n        remote_ui = false\r\n        use_remote_ui = false\r\n        err = {type = kErrorTypeNone, msg = 0x0}\r\n        o = {type = kObjectTypeNil, data = {boolean = false, integer = 0, floating = 0, string = {data = 0x0, size = 0}, array = {size = 0, capacity = 0, items = 0x0}, dictionary = {size = 0, capacity = 0, items = 0x0}, luaref = 0}}\r\n        vimrc_none = true\r\n```\r\n\r\n</details>\r\n\n\n### Steps to reproduce\n\nminimal.lua\r\n```lua\r\nvim.api.nvim_open_win(0, true, {\r\n  width = 10,\r\n  height = 10,\r\n  relative = \"editor\",\r\n  row = 10,\r\n  col = 10,\r\n  focusable = true,\r\n  external = false,\r\n  style = \"minimal\",\r\n  title = (\"a\"):rep(14),\r\n  title_pos = \"center\",\r\n  border = \"single\",\r\n})\r\nvim.cmd.redraw()\r\nvim.cmd.close()\r\n```\r\n\r\n```\r\nbuild/bin/nvim --clean --headless +'luafile minimal.lua'\r\nzsh: segmentation fault (core dumped)\r\n```\r\n\n\n### Expected behavior\n\nNo crash.\r\n\n\n### Neovim version (nvim -v)\n\n0.10.0-dev-1399+g3a3e02512\n\n### Vim (not Nvim) behaves the same?\n\nN/A (nvim_open_win)\n\n### Operating system/version\n\nUbuntu 22.04\n\n### Terminal name/version\n\nwezterm 20230726-161042-3aa7da61\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\nbuild from repo",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "relate https://github.com/neovim/neovim/issues/23602",
            "created_at": "2023-10-22T12:29:40Z",
            "html_url": "https://github.com/neovim/neovim/issues/25746#issuecomment-1774081840",
            "id": 1774081840,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25746",
            "node_id": "IC_kwDOAPphoM5pvlcw",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1774081840/reactions"
            },
            "updated_at": "2023-10-22T12:29:40Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1774081840",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "ASAN:\r\n```\r\n=================================================================\r\n==126723==ERROR: AddressSanitizer: heap-buffer-overflow on address 0x6170000026fc at pc 0x565533d0bdca bp 0x7ffe034a28d0 sp 0x7ffe034a28c8\r\nWRITE of size 4 at 0x6170000026fc thread T0\r\n    #0 0x565533d0bdc9 in grid_line_puts **/src/nvim/grid.c:434:23\r\n    #1 0x5655337ca241 in win_redr_bordertext **/src/nvim/drawscreen.c:728:12\r\n    #2 0x56553379bd74 in win_redr_border **/src/nvim/drawscreen.c:776:7\r\n    #3 0x5655337980fa in update_screen **/src/nvim/drawscreen.c:640:7\r\n    #4 0x565533b9fac5 in ex_redraw **/src/nvim/ex_docmd.c:6256:3\r\n    #5 0x565533b656bc in execute_cmd0 **/src/nvim/ex_docmd.c:1632:7\r\n    #6 0x565533b61872 in execute_cmd **/src/nvim/ex_docmd.c:1710:3\r\n    #7 0x56553333328d in nvim_cmd **/src/nvim/api/command.c:661:3\r\n    #8 0x5655332a5e8a in nlua_api_nvim_cmd **/build/src/nvim/auto/lua_api_c_bindings.generated.c:1607:22\r\n    #9 0x565534ce5b35 in lj_BC_FUNCC (**/build/bin/nvim+0x2774b35) (BuildId: 5db6e77f680e845e899d326e50c2abc6eda8eff8)\r\n    #10 0x565534ccf9e9 in lua_pcall **/.deps/build/src/luajit/src/lj_api.c:1150:12\r\n    #11 0x565533e5a41d in nlua_pcall **/src/nvim/lua/executor.c:165:16\r\n    #12 0x565533e5d967 in nlua_exec_file **/src/nvim/lua/executor.c:1818:7\r\n    #13 0x5655345454b4 in do_source **/src/nvim/runtime.c:2209:5\r\n    #14 0x565534540a81 in cmd_source **/src/nvim/runtime.c:1776:14\r\n    #15 0x5655345405fd in ex_source **/src/nvim/runtime.c:1784:3\r\n    #16 0x565533b656bc in execute_cmd0 **/src/nvim/ex_docmd.c:1632:7\r\n    #17 0x565533b425a8 in do_one_cmd **/src/nvim/ex_docmd.c:2291:7\r\n    #18 0x565533b32e2d in do_cmdline **/src/nvim/ex_docmd.c:590:20\r\n    #19 0x565533b37f80 in do_cmdline_cmd **/src/nvim/ex_docmd.c:289:10\r\n    #20 0x56553328cf02 in exe_commands **/src/nvim/main.c:1914:5\r\n    #21 0x565533274dac in main **/src/nvim/main.c:575:5\r\n    #22 0x7f3b893d4ccf  (/usr/lib/libc.so.6+0x27ccf) (BuildId: 8bfe03f6bf9b6a6e2591babd0bbc266837d8f658)\r\n    #23 0x7f3b893d4d89 in __libc_start_main (/usr/lib/libc.so.6+0x27d89) (BuildId: 8bfe03f6bf9b6a6e2591babd0bbc266837d8f658)\r\n    #24 0x56553313ada4 in _start (**/build/bin/nvim+0xbc9da4) (BuildId: 5db6e77f680e845e899d326e50c2abc6eda8eff8)\r\n\r\n0x6170000026fc is located 4 bytes before 768-byte region [0x617000002700,0x617000002a00)\r\nallocated by thread T0 here:\r\n    #0 0x5655332295c9 in __interceptor_malloc (**/build/bin/nvim+0xcb85c9) (BuildId: 5db6e77f680e845e899d326e50c2abc6eda8eff8)\r\n    #1 0x565534042e56 in try_malloc **/src/nvim/memory.c:89:15\r\n    #2 0x56553404302c in xmalloc **/src/nvim/memory.c:123:15\r\n    #3 0x565533d16e0a in grid_alloc **/src/nvim/grid.c:831:20\r\n    #4 0x565533790369 in default_grid_alloc **/src/nvim/drawscreen.c:197:3\r\n    #5 0x565533791dd3 in screen_resize **/src/nvim/drawscreen.c:303:10\r\n    #6 0x56553495f6ce in ui_refresh **/src/nvim/ui.c:229:3\r\n    #7 0x565534962068 in ui_attach_impl **/src/nvim/ui.c:365:3\r\n    #8 0x5655334b35e4 in nvim_ui_attach **/src/nvim/api/ui.c:218:3\r\n    #9 0x56553342abcc in handle_nvim_ui_attach **/build/src/nvim/auto/api/private/dispatch_wrappers.generated.h:5661:3\r\n    #10 0x565534127ada in request_event **/src/nvim/msgpack_rpc/channel.c:444:19\r\n    #11 0x565533ab9b60 in multiqueue_process_events **/src/nvim/event/multiqueue.c:153:7\r\n    #12 0x5655334b006d in remote_ui_wait_for_attach **/src/nvim/api/ui.c:139:3\r\n    #13 0x5655332736ad in main **/src/nvim/main.c:397:5\r\n    #14 0x7f3b893d4ccf  (/usr/lib/libc.so.6+0x27ccf) (BuildId: 8bfe03f6bf9b6a6e2591babd0bbc266837d8f658)\r\n\r\nSUMMARY: AddressSanitizer: heap-buffer-overflow **/src/nvim/grid.c:434:23 in grid_line_puts\r\nShadow bytes around the buggy address:\r\n  0x617000002400: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x617000002480: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x617000002500: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x617000002580: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x617000002600: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n=>0x617000002680: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa[fa]\r\n  0x617000002700: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x617000002780: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x617000002800: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x617000002880: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x617000002900: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\nShadow byte legend (one shadow byte represents 8 application bytes):\r\n  Addressable:           00\r\n  Partially addressable: 01 02 03 04 05 06 07 \r\n  Heap left redzone:       fa\r\n  Freed heap region:       fd\r\n  Stack left redzone:      f1\r\n  Stack mid redzone:       f2\r\n  Stack right redzone:     f3\r\n  Stack after return:      f5\r\n  Stack use after scope:   f8\r\n  Global redzone:          f9\r\n  Global init order:       f6\r\n  Poisoned by user:        f7\r\n  Container overflow:      fc\r\n  Array cookie:            ac\r\n  Intra object redzone:    bb\r\n  ASan internal:           fe\r\n  Left alloca redzone:     ca\r\n  Right alloca redzone:    cb\r\n==126723==ABORTING\r\n```",
            "created_at": "2023-10-22T12:33:01Z",
            "html_url": "https://github.com/neovim/neovim/issues/25746#issuecomment-1774082620",
            "id": 1774082620,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25746",
            "node_id": "IC_kwDOAPphoM5pvlo8",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1774082620/reactions"
            },
            "updated_at": "2023-10-22T12:33:01Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1774082620",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35768171?v=4",
                "events_url": "https://api.github.com/users/zeertzjq/events{/privacy}",
                "followers_url": "https://api.github.com/users/zeertzjq/followers",
                "following_url": "https://api.github.com/users/zeertzjq/following{/other_user}",
                "gists_url": "https://api.github.com/users/zeertzjq/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/zeertzjq",
                "id": 35768171,
                "login": "zeertzjq",
                "node_id": "MDQ6VXNlcjM1NzY4MTcx",
                "organizations_url": "https://api.github.com/users/zeertzjq/orgs",
                "received_events_url": "https://api.github.com/users/zeertzjq/received_events",
                "repos_url": "https://api.github.com/users/zeertzjq/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/zeertzjq/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/zeertzjq/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/zeertzjq"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "seems to fix:\r\n```diff\r\ndiff --git a/src/nvim/drawscreen.c b/src/nvim/drawscreen.c\r\nindex ca70c1f4e..adbe0f473 100644\r\n--- a/src/nvim/drawscreen.c\r\n+++ b/src/nvim/drawscreen.c\r\n@@ -735,9 +735,9 @@ int win_get_bordertext_col(int total_col, int text_width, AlignTextPos align)\r\n   case kAlignLeft:\r\n     return 1;\r\n   case kAlignCenter:\r\n-    return (total_col - text_width) / 2 + 1;\r\n+    return MAX((total_col - text_width) / 2 + 1, 1);\r\n   case kAlignRight:\r\n-    return total_col - text_width + 1;\r\n+    return MAX(total_col - text_width + 1, 1);\r\n   }\r\n   UNREACHABLE;\r\n }\r\n```",
            "created_at": "2023-10-22T13:02:35Z",
            "html_url": "https://github.com/neovim/neovim/issues/25746#issuecomment-1774089931",
            "id": 1774089931,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25746",
            "node_id": "IC_kwDOAPphoM5pvnbL",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1774089931/reactions"
            },
            "updated_at": "2023-10-22T13:02:35Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1774089931",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/105592020?v=4",
                "events_url": "https://api.github.com/users/nwounkn/events{/privacy}",
                "followers_url": "https://api.github.com/users/nwounkn/followers",
                "following_url": "https://api.github.com/users/nwounkn/following{/other_user}",
                "gists_url": "https://api.github.com/users/nwounkn/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/nwounkn",
                "id": 105592020,
                "login": "nwounkn",
                "node_id": "U_kgDOBks01A",
                "organizations_url": "https://api.github.com/users/nwounkn/orgs",
                "received_events_url": "https://api.github.com/users/nwounkn/received_events",
                "repos_url": "https://api.github.com/users/nwounkn/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/nwounkn/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/nwounkn/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/nwounkn"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/25746/comments",
    "created_at": "2023-10-22T12:26:11Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/25746/events",
    "html_url": "https://github.com/neovim/neovim/issues/25746",
    "id": 1955882212,
    "labels": [
        {
            "color": "0E8A16",
            "default": false,
            "description": "issue contains a stacktrace/ASAN log",
            "id": 435854079,
            "name": "has:backtrace",
            "node_id": "MDU6TGFiZWw0MzU4NTQwNzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/has:backtrace"
        },
        {
            "color": "F9D0C4",
            "default": false,
            "description": "issue reporting a crash or segfault",
            "id": 435854234,
            "name": "bug-crash",
            "node_id": "MDU6TGFiZWw0MzU4NTQyMzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-crash"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "floating windows",
            "id": 3234818716,
            "name": "float",
            "node_id": "MDU6TGFiZWwzMjM0ODE4NzE2",
            "url": "https://api.github.com/repos/neovim/neovim/labels/float"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/25746/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM50lGTk",
    "number": 25746,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/25746/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/25746/timeline",
    "title": "Segmentation fault: floating window with centered long title",
    "updated_at": "2023-10-22T13:02:35Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/25746",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/18519692?v=4",
        "events_url": "https://api.github.com/users/notomo/events{/privacy}",
        "followers_url": "https://api.github.com/users/notomo/followers",
        "following_url": "https://api.github.com/users/notomo/following{/other_user}",
        "gists_url": "https://api.github.com/users/notomo/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/notomo",
        "id": 18519692,
        "login": "notomo",
        "node_id": "MDQ6VXNlcjE4NTE5Njky",
        "organizations_url": "https://api.github.com/users/notomo/orgs",
        "received_events_url": "https://api.github.com/users/notomo/received_events",
        "repos_url": "https://api.github.com/users/notomo/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/notomo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/notomo/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/notomo"
    }
}