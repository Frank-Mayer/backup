{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\r\n\r\nIf you set `number` and/or `relativenumber` to true then change the value of `statuscolumn` to something other than the default value ~~strange empty columns~~ empty columns can be seen(when `numberwidth` is larger than the custom statuscolumn's width). When clicked on them Neovim crashes.\r\n\r\n![Screenshot_2024-06-18-13-42-36-278_com termux-edit](https://github.com/neovim/neovim/assets/122956967/d414ea04-27fd-4fdd-ad31-da3264060643)\r\n![Screenshot_2024-06-18-13-42-56-060_com termux-edit](https://github.com/neovim/neovim/assets/122956967/bf62b6ba-78ed-4a77-bade-9dd903553f55)\r\n![Screenshot_2024-06-18-13-43-28-247_com termux-edit](https://github.com/neovim/neovim/assets/122956967/d05ee2c7-0023-48b8-b25d-4dec24c31c13)\r\n![Screenshot_2024-06-18-13-43-41-114_com termux-edit](https://github.com/neovim/neovim/assets/122956967/989374e1-ba6a-41a2-8c36-d1cae74a31cd)\r\n\r\n\r\n### Steps to reproduce\r\n\r\n1. Open a `clean` neovim session with `nvim --clean`.\r\n2. You need to set the following options(either through the cmdline or your `init.lua` if you aren't running with the `--clean` flag.\r\n```\r\nvim.o.number = true;\r\n-- vim.o.relativenumber = true;\r\n-- Setting either one of them will work\r\n\r\nvim.o.numberwidth = 10;\r\n-- Optional, for the sake of demonstration a large value is used\r\n\r\nvim.o.statuscolumn = \"Test\";\r\n-- Can't be nil, \" \" as they become the default statuscolumn, has to be shorter than the numberwidth\r\n```\r\n3. You should see something like `Test      `. Click on the empty spaces after `Test`.\r\n\r\nThis should cause neovim to crash.\r\n\r\n### Expected behavior\r\n\r\nThe clicks shouldn't be registered and nothing should occur.\r\n\r\n### Neovim version (nvim -v)\r\n\r\nNVIM v0.10.0 Build type: RelWithDebInfo LuaJIT 2.1.0-beta3\r\n\r\n### Vim (not Nvim) behaves the same?\r\n\r\nNot reproducible as vim doesn't have the `statuscolumn` option(at least I couldn't set it).\r\n\r\n### Operating system/version\r\n\r\nAndroid 13 aarch64(I am running inside Termux and proot distro isn't being used)\r\n\r\n### Terminal name/version\r\n\r\nTermux 0.118.0(from Github releases)\r\n\r\n### $TERM environment variable\r\n\r\nxterm-256color\r\n\r\n### Installation\r\n\r\nI have built from source, luarocks has been used to handle dependencies(as the other methods don't work).",
    "closed_at": "2024-06-18T22:00:40Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Crash introduced in #26891, which fixed another crash... I'll look into it.\r\n\r\n> strange empty columns can be seen\r\n\r\nThe 'statuscolumn' intentionally follows 'numberwidth', which is documented. I don't think that's strange?",
            "created_at": "2024-06-18T17:09:24Z",
            "html_url": "https://github.com/neovim/neovim/issues/29390#issuecomment-2176586943",
            "id": 2176586943,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29390",
            "node_id": "IC_kwDOAPphoM6BvBS_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2176586943/reactions"
            },
            "updated_at": "2024-06-18T17:09:24Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2176586943",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "author_association": "NONE",
            "body": "> The 'statuscolumn' intentionally follows 'numberwidth', which is documented. I don't think that's strange?\r\n\r\nYeah, when I first saw the issue occur I had a custom statuscolumn(which was also 4 columns wide) set. So, when I saw a window where the statuscolumn should be empty also taking 4 columns I thought maybe Neovim made all the statuscolumn take the same amount of width. Which is why I said that.\r\n\r\nI will go edit my comment.\r\n\r\n",
            "created_at": "2024-06-18T17:19:09Z",
            "html_url": "https://github.com/neovim/neovim/issues/29390#issuecomment-2176603247",
            "id": 2176603247,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29390",
            "node_id": "IC_kwDOAPphoM6BvFRv",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2176603247/reactions"
            },
            "updated_at": "2024-06-18T17:19:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2176603247",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/122956967?v=4",
                "events_url": "https://api.github.com/users/OXY2DEV/events{/privacy}",
                "followers_url": "https://api.github.com/users/OXY2DEV/followers",
                "following_url": "https://api.github.com/users/OXY2DEV/following{/other_user}",
                "gists_url": "https://api.github.com/users/OXY2DEV/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/OXY2DEV",
                "id": 122956967,
                "login": "OXY2DEV",
                "node_id": "U_kgDOB1Qspw",
                "organizations_url": "https://api.github.com/users/OXY2DEV/orgs",
                "received_events_url": "https://api.github.com/users/OXY2DEV/received_events",
                "repos_url": "https://api.github.com/users/OXY2DEV/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/OXY2DEV/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/OXY2DEV/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/OXY2DEV"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Returning early in `do_mouse()` when `click_col >= wp->w_statuscol_click_defs_size()` seems appropriate. I.e. still consider it a statuscolumn click for other (non)side effects, but do not try to call the click func for area that was not part of the generated statuscolumn but padded instead.",
            "created_at": "2024-06-18T17:26:36Z",
            "html_url": "https://github.com/neovim/neovim/issues/29390#issuecomment-2176615332",
            "id": 2176615332,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29390",
            "node_id": "IC_kwDOAPphoM6BvIOk",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2176615332/reactions"
            },
            "updated_at": "2024-06-18T17:26:56Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2176615332",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/29390/comments",
    "created_at": "2024-06-18T12:58:30Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/29390/events",
    "html_url": "https://github.com/neovim/neovim/issues/29390",
    "id": 2359807053,
    "labels": [
        {
            "color": "F9D0C4",
            "default": false,
            "description": "issue reporting a crash or segfault",
            "id": 435854234,
            "name": "bug-crash",
            "node_id": "MDU6TGFiZWw0MzU4NTQyMzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-crash"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 646043375,
            "name": "mouse",
            "node_id": "MDU6TGFiZWw2NDYwNDMzNzU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/mouse"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "sign/number column",
            "id": 2962322085,
            "name": "column",
            "node_id": "MDU6TGFiZWwyOTYyMzIyMDg1",
            "url": "https://api.github.com/repos/neovim/neovim/labels/column"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/29390/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6Mp8xN",
    "number": 29390,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/29390/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/29390/timeline",
    "title": "Mouse clicks causing crashes when `number`/`relativenumber`  is used with a custom `statuscolumn`",
    "updated_at": "2024-06-18T22:00:40Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/29390",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/122956967?v=4",
        "events_url": "https://api.github.com/users/OXY2DEV/events{/privacy}",
        "followers_url": "https://api.github.com/users/OXY2DEV/followers",
        "following_url": "https://api.github.com/users/OXY2DEV/following{/other_user}",
        "gists_url": "https://api.github.com/users/OXY2DEV/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/OXY2DEV",
        "id": 122956967,
        "login": "OXY2DEV",
        "node_id": "U_kgDOB1Qspw",
        "organizations_url": "https://api.github.com/users/OXY2DEV/orgs",
        "received_events_url": "https://api.github.com/users/OXY2DEV/received_events",
        "repos_url": "https://api.github.com/users/OXY2DEV/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/OXY2DEV/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/OXY2DEV/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/OXY2DEV"
    }
}