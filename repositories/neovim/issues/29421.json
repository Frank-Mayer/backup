{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nThe filetype section (filetype.txt) of the Neovim reference manual references the sourcing of the filetype.vim file in addition to the filetype.lua file.   However, this filetype.vim file was removed a couple of years ago.  Technically, I suppose this text is correct because the ex_filetype() function does in fact try to load that file even if it doesn't exist in Neovim's distribution.  However, I was curious if ex_filetype still sources that file on purpose for backwards compatibility (in case the user has a filetype.vim file in her runtime path). Can we use this opportunity to remove that reference and only source the filetype.lua file.\r\n\r\nIf we choose to keep sourcing filetype.vim I think it would be more accurate for the Neovim reference manual to explain that Neovim no longer ships with that file but it is still loaded for backwards compatibility in case it exists in the users Neovim  runtime path.\r\n\r\nAlso, one of the primary reasons I'm opening this request is that I thought it was cool that Neovim detected  my filetype from a shebang line in a file without an extension.  It wasn't clear from the reference manual how this was implemented.  I went on this journey to figure it out, was slightly misdirected by the missing filetype.vim file, and then eventually figured out how filetype.lua and vim.filetype.detect implemented this logic. \r\n\r\nI'd like to add some missing details to this section of the reference manual like:\r\n1. StdinReadPost, in addition to the BufRead, BufNewFile events, is a third event that the filetype detection function is associated with\r\n2. If the filetype detection function doesn't get hints from the name or extension of the file it will try to determine the filetype from shebang line and lastly from the other contents of the file.\r\n3. The ftdetect/*.{vim,lua} files in the user's runtime path are sourced after the aforementioned autocommand is established.\r\n4. Next an autocmd that sources the the scripts.vim file in the user's runtime path is sourced.\r\n\r\nI can write up a proposal for this text that's a little more specific. However, first I wanted some guidance on why the code was still sourcing the filetype.vim file and whether the reference manual should more accurately describe the origin and nature of that file.\n\n### Steps to reproduce\n\nN/A\n\n### Expected behavior\n\nN/A\n\n### Neovim version (nvim -v)\n\n0.10.0\n\n### Vim (not Nvim) behaves the same?\n\nN/A\n\n### Operating system/version\n\nN/A\n\n### Terminal name/version\n\nN/A\n\n### $TERM environment variable\n\nN/A\n\n### Installation\n\nN/A",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": ">  However, I was curious if ex_filetype still sources that file on purpose for backwards compatibility (in case the user has a filetype.vim file in her runtime path).\r\n\r\nYes, precisely.\r\n\r\nAnd note that this help file is part of the **Vim** manual, which we only edit for factual, objective inaccuracies. This means that most of these improvements apply to Vim as well and should be made there first.",
            "created_at": "2024-06-20T06:52:43Z",
            "html_url": "https://github.com/neovim/neovim/issues/29421#issuecomment-2179947584",
            "id": 2179947584,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29421",
            "node_id": "IC_kwDOAPphoM6B71xA",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2179947584/reactions"
            },
            "updated_at": "2024-06-20T06:52:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2179947584",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "NONE",
            "body": "For Vim, really the only thing that's missing is a reference to the sourcing of ftdetect/* vimscript files. I'll consider making a proposal to them to include it.   It could go into detail about how the scripts.vim uses shebang lines and other file contents  to determine the filetype but it's not factually incorrect.\r\n\r\nFor NeoVim however, the logic for using the shebang line and other contents of the file to detect filetype is all built into filetype.lua rather than a scripts.vim file.  It's a much cleaner design.\r\n\r\nIn Neovim, the scripts.vim and filetype.vim files are really only sourced for backwards compatibility.  I'll write up some text that makes this more clear.  I'll understand if you really want the manual to stay as close to the Vim reference manual as possible. ",
            "created_at": "2024-06-20T17:14:43Z",
            "html_url": "https://github.com/neovim/neovim/issues/29421#issuecomment-2181172055",
            "id": 2181172055,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29421",
            "node_id": "IC_kwDOAPphoM6CAgtX",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2181172055/reactions"
            },
            "updated_at": "2024-06-20T17:14:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2181172055",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1087862?v=4",
                "events_url": "https://api.github.com/users/rphodges/events{/privacy}",
                "followers_url": "https://api.github.com/users/rphodges/followers",
                "following_url": "https://api.github.com/users/rphodges/following{/other_user}",
                "gists_url": "https://api.github.com/users/rphodges/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rphodges",
                "id": 1087862,
                "login": "rphodges",
                "node_id": "MDQ6VXNlcjEwODc4NjI=",
                "organizations_url": "https://api.github.com/users/rphodges/orgs",
                "received_events_url": "https://api.github.com/users/rphodges/received_events",
                "repos_url": "https://api.github.com/users/rphodges/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rphodges/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rphodges/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rphodges"
            }
        },
        {
            "author_association": "MEMBER",
            "body": ">  I'll understand if you really want the manual to stay as close to the Vim reference manual as possible.\r\n\r\nThat is the general idea, yes. (There are many, _many_, places in the manual that could be rewritten for Neovim, and we have refrained from doing so until now in order to be able to more easily include documentation improvements from Vim.)",
            "created_at": "2024-06-20T17:18:37Z",
            "html_url": "https://github.com/neovim/neovim/issues/29421#issuecomment-2181178015",
            "id": 2181178015,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/29421",
            "node_id": "IC_kwDOAPphoM6CAiKf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2181178015/reactions"
            },
            "updated_at": "2024-06-20T17:18:37Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/2181178015",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/29421/comments",
    "created_at": "2024-06-20T03:17:28Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/29421/events",
    "html_url": "https://github.com/neovim/neovim/issues/29421",
    "id": 2363417186,
    "labels": [
        {
            "color": "c5def5",
            "default": true,
            "description": "",
            "id": 84744038,
            "name": "documentation",
            "node_id": "MDU6TGFiZWw4NDc0NDAzOA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/documentation"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/29421/labels{/name}",
    "locked": false,
    "milestone": {
        "closed_at": null,
        "closed_issues": 626,
        "created_at": "2014-05-10T20:43:04Z",
        "creator": {
            "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
            "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
            "followers_url": "https://api.github.com/users/justinmk/followers",
            "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
            "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/justinmk",
            "id": 1359421,
            "login": "justinmk",
            "node_id": "MDQ6VXNlcjEzNTk0MjE=",
            "organizations_url": "https://api.github.com/users/justinmk/orgs",
            "received_events_url": "https://api.github.com/users/justinmk/received_events",
            "repos_url": "https://api.github.com/users/justinmk/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/justinmk"
        },
        "description": "Low priority. Not planned for the current target, may be reassigned.",
        "due_on": null,
        "html_url": "https://github.com/neovim/neovim/milestone/6",
        "id": 655037,
        "labels_url": "https://api.github.com/repos/neovim/neovim/milestones/6/labels",
        "node_id": "MDk6TWlsZXN0b25lNjU1MDM3",
        "number": 6,
        "open_issues": 550,
        "state": "open",
        "title": "backlog",
        "updated_at": "2024-06-21T11:50:48Z",
        "url": "https://api.github.com/repos/neovim/neovim/milestones/6"
    },
    "node_id": "I_kwDOAPphoM6M3uJi",
    "number": 29421,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/29421/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/29421/timeline",
    "title": "misleading information filetype.txt help doc",
    "updated_at": "2024-06-20T17:18:38Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/29421",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1087862?v=4",
        "events_url": "https://api.github.com/users/rphodges/events{/privacy}",
        "followers_url": "https://api.github.com/users/rphodges/followers",
        "following_url": "https://api.github.com/users/rphodges/following{/other_user}",
        "gists_url": "https://api.github.com/users/rphodges/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/rphodges",
        "id": 1087862,
        "login": "rphodges",
        "node_id": "MDQ6VXNlcjEwODc4NjI=",
        "organizations_url": "https://api.github.com/users/rphodges/orgs",
        "received_events_url": "https://api.github.com/users/rphodges/received_events",
        "repos_url": "https://api.github.com/users/rphodges/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/rphodges/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rphodges/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/rphodges"
    }
}