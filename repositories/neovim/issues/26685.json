{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Problem\n\nDon't know if I'm doing something wrong, but it seems that in the latest nightly diagnostic signs do not respect the `signcolumn` config. \r\n\r\nHere's a screenshot of the behaviour: \r\n\r\n\r\n<img width=\"600\" alt=\"image\" src=\"https://github.com/neovim/neovim/assets/40841816/97c4e779-092d-4549-ba47-39cb109deb1f\">\r\n\r\n---\r\nAs visible in the screenshot `signcolumn` is set to `yes:2`. If I'm not mistaken, I should be able to see the sign provided by `Gitsigns` and one diagnostic sign. \r\n\r\nIf more diagnostics are present the sign column might even be expanded further: \r\n\r\n\r\n<img width=\"600\" alt=\"image\" src=\"https://github.com/neovim/neovim/assets/40841816/c71cc233-6f62-470c-9353-df0a405742ec\">\r\n\r\n---\r\n\r\nWhen no diagnostics are present, sign column shrinks to the configured size: \r\n\r\n\r\n<img width=\"600\" alt=\"image\" src=\"https://github.com/neovim/neovim/assets/40841816/2c170455-86dd-4ff9-8c13-346a40a1b8c2\">\r\n\r\n---\r\n\r\nWeirdly enough, this does not happen when `signcolumn=yes:1`\n\n### Steps to reproduce\n\nSetup the diagnostic signs:\r\n\r\n```lua\r\nvim.cmd(\"set signcolumn=yes:2\")\r\n\r\n-- setup client, not really relevant\r\nlocal client_id = vim.lsp.start({\r\n\tname = \"rust-analyzer\",\r\n\tcmd = { \"rust-analyzer\" },\r\n\troot_dir = vim.fs.dirname(vim.fs.find({ \"Cargo.toml\" }, { upward = true })[1]),\r\n})\r\n\r\nif client_id then\r\n\tvim.lsp.buf_attach_client(0, client_id)\r\nend\r\n\r\n-- setup signs, relevant\r\nlocal signs = { Error = \" \", Warn = \" \", Hint = \" \", Info = \" \" }\r\nvim.diagnostic.config({\r\n\tvirtual_text = true,\r\n\tsigns = {\r\n\t\tenable = true,\r\n\t\ttext = {\r\n\t\t\t[\"ERROR\"] = signs.Error,\r\n\t\t\t[\"WARN\"] = signs.Warn,\r\n\t\t\t[\"HINT\"] = signs.Hint,\r\n\t\t\t[\"INFO\"] = signs.Info,\r\n\t\t},\r\n\t\ttexthl = {\r\n\t\t\t[\"ERROR\"] = \"DiagnosticDefault\",\r\n\t\t\t[\"WARN\"] = \"DiagnosticDefault\",\r\n\t\t\t[\"HINT\"] = \"DiagnosticDefault\",\r\n\t\t\t[\"INFO\"] = \"DiagnosticDefault\",\r\n\t\t},\r\n\t\tnumhl = {\r\n\t\t\t[\"ERROR\"] = \"DiagnosticDefault\",\r\n\t\t\t[\"WARN\"] = \"DiagnosticDefault\",\r\n\t\t\t[\"HINT\"] = \"DiagnosticDefault\",\r\n\t\t\t[\"INFO\"] = \"DiagnosticDefault\",\r\n\t\t},\r\n\t\tseverity_sort = true,\r\n\t},\r\n})\r\n\r\nvim.lsp.handlers[\"textDocument/publishDiagnostics\"] = vim.lsp.with(vim.lsp.diagnostic.on_publish_diagnostics, {\r\n\tvirtual_text = true,\r\n\tsigns = true,\r\n\tupdate_in_insert = false,\r\n\tunderline = true,\r\n})\r\n```\r\n\r\nThen try to mess up code to get multiple diagnostics on the same line. The sign column expands to make space for multiple diagnostics (not wanted). \r\n\r\n\n\n### Expected behavior\n\nI should see `N` signs in sign column when `signcolumn=yes:N`. \n\n### Neovim version (nvim -v)\n\nNVIM v0.10.0-dev-1902+g184f84234\n\n### Vim (not Nvim) behaves the same?\n\nThis feature does not exist in vim.\n\n### Operating system/version\n\nmacOS Sonoma 14.2\n\n### Terminal name/version\n\nwezterm 20230712-072601-f4abf8fd\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\nBob neovim version manager",
    "closed_at": "2023-12-21T10:57:02Z",
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/26685/comments",
    "created_at": "2023-12-20T23:01:31Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/26685/events",
    "html_url": "https://github.com/neovim/neovim/issues/26685",
    "id": 2051429341,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "sign/number column",
            "id": 2962322085,
            "name": "column",
            "node_id": "MDU6TGFiZWwyOTYyMzIyMDg1",
            "url": "https://api.github.com/repos/neovim/neovim/labels/column"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/26685/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM56RlPd",
    "number": 26685,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/26685/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/26685/timeline",
    "title": "Diagnostic signs do not respect `signcolumn=yes:N` setting when `N > 1`",
    "updated_at": "2023-12-21T10:57:02Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/26685",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/40841816?v=4",
        "events_url": "https://api.github.com/users/nfejzic/events{/privacy}",
        "followers_url": "https://api.github.com/users/nfejzic/followers",
        "following_url": "https://api.github.com/users/nfejzic/following{/other_user}",
        "gists_url": "https://api.github.com/users/nfejzic/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/nfejzic",
        "id": 40841816,
        "login": "nfejzic",
        "node_id": "MDQ6VXNlcjQwODQxODE2",
        "organizations_url": "https://api.github.com/users/nfejzic/orgs",
        "received_events_url": "https://api.github.com/users/nfejzic/received_events",
        "repos_url": "https://api.github.com/users/nfejzic/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/nfejzic/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/nfejzic/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/nfejzic"
    }
}