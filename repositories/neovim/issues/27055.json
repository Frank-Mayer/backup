{
    "active_lock_reason": null,
    "assignee": {
        "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
        "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
        "followers_url": "https://api.github.com/users/luukvbaal/followers",
        "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
        "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/luukvbaal",
        "id": 31730729,
        "login": "luukvbaal",
        "node_id": "MDQ6VXNlcjMxNzMwNzI5",
        "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
        "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
        "repos_url": "https://api.github.com/users/luukvbaal/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/luukvbaal"
    },
    "assignees": [
        {
            "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
            "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
            "followers_url": "https://api.github.com/users/luukvbaal/followers",
            "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
            "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/luukvbaal",
            "id": 31730729,
            "login": "luukvbaal",
            "node_id": "MDQ6VXNlcjMxNzMwNzI5",
            "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
            "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
            "repos_url": "https://api.github.com/users/luukvbaal/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/luukvbaal"
        }
    ],
    "author_association": "NONE",
    "body": "### Problem\n\nNeovim aborts when nvim_buf_del_extmark() is called on an invalid extmark.\n\n### Steps to reproduce\n\n1. Run the code below. An inline virtual text is displayed on the 1st line.\r\n```\r\ncall setline(1, ['11111', '22222', '33333'])\r\nlet ns = nvim_create_namespace('test')\r\nlet bn = bufnr('%')\r\ncall nvim_buf_set_extmark(bn, ns, 0, 5, #{virt_text: [['<-- ERROR!!!', 'Error']], virt_text_pos: 'inline', invalidate: v:true})\r\n```\r\n2. Delete the 1st line (:1d). The inline virtual text is hidden.\r\n3. Show the ID of the extmark. `[[1, 0, 0]]` is echoed.\r\n```\r\necho nvim_buf_get_extmarks(bn, ns, 0, -1, {})\r\n```\r\n4. Delete the hidden virtual text. Then, neovim suddenly aborts.\r\n```\r\ncall nvim_buf_del_extmark(bn, ns, 1)\r\n```\r\n**Note:**\r\nAt step 3, try to show the details.\r\n```\r\necho nvim_buf_get_extmarks(bn, ns, 0, -1, #{details: v:true})\r\n```\r\nechoes:\r\n```\r\n[1, 0, 0, {'virt_text_hide': v:false, 'priority': 4096, 'invalid': v:true, 'virt_text_repeat_linebreak': v:false, 'virt_text': [['<-- ERROR!!!', 'Error']], 'right_gravity': v:true, 'ns_id': 2, 'virt_text_pos': 'inline', 'invalidate': v:true}]\r\n```\r\n`'invalid': v:true` entry is present but this entry is not documented in help.\n\n### Expected behavior\n\nnvim_buf_del_extmark() can delete an invalid extmark and neovim does not abort.\n\n### Neovim version (nvim -v)\n\nNVIM v0.10.0-dev-2098+g92672a161\n\n### Vim (not Nvim) behaves the same?\n\nno\n\n### Operating system/version\n\nWindows 10\n\n### Terminal name/version\n\nn/a\n\n### $TERM environment variable\n\nn/a\n\n### Installation\n\ndownload from Github",
    "closed_at": "2024-01-19T09:49:15Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "A backtrace would be helpful.",
            "created_at": "2024-01-17T09:12:09Z",
            "html_url": "https://github.com/neovim/neovim/issues/27055#issuecomment-1895390324",
            "id": 1895390324,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27055",
            "node_id": "IC_kwDOAPphoM5w-Vx0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1895390324/reactions"
            },
            "updated_at": "2024-01-17T09:12:09Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1895390324",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/2361214?v=4",
                "events_url": "https://api.github.com/users/clason/events{/privacy}",
                "followers_url": "https://api.github.com/users/clason/followers",
                "following_url": "https://api.github.com/users/clason/following{/other_user}",
                "gists_url": "https://api.github.com/users/clason/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/clason",
                "id": 2361214,
                "login": "clason",
                "node_id": "MDQ6VXNlcjIzNjEyMTQ=",
                "organizations_url": "https://api.github.com/users/clason/orgs",
                "received_events_url": "https://api.github.com/users/clason/received_events",
                "repos_url": "https://api.github.com/users/clason/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/clason/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/clason/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/clason"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> 'invalid': v:true entry is present but this entry is not documented in help.\r\n\r\nWhere did you expect this to be documented? The `invalidate` property is documented. I don't think the exact format of the `details` array is documented anywhere?\r\n\r\nEDIT: added a proposal to #27061",
            "created_at": "2024-01-17T14:30:53Z",
            "html_url": "https://github.com/neovim/neovim/issues/27055#issuecomment-1895931405",
            "id": 1895931405,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27055",
            "node_id": "IC_kwDOAPphoM5xAZ4N",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1895931405/reactions"
            },
            "updated_at": "2024-01-17T14:55:43Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1895931405",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        },
        {
            "author_association": "NONE",
            "body": "I want to make sure the 'invalid' entry and its value can be used to check the status and to avoid the abort in my plugin. Since all other details entries are documented in `nvim_buf_set_extmark()` as `{*opts}`,  I am worried if the not documented entry would be temporary as of today and would be gone later.",
            "created_at": "2024-01-18T01:31:15Z",
            "html_url": "https://github.com/neovim/neovim/issues/27055#issuecomment-1897611863",
            "id": 1897611863,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27055",
            "node_id": "IC_kwDOAPphoM5xG0JX",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1897611863/reactions"
            },
            "updated_at": "2024-01-18T01:31:15Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1897611863",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3096934?v=4",
                "events_url": "https://api.github.com/users/rickhowe/events{/privacy}",
                "followers_url": "https://api.github.com/users/rickhowe/followers",
                "following_url": "https://api.github.com/users/rickhowe/following{/other_user}",
                "gists_url": "https://api.github.com/users/rickhowe/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rickhowe",
                "id": 3096934,
                "login": "rickhowe",
                "node_id": "MDQ6VXNlcjMwOTY5MzQ=",
                "organizations_url": "https://api.github.com/users/rickhowe/orgs",
                "received_events_url": "https://api.github.com/users/rickhowe/received_events",
                "repos_url": "https://api.github.com/users/rickhowe/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rickhowe/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rickhowe/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rickhowe"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I understand. I don't see any reason why `invalid` would be removed from the `details` array. It is covered by tests and #27061 proposes to document it.\r\n\r\n> Since all other details entries are documented in nvim_buf_set_extmark() as {*opts}\r\n\r\nThe only other exception is `sign_name` for legacy signs. Perhaps that should be documented as well.",
            "created_at": "2024-01-18T15:47:31Z",
            "html_url": "https://github.com/neovim/neovim/issues/27055#issuecomment-1898738709",
            "id": 1898738709,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/27055",
            "node_id": "IC_kwDOAPphoM5xLHQV",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1898738709/reactions"
            },
            "updated_at": "2024-01-18T15:47:31Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1898738709",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/31730729?v=4",
                "events_url": "https://api.github.com/users/luukvbaal/events{/privacy}",
                "followers_url": "https://api.github.com/users/luukvbaal/followers",
                "following_url": "https://api.github.com/users/luukvbaal/following{/other_user}",
                "gists_url": "https://api.github.com/users/luukvbaal/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/luukvbaal",
                "id": 31730729,
                "login": "luukvbaal",
                "node_id": "MDQ6VXNlcjMxNzMwNzI5",
                "organizations_url": "https://api.github.com/users/luukvbaal/orgs",
                "received_events_url": "https://api.github.com/users/luukvbaal/received_events",
                "repos_url": "https://api.github.com/users/luukvbaal/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/luukvbaal/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/luukvbaal/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/luukvbaal"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/27055/comments",
    "created_at": "2024-01-17T09:05:44Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/27055/events",
    "html_url": "https://github.com/neovim/neovim/issues/27055",
    "id": 2085729320,
    "labels": [
        {
            "color": "F9D0C4",
            "default": false,
            "description": "issue reporting a crash or segfault",
            "id": 435854234,
            "name": "bug-crash",
            "node_id": "MDU6TGFiZWw0MzU4NTQyMzQ=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug-crash"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "extmarks, decorations, virtual text, namespaces",
            "id": 1680119719,
            "name": "extmarks",
            "node_id": "MDU6TGFiZWwxNjgwMTE5NzE5",
            "url": "https://api.github.com/repos/neovim/neovim/labels/extmarks"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/27055/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM58UbQo",
    "number": 27055,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/27055/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/27055/timeline",
    "title": "Neovim aborts when nvim_buf_del_extmark() is called on an invalid extmark",
    "updated_at": "2024-01-19T09:49:15Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/27055",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/3096934?v=4",
        "events_url": "https://api.github.com/users/rickhowe/events{/privacy}",
        "followers_url": "https://api.github.com/users/rickhowe/followers",
        "following_url": "https://api.github.com/users/rickhowe/following{/other_user}",
        "gists_url": "https://api.github.com/users/rickhowe/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/rickhowe",
        "id": 3096934,
        "login": "rickhowe",
        "node_id": "MDQ6VXNlcjMwOTY5MzQ=",
        "organizations_url": "https://api.github.com/users/rickhowe/orgs",
        "received_events_url": "https://api.github.com/users/rickhowe/received_events",
        "repos_url": "https://api.github.com/users/rickhowe/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/rickhowe/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rickhowe/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/rickhowe"
    }
}