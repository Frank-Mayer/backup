{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "<!-- Before reporting: search existing issues and check the FAQ. -->\r\n\r\n- `nvim --version`: v0.4.3\r\n- `vim -u DEFAULTS` (version: 8.1) behaves differently? Yes, not an issue in Vim.\r\n- Operating system/version: OSX 10.15.4\r\n- Terminal name/version: iTerm2 3.2.6\r\n- `$TERM`: xterm-256color\r\n\r\n### Steps to reproduce using `nvim -u NORC`\r\n\r\n```\r\ntouch test.html.erb\r\ntouch test.js\r\n\r\nnvim -u NORC\r\n:e test.html.erb\r\n:e test.js\r\n:bn\r\n:bn\r\n:bn\r\n# ...and repeat, by the 20th switch back to the erb buffer you will notice the slow down.\r\n# by the 30th switch you'll be counting the loading time in minutes.\r\n\r\n```\r\n\r\n### Actual behaviour\r\n\r\nEach time switching back to an eruby buffer gets exponentially slower, eventually taking minutes to load after around 25 times. The same line does not cause an issue in Vim, the issue appears specific to NeoVim.\r\n\r\nRunning the profiler shows the line setting the [path value in the eruby ftplugin](https://github.com/neovim/neovim/blob/87140f234ac1f152f6f273dee5ab1e42c7b1d78b/runtime/ftplugin/eruby.vim#L102) was the cause. Commenting out this line solves this issue. The same line does not cause an issue in Vim, the issue appears specific to NeoVim.\r\n\r\n`let &l:path = s:path . (s:path =~# ',$\\|^$' ? '' : ',') . &l:path`\r\n\r\n### Expected behaviour\r\n\r\nSwitching back to an eruby buffer should take roughly the same amount of time consistently, not exponentially longer.\r\n\r\nApologies if this should be reported to the `vim-ruby/vim-ruby` project, as this only occurs in NeoVim I thought this was the right place.",
    "closed_at": "2021-06-08T17:43:14Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Probably the reason you don't have a problem with vim is because vim has regular expression changes that have not yet been ported to neovim. Still, the fundamental problem lies in ftplugin of eruby. That's why I created vim-ruby/vim-ruby#419.",
            "created_at": "2020-06-28T19:54:57Z",
            "html_url": "https://github.com/neovim/neovim/issues/12562#issuecomment-650813649",
            "id": 650813649,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/12562",
            "node_id": "MDEyOklzc3VlQ29tbWVudDY1MDgxMzY0OQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/650813649/reactions"
            },
            "updated_at": "2020-06-28T19:54:57Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/650813649",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11682285?v=4",
                "events_url": "https://api.github.com/users/erw7/events{/privacy}",
                "followers_url": "https://api.github.com/users/erw7/followers",
                "following_url": "https://api.github.com/users/erw7/following{/other_user}",
                "gists_url": "https://api.github.com/users/erw7/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/erw7",
                "id": 11682285,
                "login": "erw7",
                "node_id": "MDQ6VXNlcjExNjgyMjg1",
                "organizations_url": "https://api.github.com/users/erw7/orgs",
                "received_events_url": "https://api.github.com/users/erw7/received_events",
                "repos_url": "https://api.github.com/users/erw7/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/erw7/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/erw7/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/erw7"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Can't reproduce on master :tada: .",
            "created_at": "2021-06-08T17:43:14Z",
            "html_url": "https://github.com/neovim/neovim/issues/12562#issuecomment-856966187",
            "id": 856966187,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/12562",
            "node_id": "MDEyOklzc3VlQ29tbWVudDg1Njk2NjE4Nw==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/856966187/reactions"
            },
            "updated_at": "2021-06-08T17:43:14Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/856966187",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/11534587?v=4",
                "events_url": "https://api.github.com/users/glacambre/events{/privacy}",
                "followers_url": "https://api.github.com/users/glacambre/followers",
                "following_url": "https://api.github.com/users/glacambre/following{/other_user}",
                "gists_url": "https://api.github.com/users/glacambre/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glacambre",
                "id": 11534587,
                "login": "glacambre",
                "node_id": "MDQ6VXNlcjExNTM0NTg3",
                "organizations_url": "https://api.github.com/users/glacambre/orgs",
                "received_events_url": "https://api.github.com/users/glacambre/received_events",
                "repos_url": "https://api.github.com/users/glacambre/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glacambre/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glacambre/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glacambre"
            }
        },
        {
            "author_association": "NONE",
            "body": "I also have this, it is astronomically slow, like you literally can't even scroll with j/k",
            "created_at": "2023-08-17T00:15:21Z",
            "html_url": "https://github.com/neovim/neovim/issues/12562#issuecomment-1681424912",
            "id": 1681424912,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/12562",
            "node_id": "IC_kwDOAPphoM5kOIIQ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1681424912/reactions"
            },
            "updated_at": "2023-08-17T00:15:21Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1681424912",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1386207?v=4",
                "events_url": "https://api.github.com/users/9mm/events{/privacy}",
                "followers_url": "https://api.github.com/users/9mm/followers",
                "following_url": "https://api.github.com/users/9mm/following{/other_user}",
                "gists_url": "https://api.github.com/users/9mm/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/9mm",
                "id": 1386207,
                "login": "9mm",
                "node_id": "MDQ6VXNlcjEzODYyMDc=",
                "organizations_url": "https://api.github.com/users/9mm/orgs",
                "received_events_url": "https://api.github.com/users/9mm/received_events",
                "repos_url": "https://api.github.com/users/9mm/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/9mm/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/9mm/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/9mm"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/12562/comments",
    "created_at": "2020-06-28T16:17:01Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/12562/events",
    "html_url": "https://github.com/neovim/neovim/issues/12562",
    "id": 646957029,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/12562/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU2NDY5NTcwMjk=",
    "number": 12562,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 1,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 1,
        "url": "https://api.github.com/repos/neovim/neovim/issues/12562/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/12562/timeline",
    "title": "Exponentially slower loading of eruby buffers",
    "updated_at": "2023-08-17T00:15:21Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/12562",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1578054?v=4",
        "events_url": "https://api.github.com/users/northerner/events{/privacy}",
        "followers_url": "https://api.github.com/users/northerner/followers",
        "following_url": "https://api.github.com/users/northerner/following{/other_user}",
        "gists_url": "https://api.github.com/users/northerner/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/northerner",
        "id": 1578054,
        "login": "northerner",
        "node_id": "MDQ6VXNlcjE1NzgwNTQ=",
        "organizations_url": "https://api.github.com/users/northerner/orgs",
        "received_events_url": "https://api.github.com/users/northerner/received_events",
        "repos_url": "https://api.github.com/users/northerner/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/northerner/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/northerner/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/northerner"
    }
}