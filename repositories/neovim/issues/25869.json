{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nIn VSCode, diagnostics can be displayed by highlighting the entire line, as shown here:\r\n<img width=\"902\" alt=\"Screenshot 2023-11-01 at 2 26 30 PM\" src=\"https://github.com/neovim/neovim/assets/92702993/6cc54a79-4044-49fe-b64d-3aee5278854f\">\r\nAs far as I'm aware, the closest to this neovim has is giving a background highlight to the `DiagnosticUnderlineWarn`, etc. highlight groups. But this doesn't highlight the whole line, just part of it, as shown here:\r\n<img width=\"599\" alt=\"Screenshot 2023-11-01 at 2 27 48 PM\" src=\"https://github.com/neovim/neovim/assets/92702993/e04ff738-9de0-4131-b094-a1817b0cb0e4\">\n\n### Expected behavior\n\nThe UI feature that I want is to set some diagnostic option to highlight the whole line, and a highlight group to use to do so. I imagine it looking something like:\r\n```lua\r\nvim.diagnostic.config({\r\n    virtual_text = {\r\n        line_hl = { -- new\r\n            [\"Error\"] = \"#000000\",\r\n            [\"Info\"] = \"#000000\",\r\n        }\r\n    }\r\n})\r\n```\r\nWhere `line_hl` has keys of `Error`, `Warn`, `Hint`, and `Info`, and excluding one will turn off highlights for that severity. So in this example, every line with a diagnostic severity of `Error` or `Info` would be highlighted like in the first screenshot with their respective colors.\r\n\r\nObviously just a concept, names and everything else subject to change.\r\n\r\nThere's no real cost to thisâ€”just another nice UI option",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "I actually was able to implement this functionality! Based on the `diagnostic.handler` docs, I came up with\r\n```lua\r\nlocal diagnostic_lines_ns = vim.api.nvim_create_namespace(\"Diagnostic Lines\")\r\nlocal orig_signs_handler = vim.diagnostic.handlers.signs\r\nlocal function severity_highlight(severity)\r\n    return 'DiffDelete'\r\nend\r\nvim.diagnostic.handlers.signs = {\r\n    show = function(_, bufnr, _, opts)\r\n        -- Handle diagnostics for whole buffer for ns convenience\r\n        local diagnostics = vim.diagnostic.get(bufnr)\r\n        for _, diagnostic in ipairs(diagnostics) do\r\n            vim.api.nvim_buf_set_extmark(\r\n                diagnostic.bufnr,\r\n                diagnostic_lines_ns,\r\n                diagnostic.lnum, 0,\r\n                { line_hl_group = severity_highlight(diagnostic.severity) }\r\n            )\r\n        end\r\n        orig_signs_handler.show(diagnostic_lines_ns, bufnr, diagnostics, opts)\r\n    end,\r\n    hide = function(_, bufnr)\r\n        vim.api.nvim_buf_clear_namespace(bufnr, diagnostic_lines_ns, 0, -1)\r\n        orig_signs_handler.hide(diagnostic_lines_ns, bufnr)\r\n    end,\r\n}\r\n```\r\nWhere the `severity_highlight` function determines the highlight group to be used.\r\n\r\nI feel like I learn new extmark functionality every day.\r\n\r\nI'm leaving the issue open just to see thoughts on if the suggested change would still make sense/be valuable as a UI convenience.\r\nFor posterity, here is what the above code produces:\r\n<img width=\"420\" alt=\"Screenshot 2023-11-01 at 8 31 24 PM\" src=\"https://github.com/neovim/neovim/assets/92702993/4c0f4a20-621a-4c80-a226-4fa0decd3712\">",
            "created_at": "2023-11-02T00:14:46Z",
            "html_url": "https://github.com/neovim/neovim/issues/25869#issuecomment-1789863217",
            "id": 1789863217,
            "issue_url": "https://api.github.com/repos/neovim/neovim/issues/25869",
            "node_id": "IC_kwDOAPphoM5qryUx",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1789863217/reactions"
            },
            "updated_at": "2023-11-02T00:31:41Z",
            "url": "https://api.github.com/repos/neovim/neovim/issues/comments/1789863217",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/92702993?v=4",
                "events_url": "https://api.github.com/users/tj-moody/events{/privacy}",
                "followers_url": "https://api.github.com/users/tj-moody/followers",
                "following_url": "https://api.github.com/users/tj-moody/following{/other_user}",
                "gists_url": "https://api.github.com/users/tj-moody/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/tj-moody",
                "id": 92702993,
                "login": "tj-moody",
                "node_id": "U_kgDOBYaJEQ",
                "organizations_url": "https://api.github.com/users/tj-moody/orgs",
                "received_events_url": "https://api.github.com/users/tj-moody/received_events",
                "repos_url": "https://api.github.com/users/tj-moody/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/tj-moody/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/tj-moody/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/tj-moody"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/25869/comments",
    "created_at": "2023-11-01T18:44:09Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/25869/events",
    "html_url": "https://github.com/neovim/neovim/issues/25869",
    "id": 1972905507,
    "labels": [
        {
            "color": "c2e0c6",
            "default": true,
            "description": "feature request",
            "id": 77997476,
            "name": "enhancement",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3Ng==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/enhancement"
        },
        {
            "color": "C5DEF5",
            "default": false,
            "description": "",
            "id": 3361645105,
            "name": "diagnostic",
            "node_id": "MDU6TGFiZWwzMzYxNjQ1MTA1",
            "url": "https://api.github.com/repos/neovim/neovim/labels/diagnostic"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/25869/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM51mCYj",
    "number": 25869,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/25869/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/25869/timeline",
    "title": "Highlight Full Line Background (in Diagnostics)",
    "updated_at": "2023-11-02T00:31:41Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/25869",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/92702993?v=4",
        "events_url": "https://api.github.com/users/tj-moody/events{/privacy}",
        "followers_url": "https://api.github.com/users/tj-moody/followers",
        "following_url": "https://api.github.com/users/tj-moody/following{/other_user}",
        "gists_url": "https://api.github.com/users/tj-moody/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/tj-moody",
        "id": 92702993,
        "login": "tj-moody",
        "node_id": "U_kgDOBYaJEQ",
        "organizations_url": "https://api.github.com/users/tj-moody/orgs",
        "received_events_url": "https://api.github.com/users/tj-moody/received_events",
        "repos_url": "https://api.github.com/users/tj-moody/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/tj-moody/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/tj-moody/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/tj-moody"
    }
}