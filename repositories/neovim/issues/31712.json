{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "### Problem\n\nThis bug was reported for Neovide, basically  [vim-jetpack](https://github.com/tani/vim-jetpack) is very slow with it \n* https://github.com/neovide/neovide/issues/2900\n\nUpon a bit of investigations, it turns out that jetpack, has a busyloop of repeatedly calling `jobwait(jobs, 0)` (polling). \nhttps://github.com/tani/vim-jetpack/blob/2ae7300f774cf1692bdb49c47c8c3ff15dd8d9b5/plugin/jetpack.vim#L124-L140\n\nEach of those calls causes an UI `busy_start`, `flush`, `busy_stop` and `flush`, which completely overflows the RPC channels and causes a lot of extra work. \n\n### Steps to reproduce\n\n1. Install [vim-jetpack](https://github.com/tani/vim-jetpack) and many plugins (any plugin will do)\n1. Launch Neovide\n1. Run :JetpackSync\n\nObserve that it's very slow compared to TUI nvim\n\n### Expected behavior\n\nI don't think that `jobwait(jobs, 0)` should trigger a `busy_start`, since it isn't a blocking calling. But any other value should. Optionally, I think that it could also take an argument to disable the busy wait completely even for other timeouts, for example when the busy state is controlled from the outside.\n\nNow, one could argue that `vim-jetpack` is implemented wrong, and that might be true, so I have also opened https://github.com/tani/vim-jetpack/issues/136 there, but I still think that Neovim could handle this case.\n\n\n### Nvim version (nvim -v)\n\nNVIM v0.10.3\n\n### Vim (not Nvim) behaves the same?\n\nN/A\n\n### Operating system/version\n\nArch Linux\n\n### Terminal name/version\n\nNeovide 0.13.3\n\n### $TERM environment variable\n\nalacritty\n\n### Installation\n\npacman",
    "closed_at": null,
    "closed_by": null,
    "comment_data": [],
    "comments": 0,
    "comments_url": "https://api.github.com/repos/neovim/neovim/issues/31712/comments",
    "created_at": "2024-12-24T09:39:58Z",
    "events_url": "https://api.github.com/repos/neovim/neovim/issues/31712/events",
    "html_url": "https://github.com/neovim/neovim/issues/31712",
    "id": 2757501385,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "issues reporting wrong behavior",
            "id": 77997474,
            "name": "bug",
            "node_id": "MDU6TGFiZWw3Nzk5NzQ3NA==",
            "url": "https://api.github.com/repos/neovim/neovim/labels/bug"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "",
            "id": 113026979,
            "name": "ui",
            "node_id": "MDU6TGFiZWwxMTMwMjY5Nzk=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/ui"
        },
        {
            "color": "c5def5",
            "default": false,
            "description": "OS processes, spawn",
            "id": 182884815,
            "name": "job-control",
            "node_id": "MDU6TGFiZWwxODI4ODQ4MTU=",
            "url": "https://api.github.com/repos/neovim/neovim/labels/job-control"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/neovim/issues/31712/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDOAPphoM6kXCHJ",
    "number": 31712,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/neovim/issues/31712/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/neovim",
    "state": "open",
    "state_reason": null,
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/neovim/issues/31712/timeline",
    "title": "jobwait should not set the UI busy state when polling",
    "updated_at": "2024-12-24T09:49:04Z",
    "url": "https://api.github.com/repos/neovim/neovim/issues/31712",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/9946255?v=4",
        "events_url": "https://api.github.com/users/fredizzimo/events{/privacy}",
        "followers_url": "https://api.github.com/users/fredizzimo/followers",
        "following_url": "https://api.github.com/users/fredizzimo/following{/other_user}",
        "gists_url": "https://api.github.com/users/fredizzimo/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/fredizzimo",
        "id": 9946255,
        "login": "fredizzimo",
        "node_id": "MDQ6VXNlcjk5NDYyNTU=",
        "organizations_url": "https://api.github.com/users/fredizzimo/orgs",
        "received_events_url": "https://api.github.com/users/fredizzimo/received_events",
        "repos_url": "https://api.github.com/users/fredizzimo/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/fredizzimo/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/fredizzimo/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/fredizzimo",
        "user_view_type": "public"
    }
}