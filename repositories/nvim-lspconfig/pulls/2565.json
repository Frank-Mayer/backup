{
    "_links": {
        "comments": {
            "href": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565/comments"
        },
        "commits": {
            "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565/commits"
        },
        "html": {
            "href": "https://github.com/neovim/nvim-lspconfig/pull/2565"
        },
        "issue": {
            "href": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565"
        },
        "review_comment": {
            "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments{/number}"
        },
        "review_comments": {
            "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565/comments"
        },
        "self": {
            "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
        },
        "statuses": {
            "href": "https://api.github.com/repos/neovim/nvim-lspconfig/statuses/e9118d231e9490e8843f9ffcb12ff7debbd95a50"
        }
    },
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "MEMBER",
    "auto_merge": null,
    "base": {
        "label": "neovim:master",
        "ref": "master",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/neovim/nvim-lspconfig/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/neovim/nvim-lspconfig/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/neovim/nvim-lspconfig/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/neovim/nvim-lspconfig/branches{/branch}",
            "clone_url": "https://github.com/neovim/nvim-lspconfig.git",
            "collaborators_url": "https://api.github.com/repos/neovim/nvim-lspconfig/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/comments{/number}",
            "commits_url": "https://api.github.com/repos/neovim/nvim-lspconfig/commits{/sha}",
            "compare_url": "https://api.github.com/repos/neovim/nvim-lspconfig/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/neovim/nvim-lspconfig/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/neovim/nvim-lspconfig/contributors",
            "created_at": "2019-11-13T17:12:28Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/deployments",
            "description": "Quickstart configs for Nvim LSP",
            "disabled": false,
            "downloads_url": "https://api.github.com/repos/neovim/nvim-lspconfig/downloads",
            "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/events",
            "fork": false,
            "forks": 1927,
            "forks_count": 1927,
            "forks_url": "https://api.github.com/repos/neovim/nvim-lspconfig/forks",
            "full_name": "neovim/nvim-lspconfig",
            "git_commits_url": "https://api.github.com/repos/neovim/nvim-lspconfig/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/neovim/nvim-lspconfig/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/neovim/nvim-lspconfig/git/tags{/sha}",
            "git_url": "git://github.com/neovim/nvim-lspconfig.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": true,
            "has_pages": false,
            "has_projects": false,
            "has_wiki": true,
            "homepage": "",
            "hooks_url": "https://api.github.com/repos/neovim/nvim-lspconfig/hooks",
            "html_url": "https://github.com/neovim/nvim-lspconfig",
            "id": 221512407,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues{/number}",
            "keys_url": "https://api.github.com/repos/neovim/nvim-lspconfig/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels{/name}",
            "language": "Lua",
            "languages_url": "https://api.github.com/repos/neovim/nvim-lspconfig/languages",
            "license": {
                "key": "apache-2.0",
                "name": "Apache License 2.0",
                "node_id": "MDc6TGljZW5zZTI=",
                "spdx_id": "Apache-2.0",
                "url": "https://api.github.com/licenses/apache-2.0"
            },
            "merges_url": "https://api.github.com/repos/neovim/nvim-lspconfig/merges",
            "milestones_url": "https://api.github.com/repos/neovim/nvim-lspconfig/milestones{/number}",
            "mirror_url": null,
            "name": "nvim-lspconfig",
            "node_id": "MDEwOlJlcG9zaXRvcnkyMjE1MTI0MDc=",
            "notifications_url": "https://api.github.com/repos/neovim/nvim-lspconfig/notifications{?since,all,participating}",
            "open_issues": 46,
            "open_issues_count": 46,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
                "events_url": "https://api.github.com/users/neovim/events{/privacy}",
                "followers_url": "https://api.github.com/users/neovim/followers",
                "following_url": "https://api.github.com/users/neovim/following{/other_user}",
                "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/neovim",
                "id": 6471485,
                "login": "neovim",
                "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
                "organizations_url": "https://api.github.com/users/neovim/orgs",
                "received_events_url": "https://api.github.com/users/neovim/received_events",
                "repos_url": "https://api.github.com/users/neovim/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
                "type": "Organization",
                "url": "https://api.github.com/users/neovim"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls{/number}",
            "pushed_at": "2023-07-15T00:54:27Z",
            "releases_url": "https://api.github.com/repos/neovim/nvim-lspconfig/releases{/id}",
            "size": 3331,
            "ssh_url": "git@github.com:neovim/nvim-lspconfig.git",
            "stargazers_count": 7759,
            "stargazers_url": "https://api.github.com/repos/neovim/nvim-lspconfig/stargazers",
            "statuses_url": "https://api.github.com/repos/neovim/nvim-lspconfig/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/neovim/nvim-lspconfig/subscribers",
            "subscription_url": "https://api.github.com/repos/neovim/nvim-lspconfig/subscription",
            "svn_url": "https://github.com/neovim/nvim-lspconfig",
            "tags_url": "https://api.github.com/repos/neovim/nvim-lspconfig/tags",
            "teams_url": "https://api.github.com/repos/neovim/nvim-lspconfig/teams",
            "topics": [
                "language-server",
                "language-server-protocol",
                "lsp",
                "neovim",
                "nvim",
                "plugin",
                "vim"
            ],
            "trees_url": "https://api.github.com/repos/neovim/nvim-lspconfig/git/trees{/sha}",
            "updated_at": "2023-07-15T13:54:14Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig",
            "visibility": "public",
            "watchers": 7759,
            "watchers_count": 7759,
            "web_commit_signoff_required": false
        },
        "sha": "3bd4ca412982afa6f88bb7ef890660cee51c3e58",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/6471485?v=4",
            "events_url": "https://api.github.com/users/neovim/events{/privacy}",
            "followers_url": "https://api.github.com/users/neovim/followers",
            "following_url": "https://api.github.com/users/neovim/following{/other_user}",
            "gists_url": "https://api.github.com/users/neovim/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/neovim",
            "id": 6471485,
            "login": "neovim",
            "node_id": "MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=",
            "organizations_url": "https://api.github.com/users/neovim/orgs",
            "received_events_url": "https://api.github.com/users/neovim/received_events",
            "repos_url": "https://api.github.com/users/neovim/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/neovim/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/neovim/subscriptions",
            "type": "Organization",
            "url": "https://api.github.com/users/neovim"
        }
    },
    "body": "1. make get `root_dir` can be async wrap in coroutine\r\n2. change rust_analyzer get command output async.",
    "closed_at": "2023-05-06T11:35:25Z",
    "comment_data": [
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1170083150"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1170083150"
                }
            },
            "author_association": "MEMBER",
            "body": "I'd use `vim.fn.jobstart` instead, it will simplify the code and you won't have to use `vim.schedule`.",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-04-18T13:57:36Z",
            "diff_hunk": "@@ -10,47 +11,77 @@ local function reload_workspace(bufnr)\n   end)\n end\n \n+local function get_workspace_dir(args)\n+  local co = coroutine.running()\n+  if not co then\n+    return\n+  end\n+\n+  local function safe_close(handle)\n+    if not uv.is_closing(handle) then\n+      uv.close(handle)\n+    end\n+  end\n+\n+  local stdout = uv.new_pipe(false)\n+  local stderr = uv.new_pipe(false)\n+  local chunks = {}\n+  local handle\n+  handle = uv.spawn('cargo', {",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1170083150",
            "id": 1170083150,
            "line": null,
            "node_id": "PRRC_kwDODTQC185Fvg1O",
            "original_commit_id": "37be1e763fb99f13ef28a5012b619b768adf9f0a",
            "original_line": 30,
            "original_position": 26,
            "original_start_line": null,
            "path": "lua/lspconfig/server_configurations/rust_analyzer.lua",
            "position": null,
            "pull_request_review_id": 1390190490,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1170083150/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-04-18T14:02:11Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1170083150",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1170083861"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1170083861"
                }
            },
            "author_association": "MEMBER",
            "body": "If you want to force a single return value, you can wrap the expression in `()`\r\n```suggestion\r\n  return (coroutine.yield())\r\n```",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-04-18T13:58:07Z",
            "diff_hunk": "@@ -10,47 +11,77 @@ local function reload_workspace(bufnr)\n   end)\n end\n \n+local function get_workspace_dir(args)\n+  local co = coroutine.running()\n+  if not co then\n+    return\n+  end\n+\n+  local function safe_close(handle)\n+    if not uv.is_closing(handle) then\n+      uv.close(handle)\n+    end\n+  end\n+\n+  local stdout = uv.new_pipe(false)\n+  local stderr = uv.new_pipe(false)\n+  local chunks = {}\n+  local handle\n+  handle = uv.spawn('cargo', {\n+    args = args,\n+    cwd = uv.cwd(),\n+    stdio = { nil, stdout, stderr },\n+  }, function(code, signal)\n+    safe_close(stdout)\n+    safe_close(stderr)\n+    safe_close(handle)\n+    if next(chunks) == nil then\n+      return\n+    end\n+\n+    local data = table.concat(chunks, '')\n+    chunks = vim.json.decode(data)\n+    local workspace_root = chunks and chunks['workspace_root'] or nil\n+    coroutine.resume(co, workspace_root)\n+  end)\n+\n+  stdout:read_start(function(err, data)\n+    assert(not err)\n+    if data then\n+      chunks[#chunks + 1] = data\n+    end\n+  end)\n+\n+  stderr:read_start(function(err, data)\n+    assert(not err)\n+    if data then\n+      vim.notify(string.format('[lspconfig] cmd (%q) failed:\\n%s', table.concat(args, ' '), data), vim.log.levels.WARN)\n+    end\n+  end)\n+\n+  local workspace_root = coroutine.yield()\n+  return workspace_root",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1170083861",
            "id": 1170083861,
            "line": null,
            "node_id": "PRRC_kwDODTQC185FvhAV",
            "original_commit_id": "37be1e763fb99f13ef28a5012b619b768adf9f0a",
            "original_line": 63,
            "original_position": 59,
            "original_start_line": 62,
            "path": "lua/lspconfig/server_configurations/rust_analyzer.lua",
            "position": null,
            "pull_request_review_id": 1390190490,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1170083861/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-04-18T14:02:11Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1170083861",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1170088567"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1170088567"
                }
            },
            "author_association": "MEMBER",
            "body": "`coroutine.resume(coroutine.create(...))`? `co` won't be used anywhere else",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-04-18T14:01:22Z",
            "diff_hunk": "@@ -257,16 +255,25 @@ function configs.__newindex(t, config_name, config_def)\n       end\n       local buf_path = util.path.sanitize(bufname)\n \n-      if get_root_dir then\n-        root_dir = get_root_dir(buf_path, bufnr)\n-      end\n+      local co = coroutine.create(function()",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1170088567",
            "id": 1170088567,
            "line": null,
            "node_id": "PRRC_kwDODTQC185FviJ3",
            "original_commit_id": "37be1e763fb99f13ef28a5012b619b768adf9f0a",
            "original_line": 258,
            "original_position": 16,
            "original_start_line": null,
            "path": "lua/lspconfig/configs.lua",
            "position": null,
            "pull_request_review_id": 1390190490,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1170088567/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-04-18T14:02:11Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1170088567",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1170708928"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1170708928"
                }
            },
            "author_association": "MEMBER",
            "body": "jobstart is like a syntactic sugar based on uv.spawn. But something is done internally to make it easy to use. The current use case is simple though. So using uv.spawn directly can simplify the execution of some wrapping syntax. Although the time is negligible. ",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-04-19T01:16:40Z",
            "diff_hunk": "@@ -10,47 +11,77 @@ local function reload_workspace(bufnr)\n   end)\n end\n \n+local function get_workspace_dir(args)\n+  local co = coroutine.running()\n+  if not co then\n+    return\n+  end\n+\n+  local function safe_close(handle)\n+    if not uv.is_closing(handle) then\n+      uv.close(handle)\n+    end\n+  end\n+\n+  local stdout = uv.new_pipe(false)\n+  local stderr = uv.new_pipe(false)\n+  local chunks = {}\n+  local handle\n+  handle = uv.spawn('cargo', {",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1170708928",
            "id": 1170708928,
            "in_reply_to_id": 1170083150,
            "line": null,
            "node_id": "PRRC_kwDODTQC185Fx5nA",
            "original_commit_id": "37be1e763fb99f13ef28a5012b619b768adf9f0a",
            "original_line": 30,
            "original_position": 26,
            "original_start_line": null,
            "path": "lua/lspconfig/server_configurations/rust_analyzer.lua",
            "position": null,
            "pull_request_review_id": 1391129019,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1170708928/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-04-19T01:16:41Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1170708928",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1170721881"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1170721881"
                }
            },
            "author_association": "MEMBER",
            "body": "`uv.spawn` is more verbose and harder to use correctly, and `jobstart` fixes some of its pitfalls. This code will also be an example of how to use it, so I'd just use the simpler alternative.\r\n\r\nAlso, failure has to be handled here. Looks like rust analyzer falls back to other ways of determining the root directory. And if starting the process fails, the coroutine will be suspended and never resumed, not giving other code a chance to run.",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-04-19T01:45:48Z",
            "diff_hunk": "@@ -10,47 +11,77 @@ local function reload_workspace(bufnr)\n   end)\n end\n \n+local function get_workspace_dir(args)\n+  local co = coroutine.running()\n+  if not co then\n+    return\n+  end\n+\n+  local function safe_close(handle)\n+    if not uv.is_closing(handle) then\n+      uv.close(handle)\n+    end\n+  end\n+\n+  local stdout = uv.new_pipe(false)\n+  local stderr = uv.new_pipe(false)\n+  local chunks = {}\n+  local handle\n+  handle = uv.spawn('cargo', {",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1170721881",
            "id": 1170721881,
            "in_reply_to_id": 1170083150,
            "line": null,
            "node_id": "PRRC_kwDODTQC185Fx8xZ",
            "original_commit_id": "37be1e763fb99f13ef28a5012b619b768adf9f0a",
            "original_line": 30,
            "original_position": 26,
            "original_start_line": null,
            "path": "lua/lspconfig/server_configurations/rust_analyzer.lua",
            "position": null,
            "pull_request_review_id": 1391147293,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1170721881/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-04-19T01:46:13Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1170721881",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1170722887"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1170722887"
                }
            },
            "author_association": "MEMBER",
            "body": "make sense. I will change to jobstart.",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-04-19T01:48:08Z",
            "diff_hunk": "@@ -10,47 +11,77 @@ local function reload_workspace(bufnr)\n   end)\n end\n \n+local function get_workspace_dir(args)\n+  local co = coroutine.running()\n+  if not co then\n+    return\n+  end\n+\n+  local function safe_close(handle)\n+    if not uv.is_closing(handle) then\n+      uv.close(handle)\n+    end\n+  end\n+\n+  local stdout = uv.new_pipe(false)\n+  local stderr = uv.new_pipe(false)\n+  local chunks = {}\n+  local handle\n+  handle = uv.spawn('cargo', {",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1170722887",
            "id": 1170722887,
            "in_reply_to_id": 1170083150,
            "line": null,
            "node_id": "PRRC_kwDODTQC185Fx9BH",
            "original_commit_id": "37be1e763fb99f13ef28a5012b619b768adf9f0a",
            "original_line": 30,
            "original_position": 26,
            "original_start_line": null,
            "path": "lua/lspconfig/server_configurations/rust_analyzer.lua",
            "position": null,
            "pull_request_review_id": 1391148608,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1170722887/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-04-19T01:48:08Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1170722887",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1174582809"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174582809"
                }
            },
            "author_association": "MEMBER",
            "body": "Since this is executed asynchronously, current buffer might have changed.\r\n```suggestion\r\n          local buf_name = api.nvim_buf_get_name(bufnr)\r\n```\r\nOr just reuse `bufname` variable.",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-04-23T13:36:32Z",
            "diff_hunk": "@@ -97,54 +97,54 @@ function configs.__newindex(t, config_name, config_def)\n     local get_root_dir = config.root_dir\n \n     function M.launch()\n-      local root_dir\n-      if get_root_dir then\n-        local bufnr = api.nvim_get_current_buf()\n-        local bufname = api.nvim_buf_get_name(bufnr)\n-        if #bufname == 0 and not config.single_file_support then\n-          return\n-        elseif #bufname ~= 0 then\n-          if not util.bufname_valid(bufname) then\n-            return\n-          end\n+      local bufnr = api.nvim_get_current_buf()\n+      local bufname = api.nvim_buf_get_name(bufnr)\n+      if (#bufname == 0 and not config.single_file_support) or (#bufname ~= 0 and not util.bufname_valid(bufname)) then\n+        return\n+      end\n+\n+      coroutine.resume(coroutine.create(vim.schedule_wrap(function()\n+        local root_dir\n+        if get_root_dir then\n           root_dir = get_root_dir(util.path.sanitize(bufname), bufnr)\n         end\n-      end\n \n-      if root_dir then\n-        api.nvim_create_autocmd('BufReadPost', {\n-          pattern = fn.fnameescape(root_dir) .. '/*',\n-          callback = function()\n-            M.manager.try_add_wrapper()\n-          end,\n-          group = lsp_group,\n-          desc = string.format(\n-            'Checks whether server %s should attach to a newly opened buffer inside workspace %q.',\n-            config.name,\n-            root_dir\n-          ),\n-        })\n-        for _, bufnr in ipairs(api.nvim_list_bufs()) do\n-          local bufname = api.nvim_buf_get_name(bufnr)\n-          if util.bufname_valid(bufname) then\n-            local buf_dir = util.path.sanitize(bufname)\n-            if buf_dir:sub(1, root_dir:len()) == root_dir then\n-              M.manager.try_add_wrapper(bufnr)\n+        if root_dir then\n+          api.nvim_create_autocmd('BufReadPost', {\n+            pattern = fn.fnameescape(root_dir) .. '/*',\n+            callback = function()\n+              M.manager.try_add_wrapper()\n+            end,\n+            group = lsp_group,\n+            desc = string.format(\n+              'Checks whether server %s should attach to a newly opened buffer inside workspace %q.',\n+              config.name,\n+              root_dir\n+            ),\n+          })\n+\n+          for _, buf in ipairs(api.nvim_list_bufs()) do\n+            local buf_name = api.nvim_buf_get_name(buf)\n+            if util.bufname_valid(buf_name) then\n+              local buf_dir = util.path.sanitize(buf_name)\n+              if buf_dir:sub(1, root_dir:len()) == root_dir then\n+                M.manager.try_add_wrapper(buf)\n+              end\n             end\n           end\n+        elseif config.single_file_support then\n+          -- This allows on_new_config to use the parent directory of the file\n+          -- Effectively this is the root from lspconfig's perspective, as we use\n+          -- this to attach additional files in the same parent folder to the same server.\n+          -- We just no longer send rootDirectory or workspaceFolders during initialization.\n+          local buf_name = api.nvim_buf_get_name(0)",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1174582809",
            "id": 1174582809,
            "line": null,
            "node_id": "PRRC_kwDODTQC185GArYZ",
            "original_commit_id": "8e9f7a0428c2480dfecea366c205e99630eb63b4",
            "original_line": 140,
            "original_position": 74,
            "original_start_line": null,
            "path": "lua/lspconfig/configs.lua",
            "position": null,
            "pull_request_review_id": 1396911495,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174582809/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-04-23T14:00:43Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174582809",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1174583066"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174583066"
                }
            },
            "author_association": "MEMBER",
            "body": "The current directory can change too, so `uv.cwd()` should be moved out of this coroutine.",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-04-23T13:38:16Z",
            "diff_hunk": "@@ -97,54 +97,54 @@ function configs.__newindex(t, config_name, config_def)\n     local get_root_dir = config.root_dir\n \n     function M.launch()\n-      local root_dir\n-      if get_root_dir then\n-        local bufnr = api.nvim_get_current_buf()\n-        local bufname = api.nvim_buf_get_name(bufnr)\n-        if #bufname == 0 and not config.single_file_support then\n-          return\n-        elseif #bufname ~= 0 then\n-          if not util.bufname_valid(bufname) then\n-            return\n-          end\n+      local bufnr = api.nvim_get_current_buf()\n+      local bufname = api.nvim_buf_get_name(bufnr)\n+      if (#bufname == 0 and not config.single_file_support) or (#bufname ~= 0 and not util.bufname_valid(bufname)) then\n+        return\n+      end\n+\n+      coroutine.resume(coroutine.create(vim.schedule_wrap(function()\n+        local root_dir\n+        if get_root_dir then\n           root_dir = get_root_dir(util.path.sanitize(bufname), bufnr)\n         end\n-      end\n \n-      if root_dir then\n-        api.nvim_create_autocmd('BufReadPost', {\n-          pattern = fn.fnameescape(root_dir) .. '/*',\n-          callback = function()\n-            M.manager.try_add_wrapper()\n-          end,\n-          group = lsp_group,\n-          desc = string.format(\n-            'Checks whether server %s should attach to a newly opened buffer inside workspace %q.',\n-            config.name,\n-            root_dir\n-          ),\n-        })\n-        for _, bufnr in ipairs(api.nvim_list_bufs()) do\n-          local bufname = api.nvim_buf_get_name(bufnr)\n-          if util.bufname_valid(bufname) then\n-            local buf_dir = util.path.sanitize(bufname)\n-            if buf_dir:sub(1, root_dir:len()) == root_dir then\n-              M.manager.try_add_wrapper(bufnr)\n+        if root_dir then\n+          api.nvim_create_autocmd('BufReadPost', {\n+            pattern = fn.fnameescape(root_dir) .. '/*',\n+            callback = function()\n+              M.manager.try_add_wrapper()\n+            end,\n+            group = lsp_group,\n+            desc = string.format(\n+              'Checks whether server %s should attach to a newly opened buffer inside workspace %q.',\n+              config.name,\n+              root_dir\n+            ),\n+          })\n+\n+          for _, buf in ipairs(api.nvim_list_bufs()) do\n+            local buf_name = api.nvim_buf_get_name(buf)\n+            if util.bufname_valid(buf_name) then\n+              local buf_dir = util.path.sanitize(buf_name)\n+              if buf_dir:sub(1, root_dir:len()) == root_dir then\n+                M.manager.try_add_wrapper(buf)\n+              end\n             end\n           end\n+        elseif config.single_file_support then\n+          -- This allows on_new_config to use the parent directory of the file\n+          -- Effectively this is the root from lspconfig's perspective, as we use\n+          -- this to attach additional files in the same parent folder to the same server.\n+          -- We just no longer send rootDirectory or workspaceFolders during initialization.\n+          local buf_name = api.nvim_buf_get_name(0)\n+          if #buf_name ~= 0 and not util.bufname_valid(buf_name) then\n+            return\n+          end\n+          local pseudo_root = #buf_name == 0 and uv.cwd() or util.path.dirname(util.path.sanitize(buf_name))",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1174583066",
            "id": 1174583066,
            "line": null,
            "node_id": "PRRC_kwDODTQC185GArca",
            "original_commit_id": "8e9f7a0428c2480dfecea366c205e99630eb63b4",
            "original_line": 144,
            "original_position": 78,
            "original_start_line": null,
            "path": "lua/lspconfig/configs.lua",
            "position": null,
            "pull_request_review_id": 1396911495,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174583066/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-04-23T14:00:43Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174583066",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1174583137"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174583137"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n          M.manager.add(pseudo_root, true, bufnr)\r\n```",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-04-23T13:38:41Z",
            "diff_hunk": "@@ -97,54 +97,54 @@ function configs.__newindex(t, config_name, config_def)\n     local get_root_dir = config.root_dir\n \n     function M.launch()\n-      local root_dir\n-      if get_root_dir then\n-        local bufnr = api.nvim_get_current_buf()\n-        local bufname = api.nvim_buf_get_name(bufnr)\n-        if #bufname == 0 and not config.single_file_support then\n-          return\n-        elseif #bufname ~= 0 then\n-          if not util.bufname_valid(bufname) then\n-            return\n-          end\n+      local bufnr = api.nvim_get_current_buf()\n+      local bufname = api.nvim_buf_get_name(bufnr)\n+      if (#bufname == 0 and not config.single_file_support) or (#bufname ~= 0 and not util.bufname_valid(bufname)) then\n+        return\n+      end\n+\n+      coroutine.resume(coroutine.create(vim.schedule_wrap(function()\n+        local root_dir\n+        if get_root_dir then\n           root_dir = get_root_dir(util.path.sanitize(bufname), bufnr)\n         end\n-      end\n \n-      if root_dir then\n-        api.nvim_create_autocmd('BufReadPost', {\n-          pattern = fn.fnameescape(root_dir) .. '/*',\n-          callback = function()\n-            M.manager.try_add_wrapper()\n-          end,\n-          group = lsp_group,\n-          desc = string.format(\n-            'Checks whether server %s should attach to a newly opened buffer inside workspace %q.',\n-            config.name,\n-            root_dir\n-          ),\n-        })\n-        for _, bufnr in ipairs(api.nvim_list_bufs()) do\n-          local bufname = api.nvim_buf_get_name(bufnr)\n-          if util.bufname_valid(bufname) then\n-            local buf_dir = util.path.sanitize(bufname)\n-            if buf_dir:sub(1, root_dir:len()) == root_dir then\n-              M.manager.try_add_wrapper(bufnr)\n+        if root_dir then\n+          api.nvim_create_autocmd('BufReadPost', {\n+            pattern = fn.fnameescape(root_dir) .. '/*',\n+            callback = function()\n+              M.manager.try_add_wrapper()\n+            end,\n+            group = lsp_group,\n+            desc = string.format(\n+              'Checks whether server %s should attach to a newly opened buffer inside workspace %q.',\n+              config.name,\n+              root_dir\n+            ),\n+          })\n+\n+          for _, buf in ipairs(api.nvim_list_bufs()) do\n+            local buf_name = api.nvim_buf_get_name(buf)\n+            if util.bufname_valid(buf_name) then\n+              local buf_dir = util.path.sanitize(buf_name)\n+              if buf_dir:sub(1, root_dir:len()) == root_dir then\n+                M.manager.try_add_wrapper(buf)\n+              end\n             end\n           end\n+        elseif config.single_file_support then\n+          -- This allows on_new_config to use the parent directory of the file\n+          -- Effectively this is the root from lspconfig's perspective, as we use\n+          -- this to attach additional files in the same parent folder to the same server.\n+          -- We just no longer send rootDirectory or workspaceFolders during initialization.\n+          local buf_name = api.nvim_buf_get_name(0)\n+          if #buf_name ~= 0 and not util.bufname_valid(buf_name) then\n+            return\n+          end\n+          local pseudo_root = #buf_name == 0 and uv.cwd() or util.path.dirname(util.path.sanitize(buf_name))\n+          M.manager.add(pseudo_root, true, api.nvim_get_current_buf())",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1174583137",
            "id": 1174583137,
            "line": null,
            "node_id": "PRRC_kwDODTQC185GArdh",
            "original_commit_id": "8e9f7a0428c2480dfecea366c205e99630eb63b4",
            "original_line": 145,
            "original_position": 79,
            "original_start_line": null,
            "path": "lua/lspconfig/configs.lua",
            "position": null,
            "pull_request_review_id": 1396911495,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174583137/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-04-23T14:00:43Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174583137",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1174583932"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174583932"
                }
            },
            "author_association": "MEMBER",
            "body": "Same thing here, `uv.cwd()` should be be moved so it happens before `get_root_dir` is called.",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-04-23T13:43:19Z",
            "diff_hunk": "@@ -257,16 +255,23 @@ function configs.__newindex(t, config_name, config_def)\n       end\n       local buf_path = util.path.sanitize(bufname)\n \n-      if get_root_dir then\n-        root_dir = get_root_dir(buf_path, bufnr)\n-      end\n+      coroutine.resume(coroutine.create(function()\n+        local root_dir\n+        if get_root_dir then\n+          root_dir = get_root_dir(buf_path, bufnr)\n+        end\n \n-      if root_dir then\n-        manager.add(root_dir, false, bufnr)\n-      elseif config.single_file_support then\n-        local pseudo_root = #bufname == 0 and uv.cwd() or util.path.dirname(buf_path)\n-        manager.add(pseudo_root, true, bufnr)\n-      end\n+        if root_dir then\n+          vim.schedule(function()\n+            manager.add(root_dir, false, bufnr)\n+          end)\n+        elseif config.single_file_support then\n+          local pseudo_root = #bufname == 0 and uv.cwd() or util.path.dirname(buf_path)",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1174583932",
            "id": 1174583932,
            "line": null,
            "node_id": "PRRC_kwDODTQC185GArp8",
            "original_commit_id": "8e9f7a0428c2480dfecea366c205e99630eb63b4",
            "original_line": 269,
            "original_position": 130,
            "original_start_line": null,
            "path": "lua/lspconfig/configs.lua",
            "position": null,
            "pull_request_review_id": 1396911495,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174583932/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-04-23T14:00:43Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174583932",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1174585272"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174585272"
                }
            },
            "author_association": "MEMBER",
            "body": "Why `schedule_wrap`?",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-04-23T13:51:04Z",
            "diff_hunk": "@@ -97,54 +97,54 @@ function configs.__newindex(t, config_name, config_def)\n     local get_root_dir = config.root_dir\n \n     function M.launch()\n-      local root_dir\n-      if get_root_dir then\n-        local bufnr = api.nvim_get_current_buf()\n-        local bufname = api.nvim_buf_get_name(bufnr)\n-        if #bufname == 0 and not config.single_file_support then\n-          return\n-        elseif #bufname ~= 0 then\n-          if not util.bufname_valid(bufname) then\n-            return\n-          end\n+      local bufnr = api.nvim_get_current_buf()\n+      local bufname = api.nvim_buf_get_name(bufnr)\n+      if (#bufname == 0 and not config.single_file_support) or (#bufname ~= 0 and not util.bufname_valid(bufname)) then\n+        return\n+      end\n+\n+      coroutine.resume(coroutine.create(vim.schedule_wrap(function()",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1174585272",
            "id": 1174585272,
            "line": null,
            "node_id": "PRRC_kwDODTQC185GAr-4",
            "original_commit_id": "8e9f7a0428c2480dfecea366c205e99630eb63b4",
            "original_line": 106,
            "original_position": 20,
            "original_start_line": null,
            "path": "lua/lspconfig/configs.lua",
            "position": null,
            "pull_request_review_id": 1396911495,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174585272/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-04-23T14:00:43Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174585272",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1174586742"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174586742"
                }
            },
            "author_association": "MEMBER",
            "body": "If `get_root_dir` calls `coroutine.yield` first, the result of that will be returned from this `coroutine.resume` (and as the second value, the first value is the status of the coroutine) and assigned to `root_dir`, which wouldn't be correct. We specifically want the result of `config.get_root_dir`.\r\n\r\nAlso there is a typo in `schedul_wrap`",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-04-23T14:00:20Z",
            "diff_hunk": "@@ -64,9 +64,12 @@ local function make_config_info(config, bufnr)\n   local buffer_dir = api.nvim_buf_call(bufnr, function()\n     return vim.fn.expand '%:p:h'\n   end)\n-  local root_dir = config.get_root_dir and config.get_root_dir(buffer_dir)\n-  if root_dir then\n-    config_info.root_dir = root_dir\n+\n+  if config.get_root_dir then\n+    config_info.root_dir = coroutine.resume(coroutine.create(vim.schedul_wrap(function()\n+      local root_dir = config.get_root_dir(buffer_dir)\n+      coroutine.yield(root_dir)\n+    end)))",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1174586742",
            "id": 1174586742,
            "line": null,
            "node_id": "PRRC_kwDODTQC185GAsV2",
            "original_commit_id": "8e9f7a0428c2480dfecea366c205e99630eb63b4",
            "original_line": 72,
            "original_position": 23,
            "original_start_line": 69,
            "path": "lua/lspconfig/ui/lspinfo.lua",
            "position": null,
            "pull_request_review_id": 1396911495,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174586742/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-04-23T14:00:43Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174586742",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1174790232"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174790232"
                }
            },
            "author_association": "MEMBER",
            "body": "because run `buf_attach_client` in there. it have some C function so need wrap with `schedule_wrap`",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-04-24T05:28:18Z",
            "diff_hunk": "@@ -97,54 +97,54 @@ function configs.__newindex(t, config_name, config_def)\n     local get_root_dir = config.root_dir\n \n     function M.launch()\n-      local root_dir\n-      if get_root_dir then\n-        local bufnr = api.nvim_get_current_buf()\n-        local bufname = api.nvim_buf_get_name(bufnr)\n-        if #bufname == 0 and not config.single_file_support then\n-          return\n-        elseif #bufname ~= 0 then\n-          if not util.bufname_valid(bufname) then\n-            return\n-          end\n+      local bufnr = api.nvim_get_current_buf()\n+      local bufname = api.nvim_buf_get_name(bufnr)\n+      if (#bufname == 0 and not config.single_file_support) or (#bufname ~= 0 and not util.bufname_valid(bufname)) then\n+        return\n+      end\n+\n+      coroutine.resume(coroutine.create(vim.schedule_wrap(function()",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1174790232",
            "id": 1174790232,
            "in_reply_to_id": 1174585272,
            "line": null,
            "node_id": "PRRC_kwDODTQC185GBeBY",
            "original_commit_id": "8e9f7a0428c2480dfecea366c205e99630eb63b4",
            "original_line": 106,
            "original_position": 20,
            "original_start_line": null,
            "path": "lua/lspconfig/configs.lua",
            "position": null,
            "pull_request_review_id": 1397219120,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174790232/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-04-24T05:31:41Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174790232",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1174790638"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174790638"
                }
            },
            "author_association": "MEMBER",
            "body": "yep first value is status. a mistake. but i really don't like this in lspinfo ..",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-04-24T05:28:46Z",
            "diff_hunk": "@@ -64,9 +64,12 @@ local function make_config_info(config, bufnr)\n   local buffer_dir = api.nvim_buf_call(bufnr, function()\n     return vim.fn.expand '%:p:h'\n   end)\n-  local root_dir = config.get_root_dir and config.get_root_dir(buffer_dir)\n-  if root_dir then\n-    config_info.root_dir = root_dir\n+\n+  if config.get_root_dir then\n+    config_info.root_dir = coroutine.resume(coroutine.create(vim.schedul_wrap(function()\n+      local root_dir = config.get_root_dir(buffer_dir)\n+      coroutine.yield(root_dir)\n+    end)))",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1174790638",
            "id": 1174790638,
            "in_reply_to_id": 1174586742,
            "line": null,
            "node_id": "PRRC_kwDODTQC185GBeHu",
            "original_commit_id": "8e9f7a0428c2480dfecea366c205e99630eb63b4",
            "original_line": 72,
            "original_position": 23,
            "original_start_line": 69,
            "path": "lua/lspconfig/ui/lspinfo.lua",
            "position": null,
            "pull_request_review_id": 1397219444,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174790638/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-04-24T05:28:47Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1174790638",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1181341315"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181341315"
                }
            },
            "author_association": "MEMBER",
            "body": "how about now ",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-01T01:34:03Z",
            "diff_hunk": "@@ -64,9 +64,12 @@ local function make_config_info(config, bufnr)\n   local buffer_dir = api.nvim_buf_call(bufnr, function()\n     return vim.fn.expand '%:p:h'\n   end)\n-  local root_dir = config.get_root_dir and config.get_root_dir(buffer_dir)\n-  if root_dir then\n-    config_info.root_dir = root_dir\n+\n+  if config.get_root_dir then\n+    config_info.root_dir = coroutine.resume(coroutine.create(vim.schedul_wrap(function()\n+      local root_dir = config.get_root_dir(buffer_dir)\n+      coroutine.yield(root_dir)\n+    end)))",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1181341315",
            "id": 1181341315,
            "in_reply_to_id": 1174586742,
            "line": null,
            "node_id": "PRRC_kwDODTQC185GadaD",
            "original_commit_id": "8e9f7a0428c2480dfecea366c205e99630eb63b4",
            "original_line": 72,
            "original_position": 23,
            "original_start_line": 69,
            "path": "lua/lspconfig/ui/lspinfo.lua",
            "position": null,
            "pull_request_review_id": 1407270247,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181341315/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-05-01T01:34:04Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181341315",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1181357159"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181357159"
                }
            },
            "author_association": "MEMBER",
            "body": "Let's not use `coroutine.yield` outside of the \"user code\" and pass the result through a reference/upvalue. If for some reason the initial suspend is something like `coroutine.yield(42)`, `root_dir` will be assigned to 42. Not that anyone should do that, but a reference will be more robust.\r\n```suggestion\r\n    local root_dir\r\n    local status = coroutine.resume(coroutine.create(vim.schedule_wrap(function()\r\n      root_dir = config.get_root_dir(buffer_dir)\r\n    end)))\r\n    config_info.root_dir = status and root_dir or error_messages.root_dir_not_found\r\n```\r\nBut doing this alone will make it stop working for anything has an async `root_dir` function. Preferably the buffer could be updated with this information once we actually get the result. Maybe checking if `coroutine.status` is `'suspended'`, and if so then save the line number and update that line? But this will make the code more complicated.",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-01T02:23:28Z",
            "diff_hunk": "@@ -64,9 +64,13 @@ local function make_config_info(config, bufnr)\n   local buffer_dir = api.nvim_buf_call(bufnr, function()\n     return vim.fn.expand '%:p:h'\n   end)\n-  local root_dir = config.get_root_dir and config.get_root_dir(buffer_dir)\n-  if root_dir then\n-    config_info.root_dir = root_dir\n+\n+  if config.get_root_dir then\n+    local status, root_dir = coroutine.resume(coroutine.create(vim.schedule_wrap(function()\n+      local root_dir = config.get_root_dir(buffer_dir)\n+      coroutine.yield(root_dir)\n+    end)))\n+    config_info.root_dir = status and root_dir or error_messages.root_dir_not_found",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1181357159",
            "id": 1181357159,
            "line": null,
            "node_id": "PRRC_kwDODTQC185GahRn",
            "original_commit_id": "03e374a6d1572ca192a4de67608794b0e2c1a1b6",
            "original_line": 73,
            "original_position": 24,
            "original_start_line": 69,
            "path": "lua/lspconfig/ui/lspinfo.lua",
            "position": null,
            "pull_request_review_id": 1407296635,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181357159/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-05-01T02:23:29Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181357159",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1181358578"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181358578"
                }
            },
            "author_association": "MEMBER",
            "body": "> Maybe checking if coroutine.status is 'suspended', and if so then save the line number and update that line? But this will make the code more complicated.\r\n\r\nhonestly yes .. I don't have good idea on lspinfo .  It has some importance. But not that important.",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-01T02:30:09Z",
            "diff_hunk": "@@ -64,9 +64,13 @@ local function make_config_info(config, bufnr)\n   local buffer_dir = api.nvim_buf_call(bufnr, function()\n     return vim.fn.expand '%:p:h'\n   end)\n-  local root_dir = config.get_root_dir and config.get_root_dir(buffer_dir)\n-  if root_dir then\n-    config_info.root_dir = root_dir\n+\n+  if config.get_root_dir then\n+    local status, root_dir = coroutine.resume(coroutine.create(vim.schedule_wrap(function()\n+      local root_dir = config.get_root_dir(buffer_dir)\n+      coroutine.yield(root_dir)\n+    end)))\n+    config_info.root_dir = status and root_dir or error_messages.root_dir_not_found",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1181358578",
            "id": 1181358578,
            "in_reply_to_id": 1181357159,
            "line": null,
            "node_id": "PRRC_kwDODTQC185Gahny",
            "original_commit_id": "03e374a6d1572ca192a4de67608794b0e2c1a1b6",
            "original_line": 73,
            "original_position": 24,
            "original_start_line": 69,
            "path": "lua/lspconfig/ui/lspinfo.lua",
            "position": null,
            "pull_request_review_id": 1407298606,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181358578/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-05-01T02:30:10Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181358578",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1181359602"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181359602"
                }
            },
            "author_association": "MEMBER",
            "body": "Avoid `vim.schedule` when it's not necessary? Same on the branch below\r\n```suggestion\r\n          if not vim.in_fast_event() then\r\n            manager.add(root_dir, false, bufnr)\r\n          else\r\n            vim.schedule(function()\r\n              manager.add(root_dir, false, bufnr)\r\n            end)\r\n          end\r\n```\r\nOr it could be even something like this, maybe even a new utility function that does this:\r\n```lua\r\nlocal function cb()\r\n  manager.add(root_dir, false, bufnr)\r\nend\r\nif vim.in_fast_event() then\r\n  vim.schedule(cb)\r\nelse\r\n  cb()\r\nend\r\n```",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-01T02:34:17Z",
            "diff_hunk": "@@ -257,16 +257,23 @@ function configs.__newindex(t, config_name, config_def)\n       end\n       local buf_path = util.path.sanitize(bufname)\n \n-      if get_root_dir then\n-        root_dir = get_root_dir(buf_path, bufnr)\n-      end\n+      coroutine.resume(coroutine.create(function()\n+        local root_dir\n+        if get_root_dir then\n+          root_dir = get_root_dir(buf_path, bufnr)\n+        end\n \n-      if root_dir then\n-        manager.add(root_dir, false, bufnr)\n-      elseif config.single_file_support then\n-        local pseudo_root = #bufname == 0 and uv.cwd() or util.path.dirname(buf_path)\n-        manager.add(pseudo_root, true, bufnr)\n-      end\n+        if root_dir then\n+          vim.schedule(function()\n+            manager.add(root_dir, false, bufnr)\n+          end)",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1181359602",
            "id": 1181359602,
            "line": null,
            "node_id": "PRRC_kwDODTQC185Gah3y",
            "original_commit_id": "066f13b4580b8791f4f3d122298f7d0d45ecec79",
            "original_line": 269,
            "original_position": 130,
            "original_start_line": 267,
            "path": "lua/lspconfig/configs.lua",
            "position": null,
            "pull_request_review_id": 1407300546,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181359602/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-05-01T02:34:17Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181359602",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1181359981"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181359981"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  local co = assert(coroutine.running())\r\n```",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-01T02:36:16Z",
            "diff_hunk": "@@ -10,6 +10,44 @@ local function reload_workspace(bufnr)\n   end)\n end\n \n+local function get_workspace_dir(cmd)\n+  assert(coroutine.running())\n+  local co = coroutine.running()\n+  if not co then\n+    return\n+  end",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1181359981",
            "id": 1181359981,
            "line": null,
            "node_id": "PRRC_kwDODTQC185Gah9t",
            "original_commit_id": "066f13b4580b8791f4f3d122298f7d0d45ecec79",
            "original_line": 18,
            "original_position": 9,
            "original_start_line": 14,
            "path": "lua/lspconfig/server_configurations/rust_analyzer.lua",
            "position": null,
            "pull_request_review_id": 1407301081,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181359981/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-05-01T02:36:16Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181359981",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1181359998"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181359998"
                }
            },
            "author_association": "MEMBER",
            "body": "make sense",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-01T02:36:23Z",
            "diff_hunk": "@@ -257,16 +257,23 @@ function configs.__newindex(t, config_name, config_def)\n       end\n       local buf_path = util.path.sanitize(bufname)\n \n-      if get_root_dir then\n-        root_dir = get_root_dir(buf_path, bufnr)\n-      end\n+      coroutine.resume(coroutine.create(function()\n+        local root_dir\n+        if get_root_dir then\n+          root_dir = get_root_dir(buf_path, bufnr)\n+        end\n \n-      if root_dir then\n-        manager.add(root_dir, false, bufnr)\n-      elseif config.single_file_support then\n-        local pseudo_root = #bufname == 0 and uv.cwd() or util.path.dirname(buf_path)\n-        manager.add(pseudo_root, true, bufnr)\n-      end\n+        if root_dir then\n+          vim.schedule(function()\n+            manager.add(root_dir, false, bufnr)\n+          end)",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1181359998",
            "id": 1181359998,
            "in_reply_to_id": 1181359602,
            "line": null,
            "node_id": "PRRC_kwDODTQC185Gah9-",
            "original_commit_id": "066f13b4580b8791f4f3d122298f7d0d45ecec79",
            "original_line": 269,
            "original_position": 130,
            "original_start_line": 267,
            "path": "lua/lspconfig/configs.lua",
            "position": null,
            "pull_request_review_id": 1407301108,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181359998/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-05-01T02:36:24Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181359998",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1181361946"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181361946"
                }
            },
            "author_association": "MEMBER",
            "body": "Second argument can't be false all the time, it used to be true on the `config.single_file_support` branch",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-01T02:45:56Z",
            "diff_hunk": "@@ -257,16 +257,29 @@ function configs.__newindex(t, config_name, config_def)\n       end\n       local buf_path = util.path.sanitize(bufname)\n \n-      if get_root_dir then\n-        root_dir = get_root_dir(buf_path, bufnr)\n+      local function check_fast(root_dir)\n+        if not vim.in_fast_event() then\n+          manager.add(root_dir, false, bufnr)",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1181361946",
            "id": 1181361946,
            "line": null,
            "node_id": "PRRC_kwDODTQC185Gaica",
            "original_commit_id": "fbfffeead4184b2db9eed5cd8a38def1cc33744b",
            "original_line": 262,
            "original_position": 116,
            "original_start_line": null,
            "path": "lua/lspconfig/configs.lua",
            "position": null,
            "pull_request_review_id": 1407304086,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181361946/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-05-01T02:45:56Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181361946",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1181362841"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181362841"
                }
            },
            "author_association": "MEMBER",
            "body": "I still don't get why `vim.schedule_wrap` is here, I think it's unnecessary and it only forces `get_root_dir` to be deferred. If I'm not mistaken this makes it so `root_dir` is always going to be `nil`, because it's assigned on the next event loop iteration once all of this code is done",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-01T02:50:20Z",
            "diff_hunk": "@@ -64,9 +64,13 @@ local function make_config_info(config, bufnr)\n   local buffer_dir = api.nvim_buf_call(bufnr, function()\n     return vim.fn.expand '%:p:h'\n   end)\n-  local root_dir = config.get_root_dir and config.get_root_dir(buffer_dir)\n-  if root_dir then\n-    config_info.root_dir = root_dir\n+\n+  if config.get_root_dir then\n+    local root_dir\n+    local status = coroutine.resume(coroutine.create(vim.schedule_wrap(function()",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1181362841",
            "id": 1181362841,
            "line": null,
            "node_id": "PRRC_kwDODTQC185GaiqZ",
            "original_commit_id": "fbfffeead4184b2db9eed5cd8a38def1cc33744b",
            "original_line": 70,
            "original_position": 21,
            "original_start_line": null,
            "path": "lua/lspconfig/ui/lspinfo.lua",
            "position": null,
            "pull_request_review_id": 1407305180,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181362841/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-05-01T02:50:20Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181362841",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1181363308"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181363308"
                }
            },
            "author_association": "MEMBER",
            "body": "> I think it's unnecessary and it only forces get_root_dir to be deferred\r\n\r\nthat's right ..looks like before i don't get it work then i add it into schedule wrap . let me try again",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-01T02:52:56Z",
            "diff_hunk": "@@ -64,9 +64,13 @@ local function make_config_info(config, bufnr)\n   local buffer_dir = api.nvim_buf_call(bufnr, function()\n     return vim.fn.expand '%:p:h'\n   end)\n-  local root_dir = config.get_root_dir and config.get_root_dir(buffer_dir)\n-  if root_dir then\n-    config_info.root_dir = root_dir\n+\n+  if config.get_root_dir then\n+    local root_dir\n+    local status = coroutine.resume(coroutine.create(vim.schedule_wrap(function()",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1181363308",
            "id": 1181363308,
            "in_reply_to_id": 1181362841,
            "line": null,
            "node_id": "PRRC_kwDODTQC185Gaixs",
            "original_commit_id": "fbfffeead4184b2db9eed5cd8a38def1cc33744b",
            "original_line": 70,
            "original_position": 21,
            "original_start_line": null,
            "path": "lua/lspconfig/ui/lspinfo.lua",
            "position": null,
            "pull_request_review_id": 1407305762,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181363308/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-05-01T02:53:01Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1181363308",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185807826"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185807826"
                }
            },
            "author_association": "MEMBER",
            "body": "`pattern` can be a table\r\n```suggestion\r\n      local event_conf = config.filetypes and { event = 'FileType', pattern = config.filetypes }\r\n```",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-05T08:04:25Z",
            "diff_hunk": "@@ -72,17 +72,10 @@ function configs.__newindex(t, config_name, config_def)\n     end\n \n     if config.autostart == true then\n-      local event\n-      local pattern\n-      if config.filetypes then\n-        event = 'FileType'\n-        pattern = table.concat(config.filetypes, ',')\n-      else\n-        event = 'BufReadPost'\n-        pattern = '*'\n-      end\n-      api.nvim_create_autocmd(event, {\n-        pattern = pattern,\n+      local event_conf = config.filetypes and { event = 'FileType', pattern = table.concat(config.filetypes, ',') }",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185807826",
            "id": 1185807826,
            "line": null,
            "node_id": "PRRC_kwDODTQC185Grf3S",
            "original_commit_id": "d123e22ac097ad676a9d80f6712c32662ed06026",
            "original_line": 75,
            "original_position": 15,
            "original_start_line": null,
            "path": "lua/lspconfig/configs.lua",
            "position": null,
            "pull_request_review_id": 1414340523,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185807826/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-05-05T08:23:57Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185807826",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185810382"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185810382"
                }
            },
            "author_association": "MEMBER",
            "body": "Can't `try_launch` be inlined here?\r\n```lua\r\nutil.async_run(function()\r\n  -- ...\r\nend)\r\n```",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-05T08:07:26Z",
            "diff_hunk": "@@ -97,54 +90,57 @@ function configs.__newindex(t, config_name, config_def)\n     local get_root_dir = config.root_dir\n \n     function M.launch()\n-      local root_dir\n-      if get_root_dir then\n-        local bufnr = api.nvim_get_current_buf()\n-        local bufname = api.nvim_buf_get_name(bufnr)\n-        if #bufname == 0 and not config.single_file_support then\n-          return\n-        elseif #bufname ~= 0 then\n-          if not util.bufname_valid(bufname) then\n-            return\n-          end\n+      local bufnr = api.nvim_get_current_buf()\n+      local bufname = api.nvim_buf_get_name(bufnr)\n+      if (#bufname == 0 and not config.single_file_support) or (#bufname ~= 0 and not util.bufname_valid(bufname)) then\n+        return\n+      end\n+\n+      local pwd = uv.cwd()\n+\n+      local function try_launch()\n+        local root_dir\n+        if get_root_dir then\n           root_dir = get_root_dir(util.path.sanitize(bufname), bufnr)\n         end\n-      end\n \n-      if root_dir then\n-        api.nvim_create_autocmd('BufReadPost', {\n-          pattern = fn.fnameescape(root_dir) .. '/*',\n-          callback = function()\n-            M.manager.try_add_wrapper()\n-          end,\n-          group = lsp_group,\n-          desc = string.format(\n-            'Checks whether server %s should attach to a newly opened buffer inside workspace %q.',\n-            config.name,\n-            root_dir\n-          ),\n-        })\n-        for _, bufnr in ipairs(api.nvim_list_bufs()) do\n-          local bufname = api.nvim_buf_get_name(bufnr)\n-          if util.bufname_valid(bufname) then\n-            local buf_dir = util.path.sanitize(bufname)\n-            if buf_dir:sub(1, root_dir:len()) == root_dir then\n-              M.manager.try_add_wrapper(bufnr)\n+        if root_dir then\n+          api.nvim_create_autocmd('BufReadPost', {\n+            pattern = fn.fnameescape(root_dir) .. '/*',\n+            callback = function(arg)\n+              M.manager.try_add_wrapper(arg.buf, root_dir)\n+            end,\n+            group = lsp_group,\n+            desc = string.format(\n+              'Checks whether server %s should attach to a newly opened buffer inside workspace %q.',\n+              config.name,\n+              root_dir\n+            ),\n+          })\n+\n+          for _, buf in ipairs(api.nvim_list_bufs()) do\n+            local buf_name = api.nvim_buf_get_name(buf)\n+            if util.bufname_valid(buf_name) then\n+              local buf_dir = util.path.sanitize(buf_name)\n+              if buf_dir:sub(1, root_dir:len()) == root_dir then\n+                M.manager.try_add_wrapper(buf, root_dir)\n+              end\n             end\n           end\n+        elseif config.single_file_support then\n+          -- This allows on_new_config to use the parent directory of the file\n+          -- Effectively this is the root from lspconfig's perspective, as we use\n+          -- this to attach additional files in the same parent folder to the same server.\n+          -- We just no longer send rootDirectory or workspaceFolders during initialization.\n+          if not api.nvim_buf_is_valid(bufnr) or (#bufname ~= 0 and not util.bufname_valid(bufname)) then\n+            return\n+          end\n+          local pseudo_root = #bufname == 0 and pwd or util.path.dirname(util.path.sanitize(bufname))\n+          M.manager.add(pseudo_root, true, bufnr)\n         end\n-      elseif config.single_file_support then\n-        -- This allows on_new_config to use the parent directory of the file\n-        -- Effectively this is the root from lspconfig's perspective, as we use\n-        -- this to attach additional files in the same parent folder to the same server.\n-        -- We just no longer send rootDirectory or workspaceFolders during initialization.\n-        local bufname = api.nvim_buf_get_name(0)\n-        if #bufname ~= 0 and not util.bufname_valid(bufname) then\n-          return\n-        end\n-        local pseudo_root = #bufname == 0 and uv.cwd() or util.path.dirname(util.path.sanitize(bufname))\n-        M.manager.add(pseudo_root, true, api.nvim_get_current_buf())\n       end\n+\n+      util.async_run(try_launch)",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185810382",
            "id": 1185810382,
            "line": null,
            "node_id": "PRRC_kwDODTQC185GrgfO",
            "original_commit_id": "d123e22ac097ad676a9d80f6712c32662ed06026",
            "original_line": 143,
            "original_position": 117,
            "original_start_line": null,
            "path": "lua/lspconfig/configs.lua",
            "position": null,
            "pull_request_review_id": 1414340523,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185810382/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-05-05T08:23:57Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185810382",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185811916"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185811916"
                }
            },
            "author_association": "MEMBER",
            "body": "Same here, `try_start` can be inlined",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-05T08:09:19Z",
            "diff_hunk": "@@ -255,35 +250,48 @@ function configs.__newindex(t, config_name, config_def)\n           return\n         end\n       end\n+\n+      if project_root then\n+        manager.add(project_root, false, bufnr)\n+        return\n+      end\n+\n       local buf_path = util.path.sanitize(bufname)\n \n-      if get_root_dir then\n-        root_dir = get_root_dir(buf_path, bufnr)\n+      local function check_fast(root_dir, single_mode)\n+        if not vim.in_fast_event() then\n+          manager.add(root_dir, single_mode, bufnr)\n+          return\n+        end\n+        vim.schedule(function()\n+          manager.add(root_dir, single_mode, bufnr)\n+        end)\n       end\n \n-      if root_dir then\n-        manager.add(root_dir, false, bufnr)\n-      elseif config.single_file_support then\n-        local pseudo_root = #bufname == 0 and uv.cwd() or util.path.dirname(buf_path)\n-        manager.add(pseudo_root, true, bufnr)\n+      local function try_start()\n+        local root_dir\n+        if get_root_dir then\n+          root_dir = get_root_dir(buf_path, bufnr)\n+        end\n+\n+        if root_dir then\n+          check_fast(root_dir, false)\n+        elseif config.single_file_support then\n+          local pseudo_root = #bufname == 0 and pwd or util.path.dirname(buf_path)\n+          check_fast(pseudo_root, true)\n+        end\n       end\n+      util.async_run(try_start)",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185811916",
            "id": 1185811916,
            "line": null,
            "node_id": "PRRC_kwDODTQC185Grg3M",
            "original_commit_id": "d123e22ac097ad676a9d80f6712c32662ed06026",
            "original_line": 284,
            "original_position": 180,
            "original_start_line": null,
            "path": "lua/lspconfig/configs.lua",
            "position": null,
            "pull_request_review_id": 1414340523,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185811916/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-05-05T08:23:57Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185811916",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185813180"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185813180"
                }
            },
            "author_association": "MEMBER",
            "body": "Zero is failure too\r\n```suggestion\r\n  if jobid <= 0 then\r\n```",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-05T08:10:45Z",
            "diff_hunk": "@@ -10,6 +10,40 @@ local function reload_workspace(bufnr)\n   end)\n end\n \n+local function get_workspace_dir(cmd)\n+  local co = assert(coroutine.running())\n+\n+  local chunks = {}\n+  local jobid = vim.fn.jobstart(cmd, {\n+    on_stdout = function(_, data, _)\n+      chunks[#chunks + 1] = unpack(data)\n+    end,\n+    on_stderr = function(_, data, _)\n+      vim.api.nvim_err_write(table.concat(data, '\\n'))\n+    end,\n+    on_exit = function()\n+      if next(chunks) == nil then\n+        coroutine.resume(co, nil)\n+        return\n+      end\n+\n+      local data = table.concat(chunks, '')\n+      chunks = vim.json.decode(data)\n+      local workspace_root = chunks and chunks['workspace_root'] or nil\n+      coroutine.resume(co, workspace_root)\n+    end,\n+    stdout_buffered = true,\n+    stderr_buffered = true,\n+  })\n+\n+  if jobid < 0 then",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185813180",
            "id": 1185813180,
            "line": null,
            "node_id": "PRRC_kwDODTQC185GrhK8",
            "original_commit_id": "d123e22ac097ad676a9d80f6712c32662ed06026",
            "original_line": 39,
            "original_position": 30,
            "original_start_line": null,
            "path": "lua/lspconfig/server_configurations/rust_analyzer.lua",
            "position": null,
            "pull_request_review_id": 1414340523,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185813180/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-05-05T08:23:57Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185813180",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185819025"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185819025"
                }
            },
            "author_association": "MEMBER",
            "body": "`var = unpack(data)` is equivalent to `var = data[1]`, other values are discarded. `data` array is split on newlines, so I think that should work:\r\n```suggestion\r\n      chunks[#chunks + 1] = table.concat(data, '\\n')\r\n```",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-05T08:17:24Z",
            "diff_hunk": "@@ -10,6 +10,40 @@ local function reload_workspace(bufnr)\n   end)\n end\n \n+local function get_workspace_dir(cmd)\n+  local co = assert(coroutine.running())\n+\n+  local chunks = {}\n+  local jobid = vim.fn.jobstart(cmd, {\n+    on_stdout = function(_, data, _)\n+      chunks[#chunks + 1] = unpack(data)",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185819025",
            "id": 1185819025,
            "line": null,
            "node_id": "PRRC_kwDODTQC185GrimR",
            "original_commit_id": "d123e22ac097ad676a9d80f6712c32662ed06026",
            "original_line": 19,
            "original_position": 10,
            "original_start_line": null,
            "path": "lua/lspconfig/server_configurations/rust_analyzer.lua",
            "position": null,
            "pull_request_review_id": 1414340523,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185819025/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-05-05T08:23:57Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185819025",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185821572"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185821572"
                }
            },
            "author_association": "MEMBER",
            "body": "Can you move all of this out of the callback function, after `coroutine.yield()` and just call `coroutine.resume(co)` here?",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-05T08:20:10Z",
            "diff_hunk": "@@ -10,6 +10,40 @@ local function reload_workspace(bufnr)\n   end)\n end\n \n+local function get_workspace_dir(cmd)\n+  local co = assert(coroutine.running())\n+\n+  local chunks = {}\n+  local jobid = vim.fn.jobstart(cmd, {\n+    on_stdout = function(_, data, _)\n+      chunks[#chunks + 1] = unpack(data)\n+    end,\n+    on_stderr = function(_, data, _)\n+      vim.api.nvim_err_write(table.concat(data, '\\n'))\n+    end,\n+    on_exit = function()\n+      if next(chunks) == nil then\n+        coroutine.resume(co, nil)\n+        return\n+      end\n+\n+      local data = table.concat(chunks, '')\n+      chunks = vim.json.decode(data)\n+      local workspace_root = chunks and chunks['workspace_root'] or nil",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185821572",
            "id": 1185821572,
            "line": null,
            "node_id": "PRRC_kwDODTQC185GrjOE",
            "original_commit_id": "d123e22ac097ad676a9d80f6712c32662ed06026",
            "original_line": 32,
            "original_position": 23,
            "original_start_line": 25,
            "path": "lua/lspconfig/server_configurations/rust_analyzer.lua",
            "position": null,
            "pull_request_review_id": 1414340523,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185821572/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-05-05T08:23:57Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185821572",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185863193"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185863193"
                }
            },
            "author_association": "MEMBER",
            "body": "If we don't support async root_dir functions right now then there should be at least an error message that says that\r\n```suggestion\r\n    local co = coroutine.create(function()\r\n      local status, err = pcall(function()\r\n        root_dir = config.get_root_dir(buffer_dir)\r\n      end)\r\n      if not status then\r\n        print('lspconfig: unhandled error: ' .. tostring(err))\r\n      end\r\n    end)\r\n    coroutine.resume(co)\r\n    if root_dir then\r\n      config_info.root_dir = root_dir\r\n    elseif coroutine.status(co) == 'suspended' then\r\n      config_info.root_dir = error_messages.async_root_dir_function\r\n    else\r\n      config_info.root_dir = error_messages.root_dir_not_found\r\n    end\r\n```\r\nAnd add to `error_messages`:\r\n```lua\r\n  async_root_dir_function = 'Asynchronous root_dir functions are not supported in :LspInfo',\r\n```",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-05T09:06:28Z",
            "diff_hunk": "@@ -64,9 +64,18 @@ local function make_config_info(config, bufnr)\n   local buffer_dir = api.nvim_buf_call(bufnr, function()\n     return vim.fn.expand '%:p:h'\n   end)\n-  local root_dir = config.get_root_dir and config.get_root_dir(buffer_dir)\n-  if root_dir then\n-    config_info.root_dir = root_dir\n+\n+  if config.get_root_dir then\n+    local root_dir\n+    local status = coroutine.resume(coroutine.create(function()\n+      local status, err = pcall(function()\n+        root_dir = config.get_root_dir(buffer_dir)\n+      end)\n+      if not status then\n+        print('lspconfig: unhandled error: ' .. tostring(err))\n+      end\n+    end))\n+    config_info.root_dir = status and root_dir or error_messages.root_dir_not_found",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185863193",
            "id": 1185863193,
            "line": null,
            "node_id": "PRRC_kwDODTQC185GrtYZ",
            "original_commit_id": "5583275d5201b79f43435b883777a8ba6f1501a5",
            "original_line": 78,
            "original_position": 29,
            "original_start_line": 70,
            "path": "lua/lspconfig/ui/lspinfo.lua",
            "position": null,
            "pull_request_review_id": 1414424355,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185863193/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-05-05T09:18:57Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185863193",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185866819"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185866819"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  chunks = vim.json.decode(table.concat(chunks, ''))\r\n```",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-05T09:10:35Z",
            "diff_hunk": "@@ -10,6 +10,35 @@ local function reload_workspace(bufnr)\n   end)\n end\n \n+local function get_workspace_dir(cmd)\n+  local co = assert(coroutine.running())\n+\n+  local chunks = {}\n+  local jobid = vim.fn.jobstart(cmd, {\n+    on_stdout = function(_, data, _)\n+      chunks[#chunks + 1] = table.concat(data, '\\n')\n+    end,\n+    on_stderr = function(_, data, _)\n+      vim.api.nvim_err_write(table.concat(data, '\\n'))\n+    end,\n+    on_exit = function()\n+      coroutine.resume(co)\n+    end,\n+    stdout_buffered = true,\n+    stderr_buffered = true,\n+  })\n+\n+  if jobid <= 0 then\n+    vim.api.nvim_err_writeln('Failed to start cargo metadata job id:' .. jobid)\n+    return\n+  end\n+\n+  coroutine.yield()\n+  local data = table.concat(chunks, '')\n+  chunks = vim.json.decode(data)",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185866819",
            "id": 1185866819,
            "line": null,
            "node_id": "PRRC_kwDODTQC185GruRD",
            "original_commit_id": "5583275d5201b79f43435b883777a8ba6f1501a5",
            "original_line": 38,
            "original_position": 29,
            "original_start_line": 37,
            "path": "lua/lspconfig/server_configurations/rust_analyzer.lua",
            "position": null,
            "pull_request_review_id": 1414424355,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185866819/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-05-05T09:18:57Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185866819",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185873191"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185873191"
                }
            },
            "author_association": "MEMBER",
            "body": "Because `get_root_dir` can be asynchronous, buffer could be deleted in the meantime\r\n```suggestion\r\n          root_dir = get_root_dir(buf_path, bufnr)\r\n          if not api.nvim_buf_is_valid(bufnr) then\r\n            return\r\n          end\r\n```",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-05T09:17:39Z",
            "diff_hunk": "@@ -255,35 +248,47 @@ function configs.__newindex(t, config_name, config_def)\n           return\n         end\n       end\n-      local buf_path = util.path.sanitize(bufname)\n \n-      if get_root_dir then\n-        root_dir = get_root_dir(buf_path, bufnr)\n+      if project_root then\n+        manager.add(project_root, false, bufnr)\n+        return\n       end\n \n-      if root_dir then\n-        manager.add(root_dir, false, bufnr)\n-      elseif config.single_file_support then\n-        local pseudo_root = #bufname == 0 and uv.cwd() or util.path.dirname(buf_path)\n-        manager.add(pseudo_root, true, bufnr)\n+      local buf_path = util.path.sanitize(bufname)\n+\n+      local function check_fast(root_dir, single_mode)\n+        if not vim.in_fast_event() then\n+          manager.add(root_dir, single_mode, bufnr)\n+          return\n+        end\n+        vim.schedule(function()\n+          manager.add(root_dir, single_mode, bufnr)\n+        end)\n       end\n+\n+      util.async_run(function()\n+        local root_dir\n+        if get_root_dir then\n+          root_dir = get_root_dir(buf_path, bufnr)",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185873191",
            "id": 1185873191,
            "line": 285,
            "node_id": "PRRC_kwDODTQC185Grv0n",
            "original_commit_id": "5583275d5201b79f43435b883777a8ba6f1501a5",
            "original_line": 272,
            "original_position": 170,
            "original_start_line": null,
            "path": "lua/lspconfig/configs.lua",
            "position": 200,
            "pull_request_review_id": 1414424355,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185873191/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-05-05T09:18:57Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185873191",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185873735"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185873735"
                }
            },
            "author_association": "MEMBER",
            "body": "Same here\r\n```suggestion\r\n          root_dir = get_root_dir(util.path.sanitize(bufname), bufnr)\r\n          if not api.nvim_buf_is_valid(bufnr) then\r\n            return\r\n          end\r\n```",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-05T09:18:18Z",
            "diff_hunk": "@@ -97,54 +90,55 @@ function configs.__newindex(t, config_name, config_def)\n     local get_root_dir = config.root_dir\n \n     function M.launch()\n-      local root_dir\n-      if get_root_dir then\n-        local bufnr = api.nvim_get_current_buf()\n-        local bufname = api.nvim_buf_get_name(bufnr)\n-        if #bufname == 0 and not config.single_file_support then\n-          return\n-        elseif #bufname ~= 0 then\n-          if not util.bufname_valid(bufname) then\n-            return\n-          end\n+      local bufnr = api.nvim_get_current_buf()\n+      local bufname = api.nvim_buf_get_name(bufnr)\n+      if (#bufname == 0 and not config.single_file_support) or (#bufname ~= 0 and not util.bufname_valid(bufname)) then\n+        return\n+      end\n+\n+      local pwd = uv.cwd()\n+\n+      util.async_run(function()\n+        local root_dir\n+        if get_root_dir then\n           root_dir = get_root_dir(util.path.sanitize(bufname), bufnr)",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185873735",
            "id": 1185873735,
            "line": 123,
            "node_id": "PRRC_kwDODTQC185Grv9H",
            "original_commit_id": "5583275d5201b79f43435b883777a8ba6f1501a5",
            "original_line": 104,
            "original_position": 47,
            "original_start_line": null,
            "path": "lua/lspconfig/configs.lua",
            "position": 71,
            "pull_request_review_id": 1414424355,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185873735/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-05-05T09:18:57Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185873735",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185877900"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185877900"
                }
            },
            "author_association": "MEMBER",
            "body": "Actually, `root_dir` in rust looks so simple that it should be very easy to support both synchronous and asynchronous versions. If `coroutine.running()` is `nil` then you just call `vim.fn.jobwait`. Maybe for now `root_dir` functions should be required to support synchronous version just to keep `:LspInfo` working",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-05T09:22:41Z",
            "diff_hunk": "@@ -64,9 +64,18 @@ local function make_config_info(config, bufnr)\n   local buffer_dir = api.nvim_buf_call(bufnr, function()\n     return vim.fn.expand '%:p:h'\n   end)\n-  local root_dir = config.get_root_dir and config.get_root_dir(buffer_dir)\n-  if root_dir then\n-    config_info.root_dir = root_dir\n+\n+  if config.get_root_dir then\n+    local root_dir\n+    local status = coroutine.resume(coroutine.create(function()\n+      local status, err = pcall(function()\n+        root_dir = config.get_root_dir(buffer_dir)\n+      end)\n+      if not status then\n+        print('lspconfig: unhandled error: ' .. tostring(err))\n+      end\n+    end))\n+    config_info.root_dir = status and root_dir or error_messages.root_dir_not_found",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185877900",
            "id": 1185877900,
            "in_reply_to_id": 1185863193,
            "line": null,
            "node_id": "PRRC_kwDODTQC185Grw-M",
            "original_commit_id": "5583275d5201b79f43435b883777a8ba6f1501a5",
            "original_line": 78,
            "original_position": 29,
            "original_start_line": 70,
            "path": "lua/lspconfig/ui/lspinfo.lua",
            "position": null,
            "pull_request_review_id": 1414446857,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185877900/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-05-05T09:22:41Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185877900",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185914473"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185914473"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n        vim.notify(('[lspconfig] unhandled error: %s'):format(tostring(err), vim.log.levels.WARN)\r\n```",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-05T10:03:10Z",
            "diff_hunk": "@@ -64,9 +65,25 @@ local function make_config_info(config, bufnr)\n   local buffer_dir = api.nvim_buf_call(bufnr, function()\n     return vim.fn.expand '%:p:h'\n   end)\n-  local root_dir = config.get_root_dir and config.get_root_dir(buffer_dir)\n-  if root_dir then\n-    config_info.root_dir = root_dir\n+\n+  if config.get_root_dir then\n+    local root_dir\n+    local co = coroutine.create(function()\n+      local status, err = pcall(function()\n+        root_dir = config.get_root_dir(buffer_dir)\n+      end)\n+      if not status then\n+        print('lspconfig: unhandled error: ' .. tostring(err))",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185914473",
            "id": 1185914473,
            "line": null,
            "node_id": "PRRC_kwDODTQC185Gr55p",
            "original_commit_id": "7067d59105a52478f8de4fc2ff9a1efcb7aae9a8",
            "original_line": 76,
            "original_position": 34,
            "original_start_line": null,
            "path": "lua/lspconfig/ui/lspinfo.lua",
            "position": null,
            "pull_request_review_id": 1414505488,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185914473/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-05-05T10:05:42Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185914473",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185915136"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185915136"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n      vim.notify(('[lspconfig] unhandled error: %s'):format(tostring(err), vim.log.levels.WARN)\r\n```",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-05T10:03:35Z",
            "diff_hunk": "@@ -588,4 +588,18 @@ function M.strip_archive_subpath(path)\n   return path\n end\n \n+function M.async_run(fn)\n+  vim.validate {\n+    fn = { fn, 'f' },\n+  }\n+  local co = coroutine.create(function()\n+    local status, err = pcall(fn)\n+\n+    if not status then\n+      print('lspconfig: unhandled error: ' .. tostring(err))",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185915136",
            "id": 1185915136,
            "line": null,
            "node_id": "PRRC_kwDODTQC185Gr6EA",
            "original_commit_id": "7067d59105a52478f8de4fc2ff9a1efcb7aae9a8",
            "original_line": 599,
            "original_position": 12,
            "original_start_line": null,
            "path": "lua/lspconfig/util.lua",
            "position": null,
            "pull_request_review_id": 1414505488,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185915136/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-05-05T10:05:42Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185915136",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185920083"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185920083"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  local stdout = {}\r\n  local stderr = {}\r\n  local jobid = vim.fn.jobstart(cmd, {\r\n    on_stdout = function(_, data, _)\r\n      stdout[#stdout + 1] = table.concat(data, '\\n')\r\n    end,\r\n    on_stderr = function(_, data, _)\r\n      stderr[#stderr + 1] = table.concat(data, '\\n')\r\n    end,\r\n    on_exit = function()\r\n      coroutine.resume(co)\r\n    end,\r\n    stdout_buffered = true,\r\n    stderr_buffered = true,\r\n  })\r\n\r\n  if jobid <= 0 then\r\n    vim.notify(('[lspconfig] cmd (%q) failed:\\n%s'):format(table.concat(cmd, ' '), table.concat(stderr, '')), vim.log.levels.WARN)\r\n    return\r\n  end\r\n\r\n  coroutine.yield()\r\n  stdout = vim.json.decode(table.concat(stdout, ''))\r\n  return stdout and stdout['workspace_root'] or nil\r\n```",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-05T10:09:23Z",
            "diff_hunk": "@@ -10,6 +10,34 @@ local function reload_workspace(bufnr)\n   end)\n end\n \n+local function get_workspace_dir(cmd)\n+  local co = assert(coroutine.running())\n+\n+  local chunks = {}\n+  local jobid = vim.fn.jobstart(cmd, {\n+    on_stdout = function(_, data, _)\n+      chunks[#chunks + 1] = table.concat(data, '\\n')\n+    end,\n+    on_stderr = function(_, data, _)\n+      vim.api.nvim_err_write(table.concat(data, '\\n'))\n+    end,\n+    on_exit = function()\n+      coroutine.resume(co)\n+    end,\n+    stdout_buffered = true,\n+    stderr_buffered = true,\n+  })\n+\n+  if jobid <= 0 then\n+    vim.api.nvim_err_writeln('Failed to start cargo metadata job id:' .. jobid)\n+    return\n+  end\n+\n+  coroutine.yield()\n+  chunks = vim.json.decode(table.concat(chunks, ''))\n+  return chunks and chunks['workspace_root'] or nil",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1185920083",
            "id": 1185920083,
            "line": null,
            "node_id": "PRRC_kwDODTQC185Gr7RT",
            "original_commit_id": "7067d59105a52478f8de4fc2ff9a1efcb7aae9a8",
            "original_line": 38,
            "original_position": 29,
            "original_start_line": 16,
            "path": "lua/lspconfig/server_configurations/rust_analyzer.lua",
            "position": null,
            "pull_request_review_id": 1414513960,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185920083/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-05-05T10:11:37Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1185920083",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1186070051"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1186070051"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n          root_dir = get_root_dir(buf_path, bufnr)\r\n          reenter()\r\n```",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-05T13:03:02Z",
            "diff_hunk": "@@ -255,35 +276,38 @@ function configs.__newindex(t, config_name, config_def)\n           return\n         end\n       end\n-      local buf_path = util.path.sanitize(bufname)\n \n-      if get_root_dir then\n-        root_dir = get_root_dir(buf_path, bufnr)\n+      if project_root then\n+        manager.add(project_root, false, bufnr)\n+        return\n       end\n \n-      if root_dir then\n-        manager.add(root_dir, false, bufnr)\n-      elseif config.single_file_support then\n-        local pseudo_root = #bufname == 0 and uv.cwd() or util.path.dirname(buf_path)\n-        manager.add(pseudo_root, true, bufnr)\n-      end\n-    end\n+      local buf_path = util.path.sanitize(bufname)\n \n-    -- Check that the buffer `bufnr` has a valid filetype according to\n-    -- `config.filetypes`, then do `manager.try_add(bufnr)`.\n-    function manager.try_add_wrapper(bufnr)\n-      bufnr = bufnr or api.nvim_get_current_buf()\n-      local buf_filetype = api.nvim_buf_get_option(bufnr, 'filetype')\n-      if config.filetypes then\n-        for _, filetype in ipairs(config.filetypes) do\n-          if buf_filetype == filetype then\n-            manager.try_add(bufnr)\n+      async_run(function()\n+        local root_dir\n+        if get_root_dir then\n+          root_dir = get_root_dir(buf_path, bufnr)",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1186070051",
            "id": 1186070051,
            "line": 285,
            "node_id": "PRRC_kwDODTQC185Gsf4j",
            "original_commit_id": "f30ecdf27d01e21e9cf083a4d0d2368e859a271a",
            "original_line": 290,
            "original_position": 205,
            "original_start_line": null,
            "path": "lua/lspconfig/configs.lua",
            "position": 200,
            "pull_request_review_id": 1414752165,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1186070051/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": null,
            "subject_type": "line",
            "updated_at": "2023-05-05T13:03:04Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1186070051",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "_links": {
                "html": {
                    "href": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1186092685"
                },
                "pull_request": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565"
                },
                "self": {
                    "href": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1186092685"
                }
            },
            "author_association": "MEMBER",
            "body": "```suggestion\r\n  coroutine.resume(coroutine.create(function()\r\n    local status, err = pcall(func)\r\n    if not status then\r\n      vim.notify(('[lspconfig] unhandled error: %s'):format(tostring(err)), vim.log.levels.WARN)\r\n    end\r\n  end))\r\n```",
            "commit_id": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
            "created_at": "2023-05-05T13:24:56Z",
            "diff_hunk": "@@ -4,6 +4,30 @@ local tbl_deep_extend = vim.tbl_deep_extend\n \n local configs = {}\n \n+local function reenter()\n+  if vim.in_fast_event() then\n+    local co = assert(coroutine.running())\n+    vim.schedule(function()\n+      coroutine.resume(co)\n+    end)\n+    coroutine.yield()\n+  end\n+end\n+\n+local function async_run(func)\n+  vim.validate {\n+    fn = { func, 'f' },\n+  }\n+  local co = coroutine.create(function()\n+    local status, err = pcall(func)\n+\n+    if not status then\n+      vim.notify(('[lspconfig] unhandled error: %s'):format(tostring(err)), vim.log.levels.WARN)\n+    end\n+  end)\n+  coroutine.resume(co)",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#discussion_r1186092685",
            "id": 1186092685,
            "line": null,
            "node_id": "PRRC_kwDODTQC185GslaN",
            "original_commit_id": "492d52398731140452282308d182d9db894a0d7d",
            "original_line": 28,
            "original_position": 25,
            "original_start_line": 18,
            "path": "lua/lspconfig/configs.lua",
            "position": null,
            "pull_request_review_id": 1414788876,
            "pull_request_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1186092685/reactions"
            },
            "side": "RIGHT",
            "start_line": null,
            "start_side": "RIGHT",
            "subject_type": "line",
            "updated_at": "2023-05-05T13:24:57Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments/1186092685",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        }
    ],
    "comment_regular_data": [
        {
            "author_association": "MEMBER",
            "body": "`M.launch` is also invoked `manager.add` . so it's fine. in test `LspRestart` and`LspStart` works fine. ",
            "created_at": "2023-04-19T01:12:31Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1513994807",
            "id": 1513994807,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185aPbo3",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1513994807/reactions"
            },
            "updated_at": "2023-04-19T01:12:31Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1513994807",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "`launch` function is used directly by `:LspStart` and `:LspRestart`. `get_workspace_dir` simply won't work when using those commands.",
            "created_at": "2023-04-19T01:29:32Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1514008176",
            "id": 1514008176,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185aPe5w",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514008176/reactions"
            },
            "updated_at": "2023-04-19T01:29:32Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514008176",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "hmmm I test in a helloword rust project. `LspStop` then `LspStart` `get_workspace_dir` is run twice i get two print.  add print before` coroutin.resume(co, workspace_root)` line:46",
            "created_at": "2023-04-19T01:35:12Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1514011732",
            "id": 1514011732,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185aPfxU",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514011732/reactions"
            },
            "updated_at": "2023-04-19T01:35:12Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514011732",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "It will abort the function here, in `get_workspace_dir` function:\r\n```lua\r\n  local co = coroutine.running()\r\n  if not co then\r\n    return\r\n  end\r\n```\r\n`coroutine.running()` returns nil when its called outside of coroutines",
            "created_at": "2023-04-19T01:47:59Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1514019550",
            "id": 1514019550,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185aPhre",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514019550/reactions"
            },
            "updated_at": "2023-04-19T01:48:16Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514019550",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "get root coroutine in `manager.add` this function in `M.launch`",
            "created_at": "2023-04-19T01:49:14Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1514020237",
            "id": 1514020237,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185aPh2N",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514020237/reactions"
            },
            "updated_at": "2023-04-19T01:49:14Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514020237",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Okay, but `root_dir` function is also called in configs.lua on line 110. That part won't be correct. We want to give a guarantee that `root_dir` functions are *always* called inside a coroutine. Try adding `assert(coroutine.running())` at the beginning of the `get_workspace_dir` function.",
            "created_at": "2023-04-19T01:58:11Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1514027091",
            "id": 1514027091,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185aPjhT",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514027091/reactions"
            },
            "updated_at": "2023-04-19T01:58:11Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514027091",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Actually I guess such guarantee wouldn't be really necessary, but in that case you need to handle both sync and async context inside `root_dir` functions.",
            "created_at": "2023-04-19T02:00:19Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1514028561",
            "id": 1514028561,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185aPj4R",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514028561/reactions"
            },
            "updated_at": "2023-04-19T02:00:19Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514028561",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "okay . i need think about that carefully.",
            "created_at": "2023-04-19T02:01:11Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1514029128",
            "id": 1514029128,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185aPkBI",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514029128/reactions"
            },
            "updated_at": "2023-04-19T02:01:11Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514029128",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Don't forget about `:LspInfo`, it calls `root_dir` too, and everything is synchronous there. The way I see it the options are:\r\n\r\n1. Make the entire `:LspInfo` asynchronous. You call `:LspInfo`, window shows up once all results are collected.\r\n2. Show the window instantly with anything that's already available, update the buffer as you get back results asynchronously.\r\n3. Don't guarantee that `root_dir` is always a coroutine, handle both sync/async in `root_dir` functions and leave `:LspInfo` as it is - blocking.",
            "created_at": "2023-04-19T02:07:55Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1514033364",
            "id": 1514033364,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185aPlDU",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514033364/reactions"
            },
            "updated_at": "2023-04-19T02:09:36Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514033364",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "root dir in `LspInfo`  we can get it from `client.config.root_dir` this is more simply we don't need call root_dir function.",
            "created_at": "2023-04-19T02:10:52Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1514034929",
            "id": 1514034929,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185aPlbx",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514034929/reactions"
            },
            "updated_at": "2023-04-19T02:10:52Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514034929",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "That's what I initially thought too, but it's for the `Other clients that match the filetype` section, where it says what clients can be started, but are not necessarily actually started yet.",
            "created_at": "2023-04-19T02:16:36Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1514038104",
            "id": 1514038104,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185aPmNY",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514038104/reactions"
            },
            "updated_at": "2023-04-19T02:16:36Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514038104",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "range all server name keys in configs. get the all the client that filetypes match current filetype. if client can get from active clients then root dir is `client.config.root_dir` . if not this server not start. then root dir is `not found`.",
            "created_at": "2023-04-19T02:20:49Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1514040549",
            "id": 1514040549,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185aPmzl",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514040549/reactions"
            },
            "updated_at": "2023-04-19T02:20:49Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1514040549",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "MEMBER",
            "body": " maybe need abstract this `coroutine.resume(coroutine.create)` like `if get_root_dir func then ` invoke a wrap function and pass get_root_dir into with a callback.   lspinfo and launch had changed. how do you think ?",
            "created_at": "2023-04-23T12:43:48Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1519059007",
            "id": 1519059007,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185aiwA_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1519059007/reactions"
            },
            "updated_at": "2023-04-23T12:43:48Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1519059007",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "What's really important with coroutines is error handling. `coroutine.resume` works kinda like `pcall`, it returns the status and error message. If we don't handle errors they are just going to be silent and if something goes wrong we won't have any way of debugging it.\r\n\r\nTo make sure we are catching all unhandled errors (except in callbacks before they resume the coroutine, but that should be handled by nvim already), the coroutine body should be executed inside `pcall` like this:\r\n```lua\r\nlocal function func()\r\n  error('test')\r\nend\r\n\r\ncoroutine.resume(coroutine.create(function()\r\n  local status, err = pcall(function()\r\n    func()\r\n  end)\r\n  if not status then\r\n    print('lspconfig: unhandled error: ' .. tostring(err))\r\n  end\r\nend))\r\n```",
            "created_at": "2023-05-01T03:22:50Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1529305243",
            "id": 1529305243,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185bJ1ib",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1529305243/reactions"
            },
            "updated_at": "2023-05-01T03:22:50Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1529305243",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/59243201?v=4",
                "events_url": "https://api.github.com/users/ii14/events{/privacy}",
                "followers_url": "https://api.github.com/users/ii14/followers",
                "following_url": "https://api.github.com/users/ii14/following{/other_user}",
                "gists_url": "https://api.github.com/users/ii14/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/ii14",
                "id": 59243201,
                "login": "ii14",
                "node_id": "MDQ6VXNlcjU5MjQzMjAx",
                "organizations_url": "https://api.github.com/users/ii14/orgs",
                "received_events_url": "https://api.github.com/users/ii14/received_events",
                "repos_url": "https://api.github.com/users/ii14/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/ii14/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/ii14/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/ii14"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "yep use `print` can works well in coroutine thread. if use notify need yield error . or use a wrap try catch\r\n\r\n```lua\r\nfunction tryCatch(tryFunc, catchFunc)\r\n    local success, result = pcall(tryFunc)\r\n    if not success then\r\n        catchFunc(result)\r\n    end\r\nend\r\n\r\ntryCatch(function()\r\n    error(\"xxxx\")\r\nend, function(err)\r\n    print(\"Lspconfig Error: \", err)\r\nend)\r\n```",
            "created_at": "2023-05-01T03:28:34Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1529307338",
            "id": 1529307338,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185bJ2DK",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1529307338/reactions"
            },
            "updated_at": "2023-05-01T03:28:34Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1529307338",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "NONE",
            "body": "f01429048950195bcab6c430b430fc44b2d9e05a broke `rust-analyzer` usage for me.",
            "created_at": "2023-06-23T01:25:14Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1603506545",
            "id": 1603506545,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185fk5Fx",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1603506545/reactions"
            },
            "updated_at": "2023-06-23T01:25:14Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1603506545",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6610056?v=4",
                "events_url": "https://api.github.com/users/d-e-s-o/events{/privacy}",
                "followers_url": "https://api.github.com/users/d-e-s-o/followers",
                "following_url": "https://api.github.com/users/d-e-s-o/following{/other_user}",
                "gists_url": "https://api.github.com/users/d-e-s-o/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/d-e-s-o",
                "id": 6610056,
                "login": "d-e-s-o",
                "node_id": "MDQ6VXNlcjY2MTAwNTY=",
                "organizations_url": "https://api.github.com/users/d-e-s-o/orgs",
                "received_events_url": "https://api.github.com/users/d-e-s-o/received_events",
                "repos_url": "https://api.github.com/users/d-e-s-o/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/d-e-s-o/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/d-e-s-o/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/d-e-s-o"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "What problem does this PR solve? It is always helpful to state the problem being solved, in the PR description.",
            "created_at": "2023-06-23T08:39:20Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1603936236",
            "id": 1603936236,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185fmh_s",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1603936236/reactions"
            },
            "updated_at": "2023-06-23T08:39:20Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1603936236",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "before rust get `workspace_root` is sync . now support async and also make gopls get cache async . in future can support `root_pattern` async by using luv fs module. \r\n\r\nit works well for me for a while for rust anlyzer and other people can confirm it works.  please @d-e-s-o   create an issue if you with error output. before check your env first.",
            "created_at": "2023-06-23T08:58:29Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1603960106",
            "id": 1603960106,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185fmn0q",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1603960106/reactions"
            },
            "updated_at": "2023-06-23T08:58:29Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1603960106",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "NONE",
            "body": "> please @d-e-s-o create an issue if you with error output. before check your env first.\r\n\r\nWhat do you mean by \"check your env first\"? What should I be looking for, please? The problem is there is no output and I am not sure how to debug this. To the degree I can tell, all that changes is that `rust-analyzer` is never started (it's certainly not a running process as it was before the change).",
            "created_at": "2023-06-23T14:01:46Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1604329330",
            "id": 1604329330,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185foB9y",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1604329330/reactions"
            },
            "updated_at": "2023-06-23T14:01:46Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1604329330",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6610056?v=4",
                "events_url": "https://api.github.com/users/d-e-s-o/events{/privacy}",
                "followers_url": "https://api.github.com/users/d-e-s-o/followers",
                "following_url": "https://api.github.com/users/d-e-s-o/following{/other_user}",
                "gists_url": "https://api.github.com/users/d-e-s-o/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/d-e-s-o",
                "id": 6610056,
                "login": "d-e-s-o",
                "node_id": "MDQ6VXNlcjY2MTAwNTY=",
                "organizations_url": "https://api.github.com/users/d-e-s-o/orgs",
                "received_events_url": "https://api.github.com/users/d-e-s-o/received_events",
                "repos_url": "https://api.github.com/users/d-e-s-o/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/d-e-s-o/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/d-e-s-o/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/d-e-s-o"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Issue template have a guide for how to use minconfig. And i can confrim it works well for many people?   No output mean not found? Again can't reproduce with a min config",
            "created_at": "2023-06-23T14:23:38Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565#issuecomment-1604357824",
            "id": 1604357824,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
            "node_id": "IC_kwDODTQC185foI7A",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1604357824/reactions"
            },
            "updated_at": "2023-06-23T14:23:38Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1604357824",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        }
    ],
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565/comments",
    "commits_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565/commits",
    "created_at": "2023-04-18T11:43:17Z",
    "diff_url": "https://github.com/neovim/nvim-lspconfig/pull/2565.diff",
    "draft": false,
    "head": {
        "label": "glepnir:rust",
        "ref": "rust",
        "repo": {
            "allow_forking": true,
            "archive_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/{archive_format}{/ref}",
            "archived": false,
            "assignees_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/assignees{/user}",
            "blobs_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/git/blobs{/sha}",
            "branches_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/branches{/branch}",
            "clone_url": "https://github.com/glepnir/nvim-lspconfig.git",
            "collaborators_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/collaborators{/collaborator}",
            "comments_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/comments{/number}",
            "commits_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/commits{/sha}",
            "compare_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/compare/{base}...{head}",
            "contents_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/contents/{+path}",
            "contributors_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/contributors",
            "created_at": "2022-09-27T08:27:15Z",
            "default_branch": "master",
            "deployments_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/deployments",
            "description": "Quickstart configs for Nvim LSP",
            "disabled": true,
            "downloads_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/downloads",
            "events_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/events",
            "fork": true,
            "forks": 0,
            "forks_count": 0,
            "forks_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/forks",
            "full_name": "glepnir/nvim-lspconfig",
            "git_commits_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/git/commits{/sha}",
            "git_refs_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/git/refs{/sha}",
            "git_tags_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/git/tags{/sha}",
            "git_url": "git://github.com/glepnir/nvim-lspconfig.git",
            "has_discussions": false,
            "has_downloads": true,
            "has_issues": false,
            "has_pages": false,
            "has_projects": true,
            "has_wiki": true,
            "homepage": "",
            "hooks_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/hooks",
            "html_url": "https://github.com/glepnir/nvim-lspconfig",
            "id": 541980153,
            "is_template": false,
            "issue_comment_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/issues/comments{/number}",
            "issue_events_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/issues/events{/number}",
            "issues_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/issues{/number}",
            "keys_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/keys{/key_id}",
            "labels_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/labels{/name}",
            "language": "Lua",
            "languages_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/languages",
            "license": {
                "key": "apache-2.0",
                "name": "Apache License 2.0",
                "node_id": "MDc6TGljZW5zZTI=",
                "spdx_id": "Apache-2.0",
                "url": "https://api.github.com/licenses/apache-2.0"
            },
            "merges_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/merges",
            "milestones_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/milestones{/number}",
            "mirror_url": null,
            "name": "nvim-lspconfig",
            "node_id": "R_kgDOIE31-Q",
            "notifications_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/notifications{?since,all,participating}",
            "open_issues": 0,
            "open_issues_count": 0,
            "owner": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            },
            "private": false,
            "pulls_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/pulls{/number}",
            "pushed_at": "2023-05-08T12:39:17Z",
            "releases_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/releases{/id}",
            "size": 3213,
            "ssh_url": "git@github.com:glepnir/nvim-lspconfig.git",
            "stargazers_count": 1,
            "stargazers_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/stargazers",
            "statuses_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/statuses/{sha}",
            "subscribers_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/subscribers",
            "subscription_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/subscription",
            "svn_url": "https://github.com/glepnir/nvim-lspconfig",
            "tags_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/tags",
            "teams_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/teams",
            "topics": [],
            "trees_url": "https://api.github.com/repos/glepnir/nvim-lspconfig/git/trees{/sha}",
            "updated_at": "2023-05-08T12:55:23Z",
            "url": "https://api.github.com/repos/glepnir/nvim-lspconfig",
            "visibility": "public",
            "watchers": 1,
            "watchers_count": 1,
            "web_commit_signoff_required": false
        },
        "sha": "e9118d231e9490e8843f9ffcb12ff7debbd95a50",
        "user": {
            "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
            "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
            "followers_url": "https://api.github.com/users/glepnir/followers",
            "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
            "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
            "gravatar_id": "",
            "html_url": "https://github.com/glepnir",
            "id": 41671631,
            "login": "glepnir",
            "node_id": "MDQ6VXNlcjQxNjcxNjMx",
            "organizations_url": "https://api.github.com/users/glepnir/orgs",
            "received_events_url": "https://api.github.com/users/glepnir/received_events",
            "repos_url": "https://api.github.com/users/glepnir/repos",
            "site_admin": false,
            "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
            "type": "User",
            "url": "https://api.github.com/users/glepnir"
        }
    },
    "html_url": "https://github.com/neovim/nvim-lspconfig/pull/2565",
    "id": 1318180088,
    "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2565",
    "labels": [],
    "locked": false,
    "merge_commit_sha": "f01429048950195bcab6c430b430fc44b2d9e05a",
    "merged_at": "2023-05-06T11:35:25Z",
    "milestone": null,
    "node_id": "PR_kwDODTQC185OkdT4",
    "number": 2565,
    "patch_url": "https://github.com/neovim/nvim-lspconfig/pull/2565.patch",
    "requested_reviewers": [],
    "requested_teams": [],
    "review_comment_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/comments{/number}",
    "review_comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565/comments",
    "state": "closed",
    "statuses_url": "https://api.github.com/repos/neovim/nvim-lspconfig/statuses/e9118d231e9490e8843f9ffcb12ff7debbd95a50",
    "title": "feat: wrap root_dir in coroutine.",
    "updated_at": "2023-06-23T14:23:38Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/pulls/2565",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
        "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
        "followers_url": "https://api.github.com/users/glepnir/followers",
        "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
        "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/glepnir",
        "id": 41671631,
        "login": "glepnir",
        "node_id": "MDQ6VXNlcjQxNjcxNjMx",
        "organizations_url": "https://api.github.com/users/glepnir/orgs",
        "received_events_url": "https://api.github.com/users/glepnir/received_events",
        "repos_url": "https://api.github.com/users/glepnir/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/glepnir"
    }
}