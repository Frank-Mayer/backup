{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "- `nvim --version`:\r\nNVIM v0.5.0-dev+ad8114444\r\nBuild type: Release\r\nLuaJIT 2.1.0-beta3\r\n\r\n- nvim-lsp version(commit hash): `5085668d62214992298b56ad9c73905a94526fe2`\r\n- What language server (If the problem is related to a specific language server): `gopls`\r\n- Can you reproduce this behavior on other language server clients (vscode, languageclient-neovim, coc.nvim, etc.):\r\nThe problem exists over different clients, but e.g. vscode have support for specifying buildFlags which solves the issue, meaning that gopls has support for it:\r\n\r\n```\r\n\"gopls\": {\r\n    \"buildFlags\": [\"-tags=integration\"]\r\n}\r\n```\r\n\r\nSo I would like a way to configure gopls for nvim-lsp with this information.\r\n\r\n- Can you reproduce this behaviour on other language servers offered in the nvim-lspconfig repo? (pyls -> pyright): N/A\r\n- Is the problem isolated to a particular language server: Yes\r\n- Operating system/version: MacOS Catalina\r\n\r\n### How to reproduce the problem from neovim startup\r\nUse gopls, open a .go file with [build tags](https://golang.org/pkg/go/build/#hdr-Build_Constraints) at the top, e.g:\r\n`// +build integration`. Then try to use completions or diagnostics in that file.\r\n\r\n### Actual behaviour\r\nCompletions, diagnostics, etc. simply aren't working.\r\n\r\n### Expected behaviour\r\nAs if the file was not tagged with a build constraint.\r\n\r\n### Minimal init.vim or init.lua and code sample\r\n```\r\nlua << EOF\r\nlocal lspconfig = require'lspconfig'\r\nlspconfig.gopls.setup{\r\n  on_attach = require'completion'.on_attach;\r\n}\r\nEOF\r\n```\r\n\r\n### Health check\r\n<details>\r\n<summary>Checkhealth result</summary>\r\nhealth#lspconfig#check\r\n========================================================================\r\n## Checking language server protocol configuration\r\n  - INFO: gopls: configuration checked.\r\n</details>",
    "closed_at": "2021-05-07T15:20:17Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/13316262?v=4",
        "events_url": "https://api.github.com/users/mjlbach/events{/privacy}",
        "followers_url": "https://api.github.com/users/mjlbach/followers",
        "following_url": "https://api.github.com/users/mjlbach/following{/other_user}",
        "gists_url": "https://api.github.com/users/mjlbach/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/mjlbach",
        "id": 13316262,
        "login": "mjlbach",
        "node_id": "MDQ6VXNlcjEzMzE2MjYy",
        "organizations_url": "https://api.github.com/users/mjlbach/orgs",
        "received_events_url": "https://api.github.com/users/mjlbach/received_events",
        "repos_url": "https://api.github.com/users/mjlbach/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/mjlbach/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mjlbach/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/mjlbach",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "This is a usage question, which belongs on our [discourse](https://neovim.discourse.group/). You're able to specify everything you would on vscode in our client, through the`settings` and `init_options` keys. I'm guessing what you're looking for is \r\n```lua\r\nlua << EOF\r\nlocal lspconfig = require'lspconfig'\r\nlspconfig.gopls.setup{\r\n  on_attach = require'completion'.on_attach;\r\n  settings = { gopls =  {\r\n    buildFlags =  {\"-tags=integration\"}\r\n  }\r\n}\r\nEOF\r\n```",
            "created_at": "2021-05-07T15:20:17Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/888#issuecomment-834515521",
            "id": 834515521,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/888",
            "node_id": "MDEyOklzc3VlQ29tbWVudDgzNDUxNTUyMQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 13,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 13,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/834515521/reactions"
            },
            "updated_at": "2021-05-07T15:20:17Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/834515521",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13316262?v=4",
                "events_url": "https://api.github.com/users/mjlbach/events{/privacy}",
                "followers_url": "https://api.github.com/users/mjlbach/followers",
                "following_url": "https://api.github.com/users/mjlbach/following{/other_user}",
                "gists_url": "https://api.github.com/users/mjlbach/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mjlbach",
                "id": 13316262,
                "login": "mjlbach",
                "node_id": "MDQ6VXNlcjEzMzE2MjYy",
                "organizations_url": "https://api.github.com/users/mjlbach/orgs",
                "received_events_url": "https://api.github.com/users/mjlbach/received_events",
                "repos_url": "https://api.github.com/users/mjlbach/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mjlbach/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mjlbach/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mjlbach",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Thank you. I will look into the discourse.\r\nWhen applying the build flags in your example I still got an error, since it looks like that makes `go version` also use the tags flag (I don't know if this is intended) which renders this error on opening up a file:\r\n\r\n```\r\nflag provided but not defined: -tags\r\nusage: go version [-m] [-v] [file ...]\r\nRun 'go help version' for details.\r\n```\r\n\r\nI did manage to solve the issue though, so for anyone experiencing the same issue:\r\nI created a table to set the `GOFLAGS` environment variable using the [gopls.env](https://github.com/golang/tools/blob/dd255f23517e12f99e036a76f0b414cbadfe50cd/gopls/doc/settings.md#env-mapstringstring) setting:\r\n\r\n```\r\nlua << EOF\r\nlocal lspconfig = require'lspconfig'\r\nlspconfig.gopls.setup{\r\n  on_attach = require'completion'.on_attach;\r\n  settings = {\r\n    gopls =  {\r\n      env = {GOFLAGS=\"-tags=integration\"}\r\n    }\r\n  }\r\n}\r\nEOF\r\n```",
            "created_at": "2021-05-08T13:16:46Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/888#issuecomment-835359849",
            "id": 835359849,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/888",
            "node_id": "MDEyOklzc3VlQ29tbWVudDgzNTM1OTg0OQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/835359849/reactions"
            },
            "updated_at": "2021-05-08T13:32:18Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/835359849",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/42545850?v=4",
                "events_url": "https://api.github.com/users/sieuwerts/events{/privacy}",
                "followers_url": "https://api.github.com/users/sieuwerts/followers",
                "following_url": "https://api.github.com/users/sieuwerts/following{/other_user}",
                "gists_url": "https://api.github.com/users/sieuwerts/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/sieuwerts",
                "id": 42545850,
                "login": "sieuwerts",
                "node_id": "MDQ6VXNlcjQyNTQ1ODUw",
                "organizations_url": "https://api.github.com/users/sieuwerts/orgs",
                "received_events_url": "https://api.github.com/users/sieuwerts/received_events",
                "repos_url": "https://api.github.com/users/sieuwerts/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/sieuwerts/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/sieuwerts/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/sieuwerts",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "~~I'm getting error when  using multiple tags:~~\r\n\r\n```\r\nerr: exit status 1: stderr: go: parsing $GOFLAGS: non-flag \"dev\"\r\n```\r\n\r\n~~I've tried using `GOFLAGS` env variable and the `buildFlags` option with no luck.~~\r\n\r\nScratch that. It works now when I use:\r\n\r\n```\r\nlspconfig.gopls.setup{\r\n  on_attach = require'completion'.on_attach;\r\n  settings = { gopls =  {\r\n    buildFlags =  {\"-tags=tag1 tag2\"}\r\n  }\r\n}\r\n```",
            "created_at": "2023-03-22T06:56:22Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/888#issuecomment-1479009785",
            "id": 1479009785,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/888",
            "node_id": "IC_kwDODTQC185YJ-X5",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1479009785/reactions"
            },
            "updated_at": "2023-03-22T07:29:39Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1479009785",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3839684?v=4",
                "events_url": "https://api.github.com/users/adonespitogo/events{/privacy}",
                "followers_url": "https://api.github.com/users/adonespitogo/followers",
                "following_url": "https://api.github.com/users/adonespitogo/following{/other_user}",
                "gists_url": "https://api.github.com/users/adonespitogo/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/adonespitogo",
                "id": 3839684,
                "login": "adonespitogo",
                "node_id": "MDQ6VXNlcjM4Mzk2ODQ=",
                "organizations_url": "https://api.github.com/users/adonespitogo/orgs",
                "received_events_url": "https://api.github.com/users/adonespitogo/received_events",
                "repos_url": "https://api.github.com/users/adonespitogo/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/adonespitogo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/adonespitogo/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/adonespitogo",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "For those who use LazyVim\r\n\r\n```lua\r\nreturn {\r\n  \"nvim/nvim-lspconfig\",\r\n  opts = {\r\n    servers = {\r\n      gopls = {\r\n        settings = {\r\n          gopls = {\r\n            buildFlags = { \"-tags=integration\" },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  },\r\n}\r\n```",
            "created_at": "2024-09-14T04:34:40Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/888#issuecomment-2350830298",
            "id": 2350830298,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/888",
            "node_id": "IC_kwDODTQC186MHtLa",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 4,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 4,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2350830298/reactions"
            },
            "updated_at": "2024-09-14T04:34:40Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2350830298",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/10969338?v=4",
                "events_url": "https://api.github.com/users/tscales/events{/privacy}",
                "followers_url": "https://api.github.com/users/tscales/followers",
                "following_url": "https://api.github.com/users/tscales/following{/other_user}",
                "gists_url": "https://api.github.com/users/tscales/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/tscales",
                "id": 10969338,
                "login": "tscales",
                "node_id": "MDQ6VXNlcjEwOTY5MzM4",
                "organizations_url": "https://api.github.com/users/tscales/orgs",
                "received_events_url": "https://api.github.com/users/tscales/received_events",
                "repos_url": "https://api.github.com/users/tscales/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/tscales/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/tscales/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/tscales",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "Should I open PR to add this to configs.md and configs.txt?",
            "created_at": "2024-12-06T13:59:15Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/888#issuecomment-2523313148",
            "id": 2523313148,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/888",
            "node_id": "IC_kwDODTQC186WZrP8",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2523313148/reactions"
            },
            "updated_at": "2024-12-06T13:59:15Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2523313148",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/42579207?v=4",
                "events_url": "https://api.github.com/users/cl1ckname/events{/privacy}",
                "followers_url": "https://api.github.com/users/cl1ckname/followers",
                "following_url": "https://api.github.com/users/cl1ckname/following{/other_user}",
                "gists_url": "https://api.github.com/users/cl1ckname/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/cl1ckname",
                "id": 42579207,
                "login": "cl1ckname",
                "node_id": "MDQ6VXNlcjQyNTc5MjA3",
                "organizations_url": "https://api.github.com/users/cl1ckname/orgs",
                "received_events_url": "https://api.github.com/users/cl1ckname/received_events",
                "repos_url": "https://api.github.com/users/cl1ckname/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/cl1ckname/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/cl1ckname/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/cl1ckname",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 5,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/888/comments",
    "created_at": "2021-05-07T07:43:00Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/888/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/888",
    "id": 878565045,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "Something isn't working",
            "id": 1674892761,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxNjc0ODkyNzYx",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/888/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU4Nzg1NjUwNDU=",
    "number": 888,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/888/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/888/timeline",
    "title": "Unable to specify buildFlags to support golang build tags / build constraints for gopls",
    "updated_at": "2024-12-06T13:59:17Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/888",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/42545850?v=4",
        "events_url": "https://api.github.com/users/sieuwerts/events{/privacy}",
        "followers_url": "https://api.github.com/users/sieuwerts/followers",
        "following_url": "https://api.github.com/users/sieuwerts/following{/other_user}",
        "gists_url": "https://api.github.com/users/sieuwerts/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/sieuwerts",
        "id": 42545850,
        "login": "sieuwerts",
        "node_id": "MDQ6VXNlcjQyNTQ1ODUw",
        "organizations_url": "https://api.github.com/users/sieuwerts/orgs",
        "received_events_url": "https://api.github.com/users/sieuwerts/received_events",
        "repos_url": "https://api.github.com/users/sieuwerts/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/sieuwerts/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/sieuwerts/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/sieuwerts",
        "user_view_type": "public"
    }
}