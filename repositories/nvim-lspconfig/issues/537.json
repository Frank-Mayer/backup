{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "- `nvim --version`:NVIM v0.5.0-dev+1001-g7a81a0c07\r\n- nvim-lsp version(commit hash):44105d2bc4093dad092edb9c0f25cc6ea9d5feb6\r\n- `:checkhealth`:\r\n```\r\nhealth#lspconfig#check\r\n========================================================================\r\n## Checking language server protocol configuration\r\n  - ERROR: angularls: The given command \"angularls\" is not executable.\r\n  - INFO: yamlls: configuration checked.\r\n  - INFO: bashls: configuration checked.\r\n  - INFO: terraformls: configuration checked.\r\n  - INFO: jsonls: configuration checked.\r\n  - INFO: html: configuration checked.\r\n  - INFO: gopls: configuration checked.\r\n  - INFO: clangd: configuration checked.\r\n  - INFO: rust_analyzer: configuration checked.\r\n  - INFO: tsserver: configuration checked.\r\n  - INFO: vimls: configuration checked.\r\n  - INFO: dockerls: configuration checked.\r\n\r\n\r\n```\r\n\r\n- What language server(If the problem is related to a specific language server): angularls\r\n\r\n- Is this problem isolated to this particular language server: yes\r\n- Operating system/version: Arch Linux\r\n- Terminal name/version: alacritty 0.7.0-dev (43ea180d)\r\n- `$TERM`:alacritty\r\n\r\n### How to reproduce the problem\r\nInstall angular language server using \"npm install @angular/language-server\"\r\nVerify that the command planned for the config actually runs:\r\n![image](https://user-images.githubusercontent.com/7985687/103578962-7ab22e00-4ea5-11eb-91c3-30f7a62060dd.png)\r\n\r\nProvide the following config for angularls:\r\n``` lua\r\nlocal configPath = vim.fn.stdpath(\"config\")\r\nlocal languageServerPath = configPath..\"/languageserver\"\r\n\r\nlocal on_attach_common = function(client)\r\n    print(\"lsp started\")\r\n    print(languageServerPath)\r\n    require'completion'.on_attach(client)\r\n    require'illuminate'.on_attach(client)\r\n    map_keys()\r\nend\r\n\r\n\r\nrequire'lspconfig'.angularls.setup{\r\n  on_attach = on_attach_common,\r\n  cmd = {\"node\", languageServerPath..\"/node_modules/@angular/language-server/index.js\", \"--stdio\", \"--tsProbeLocations\", languageServerPath, \"--ngProbeLocations\", languageServerPath}\r\n  --cmd = {\"node\", languageServerPath..\"/node_modules/@angular/language-server/index.js\", \"--stdio\", \"\\\\$*\", \"--tsProbeLocations\", languageServerPath, \"--ngProbeLocations\", languageServerPath}\r\n  --cmd = {\"zsh -c 'node /home/jemag/.config/nvim/languageserver/node_modules/@angular/language-server/index.js --stdio --tsProbeLocations /home/jemag/.config/nvim/languageserver --ngProbeLocations /home/jemag/.config/nvim/languageserver'\"}\r\n  --cmd = {\"zsh\", \"-c\", \"node /home/jemag/.config/nvim/languageserver/node_modules/@angular/language-server/index.js --stdio --tsProbeLocations /home/jemag/.config/nvim/languageserver --ngProbeLocations /home/jemag/.config/nvim/languageserver\"}\r\n  --cmd = { \"bash\", \"angularls\", \"--stdio\" }\r\n}\r\n```\r\n\r\nLaunch angular project with vim and notice error:\r\n```\r\nError detected while processing FileType Autocommands for \"typescript\":\r\nE5108: Error executing lua ...ence/neovim/build/share/nvim/runtime/lua/vim/lsp/rpc.lua:319: The given command \"angularls\" is not exec\r\nutable.\r\nError detected while processing FileType Autocommands for \"typescript\":\r\nE5108: Error executing lua ...ence/neovim/build/share/nvim/runtime/lua/vim/lsp/rpc.lua:319: The given command \"angularls\" is not exec\r\nutable.\r\nlsp started\r\n/home/jemag/.config/nvim/languageserver\r\n```\r\n\r\nCheck lsp logs:\r\n```\r\n\r\n[ INFO ] 2021-01-04T15:57:36-0500 ] ...ence/neovim/build/share/nvim/runtime/lua/vim/lsp/rpc.lua:311 ]\t\"Starting RPC client\"\t{  args = { \"--stdio\" },  cmd = \"/home/jemag/.config/nvim/languageserver/node_modules/typescript-language-server/lib/cli.js\",  extra = {}}\r\n[ DEBUG ] 2021-01-04T15:57:36-0500 ] ...eference/neovim/build/share/nvim/runtime/lua/vim/lsp.lua:627 ]\t\"LSP[tsserver]\"\t\"initialize_params\"\t{  capabilities = {    callHierarchy = {      dynamicRegistration = false,      <metatable> = <1>{        __tostring = <function 1>      }    },    textDocument = {      codeAction = {        codeActionLiteralSupport = {          codeActionKind = {            valueSet = { \"\", \"Empty\", \"QuickFix\", \"Refactor\", \"RefactorExtract\", \"RefactorInline\", \"RefactorRewrite\", \"Source\", \"SourceOrganizeImports\", \"quickfix\", \"refactor\", \"refactor.extract\", \"refactor.inline\", \"refactor.rewrite\", \"source\", \"source.organizeImports\" },            <metatable> = <table 1>          },          <metatable> = <table 1>        },        dynamicRegistration = false,        <metatable> = <table 1>      },      completion = {        completionItem = {          commitCharactersSupport = false,          deprecatedSupport = false,          documentationFormat = { \"markdown\", \"plaintext\" },          preselectSupport = false,          snippetSupport = false,          <metatable> = <table 1>        },        completionItemKind = {          valueSet = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25 },          <metatable> = <table 1>        },        contextSupport = false,        dynamicRegistration = false,        <metatable> = <table 1>      },      declaration = {        linkSupport = true,        <metatable> = <table 1>      },      definition = {        linkSupport = true,        <metatable> = <table 1>      },      documentHighlight = {        dynamicRegistration = false,        <metatable> = <table 1>      },      documentSymbol = {        dynamicRegistration = false,        hierarchicalDocumentSymbolSupport = true,        symbolKind = {          valueSet = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26 },          <metatable> = <table 1>        },        <metatable> = <table 1>      },      hover = {        contentFormat = { \"markdown\", \"plaintext\" },        dynamicRegistration = false,        <metatable> = <table 1>      },      implementation = {        linkSupport = true,        <metatable> = <table 1>      },      references = {        dynamicRegistration = false,        <metatable> = <table 1>      },      rename = {        dynamicRegistration = false,        prepareSupport = true,        <metatable> = <table 1>      },      signatureHelp = {        dynamicRegistration = false,        signatureInformation = {          documentationFormat = { \"markdown\", \"plaintext\" },          <metatable> = <table 1>        },        <metatable> = <table 1>      },      synchronization = {        didSave = true,        dynamicRegistration = false,        willSave = false,        willSaveWaitUntil = false,        <metatable> = <table 1>      },      typeDefinition = {        linkSupport = true,        <metatable> = <table 1>      },      <metatable> = <table 1>    },    window = {      showDocument = {        support = false,        <metatable> = <table 1>      },      showMessage = {        messageActionItem = {          additionalPropertiesSupport = false,          <metatable> = <table 1>        },        <metatable> = <table 1>      },      workDoneProgress = true,      <metatable> = <table 1>    },    workspace = {      applyEdit = true,      configuration = true,      symbol = {        dynamicRegistration = false,        hierarchicalWorkspaceSymbolSupport = true,        symbolKind = {          valueSet = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26 },          <metatable> = <table 1>        },        <metatable> = <table 1>      },      workspaceFolders = true,      <metatable> = <table 1>    }  },  initializationOptions = vim.empty_dict(),  processId = 768237,  rootPath = \"/home/jemag/Projects/Neptune\",  rootUri = \"file:///home/jemag/Projects/Neptune\",  trace = \"off\",  workspaceFolders = { {      name = \"/home/jemag/Projects/Neptune\",      uri = \"file:///home/jemag/Projects/Neptune\"    } }}\r\n[ DEBUG ] 2021-01-04T15:57:36-0500 ] ...ence/neovim/build/share/nvim/runtime/lua/vim/lsp/rpc.lua:388 ]\t\"rpc.send.payload\"\t{  id = 1,  jsonrpc = \"2.0\",  method = \"initialize\",  params = {    capabilities = {      callHierarchy = {        dynamicRegistration = false,        <metatable> = <1>{          __tostring = <function 1>        }      },      textDocument = {        codeAction = {          codeActionLiteralSupport = {            codeActionKind = {              valueSet = { \"\", \"Empty\", \"QuickFix\", \"Refactor\", \"RefactorExtract\", \"RefactorInline\", \"RefactorRewrite\", \"Source\", \"SourceOrganizeImports\", \"quickfix\", \"refactor\", \"refactor.extract\", \"refactor.inline\", \"refactor.rewrite\", \"source\", \"source.organizeImports\" },              <metatable> = <table 1>            },            <metatable> = <table 1>          },          dynamicRegistration = false,          <metatable> = <table 1>        },        completion = {          completionItem = {            commitCharactersSupport = false,            deprecatedSupport = false,            documentationFormat = { \"markdown\", \"plaintext\" },            preselectSupport = false,            snippetSupport = false,            <metatable> = <table 1>          },          completionItemKind = {            valueSet = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25 },            <metatable> = <table 1>          },          contextSupport = false,          dynamicRegistration = false,          <metatable> = <table 1>        },        declaration = {          linkSupport = true,          <metatable> = <table 1>        },        definition = {          linkSupport = true,          <metatable> = <table 1>        },        documentHighlight = {          dynamicRegistration = false,          <metatable> = <table 1>        },        documentSymbol = {          dynamicRegistration = false,          hierarchicalDocumentSymbolSupport = true,          symbolKind = {            valueSet = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26 },            <metatable> = <table 1>          },          <metatable> = <table 1>        },        hover = {          contentFormat = { \"markdown\", \"plaintext\" },          dynamicRegistration = false,          <metatable> = <table 1>        },        implementation = {          linkSupport = true,          <metatable> = <table 1>        },        references = {          dynamicRegistration = false,          <metatable> = <table 1>        },        rename = {          dynamicRegistration = false,          prepareSupport = true,          <metatable> = <table 1>        },        signatureHelp = {          dynamicRegistration = false,          signatureInformation = {            documentationFormat = { \"markdown\", \"plaintext\" },            <metatable> = <table 1>          },          <metatable> = <table 1>        },        synchronization = {          didSave = true,          dynamicRegistration = false,          willSave = false,          willSaveWaitUntil = false,          <metatable> = <table 1>        },        typeDefinition = {          linkSupport = true,          <metatable> = <table 1>        },        <metatable> = <table 1>      },      window = {        showDocument = {          support = false,          <metatable> = <table 1>        },        showMessage = {          messageActionItem = {            additionalPropertiesSupport = false,            <metatable> = <table 1>          },          <metatable> = <table 1>        },        workDoneProgress = true,        <metatable> = <table 1>      },      workspace = {        applyEdit = true,        configuration = true,        symbol = {          dynamicRegistration = false,          hierarchicalWorkspaceSymbolSupport = true,          symbolKind = {            valueSet = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26 },            <metatable> = <table 1>          },          <metatable> = <table 1>        },        workspaceFolders = true,        <metatable> = <table 1>      }    },    initializationOptions = vim.empty_dict(),    processId = 768237,    rootPath = \"/home/jemag/Projects/Neptune\",    rootUri = \"file:///home/jemag/Projects/Neptune\",    trace = \"off\",    workspaceFolders = { {        name = \"/home/jemag/Projects/Neptune\",        uri = \"file:///home/jemag/Projects/Neptune\"      } }  }}\r\n[ INFO ] 2021-01-04T15:57:36-0500 ] ...ence/neovim/build/share/nvim/runtime/lua/vim/lsp/rpc.lua:311 ]\t\"Starting RPC client\"\t{  args = { \"--stdio\", \"--tsProbeLocations\", \"/home/jemag/Projects/Neptune/node_modules\", \"--ngProbeLocations\", \"/home/jemag/Projects/Neptune/node_modules\" },  cmd = \"angularls\",  extra = {}}\r\n[ DEBUG ] 2021-01-04T15:57:37-0500 ] ...ence/neovim/build/share/nvim/runtime/lua/vim/lsp/rpc.lua:489 ]\t\"decoded\"\t{  id = 1,  jsonrpc = \"2.0\",  result = {    capabilities = {      callsProvider = true,      codeActionProvider = true,      completionProvider = {        resolveProvider = true,        triggerCharacters = { \".\", '\"', \"'\", \"/\", \"@\", \"<\" }      },      definitionProvider = true,      documentFormattingProvider = true,      documentHighlightProvider = true,      documentSymbolProvider = true,      executeCommandProvider = {        commands = { \"_typescript.applyWorkspaceEdit\", \"_typescript.applyCodeAction\", \"_typescript.applyRefactoring\", \"_typescript.organizeImports\", \"_typescript.applyRenameFile\" }      },      foldingRangeProvider = true,      hoverProvider = true,      implementationProvider = true,      referencesProvider = true,      renameProvider = true,      signatureHelpProvider = {        triggerCharacters = { \"(\", \",\", \"<\" }      },      textDocumentSync = 2,      typeDefinitionProvider = true,      workspaceSymbolProvider = true    }  }}\r\n[ DEBUG ] 2021-01-04T15:57:37-0500 ] ...ence/neovim/build/share/nvim/runtime/lua/vim/lsp/rpc.lua:388 ]\t\"rpc.send.payload\"\t{  jsonrpc = \"2.0\",  method = \"initialized\",  params = {    [true] = 6  }}\r\n[ DEBUG ] 2021-01-04T15:57:37-0500 ] ...eference/neovim/build/share/nvim/runtime/lua/vim/lsp.lua:654 ]\t\"LSP[tsserver]\"\t\"server_capabilities\"\t{  callsProvider = true,  codeActionProvider = true,  completionProvider = {    resolveProvider = true,    triggerCharacters = { \".\", '\"', \"'\", \"/\", \"@\", \"<\" }  },  definitionProvider = true,  documentFormattingProvider = true,  documentHighlightProvider = true,  documentSymbolProvider = true,  executeCommandProvider = {    commands = { \"_typescript.applyWorkspaceEdit\", \"_typescript.applyCodeAction\", \"_typescript.applyRefactoring\", \"_typescript.organizeImports\", \"_typescript.applyRenameFile\" }  },  foldingRangeProvider = true,  hoverProvider = true,  implementationProvider = true,  referencesProvider = true,  renameProvider = true,  signatureHelpProvider = {    triggerCharacters = { \"(\", \",\", \"<\" }  },  textDocumentSync = 2,  typeDefinitionProvider = true,  workspaceSymbolProvider = true}\r\n[ INFO ] 2021-01-04T15:57:37-0500 ] ...eference/neovim/build/share/nvim/runtime/lua/vim/lsp.lua:655 ]\t\"LSP[tsserver]\"\t\"initialized\"\t{  resolved_capabilities = {    call_hierarchy = false,    code_action = true,    completion = true,    declaration = false,    document_formatting = true,    document_highlight = true,    document_range_formatting = false,    document_symbol = true,    execute_command = true,    find_references = true,    goto_definition = true,    hover = true,    implementation = true,    rename = true,    signature_help = true,    signature_help_trigger_characters = { \"(\", \",\", \"<\" },    text_document_did_change = 2,    text_document_open_close = true,    text_document_save = false,    text_document_save_include_text = false,    text_document_will_save = false,    text_document_will_save_wait_until = false,    type_definition = true,    workspace_folder_properties = {      changeNotifications = false,      supported = false    },    workspace_symbol = true  }}\r\n[ DEBUG ] 2021-01-04T15:57:37-0500 ] ...ence/neovim/build/share/nvim/runtime/lua/vim/lsp/rpc.lua:388 ]\t\"rpc.send.payload\"\t{  jsonrpc = \"2.0\",  method = \"textDocument/didOpen\",  params = {    textDocument = {      languageId = \"typescript\",      text = \"import {Component, Input, OnInit, ViewChild} from '@angular/core';\\nimport {MatSelectionList, MatSelectionListChange} from '@angular/material/list';\\nimport * as atlas from 'azure-maps-control';\\nimport SymbolLayer = atlas.layer.SymbolLayer;\\nimport {CdkDragDrop, moveItemInArray} from '@angular/cdk/drag-drop';\\n\\n\\n@Component({\\n  selector: 'app-map-legend',\\n  templateUrl: './map-legend.component.html',\\n  styleUrls: ['./map-legend.component.css']\\n})\\nexport class MapLegendComponent implements OnInit {\\n\\n  @ViewChild('layerList', {static: true}) layerList: MatSelectionList;\\n\\n  @Input() map: atlas.Map;\\n  symbolLayers: SymbolLayer[];\\n\\n  constructor() { }\\n\\n  ngOnInit(): void {\\n      this.symbolLayers = this.map.layers.getLayers().filter(l => l instanceof SymbolLayer) as SymbolLayer[];\\n  }\\n\\n  onSelectionChanged(event: MatSelectionListChange): void {\\n\\n     const layer = this.map.layers.getLayerById(event.options[0].value) as atlas.layer.SymbolLayer;\\n\\n     layer.setOptions({visible: event.options[0].selected});\\n  }\\n\\n  onLayerDrop(event: CdkDragDrop<string[]>): void {\\n\\n    const layer = this.map.layers.getLayerById('stations') as atlas.layer.SymbolLayer;\\n\\n    this.map.layers.move(layer);\\n  }\\n\\n}\\n\",      uri = \"file:///home/jemag/Projects/Neptune/src/app/stations/components/map-legend/map-legend.component.ts\",      version = 0    }  }}\r\n[ DEBUG ] 2021-01-04T15:57:37-0500 ] ...eference/neovim/build/share/nvim/runtime/lua/vim/lsp.lua:692 ]\t\"LSP[tsserver]\"\t\"client.request\"\t1\t\"textDocument/documentHighlight\"\t{  position = {    character = 0,    line = 0  },  textDocument = {    uri = \"file:///home/jemag/Projects/Neptune/src/app/stations/components/map-legend/map-legend.component.ts\"  }}\t<function 1>\t1\r\n[ DEBUG ] 2021-01-04T15:57:37-0500 ] ...ence/neovim/build/share/nvim/runtime/lua/vim/lsp/rpc.lua:388 ]\t\"rpc.send.payload\"\t{  id = 2,  jsonrpc = \"2.0\",  method = \"textDocument/documentHighlight\",  params = {    position = {      character = 0,      line = 0    },    textDocument = {      uri = \"file:///home/jemag/Projects/Neptune/src/app/stations/components/map-legend/map-legend.component.ts\"    }  }}\r\n\r\n```\r\n\r\nThe logs seems to say that the old angularls command is still being executed and not replaced by my command. Is it automatically defaulting to this command because mine doesn't work or is it not being properly replaced by my command?\r\n\r\n### Actual behaviour\r\nangular ls not working\r\n### Expected behaviour\r\nangularls working\r\n### LSP log\r\n(see ab0ve)\r\n\r\n### Other information\r\n\r\nI had angularls working previously with LspInstall. Now that it is deprecated, I have spent quite a while trying to make it work.\r\n\r\nAll my other lsp configs work properly (vimls, dockerls, tsserver, jsonls, gopls, etc.).\r\n\r\nAccording to the logs, the default command seems to be used instead of the one I provided, which is weird since I provide custom commands for a lot of other configs. Also the tsserver cmd above seems to be properly replaced",
    "closed_at": "2021-01-05T23:02:14Z",
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "You need to also override this, because it updates the cmd.\r\n\r\nhttps://github.com/mjlbach/nvim-lspconfig/blob/b1c254572481a1751170e42a652e703240eca9b4/lua/lspconfig/angularls.lua#L31-L41",
            "created_at": "2021-01-04T21:17:15Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/537#issuecomment-754224355",
            "id": 754224355,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/537",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDIyNDM1NQ==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/754224355/reactions"
            },
            "updated_at": "2021-01-04T21:17:15Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/754224355",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13316262?v=4",
                "events_url": "https://api.github.com/users/mjlbach/events{/privacy}",
                "followers_url": "https://api.github.com/users/mjlbach/followers",
                "following_url": "https://api.github.com/users/mjlbach/following{/other_user}",
                "gists_url": "https://api.github.com/users/mjlbach/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mjlbach",
                "id": 13316262,
                "login": "mjlbach",
                "node_id": "MDQ6VXNlcjEzMzE2MjYy",
                "organizations_url": "https://api.github.com/users/mjlbach/orgs",
                "received_events_url": "https://api.github.com/users/mjlbach/received_events",
                "repos_url": "https://api.github.com/users/mjlbach/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mjlbach/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mjlbach/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mjlbach"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Let me know if the documentation change in https://github.com/neovim/nvim-lspconfig/pull/540 will cover your issue.",
            "created_at": "2021-01-04T22:23:49Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/537#issuecomment-754259652",
            "id": 754259652,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/537",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDI1OTY1Mg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/754259652/reactions"
            },
            "updated_at": "2021-01-04T22:23:49Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/754259652",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13316262?v=4",
                "events_url": "https://api.github.com/users/mjlbach/events{/privacy}",
                "followers_url": "https://api.github.com/users/mjlbach/followers",
                "following_url": "https://api.github.com/users/mjlbach/following{/other_user}",
                "gists_url": "https://api.github.com/users/mjlbach/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mjlbach",
                "id": 13316262,
                "login": "mjlbach",
                "node_id": "MDQ6VXNlcjEzMzE2MjYy",
                "organizations_url": "https://api.github.com/users/mjlbach/orgs",
                "received_events_url": "https://api.github.com/users/mjlbach/received_events",
                "repos_url": "https://api.github.com/users/mjlbach/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mjlbach/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mjlbach/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mjlbach"
            }
        },
        {
            "author_association": "NONE",
            "body": "Thank you for the help! That does seem to work with:\r\n``` lua\r\nrequire'lspconfig'.angularls.setup{\r\n  on_attach = on_attach_common,\r\n  cmd = {\"node\", languageServerPath..\"/node_modules/@angular/language-server/index.js\", \"--stdio\", \"--tsProbeLocations\", languageServerPath, \"--ngProbeLocations\", languageServerPath},\r\n  on_new_config = function(new_config,new_root_dir)\r\n  new_config.cmd ={\"node\", languageServerPath..\"/node_modules/@angular/language-server/index.js\", \"--stdio\", \"--tsProbeLocations\", languageServerPath, \"--ngProbeLocations\", languageServerPath}\r\n  end,\r\n}\r\n```\r\n\r\nAlthough I am pretty bad at lua and don't quite understand why this:\r\n``` lua\r\nrequire'lspconfig'.angularls.setup{\r\n  on_attach = on_attach_common,\r\n  cmd = {\"node\", languageServerPath..\"/node_modules/@angular/language-server/index.js\", \"--stdio\", \"--tsProbeLocations\", languageServerPath, \"--ngProbeLocations\", languageServerPath},\r\n  on_new_config = function(_,_)\r\n  print(\"doing nothing here\")\r\n  end,\r\n}\r\n```\r\nwould not also work. Since I thought it would override the on_new_config also and just do nothing to change the provided command.",
            "created_at": "2021-01-04T23:08:29Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/537#issuecomment-754276800",
            "id": 754276800,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/537",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDI3NjgwMA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/754276800/reactions"
            },
            "updated_at": "2021-01-04T23:08:29Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/754276800",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/7985687?v=4",
                "events_url": "https://api.github.com/users/jemag/events{/privacy}",
                "followers_url": "https://api.github.com/users/jemag/followers",
                "following_url": "https://api.github.com/users/jemag/following{/other_user}",
                "gists_url": "https://api.github.com/users/jemag/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jemag",
                "id": 7985687,
                "login": "jemag",
                "node_id": "MDQ6VXNlcjc5ODU2ODc=",
                "organizations_url": "https://api.github.com/users/jemag/orgs",
                "received_events_url": "https://api.github.com/users/jemag/received_events",
                "repos_url": "https://api.github.com/users/jemag/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jemag/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jemag/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jemag"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I updated the PR to make it more explicit. `on_new_config` is what handles updating the command you pass in `setup` over the default `cmd` defined in angularls. For most servers (which don't use a custom `on_new_config`, the `cmd` is the same before and after the call to `on_new_config`. For servers that define a custom `on_new_config` that modifies `cmd`, you have to update `on_new_config` if you modify `cmd`. \r\n\r\nThis works and is cleaner in your case\r\n\r\n```lua\r\n\r\nlocal languageServerPath = \"/Users/michael/.npm-packages/lib\"\r\nlocal cmd = {\"node\", languageServerPath..\"/node_modules/@angular/language-server/index.js\", \"--stdio\", \"--tsProbeLocations\", languageServerPath, \"--ngProbeLocations\", languageServerPath}\r\n\r\nrequire'lspconfig'.angularls.setup{\r\n  cmd = cmd,\r\n  on_new_config = function(new_config,new_root_dir)\r\n    new_config.cmd = cmd\r\n  end,\r\n}\r\n```\r\n\r\nBottom line, if you change both`cmd` and  `on_new_config`, make sure at the end of `on_new_config` you set `new_config.cmd = cmd`",
            "created_at": "2021-01-05T23:07:17Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/537#issuecomment-754955762",
            "id": 754955762,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/537",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDk1NTc2Mg==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 4,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 4,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/754955762/reactions"
            },
            "updated_at": "2021-01-05T23:07:57Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/754955762",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13316262?v=4",
                "events_url": "https://api.github.com/users/mjlbach/events{/privacy}",
                "followers_url": "https://api.github.com/users/mjlbach/followers",
                "following_url": "https://api.github.com/users/mjlbach/following{/other_user}",
                "gists_url": "https://api.github.com/users/mjlbach/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mjlbach",
                "id": 13316262,
                "login": "mjlbach",
                "node_id": "MDQ6VXNlcjEzMzE2MjYy",
                "organizations_url": "https://api.github.com/users/mjlbach/orgs",
                "received_events_url": "https://api.github.com/users/mjlbach/received_events",
                "repos_url": "https://api.github.com/users/mjlbach/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mjlbach/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mjlbach/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mjlbach"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Also see: https://github.com/neovim/nvim-lspconfig/pull/544",
            "created_at": "2021-01-05T23:13:40Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/537#issuecomment-754957950",
            "id": 754957950,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/537",
            "node_id": "MDEyOklzc3VlQ29tbWVudDc1NDk1Nzk1MA==",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/754957950/reactions"
            },
            "updated_at": "2021-01-05T23:13:40Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/754957950",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13316262?v=4",
                "events_url": "https://api.github.com/users/mjlbach/events{/privacy}",
                "followers_url": "https://api.github.com/users/mjlbach/followers",
                "following_url": "https://api.github.com/users/mjlbach/following{/other_user}",
                "gists_url": "https://api.github.com/users/mjlbach/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mjlbach",
                "id": 13316262,
                "login": "mjlbach",
                "node_id": "MDQ6VXNlcjEzMzE2MjYy",
                "organizations_url": "https://api.github.com/users/mjlbach/orgs",
                "received_events_url": "https://api.github.com/users/mjlbach/received_events",
                "repos_url": "https://api.github.com/users/mjlbach/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mjlbach/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mjlbach/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mjlbach"
            }
        },
        {
            "author_association": "NONE",
            "body": "Hi @mjlbach I fallowed your instruction on setting up angularls and I see my cmd is executable, but when I open Angular component I'm getting error: `Client 2 quit with exit code 1 and signal 0`.\r\n\r\nI'm using config:\r\n```lua\r\n local languageServerPath = \"/home/space11/.nvm/versions/node/v16.20.0/lib\"\r\n  local cmd = {\r\n    \"node\",\r\n    languageServerPath .. \"/node_modules/@angular/language-server/index.js\",\r\n    \"--stdio\",\r\n    \"--tsProbeLocations\",\r\n    languageServerPath,\r\n    \"--ngProbeLocations\",\r\n    languageServerPath,\r\n  }\r\n\r\n  require(\"lspconfig\").angularls.setup {\r\n    cmd = cmd,\r\n    on_new_config = function(new_config, new_root_dir)\r\n      new_config.cmd = cmd\r\n    end,\r\n  }\r\n```\r\n\r\nAlternative configuration also doesn't work\r\n```lua\r\n  local project_library_path = vim.fn.getcwd()\r\n\r\n  local cmd = {\r\n    \"ngserver\",\r\n    \"--stdio\",\r\n    \"--tsProbeLocations\",\r\n    project_library_path,\r\n    \"--ngProbeLocations\",\r\n    project_library_path,\r\n  }\r\n\r\n  require(\"lspconfig\").angularls.setup {\r\n    cmd = cmd,\r\n    on_new_config = function(new_config, new_root_dir)\r\n      new_config.cmd = cmd\r\n    end,\r\n  }\r\n\r\n```\r\nI have @angular/language-server installed globally and @angular/language-service as a project dev dependency. \r\n\r\nAny idea how I can make angulars attach to the buffer?\r\n\r\n",
            "created_at": "2024-02-21T01:00:14Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/537#issuecomment-1955597927",
            "id": 1955597927,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/537",
            "node_id": "IC_kwDODTQC1850kA5n",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1955597927/reactions"
            },
            "updated_at": "2024-02-21T01:10:51Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1955597927",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/91875387?v=4",
                "events_url": "https://api.github.com/users/borys-upco/events{/privacy}",
                "followers_url": "https://api.github.com/users/borys-upco/followers",
                "following_url": "https://api.github.com/users/borys-upco/following{/other_user}",
                "gists_url": "https://api.github.com/users/borys-upco/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/borys-upco",
                "id": 91875387,
                "login": "borys-upco",
                "node_id": "U_kgDOBXnoOw",
                "organizations_url": "https://api.github.com/users/borys-upco/orgs",
                "received_events_url": "https://api.github.com/users/borys-upco/received_events",
                "repos_url": "https://api.github.com/users/borys-upco/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/borys-upco/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/borys-upco/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/borys-upco"
            }
        }
    ],
    "comments": 6,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/537/comments",
    "created_at": "2021-01-04T21:11:21Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/537/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/537",
    "id": 778368794,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "Something isn't working",
            "id": 1674892761,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxNjc0ODkyNzYx",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/537/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU3NzgzNjg3OTQ=",
    "number": 537,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/537/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/537/timeline",
    "title": "angularls cmd not replaced or not executable",
    "updated_at": "2024-02-21T01:10:51Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/537",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/7985687?v=4",
        "events_url": "https://api.github.com/users/jemag/events{/privacy}",
        "followers_url": "https://api.github.com/users/jemag/followers",
        "following_url": "https://api.github.com/users/jemag/following{/other_user}",
        "gists_url": "https://api.github.com/users/jemag/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/jemag",
        "id": 7985687,
        "login": "jemag",
        "node_id": "MDQ6VXNlcjc5ODU2ODc=",
        "organizations_url": "https://api.github.com/users/jemag/orgs",
        "received_events_url": "https://api.github.com/users/jemag/received_events",
        "repos_url": "https://api.github.com/users/jemag/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/jemag/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jemag/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/jemag"
    }
}