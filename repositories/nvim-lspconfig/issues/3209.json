{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Description\n\nI have followed all of the instructions for setting up `arduino-language-server`.  But when I open an arduino file in nvim, the client does not attach.\r\n\r\nLspInfo:\r\n```\r\n Press q or <Esc> to close this window. Press <Tab> to view server doc.\r\n \r\n Language client log: /home/mike/.local/state/nvim/lsp.log\r\n Detected filetype:   arduino\r\n \r\n 0 client(s) attached to this buffer: \r\n \r\n Other clients that match the filetype: arduino\r\n \r\n Config: arduino_language_server\r\n \tfiletypes:         arduino\r\n \troot directory:    /home/mike/repos/hoverboard-firmware\r\n \tcmd:               /usr/bin/arduino-language-server\r\n \tcmd is executable: true\r\n \tautostart:         true\r\n \tcustom handlers:   \r\n \r\n Configured servers list: arduino_language_server, typst_lsp, nil_ls, kotlin_language_server, ccls, jsonls, eslint, tsserver, pyright, gopls, bashls, ansiblels, lua_ls, svelte\r\n```\r\n\r\nThe client is recognized but it will not attach to the file. LspStart does nothing.\r\n\r\nLspLog\r\n```\r\n[START][2024-06-19 15:06:51] LSP logging initiated\r\n[ERROR][2024-06-19 15:06:51] .../vim/lsp/rpc.lua:770\t\"rpc\"\t\"/usr/bin/arduino-language-server\"\t\"stderr\"\t\"15:06:51.296123 ArduinoCLI config file found at /home/mike/.arduino15/arduino-cli.yaml\\n15:06:51.296203 arduino-cli found at /usr/bin/arduino-cli\\n15:06:51.296240 clangd found at /usr/bin/clangd\\n15:06:51.296311 \\27[97mLS: : Initial board configuration: \\27[0m\\n15:06:51.296317 \\27[97mLS: : arduino-language-server Version: 0.0.0-git Commit:  Date: \\27[0m\\n15:06:51.296351 \\27[97mLS: : Language server temp directory: /tmp/arduino-language-server3308433109\\27[0m\\n15:06:51.296357 \\27[97mLS: : Language server build path: /tmp/arduino-language-server3308433109/build\\27[0m\\n15:06:51.296360 \\27[97mLS: : Language server build sketch root: /tmp/arduino-language-server3308433109/build/sketch\\27[0m\\n15:06:51.296362 \\27[97mLS: : Language server FULL build path: /tmp/arduino-language-server3308433109/fullbuild\\27[0m\\n15:06:51.296947 IN Elapsed: 507.876µs\\n15:06:51.297085 \\27[92mIDE --> LS REQU initialize 1\\27[0m\\n\"\r\n```\r\n\r\nIt looks like the language server outputs text on stderr. Is it possible that nvim is interpreting output on stderr as an error?\r\n\r\nRelevant config:\r\n```lua\r\nrequire(\"lspconfig\").arduino_language_server.setup({})\r\n```\r\n\r\n\r\n\r\nIt appears that the LSP is running:\r\n```\r\n$ procs arduino \r\n\r\n PID:▲  User │ TTY CPU MEM CPU Time │ Command\r\n             │     [%] [%]          │\r\n 290410 mike │     0.0 0.0 00:00:00 │ /usr/bin/arduino-language-server\r\n```",
    "closed_at": "2024-06-20T02:11:16Z",
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "Same here. Literally debugging the same problem right now. Everything seems to be working, but the buffer doesn't attach. I assume that arduino might require certain files, but not sure what else does it need apart from\r\n\r\n```\r\n./sketch.yaml\r\n./test.ino\r\n~/.arduino15/arduino-cli.yaml\r\n```",
            "created_at": "2024-06-19T22:54:11Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3209#issuecomment-2179543889",
            "id": 2179543889,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3209",
            "node_id": "IC_kwDODTQC186B6TNR",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2179543889/reactions"
            },
            "updated_at": "2024-06-19T22:54:11Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2179543889",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1616237?v=4",
                "events_url": "https://api.github.com/users/fspv/events{/privacy}",
                "followers_url": "https://api.github.com/users/fspv/followers",
                "following_url": "https://api.github.com/users/fspv/following{/other_user}",
                "gists_url": "https://api.github.com/users/fspv/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fspv",
                "id": 1616237,
                "login": "fspv",
                "node_id": "MDQ6VXNlcjE2MTYyMzc=",
                "organizations_url": "https://api.github.com/users/fspv/orgs",
                "received_events_url": "https://api.github.com/users/fspv/received_events",
                "repos_url": "https://api.github.com/users/fspv/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fspv/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fspv/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fspv"
            }
        },
        {
            "author_association": "NONE",
            "body": "Found this https://github.com/arduino/arduino-language-server/issues/187\r\n\r\nSomebody says it is something broken in nvim 0.10, and 0.9.5 works well. Haven't tried this myself",
            "created_at": "2024-06-19T23:21:33Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3209#issuecomment-2179559212",
            "id": 2179559212,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3209",
            "node_id": "IC_kwDODTQC186B6W8s",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2179559212/reactions"
            },
            "updated_at": "2024-06-19T23:21:33Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2179559212",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1616237?v=4",
                "events_url": "https://api.github.com/users/fspv/events{/privacy}",
                "followers_url": "https://api.github.com/users/fspv/followers",
                "following_url": "https://api.github.com/users/fspv/following{/other_user}",
                "gists_url": "https://api.github.com/users/fspv/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fspv",
                "id": 1616237,
                "login": "fspv",
                "node_id": "MDQ6VXNlcjE2MTYyMzc=",
                "organizations_url": "https://api.github.com/users/fspv/orgs",
                "received_events_url": "https://api.github.com/users/fspv/received_events",
                "repos_url": "https://api.github.com/users/fspv/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fspv/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fspv/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fspv"
            }
        },
        {
            "author_association": "NONE",
            "body": "Described the bug here https://github.com/arduino/arduino-language-server/issues/187#issuecomment-2179619062\r\n\r\nIt is not related to the nvim, but rather caused by the outdated library, which doesn't support new LSP capabilities added in nvim 0.10",
            "created_at": "2024-06-20T00:39:18Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3209#issuecomment-2179619915",
            "id": 2179619915,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3209",
            "node_id": "IC_kwDODTQC186B6lxL",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2179619915/reactions"
            },
            "updated_at": "2024-06-20T00:39:18Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2179619915",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1616237?v=4",
                "events_url": "https://api.github.com/users/fspv/events{/privacy}",
                "followers_url": "https://api.github.com/users/fspv/followers",
                "following_url": "https://api.github.com/users/fspv/following{/other_user}",
                "gists_url": "https://api.github.com/users/fspv/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/fspv",
                "id": 1616237,
                "login": "fspv",
                "node_id": "MDQ6VXNlcjE2MTYyMzc=",
                "organizations_url": "https://api.github.com/users/fspv/orgs",
                "received_events_url": "https://api.github.com/users/fspv/received_events",
                "repos_url": "https://api.github.com/users/fspv/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/fspv/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/fspv/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/fspv"
            }
        },
        {
            "author_association": "NONE",
            "body": "You are correct. I downgraded to nvim 0.9.5 and the LS is working.\r\n\r\nKinda funny that we were having the same problem at the same time. Thanks for your help!",
            "created_at": "2024-06-20T02:11:16Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3209#issuecomment-2179686422",
            "id": 2179686422,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3209",
            "node_id": "IC_kwDODTQC186B62AW",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2179686422/reactions"
            },
            "updated_at": "2024-06-20T02:11:16Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2179686422",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/49411532?v=4",
                "events_url": "https://api.github.com/users/mike-lloyd03/events{/privacy}",
                "followers_url": "https://api.github.com/users/mike-lloyd03/followers",
                "following_url": "https://api.github.com/users/mike-lloyd03/following{/other_user}",
                "gists_url": "https://api.github.com/users/mike-lloyd03/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mike-lloyd03",
                "id": 49411532,
                "login": "mike-lloyd03",
                "node_id": "MDQ6VXNlcjQ5NDExNTMy",
                "organizations_url": "https://api.github.com/users/mike-lloyd03/orgs",
                "received_events_url": "https://api.github.com/users/mike-lloyd03/received_events",
                "repos_url": "https://api.github.com/users/mike-lloyd03/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mike-lloyd03/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mike-lloyd03/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mike-lloyd03"
            }
        }
    ],
    "comments": 4,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3209/comments",
    "created_at": "2024-06-19T19:17:31Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3209/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3209",
    "id": 2362999656,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "Something isn't working",
            "id": 1674892761,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxNjc0ODkyNzYx",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3209/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDODTQC186M2INo",
    "number": 3209,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3209/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3209/timeline",
    "title": "Arduino Language Server does not attach",
    "updated_at": "2024-06-20T02:11:17Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3209",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/49411532?v=4",
        "events_url": "https://api.github.com/users/mike-lloyd03/events{/privacy}",
        "followers_url": "https://api.github.com/users/mike-lloyd03/followers",
        "following_url": "https://api.github.com/users/mike-lloyd03/following{/other_user}",
        "gists_url": "https://api.github.com/users/mike-lloyd03/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/mike-lloyd03",
        "id": 49411532,
        "login": "mike-lloyd03",
        "node_id": "MDQ6VXNlcjQ5NDExNTMy",
        "organizations_url": "https://api.github.com/users/mike-lloyd03/orgs",
        "received_events_url": "https://api.github.com/users/mike-lloyd03/received_events",
        "repos_url": "https://api.github.com/users/mike-lloyd03/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/mike-lloyd03/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mike-lloyd03/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/mike-lloyd03"
    }
}