{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Description\r\n\r\nI'm not sure if it's lspconfig-related or omnisharp-related, so posting it here to start with.\r\n\r\n### Neovim version\r\n\r\nNVIM v0.9.0-dev-774+g151b9fc52-dirty\r\nBuild type: Release\r\nLuaJIT 2.1.0-beta3\r\n\r\n### Nvim-lspconfig version\r\n\r\n85cd2ecacd8805614efe3fb3a5146ac7d0f88a17\r\n\r\n### Operating system and version\r\n\r\nmacOs 13.1\r\n\r\n### Affected language servers\r\n\r\nomnisharp\r\n\r\n### Steps to reproduce\r\n\r\n\r\nStep 1: open file from solution 1\r\n\r\nLspInfo:\r\n```\r\n Language client log: /Users/starteleport/.local/state/nvim/lsp.log\r\n Detected filetype:   cs\r\n \r\n 1 client(s) attached to this buffer: \r\n \r\n Client: omnisharp (id: 1, bufnr: [1])\r\n \tfiletypes:       cs, vb\r\n \tautostart:       true\r\n \troot directory:  /Users/starteleport/my_code/solution1\r\n \tcmd:             omnisharp -z -s /Users/starteleport/my_code/solution1 --hostPID 59024 DotNet:enablePackageRestore=false --encoding utf-8 --languageserver FormattingOptions:EnableEditorConfigSupport=true Sdk:IncludePrereleases=true\r\n \r\n Configured servers list: omnisharp\r\n```\r\n\r\nStep 2: check whether things like goto definition work within solution 1\r\n\r\nStep 3: open file from solution 2\r\n\r\nLspInfo:\r\n```\r\n Language client log: /Users/starteleport/.local/state/nvim/lsp.log\r\n Detected filetype:   cs\r\n \r\n 1 client(s) attached to this buffer: \r\n \r\n Client: omnisharp (id: 1, bufnr: [1, 7])\r\n \tfiletypes:       cs, vb\r\n \tautostart:       true\r\n \troot directory:  /Users/starteleport/my_code/solution2\r\n \tcmd:             omnisharp -z -s /Users/starteleport/my_code/solution1 --hostPID 59024 DotNet:enablePackageRestore=false --encoding utf-8 --languageserver FormattingOptions:EnableEditorConfigSupport=true Sdk:IncludePrereleases=true -z -s /Users/starteleport/my_code/solution2 --hostPID 59024 DotNet:enablePackageRestore=false --encoding utf-8 --languageserver FormattingOptions:EnableEditorConfigSupport=true Sdk:IncludePrereleases=true\r\n \r\n Configured servers list: omnisharp\r\n```\r\n\r\nStep 4: check whether things like goto definition work within solution 2\r\n\r\nStep 5: issue `ps -A` to verify how many instances of `omnisharp` are started and with which parameters\r\n\r\n### Actual behavior\r\n\r\nGoto definition from step 2 work within solution 1.\r\n\r\nGoto definition from step 4 do not work within solution 2.\r\n\r\nLspInfo in step 4 show suspicious `cmd` value that expands even further as I open subsequent buffers.\r\n\r\n`cmd` value in step 4 does not match the output from `ps -A` in step 5\r\n\r\n### Expected behavior\r\n\r\nGoto definition from step 2 work within solution 1.\r\n\r\nGoto definition from step 4 work within solution 2.\r\n\r\nLspInfo in step 4 shows adequate `cmd` value that matches the output of `ps -A`.\r\n\r\n\r\n### Minimal config\r\n\r\n```Lua\r\nlocal on_windows = vim.loop.os_uname().version:match 'Windows'\r\n\r\nlocal function join_paths(...)\r\n  local path_sep = on_windows and '\\\\' or '/'\r\n  local result = table.concat({ ... }, path_sep)\r\n  return result\r\nend\r\n\r\nvim.cmd [[set runtimepath=$VIMRUNTIME]]\r\n\r\nlocal temp_dir = vim.loop.os_getenv 'TEMP' or '/tmp'\r\n\r\nvim.cmd('set packpath=' .. join_paths(temp_dir, 'nvim', 'site'))\r\n\r\nlocal package_root = join_paths(temp_dir, 'nvim', 'site', 'pack')\r\nlocal lspconfig_path = join_paths(package_root, 'test', 'start', 'nvim-lspconfig')\r\n\r\nif vim.fn.isdirectory(lspconfig_path) ~= 1 then\r\n  vim.fn.system { 'git', 'clone', 'https://github.com/neovim/nvim-lspconfig', lspconfig_path }\r\nend\r\n\r\nvim.lsp.set_log_level 'trace'\r\nrequire('vim.lsp.log').set_format_func(vim.inspect)\r\nlocal nvim_lsp = require 'lspconfig'\r\nlocal on_attach = function(_, bufnr)\r\n  local function buf_set_option(...)\r\n    vim.api.nvim_buf_set_option(bufnr, ...)\r\n  end\r\n\r\n  buf_set_option('omnifunc', 'v:lua.vim.lsp.omnifunc')\r\n\r\n  -- Mappings.\r\n  local opts = { buffer = bufnr, noremap = true, silent = true }\r\n  vim.keymap.set('n', 'gD', vim.lsp.buf.declaration, opts)\r\n  vim.keymap.set('n', 'gd', vim.lsp.buf.definition, opts)\r\n  vim.keymap.set('n', 'K', vim.lsp.buf.hover, opts)\r\n  vim.keymap.set('n', 'gi', vim.lsp.buf.implementation, opts)\r\n  vim.keymap.set('n', '<C-k>', vim.lsp.buf.signature_help, opts)\r\n  vim.keymap.set('n', '<space>wa', vim.lsp.buf.add_workspace_folder, opts)\r\n  vim.keymap.set('n', '<space>wr', vim.lsp.buf.remove_workspace_folder, opts)\r\n  vim.keymap.set('n', '<space>wl', function()\r\n    print(vim.inspect(vim.lsp.buf.list_workspace_folders()))\r\n  end, opts)\r\n  vim.keymap.set('n', '<space>D', vim.lsp.buf.type_definition, opts)\r\n  vim.keymap.set('n', '<space>rn', vim.lsp.buf.rename, opts)\r\n  vim.keymap.set('n', 'gr', vim.lsp.buf.references, opts)\r\n  vim.keymap.set('n', '<space>e', vim.diagnostic.open_float, opts)\r\n  vim.keymap.set('n', '[d', vim.diagnostic.goto_prev, opts)\r\n  vim.keymap.set('n', ']d', vim.diagnostic.goto_next, opts)\r\n  vim.keymap.set('n', '<space>q', vim.diagnostic.setloclist, opts)\r\nend\r\n\r\n-- Add the server that troubles you here\r\nlocal name = 'omnisharp'\r\nlocal cmd = { 'omnisharp' } -- needed for elixirls, omnisharp, sumneko_lua\r\nif not name then\r\n  print 'You have not defined a server name, please edit minimal_init.lua'\r\nend\r\nif not nvim_lsp[name].document_config.default_config.cmd and not cmd then\r\n  print [[You have not defined a server default cmd for a server\r\n    that requires it please edit minimal_init.lua]]\r\nend\r\n\r\nnvim_lsp[name].setup {\r\n  cmd = cmd,\r\n  on_attach = on_attach,\r\n}\r\n\r\nprint [[You can find your log at $HOME/.cache/nvim/lsp.log. Please paste in a github issue under a details tag as described in the issue template.]]\r\n```\r\n\r\n\r\n### LSP log\r\n\r\nhttps://gist.github.com/starteleport/055fedceaea9e2ef22dd2ff9e6be43d9",
    "closed_at": "2023-06-30T06:47:06Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "to be honest I don't find the `textDocument/definition` request in your log.",
            "created_at": "2023-01-15T10:40:02Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2392#issuecomment-1383116069",
            "id": 1383116069,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2392",
            "node_id": "IC_kwDODTQC185ScK0l",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1383116069/reactions"
            },
            "updated_at": "2023-01-15T10:40:02Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1383116069",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "NONE",
            "body": "Sorry, wrong log file. I've updated the gist as well as NeoVim/lspconfig revisions in bug description (just updated everything to the latest `master`s).",
            "created_at": "2023-01-22T17:07:13Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2392#issuecomment-1399546612",
            "id": 1399546612,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2392",
            "node_id": "IC_kwDODTQC185Ta2L0",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1399546612/reactions"
            },
            "updated_at": "2023-01-22T17:07:13Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1399546612",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3007009?v=4",
                "events_url": "https://api.github.com/users/starteleport/events{/privacy}",
                "followers_url": "https://api.github.com/users/starteleport/followers",
                "following_url": "https://api.github.com/users/starteleport/following{/other_user}",
                "gists_url": "https://api.github.com/users/starteleport/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/starteleport",
                "id": 3007009,
                "login": "starteleport",
                "node_id": "MDQ6VXNlcjMwMDcwMDk=",
                "organizations_url": "https://api.github.com/users/starteleport/orgs",
                "received_events_url": "https://api.github.com/users/starteleport/received_events",
                "repos_url": "https://api.github.com/users/starteleport/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/starteleport/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/starteleport/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/starteleport"
            }
        },
        {
            "author_association": "NONE",
            "body": "I believe I figured out part of the problem. The on_new_config function for omnisharp inserts the extra configurations to the cmd table. The issue with this is that it doesn't seem like the cmd table is ever cleared or recreated. This is what causing the repeating config options at the end of the command. \r\n\r\nThis section gets repeated many times. I've noticed on Windows this happens as soon as I open one solution\r\n`-z -s /Users/starteleport/my_code/solution1 --hostPID 59024 DotNet:enablePackageRestore=false --encoding utf-8 --languageserver FormattingOptions:EnableEditorConfigSupport=true Sdk:IncludePrereleases=true`\r\n\r\nI created a temporary solution that works for my use case [here](https://github.com/waynebowie99/nvim-lspconfig/blob/master/lua/lspconfig/server_configurations/omnisharp.lua). I'm just setting the new_config.cmd to a completely new table and setting the omnisharp dll elsewhere. Someone would have to come up with a proper solution.\r\n\r\nI'm open to helping out when I can",
            "created_at": "2023-02-02T15:51:50Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2392#issuecomment-1413962646",
            "id": 1413962646,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2392",
            "node_id": "IC_kwDODTQC185UR1uW",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 1,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1413962646/reactions"
            },
            "updated_at": "2023-02-02T15:51:50Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1413962646",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3893438?v=4",
                "events_url": "https://api.github.com/users/waynebowie99/events{/privacy}",
                "followers_url": "https://api.github.com/users/waynebowie99/followers",
                "following_url": "https://api.github.com/users/waynebowie99/following{/other_user}",
                "gists_url": "https://api.github.com/users/waynebowie99/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/waynebowie99",
                "id": 3893438,
                "login": "waynebowie99",
                "node_id": "MDQ6VXNlcjM4OTM0Mzg=",
                "organizations_url": "https://api.github.com/users/waynebowie99/orgs",
                "received_events_url": "https://api.github.com/users/waynebowie99/received_events",
                "repos_url": "https://api.github.com/users/waynebowie99/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/waynebowie99/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/waynebowie99/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/waynebowie99"
            }
        },
        {
            "author_association": "NONE",
            "body": "@glepnir, were you able to reproduce this? Can I help here somehow? ",
            "created_at": "2023-03-27T07:52:07Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2392#issuecomment-1484668527",
            "id": 1484668527,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2392",
            "node_id": "IC_kwDODTQC185Yfj5v",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1484668527/reactions"
            },
            "updated_at": "2023-03-27T07:52:07Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1484668527",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3007009?v=4",
                "events_url": "https://api.github.com/users/starteleport/events{/privacy}",
                "followers_url": "https://api.github.com/users/starteleport/followers",
                "following_url": "https://api.github.com/users/starteleport/following{/other_user}",
                "gists_url": "https://api.github.com/users/starteleport/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/starteleport",
                "id": 3007009,
                "login": "starteleport",
                "node_id": "MDQ6VXNlcjMwMDcwMDk=",
                "organizations_url": "https://api.github.com/users/starteleport/orgs",
                "received_events_url": "https://api.github.com/users/starteleport/received_events",
                "repos_url": "https://api.github.com/users/starteleport/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/starteleport/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/starteleport/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/starteleport"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "sry a little busy recently .  I don't write dotnet. so need some time to install env and try to reproduce it.",
            "created_at": "2023-03-27T08:20:21Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2392#issuecomment-1484709871",
            "id": 1484709871,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2392",
            "node_id": "IC_kwDODTQC185Yft_v",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1484709871/reactions"
            },
            "updated_at": "2023-03-27T08:20:21Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1484709871",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@waynebowie99 You've certainly identified the problem! I've spent countless hours and have come across multiple Issues (the GitHub kind) in other repos that have been opened&mdash;and subsequently closed&mdash;that were ultimately the fault of this bug.\r\n\r\nShoot, I've spend dozens of hours just trying to learn Lua in hopes of troubleshooting this. I _think_ this is what's preventing me from using `Hoffs/omnisharp-extended-lsp.nvim` in my LazyVim configuration.\r\n\r\nDoes anybody more experienced than me have some time to work on this?",
            "created_at": "2023-06-19T22:32:55Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2392#issuecomment-1597841048",
            "id": 1597841048,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2392",
            "node_id": "IC_kwDODTQC185fPR6Y",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1597841048/reactions"
            },
            "updated_at": "2023-06-19T22:32:55Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1597841048",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/53498605?v=4",
                "events_url": "https://api.github.com/users/JustALawnGnome7/events{/privacy}",
                "followers_url": "https://api.github.com/users/JustALawnGnome7/followers",
                "following_url": "https://api.github.com/users/JustALawnGnome7/following{/other_user}",
                "gists_url": "https://api.github.com/users/JustALawnGnome7/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JustALawnGnome7",
                "id": 53498605,
                "login": "JustALawnGnome7",
                "node_id": "MDQ6VXNlcjUzNDk4NjA1",
                "organizations_url": "https://api.github.com/users/JustALawnGnome7/orgs",
                "received_events_url": "https://api.github.com/users/JustALawnGnome7/received_events",
                "repos_url": "https://api.github.com/users/JustALawnGnome7/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JustALawnGnome7/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JustALawnGnome7/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JustALawnGnome7"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "@glepnir As I'm looking over the code @waynebowie99 shared back on Feb 2, it seems he's on the right track by resetting `new_config.cmd` (i.e. setting the arguments to `omnisharp` from scratch). If this _is_ indeed the right approach, how do we do this so that `lspconfig`'s default path to `omnisharp` is used in subsequent command line resets&mdash;so that @waynebowie99's `dll_path` field is unnecessary?\r\n\r\nSecond, is it even correct for us to be trying to set `new_config.cmd` in most cases? In your professional opinion, is it a problem that `on_new_config` is being called every time we open a `*.cs` file under the same directory as the other files we have open?",
            "created_at": "2023-06-20T17:56:46Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2392#issuecomment-1599258157",
            "id": 1599258157,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2392",
            "node_id": "IC_kwDODTQC185fUr4t",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1599258157/reactions"
            },
            "updated_at": "2023-06-20T17:56:46Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1599258157",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/53498605?v=4",
                "events_url": "https://api.github.com/users/JustALawnGnome7/events{/privacy}",
                "followers_url": "https://api.github.com/users/JustALawnGnome7/followers",
                "following_url": "https://api.github.com/users/JustALawnGnome7/following{/other_user}",
                "gists_url": "https://api.github.com/users/JustALawnGnome7/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JustALawnGnome7",
                "id": 53498605,
                "login": "JustALawnGnome7",
                "node_id": "MDQ6VXNlcjUzNDk4NjA1",
                "organizations_url": "https://api.github.com/users/JustALawnGnome7/orgs",
                "received_events_url": "https://api.github.com/users/JustALawnGnome7/received_events",
                "repos_url": "https://api.github.com/users/JustALawnGnome7/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JustALawnGnome7/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JustALawnGnome7/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JustALawnGnome7"
            }
        },
        {
            "author_association": "NONE",
            "body": "This issue #2018 was the one that caused this breaking change. Maybe @williamboman has some insight on this and how to fix the problem\r\n\r\nThanks @JustALawnGnome7 for continuing this work on this!",
            "created_at": "2023-06-23T16:16:16Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2392#issuecomment-1604506592",
            "id": 1604506592,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2392",
            "node_id": "IC_kwDODTQC185fotPg",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1604506592/reactions"
            },
            "updated_at": "2023-06-23T16:16:16Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1604506592",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/3893438?v=4",
                "events_url": "https://api.github.com/users/waynebowie99/events{/privacy}",
                "followers_url": "https://api.github.com/users/waynebowie99/followers",
                "following_url": "https://api.github.com/users/waynebowie99/following{/other_user}",
                "gists_url": "https://api.github.com/users/waynebowie99/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/waynebowie99",
                "id": 3893438,
                "login": "waynebowie99",
                "node_id": "MDQ6VXNlcjM4OTM0Mzg=",
                "organizations_url": "https://api.github.com/users/waynebowie99/orgs",
                "received_events_url": "https://api.github.com/users/waynebowie99/received_events",
                "repos_url": "https://api.github.com/users/waynebowie99/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/waynebowie99/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/waynebowie99/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/waynebowie99"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I've submitted a PR that updates the logic behind `on_new_config`. The change saves the value of `cmd`&mdash;or rather its first parameter's `cmd` field&mdash;to be used in subsequent calls to `on_new_config` instead of appending duplicate arguments to `cmd` whenever another `*.cs` source file is opened.\r\n\r\nIt should be noted, however, that this still doesn't cause OmniSharp to work with multiple projects at the same time.",
            "created_at": "2023-06-27T18:34:32Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2392#issuecomment-1610028589",
            "id": 1610028589,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2392",
            "node_id": "IC_kwDODTQC185f9xYt",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1610028589/reactions"
            },
            "updated_at": "2023-06-27T18:34:32Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1610028589",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/53498605?v=4",
                "events_url": "https://api.github.com/users/JustALawnGnome7/events{/privacy}",
                "followers_url": "https://api.github.com/users/JustALawnGnome7/followers",
                "following_url": "https://api.github.com/users/JustALawnGnome7/following{/other_user}",
                "gists_url": "https://api.github.com/users/JustALawnGnome7/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JustALawnGnome7",
                "id": 53498605,
                "login": "JustALawnGnome7",
                "node_id": "MDQ6VXNlcjUzNDk4NjA1",
                "organizations_url": "https://api.github.com/users/JustALawnGnome7/orgs",
                "received_events_url": "https://api.github.com/users/JustALawnGnome7/received_events",
                "repos_url": "https://api.github.com/users/JustALawnGnome7/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JustALawnGnome7/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JustALawnGnome7/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JustALawnGnome7"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Whoops, looks like I botched the commit messages and created quite a mess. I've re-submitted the change under a new PR. (https://github.com/neovim/nvim-lspconfig/pull/2692)",
            "created_at": "2023-06-27T19:24:28Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2392#issuecomment-1610093321",
            "id": 1610093321,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2392",
            "node_id": "IC_kwDODTQC185f-BMJ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1610093321/reactions"
            },
            "updated_at": "2023-06-27T19:24:28Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1610093321",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/53498605?v=4",
                "events_url": "https://api.github.com/users/JustALawnGnome7/events{/privacy}",
                "followers_url": "https://api.github.com/users/JustALawnGnome7/followers",
                "following_url": "https://api.github.com/users/JustALawnGnome7/following{/other_user}",
                "gists_url": "https://api.github.com/users/JustALawnGnome7/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/JustALawnGnome7",
                "id": 53498605,
                "login": "JustALawnGnome7",
                "node_id": "MDQ6VXNlcjUzNDk4NjA1",
                "organizations_url": "https://api.github.com/users/JustALawnGnome7/orgs",
                "received_events_url": "https://api.github.com/users/JustALawnGnome7/received_events",
                "repos_url": "https://api.github.com/users/JustALawnGnome7/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/JustALawnGnome7/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/JustALawnGnome7/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/JustALawnGnome7"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "So this required some extensive debugging. There seems to be two problems here:\r\n\r\n1) I had so far been under the impression that each client configuration table gets \"deep copied\" before use. This is not the case, it only creates a shallow copy of the table, so if you mutate a table field directly (such as `table.insert(new_config.cmd, \"something\")`) it'll mutate the shared config table. This is easily fixable (I've suggested an easier approach in #2692). Some other server configurations seem to suffer the same issue, I'll probably open a separate PR to fix these.\r\n\r\n2) The Omnisharp server does not seem to handle multiple workspaces per server instance (see https://github.com/OmniSharp/omnisharp-roslyn/issues/909 and other linked issues from VSCode users). For some reason the server seems to announce that it supports this capability, which causes lspconfig to attach [a new workspace to an existing client](https://github.com/neovim/nvim-lspconfig/blob/a51892484c2002c083a8b0a9dfcefb3a569be36d/lua/lspconfig/util.lua#L357). Any new opened workspace will effectively be unusable due to this. The following autocmd should patch the server capabilities to avoid this happening (note that I've also included a reset of `semanticTokensProvider` because of https://github.com/OmniSharp/omnisharp-roslyn/issues/2483):\r\n\r\n```lua\r\nvim.api.nvim_create_autocmd(\"LspAttach\", {\r\n    callback = function(args)\r\n        local client = vim.lsp.get_client_by_id(args.data.client_id)\r\n\r\n        if client.name == \"omnisharp\" then\r\n            client.server_capabilities.semanticTokensProvider = nil\r\n            client.server_capabilities.workspace.workspaceFolders.supported = false\r\n        end\r\n    end,\r\n})\r\n\r\n-- (the better way would probably be to try to configure this via client capabilities, but I haven't given that a try yet)\r\n```\r\n\r\nThe above could potentially also be somehow included directly in nvim-lspconfig for a better out-of-the-box experience.",
            "created_at": "2023-06-27T19:57:09Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2392#issuecomment-1610129809",
            "id": 1610129809,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2392",
            "node_id": "IC_kwDODTQC185f-KGR",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1610129809/reactions"
            },
            "updated_at": "2023-06-27T20:01:51Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1610129809",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6705160?v=4",
                "events_url": "https://api.github.com/users/williamboman/events{/privacy}",
                "followers_url": "https://api.github.com/users/williamboman/followers",
                "following_url": "https://api.github.com/users/williamboman/following{/other_user}",
                "gists_url": "https://api.github.com/users/williamboman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/williamboman",
                "id": 6705160,
                "login": "williamboman",
                "node_id": "MDQ6VXNlcjY3MDUxNjA=",
                "organizations_url": "https://api.github.com/users/williamboman/orgs",
                "received_events_url": "https://api.github.com/users/williamboman/received_events",
                "repos_url": "https://api.github.com/users/williamboman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/williamboman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/williamboman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/williamboman"
            }
        }
    ],
    "comments": 11,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2392/comments",
    "created_at": "2023-01-11T11:29:51Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2392/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2392",
    "id": 1528874747,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "Something isn't working",
            "id": 1674892761,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxNjc0ODkyNzYx",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2392/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDODTQC185bIMb7",
    "number": 2392,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2392/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2392/timeline",
    "title": "LSP features not working in second dotnet solution with OmniSharp",
    "updated_at": "2023-06-30T06:47:06Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2392",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/3007009?v=4",
        "events_url": "https://api.github.com/users/starteleport/events{/privacy}",
        "followers_url": "https://api.github.com/users/starteleport/followers",
        "following_url": "https://api.github.com/users/starteleport/following{/other_user}",
        "gists_url": "https://api.github.com/users/starteleport/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/starteleport",
        "id": 3007009,
        "login": "starteleport",
        "node_id": "MDQ6VXNlcjMwMDcwMDk=",
        "organizations_url": "https://api.github.com/users/starteleport/orgs",
        "received_events_url": "https://api.github.com/users/starteleport/received_events",
        "repos_url": "https://api.github.com/users/starteleport/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/starteleport/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/starteleport/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/starteleport"
    }
}