{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Description\r\n\r\nWhen removing a workspace from a running client using the built `vim.buf.remove_workspace_folder`, then when force exploring a buffer from the removed workspace again, the workspace is not added back, the server is not notified. This is relevant only for servers with multi workspace support.\r\n\r\n```lua\r\nfunction M.remove_workspace_folder(workspace_folder)\r\n  workspace_folder = workspace_folder\r\n    or npcall(vim.fn.input, 'Workspace Folder: ', vim.fn.expand('%:p:h'))\r\n  api.nvim_command('redraw')\r\n  if not (workspace_folder and #workspace_folder > 0) then\r\n    return\r\n  end\r\n  local params = util.make_workspace_params(\r\n    { {} },\r\n    { { uri = vim.uri_from_fname(workspace_folder), name = workspace_folder } }\r\n  )\r\n  for _, client in pairs(vim.lsp.get_active_clients({ bufnr = 0 })) do\r\n    for idx, folder in pairs(client.workspace_folders or {}) do\r\n      if folder.name == workspace_folder then\r\n        vim.lsp.buf_notify(0, 'workspace/didChangeWorkspaceFolders', params)\r\n        client.workspace_folders[idx] = nil\r\n        return\r\n      end\r\n    end\r\n  end\r\n  print(workspace_folder, 'is not currently part of the workspace')\r\nend\r\n```\r\n\r\nImplementation of the remove function as of neovim 0.9.4 above. As you can see on top of sending notify to the server it clears the workspace folders, however, when force exploring a buffer belonging to the removed workspace (as resolved by root_dir), the server is neither notified nor is the workspace_folder added back in.",
    "closed_at": null,
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Thanks for your report. The configs in this repo are unsupported and provided only as a starting point. We depend on users (like you) to troubleshoot issues with their specific LSP setups and [send improvements](https://github.com/neovim/nvim-lspconfig/blob/master/CONTRIBUTING.md).\r\n\r\nIf you found a bug in the _core_ Nvim  `vim.lsp` module (not part of this repo), the best way to get it fixed is to [report to Nvim](https://github.com/neovim/neovim) (not nvim-lspconfig) with:\r\n- steps to reproduce it without the particular LSP server and other factors particular to your environment\r\n- (optional, but very helpful): by adding a failing test case to [lsp_spec.lua](https://github.com/neovim/neovim/blob/master/test/functional/plugin/lsp_spec.lua), which has code to setup a fake LSP server to simulate various scenarios",
            "created_at": "2024-02-09T22:08:17Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3003#issuecomment-1936668990",
            "id": 1936668990,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3003",
            "node_id": "IC_kwDODTQC185zbzk-",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936668990/reactions"
            },
            "updated_at": "2024-02-09T22:08:17Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936668990",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "@justinmk i do not think this issue is part of the core, the core has these specific utility functions, but the core does not handle workspace configurations. This specific plugin does, in the implementation, there is a specific case where the server is checked if it supports multiple workspaces, and instead of spawning additional servers it re-uses existing ones. Please re-open this issue as it affects this specific plugin and not core. ",
            "created_at": "2024-02-10T04:59:18Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3003#issuecomment-1936865889",
            "id": 1936865889,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3003",
            "node_id": "IC_kwDODTQC185zcjph",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936865889/reactions"
            },
            "updated_at": "2024-02-10T04:59:18Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936865889",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/15955811?v=4",
                "events_url": "https://api.github.com/users/asmodeus812/events{/privacy}",
                "followers_url": "https://api.github.com/users/asmodeus812/followers",
                "following_url": "https://api.github.com/users/asmodeus812/following{/other_user}",
                "gists_url": "https://api.github.com/users/asmodeus812/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/asmodeus812",
                "id": 15955811,
                "login": "asmodeus812",
                "node_id": "MDQ6VXNlcjE1OTU1ODEx",
                "organizations_url": "https://api.github.com/users/asmodeus812/orgs",
                "received_events_url": "https://api.github.com/users/asmodeus812/received_events",
                "repos_url": "https://api.github.com/users/asmodeus812/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/asmodeus812/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/asmodeus812/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/asmodeus812"
            }
        },
        {
            "author_association": "NONE",
            "body": "@justinmk - https://github.com/neovim/nvim-lspconfig/blob/41f40dc4b86f3e166cf08115f621001972565a20/lua/lspconfig/manager.lua#L92",
            "created_at": "2024-02-10T05:21:13Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3003#issuecomment-1936874008",
            "id": 1936874008,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3003",
            "node_id": "IC_kwDODTQC185zcloY",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936874008/reactions"
            },
            "updated_at": "2024-02-10T05:21:13Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936874008",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/15955811?v=4",
                "events_url": "https://api.github.com/users/asmodeus812/events{/privacy}",
                "followers_url": "https://api.github.com/users/asmodeus812/followers",
                "following_url": "https://api.github.com/users/asmodeus812/following{/other_user}",
                "gists_url": "https://api.github.com/users/asmodeus812/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/asmodeus812",
                "id": 15955811,
                "login": "asmodeus812",
                "node_id": "MDQ6VXNlcjE1OTU1ODEx",
                "organizations_url": "https://api.github.com/users/asmodeus812/orgs",
                "received_events_url": "https://api.github.com/users/asmodeus812/received_events",
                "repos_url": "https://api.github.com/users/asmodeus812/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/asmodeus812/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/asmodeus812/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/asmodeus812"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "provide reproduce step i will take a look at it.",
            "created_at": "2024-02-10T05:34:45Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3003#issuecomment-1936879923",
            "id": 1936879923,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3003",
            "node_id": "IC_kwDODTQC185zcnEz",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936879923/reactions"
            },
            "updated_at": "2024-02-10T05:34:45Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936879923",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "NONE",
            "body": "1. Make sure workspace support is on for lua ls\n2. Open a file from a plugin A\n3. Open another file from another plugin B\n4. Both roots of the plugins are registered as workspace folders in the lua ls client.\n5. Delete / wipe out all buffers from one of the workspaces / plugins - A or B\n6. Manually remove the workspace from the client.workspace _folders and send notify ro the server for the removed workspace. (I Used as an example part of the impl from the core's utility remove_workspace function)\n7. Explore / edit one of the deleted  buffers again, from the removed workspace\n8. Workspace belonging to that file/buffer is not added again \n\n\nFurthermore, it might be a good idea to have step 6 be handled internally by lspconfig. As it is already responsible for understanding how to add new workspaces, it can intercept if all buffers of a given workspace for a client are deleted and detach the workspace folder and do a notify to the client for  workspace removed ( the inverse of what it already does )",
            "created_at": "2024-02-10T05:58:05Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3003#issuecomment-1936891432",
            "id": 1936891432,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3003",
            "node_id": "IC_kwDODTQC185zcp4o",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936891432/reactions"
            },
            "updated_at": "2024-02-10T06:05:43Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936891432",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/15955811?v=4",
                "events_url": "https://api.github.com/users/asmodeus812/events{/privacy}",
                "followers_url": "https://api.github.com/users/asmodeus812/followers",
                "following_url": "https://api.github.com/users/asmodeus812/following{/other_user}",
                "gists_url": "https://api.github.com/users/asmodeus812/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/asmodeus812",
                "id": 15955811,
                "login": "asmodeus812",
                "node_id": "MDQ6VXNlcjE1OTU1ODEx",
                "organizations_url": "https://api.github.com/users/asmodeus812/orgs",
                "received_events_url": "https://api.github.com/users/asmodeus812/received_events",
                "repos_url": "https://api.github.com/users/asmodeus812/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/asmodeus812/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/asmodeus812/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/asmodeus812"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "I will check it later.",
            "created_at": "2024-02-10T06:05:03Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3003#issuecomment-1936893088",
            "id": 1936893088,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3003",
            "node_id": "IC_kwDODTQC185zcqSg",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936893088/reactions"
            },
            "updated_at": "2024-02-10T06:05:03Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936893088",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "NONE",
            "body": "@glepnir, thanks, there is some work being done here by @arenevier (but it is incomplete) - https://github.com/neovim/nvim-lspconfig/pull/2837. But This is very much related to my issue and in general to the clean up of clients. \r\n\r\nIn general lspconfig does not correctly consider how to correctly clean up clients, that it starts and manages. We have two main use cases.\r\n- when a client is started without workspace support, when the last ever buffer is closed for that client, the client has to be terminated.\r\n- when a client is started with workspace support, then upon closing the last buffer for a workspace, the workspace is de-registered, any state held for it removed from the client etc. (my issue), upon closing the last buffer for the sole workspace currently registered, then we clean up the client too - this is the base case from above",
            "created_at": "2024-02-10T07:27:27Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3003#issuecomment-1936914570",
            "id": 1936914570,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3003",
            "node_id": "IC_kwDODTQC185zcviK",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936914570/reactions"
            },
            "updated_at": "2024-02-10T07:29:09Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936914570",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/15955811?v=4",
                "events_url": "https://api.github.com/users/asmodeus812/events{/privacy}",
                "followers_url": "https://api.github.com/users/asmodeus812/followers",
                "following_url": "https://api.github.com/users/asmodeus812/following{/other_user}",
                "gists_url": "https://api.github.com/users/asmodeus812/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/asmodeus812",
                "id": 15955811,
                "login": "asmodeus812",
                "node_id": "MDQ6VXNlcjE1OTU1ODEx",
                "organizations_url": "https://api.github.com/users/asmodeus812/orgs",
                "received_events_url": "https://api.github.com/users/asmodeus812/received_events",
                "repos_url": "https://api.github.com/users/asmodeus812/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/asmodeus812/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/asmodeus812/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/asmodeus812"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> when a client is started without workspace support, when the last ever buffer is closed for that client, the client has to be terminated.\r\n\r\nIf the problem is due to some auto-shutdown server plugin maybe nothing todo here? We do not handle automatically shutting down the server when no buffer is attached. there has an issue track in neovim core.",
            "created_at": "2024-02-10T07:31:54Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3003#issuecomment-1936915757",
            "id": 1936915757,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3003",
            "node_id": "IC_kwDODTQC185zcv0t",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936915757/reactions"
            },
            "updated_at": "2024-02-10T07:32:46Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936915757",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "NONE",
            "body": "@glepnir i do not understand what `auto-shutdown` plugin means, the argument here is that whatever resources lspconfig manages, in this case running language server clients, it should be capable of cleaning them up too. \r\n\r\nLeaving any of this to core, is not a good idea, core does not manage servers, neither does it decide when to start them etc, **it just provides an api to work with clients/servers**. However the workspace issue is still a real issue solely affecting lspconfig, since lspconfig is managing them i.e sending addWorkspace, therefore it should removeWorkspace, otherwise it leaves the client in a inconsistent state in comparison with the editor.\r\n\r\nLspconfig has the most information and context on what was started, for which root directories, how it was started, and so much more, and therefore it has a much better idea on how/when to cleanup the started client resources, this can't be done from a separate plugin, which has none of this context or information, let alone core.\r\n",
            "created_at": "2024-02-10T07:39:32Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3003#issuecomment-1936917388",
            "id": 1936917388,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3003",
            "node_id": "IC_kwDODTQC185zcwOM",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936917388/reactions"
            },
            "updated_at": "2024-02-10T07:46:30Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936917388",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/15955811?v=4",
                "events_url": "https://api.github.com/users/asmodeus812/events{/privacy}",
                "followers_url": "https://api.github.com/users/asmodeus812/followers",
                "following_url": "https://api.github.com/users/asmodeus812/following{/other_user}",
                "gists_url": "https://api.github.com/users/asmodeus812/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/asmodeus812",
                "id": 15955811,
                "login": "asmodeus812",
                "node_id": "MDQ6VXNlcjE1OTU1ODEx",
                "organizations_url": "https://api.github.com/users/asmodeus812/orgs",
                "received_events_url": "https://api.github.com/users/asmodeus812/received_events",
                "repos_url": "https://api.github.com/users/asmodeus812/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/asmodeus812/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/asmodeus812/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/asmodeus812"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> when a client is started without workspace support, when the last ever buffer is closed for that client, the client has to be terminated.\r\n\r\nagain in this regard, lspconfig can do is provide api or command i think . lspconfig will not shut down the server. Because some servers cache large amounts of content. You may use it again in tens of seconds or minutes. We cannot decide when to shut down the server. relate https://github.com/neovim/neovim/issues/14430",
            "created_at": "2024-02-10T07:49:26Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3003#issuecomment-1936919887",
            "id": 1936919887,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3003",
            "node_id": "IC_kwDODTQC185zcw1P",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936919887/reactions"
            },
            "updated_at": "2024-02-10T07:49:45Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936919887",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir"
            }
        },
        {
            "author_association": "NONE",
            "body": "@glepnir this is a false assumption, probably even wrong. When server is started without workspace support the client is initialized for specific workspace, if the user closes all buffers for a workspace, it is very much expected that all resources relating to that workspace are correctly freed up, if i open a new file from another workspace it will not attach to the same client instance anyway, it will create a new one for the new workspace.\r\n\r\n`You may use it again in tens of seconds or minutes` - there is no reason to close **ALL** buffers for the workspace if we want to use it again, **closing one or more buffers provides no benefit at all**, that was the entire argument for this issue in the first place (**having all resources for a workspace freed up in the editor, including the buffers, by the user,** **_implies something_**, imo). \r\n\r\nNot to mention the auto-clean up can be accompanied by a configuration the user might opt into, further more an additional user input might be taken in to accept cleaning the client (again a config opt-in). Not to mention again, the pr above, even adds a timeout before it kills the client, as a response to your argument: `You may use it again in tens of seconds or minutes`\r\n\r\nThe only possible reason when an auto cleanup is not desired is if you have `set nohidden`, but by default nvim has `set hidden`. \r\n\r\nIn any case, i did take a look at the issue and as i said people there also are reluctant to put this into core, which is correct, **we do not want this in core at all**. https://github.com/neovim/neovim/issues/14430#issuecomment-1848355381. \r\n\r\nIn My use case for example, where i often open 10s of projects/workspaces in a single nvim instance, and want to kill buffers for a specific workspace, i do not want rogue clients taking up resources, staying on. I am sure you are familiar that several language servers like for example TS, can easily eat up a ton of ram, and often people resort to restarting them frequently.\r\n\r\nFreeing up any amounts of buffers for a workspace, resource wise, and leaving the client running, will never outweigh having the client taking up who knows how much system resources (given it often ranges in the GBs of memory)\r\n\r\nAs a final thought, as i already said, my most important concern is to not leave the editor and any externally managed resources out of sync. \r\n\r\n**We are talking about having the auto-shutdown on BufUnload, bufwipeout, there are nuances on what buffer delete means, what i refer to in the original issue, is complete free up of the buffers.**",
            "created_at": "2024-02-10T08:23:48Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3003#issuecomment-1936930407",
            "id": 1936930407,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3003",
            "node_id": "IC_kwDODTQC185zczZn",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936930407/reactions"
            },
            "updated_at": "2024-02-10T08:42:11Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936930407",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/15955811?v=4",
                "events_url": "https://api.github.com/users/asmodeus812/events{/privacy}",
                "followers_url": "https://api.github.com/users/asmodeus812/followers",
                "following_url": "https://api.github.com/users/asmodeus812/following{/other_user}",
                "gists_url": "https://api.github.com/users/asmodeus812/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/asmodeus812",
                "id": 15955811,
                "login": "asmodeus812",
                "node_id": "MDQ6VXNlcjE1OTU1ODEx",
                "organizations_url": "https://api.github.com/users/asmodeus812/orgs",
                "received_events_url": "https://api.github.com/users/asmodeus812/received_events",
                "repos_url": "https://api.github.com/users/asmodeus812/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/asmodeus812/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/asmodeus812/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/asmodeus812"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "> i do not think this issue is part of the core, the core has these specific utility functions, but the core does not handle workspace configurations.\r\n\r\nThat may be the case temporarily, but given all the discussion in this issue, this is clearly something that needs to be solved in core, not in nvim-lspconfig. nvim-lspconfig is not supposed to have complex features, it's supposed to be only a collection of configurations.",
            "created_at": "2024-02-10T12:20:46Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3003#issuecomment-1936993795",
            "id": 1936993795,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3003",
            "node_id": "IC_kwDODTQC185zdC4D",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936993795/reactions"
            },
            "updated_at": "2024-02-10T12:20:46Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1936993795",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        }
    ],
    "comments": 12,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3003/comments",
    "created_at": "2024-02-09T18:42:16Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3003/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3003",
    "id": 2127674529,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "Something isn't working",
            "id": 1674892761,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxNjc0ODkyNzYx",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3003/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDODTQC185-0byh",
    "number": 3003,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3003/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "open",
    "state_reason": "reopened",
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3003/timeline",
    "title": "Workspaces not added to the server again when initially removed",
    "updated_at": "2024-02-10T12:20:47Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3003",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/15955811?v=4",
        "events_url": "https://api.github.com/users/asmodeus812/events{/privacy}",
        "followers_url": "https://api.github.com/users/asmodeus812/followers",
        "following_url": "https://api.github.com/users/asmodeus812/following{/other_user}",
        "gists_url": "https://api.github.com/users/asmodeus812/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/asmodeus812",
        "id": 15955811,
        "login": "asmodeus812",
        "node_id": "MDQ6VXNlcjE1OTU1ODEx",
        "organizations_url": "https://api.github.com/users/asmodeus812/orgs",
        "received_events_url": "https://api.github.com/users/asmodeus812/received_events",
        "repos_url": "https://api.github.com/users/asmodeus812/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/asmodeus812/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/asmodeus812/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/asmodeus812"
    }
}