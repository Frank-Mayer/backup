{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Description\r\n\r\nit seems like statix is being called with the wrong command. in the long it seems to only respond with the default help message. sorry if this is rather an upstream issue I am unsure where to file this\r\n\r\n### Neovim version\r\n\r\nNVIM v0.9.1\r\nBuild type: Release\r\nLuaJIT 2.1.0-beta3\r\n\r\n### Nvim-lspconfig version\r\n\r\nb0852218bc5fa6514a71a9da6d5cfa63a263c83d\r\n\r\n### Operating system and version\r\n\r\nNixOS 23.05\r\n\r\n### Affected language servers\r\n\r\nstatix\r\n\r\n### Steps to reproduce\r\n\r\n0. `nix shell nixpkgs#statix` or `brew install statix`\r\n1. `echo \"{...}: let in {}\" > test.nix`\r\n2. `nvim -nu minimal.lua test.nix`\r\n\r\n### Actual behavior\r\n\r\nnothing happens, statix lsp never properly starts\r\n\r\n### Expected behavior\r\n\r\nerror diagnostics along the lines of:\r\n```\r\n[W10] Warning: Found empty pattern in function argument\r\n   ╭─[test.nix:1:1]\r\n   │\r\n 1 │ {...}: let in {}\r\n   · ──┬──\r\n   ·   ╰──── This pattern is empty, use _ instead\r\n───╯\r\n[W02] Warning: Useless let-in expression\r\n   ╭─[test.nix:1:8]\r\n   │\r\n 1 │ {...}: let in {}\r\n   ·        ────┬────\r\n   ·            ╰────── This let-in expression has no entries\r\n───╯\r\n```\r\n\r\n### Minimal config\r\n\r\n```Lua\r\nlocal on_windows = vim.loop.os_uname().version:match 'Windows'\r\n\r\nlocal function join_paths(...)\r\n  local path_sep = on_windows and '\\\\' or '/'\r\n  local result = table.concat({ ... }, path_sep)\r\n  return result\r\nend\r\n\r\nvim.cmd [[set runtimepath=$VIMRUNTIME]]\r\n\r\nlocal temp_dir = vim.loop.os_getenv 'TEMP' or '/tmp'\r\n\r\nvim.cmd('set packpath=' .. join_paths(temp_dir, 'nvim', 'site'))\r\n\r\nlocal package_root = join_paths(temp_dir, 'nvim', 'site', 'pack')\r\nlocal lspconfig_path = join_paths(package_root, 'test', 'start', 'nvim-lspconfig')\r\n\r\nif vim.fn.isdirectory(lspconfig_path) ~= 1 then\r\n  vim.fn.system { 'git', 'clone', 'https://github.com/neovim/nvim-lspconfig', lspconfig_path }\r\nend\r\n\r\nvim.lsp.set_log_level 'trace'\r\nrequire('vim.lsp.log').set_format_func(vim.inspect)\r\nlocal nvim_lsp = require 'lspconfig'\r\nlocal on_attach = function(_, bufnr)\r\n  local function buf_set_option(...)\r\n    vim.api.nvim_buf_set_option(bufnr, ...)\r\n  end\r\n\r\n  buf_set_option('omnifunc', 'v:lua.vim.lsp.omnifunc')\r\n\r\n  -- Mappings.\r\n  local opts = { buffer = bufnr, noremap = true, silent = true }\r\n  vim.keymap.set('n', 'gD', vim.lsp.buf.declaration, opts)\r\n  vim.keymap.set('n', 'gd', vim.lsp.buf.definition, opts)\r\n  vim.keymap.set('n', 'K', vim.lsp.buf.hover, opts)\r\n  vim.keymap.set('n', 'gi', vim.lsp.buf.implementation, opts)\r\n  vim.keymap.set('n', '<C-k>', vim.lsp.buf.signature_help, opts)\r\n  vim.keymap.set('n', '<space>wa', vim.lsp.buf.add_workspace_folder, opts)\r\n  vim.keymap.set('n', '<space>wr', vim.lsp.buf.remove_workspace_folder, opts)\r\n  vim.keymap.set('n', '<space>wl', function()\r\n    print(vim.inspect(vim.lsp.buf.list_workspace_folders()))\r\n  end, opts)\r\n  vim.keymap.set('n', '<space>D', vim.lsp.buf.type_definition, opts)\r\n  vim.keymap.set('n', '<space>rn', vim.lsp.buf.rename, opts)\r\n  vim.keymap.set('n', 'gr', vim.lsp.buf.references, opts)\r\n  vim.keymap.set('n', '<space>e', vim.diagnostic.open_float, opts)\r\n  vim.keymap.set('n', '[d', vim.diagnostic.goto_prev, opts)\r\n  vim.keymap.set('n', ']d', vim.diagnostic.goto_next, opts)\r\n  vim.keymap.set('n', '<space>q', vim.diagnostic.setloclist, opts)\r\nend\r\n\r\n-- Add the server that troubles you here\r\nlocal name = 'statix'\r\n-- local cmd = { 'statix' } -- needed for elixirls, lua_ls, omnisharp\r\nif not name then\r\n  print 'You have not defined a server name, please edit minimal_init.lua'\r\nend\r\nif not nvim_lsp[name].document_config.default_config.cmd and not cmd then\r\n  print [[You have not defined a server default cmd for a server\r\n    that requires it please edit minimal_init.lua]]\r\nend\r\n\r\nnvim_lsp[name].setup {\r\n  cmd = cmd,\r\n  on_attach = on_attach,\r\n}\r\n\r\nprint [[You can find your log at $HOME/.cache/nvim/lsp.log. Please paste in a github issue under a details tag as described in the issue template.]]\r\n```\r\n\r\n\r\n### LSP log\r\n\r\nhttps://gist.github.com/zeratax/ac16b1ffc97cd2627a855f4f311d5603",
    "closed_at": "2023-11-18T23:38:42Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Thanks for your report. The configs in this repo are unsupported and provided only as a starting point. We depend on users (like you) to troubleshoot issues with their specific LSP setups and [send improvements](https://github.com/neovim/nvim-lspconfig/blob/master/CONTRIBUTING.md).\r\n\r\nIf you found a bug in the _core_ Nvim  `vim.lsp` module (not part of this repo), the best way to get it fixed is to [report to Nvim](https://github.com/neovim/neovim) (not nvim-lspconfig) with:\r\n- steps to reproduce it without the particular LSP server and other factors particular to your environment\r\n- (optional, but very helpful): by adding a failing test case to [lsp_spec.lua](https://github.com/neovim/neovim/blob/master/test/functional/plugin/lsp_spec.lua), which has code to setup a fake LSP server to simulate various scenarios",
            "created_at": "2023-11-18T23:38:42Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2887#issuecomment-1817678327",
            "id": 1817678327,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2887",
            "node_id": "IC_kwDODTQC185sV5H3",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1817678327/reactions"
            },
            "updated_at": "2023-11-18T23:38:42Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1817678327",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2887/comments",
    "created_at": "2023-11-11T01:43:10Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2887/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2887",
    "id": 1988639516,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "Something isn't working",
            "id": 1674892761,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxNjc0ODkyNzYx",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2887/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDODTQC1852iDsc",
    "number": 2887,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2887/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "closed",
    "state_reason": "not_planned",
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2887/timeline",
    "title": "statix uses the wrong command",
    "updated_at": "2023-11-18T23:38:43Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2887",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/5024958?v=4",
        "events_url": "https://api.github.com/users/zeratax/events{/privacy}",
        "followers_url": "https://api.github.com/users/zeratax/followers",
        "following_url": "https://api.github.com/users/zeratax/following{/other_user}",
        "gists_url": "https://api.github.com/users/zeratax/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/zeratax",
        "id": 5024958,
        "login": "zeratax",
        "node_id": "MDQ6VXNlcjUwMjQ5NTg=",
        "organizations_url": "https://api.github.com/users/zeratax/orgs",
        "received_events_url": "https://api.github.com/users/zeratax/received_events",
        "repos_url": "https://api.github.com/users/zeratax/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/zeratax/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/zeratax/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/zeratax"
    }
}