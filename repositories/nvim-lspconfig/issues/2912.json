{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Description\n\nHi, since 3 days straight i am trying to get HTML autocompletion to work, I tried everything form the other Issues but none of them worked.\r\n\r\n\r\n- I followed [this](https://github.com/hrsh7th/nvim-cmp) to install and configure cmp\r\n- I followed [this](https://github.com/neovim/nvim-lspconfig/blob/master/doc/server_configurations.md#html) to install a html language server\r\n- I followed [this](https://github.com/neovim/nvim-lspconfig) to install the nvim lspconfig\r\n\r\n\r\nmy lazy configuration:\r\n```\r\nlocal plugins = {\r\n    --- Uncomment these if you want to manage LSP servers from neovim\r\n    --{'williamboman/mason.nvim'},\r\n    --{'williamboman/mason-lspconfig.nvim'},\r\n    --{'VonHeikemen/lsp-zero.nvim', branch = 'v3.x'},\r\n    -- LSP Support\r\n    {'neovim/nvim-lspconfig'},\r\n\r\n    -- Autocompletion\r\n    {'hrsh7th/cmp-nvim-lsp'},\r\n    {'hrsh7th/cmp-buffer'},\r\n    {'hrsh7th/cmp-path'},\r\n    {'hrsh7th/cmp-cmdline'},\r\n    {'hrsh7th/nvim-cmp'},\r\n\r\n    -- Snippet engine\r\n    {'hrsh7th/cmp-vsnip'},\r\n    {'hrsh7th/vim-vsnip'},\r\n    {'hrsh7th/vim-vsnip-integ'},\r\n    --{'L3MON4D3/LuaSnip'},\r\n    --{'saadparwaiz1/cmp_luasnip'},\r\n\r\n    --[[{\r\n        'windwp/nvim-autopairs',\r\n        event = \"InsertEnter\",\r\n        opts = {} -- this is equalent to setup({}) function\r\n    },]]--\r\n\r\n    -- nvim dashboard\r\n    {\r\n        'nvimdev/dashboard-nvim',\r\n        event = 'VimEnter',\r\n        config = function()\r\n            require('dashboard').setup {\r\n                theme = 'hyper',\r\n                config = {\r\n                    header = require('flow-dash').logo(),\r\n                    footer = {},\r\n                    week_header = {\r\n                        enable = false,\r\n                    },\r\n                    shortcut = {\r\n                        { desc = 'Û∞ä≥ Update', group = '@property', action = 'Lazy update', key = 'u' },\r\n                    },\r\n                },\r\n            }\r\n        end,\r\n        dependencies = { {'nvim-tree/nvim-web-devicons'}}\r\n    },\r\n}\r\n\r\nlocal opts = {\r\n    ui = {\r\n        icons = {\r\n            cmd = \"‚åò\",\r\n            config = \"üõ†\",\r\n            event = \"üìÖ\",\r\n            ft = \"üìÇ\",\r\n            init = \"‚öô\",\r\n            keys = \"üóù\",\r\n            plugin = \"üîå\",\r\n            runtime = \"üíª\",\r\n            require = \"üåô\",\r\n            source = \"üìÑ\",\r\n            start = \"üöÄ\",\r\n            task = \"üìå\",\r\n            lazy = \"üí§ \",\r\n        },\r\n    },\r\n}\r\n\r\n-- Lazy vim init\r\nlocal lazypath = vim.fn.stdpath(\"data\") .. \"/lazy/lazy.nvim\"\r\n\r\nlocal function init()\r\n    if not vim.loop.fs_stat(lazypath) then\r\n        vim.fn.system({\r\n        \"git\",\r\n        \"clone\",\r\n        \"--filter=blob:none\",\r\n        \"https://github.com/folke/lazy.nvim.git\",\r\n        \"--branch=stable\", -- latest stable release\r\n        lazypath,\r\n    })\r\n    end\r\n\r\n    vim.opt.rtp:prepend(lazypath)\r\n    require(\"lazy\").setup(plugins, opts)\r\nend\r\n\r\nreturn {\r\n    print(\"Init Lazy package manager...\"),\r\n    init()\r\n}\r\n```\r\n\r\n\r\nmy /after/plugin/lsp.lua:\r\n```\r\nlocal cmp = require('cmp')\r\n--local luasnip = require(\"luasnip\") \r\ncmp.setup({\r\n    preselect = 'item',\r\n    completion = {\r\n        completeopt = 'menu,menuone,noinsert'\r\n    },\r\n    snippet = {\r\n        expand = function(args)\r\n            vim.fn[\"vsnip#anonymous\"](args.body)\r\n            --require('luasnip').lsp_expand(args.body)\r\n        end,\r\n    },\r\n    window = {\r\n        completion = cmp.config.window.bordered(),\r\n        documentation = cmp.config.window.bordered(),\r\n    },\r\n    mapping = cmp.mapping.preset.insert({\r\n        [\"<Tab>\"] = cmp.mapping(function(fallback)\r\n      -- This little snippet will confirm with tab, and if no entry is selected, will confirm the first item\r\n      if cmp.visible() then\r\n        local entry = cmp.get_selected_entry()\r\n\tif not entry then\r\n\t  cmp.select_next_item({ behavior = cmp.SelectBehavior.Select })\r\n\telse\r\n\t  cmp.confirm()\r\n\tend\r\n      else\r\n        fallback()\r\n      end\r\n    end, {\"i\",\"s\",\"c\",}),\r\n    }),\r\n    sources = cmp.config.sources({\r\n      { name = 'nvim_lsp' },\r\n      { name = 'vsnip' }, -- For vsnip users.\r\n      --{ name = 'luasnip' }, -- For luasnip users.\r\n      -- { name = 'ultisnips' }, -- For ultisnips users.\r\n      -- { name = 'snippy' }, -- For snippy users.\r\n    }, {\r\n      { name = 'buffer' },\r\n    })\r\n})\r\n\r\n-- Set up lspconfig.\r\nlocal capabilities = require('cmp_nvim_lsp').default_capabilities()\r\ncapabilities.textDocument.completion.completionItem.snippetSupport = true\r\n\r\nrequire('lspconfig').lua_ls.setup {\r\n   capabilities = capabilities,\r\n}\r\nrequire('lspconfig').html.setup {\r\n    capabilities = capabilities,\r\n    cmd = { \"vscode-html-language-server\", \"--stdio\" },\r\n    filetypes = { \"html\" },\r\n    init_options = {\r\n        {\r\n            configurationSection = { \"html\", \"css\", \"javascript\" },\r\n            embeddedLanguages = {\r\n                css = true,\r\n                javascript = true\r\n            },\r\n            provideFormatter = true\r\n        }\r\n    },\r\n    single_file_support = true,\r\n}\r\n```\r\n\r\nwould be nice if some body could help me out and not close this cause of a duplicate as i mentioned in the beginning i tried the things the other issues mentioned.\n\n### Neovim version\n\nNVIM v0.9.4\r\nBuild type: RelWithDebInfo\r\nLuaJIT 2.1.1696883897\n\n### Nvim-lspconfig version\n\n_No response_\n\n### Operating system and version\n\nWindows 11\n\n### Affected language servers\n\nhtml\n\n### Steps to reproduce\n\ninstall the plugins as i have them installed using Lazy\r\ngo into an html document \r\nand check for autocompletion\n\n### Actual behavior\n\nAs I type '<html' and try to autocomplete using the TAB key I just get '<html>' .\n\n### Expected behavior\n\nIt should autocomplete with '<html></html>' the cherry on top would be if my cursor would land inside the tag like >|< here where the | is located.\n\n### Minimal config\n\n```Lua\nI installed html language server using: npm i -g vscode-langservers-extracted\n```\n\n\n### LSP log\n\nhttps://gist.github.com/Dynastray/80a2e4c3346f1ce6c19563893411841a",
    "closed_at": "2023-12-13T14:00:27Z",
    "comment_data": [
        {
            "author_association": "NONE",
            "body": "Closed due to inactivity",
            "created_at": "2023-12-13T14:00:19Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2912#issuecomment-1853972597",
            "id": 1853972597,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2912",
            "node_id": "IC_kwDODTQC185ugWB1",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 1,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1853972597/reactions"
            },
            "updated_at": "2023-12-13T14:00:19Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1853972597",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/81412931?v=4",
                "events_url": "https://api.github.com/users/Dynastray/events{/privacy}",
                "followers_url": "https://api.github.com/users/Dynastray/followers",
                "following_url": "https://api.github.com/users/Dynastray/following{/other_user}",
                "gists_url": "https://api.github.com/users/Dynastray/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Dynastray",
                "id": 81412931,
                "login": "Dynastray",
                "node_id": "MDQ6VXNlcjgxNDEyOTMx",
                "organizations_url": "https://api.github.com/users/Dynastray/orgs",
                "received_events_url": "https://api.github.com/users/Dynastray/received_events",
                "repos_url": "https://api.github.com/users/Dynastray/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Dynastray/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Dynastray/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Dynastray"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2912/comments",
    "created_at": "2023-11-24T08:19:24Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2912/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2912",
    "id": 2009297590,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "Something isn't working",
            "id": 1674892761,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxNjc0ODkyNzYx",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2912/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDODTQC1853w3K2",
    "number": 2912,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2912/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "closed",
    "state_reason": "not_planned",
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2912/timeline",
    "title": "HTML autocomplete not working with snippet enabled",
    "updated_at": "2023-12-13T14:00:27Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2912",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/81412931?v=4",
        "events_url": "https://api.github.com/users/Dynastray/events{/privacy}",
        "followers_url": "https://api.github.com/users/Dynastray/followers",
        "following_url": "https://api.github.com/users/Dynastray/following{/other_user}",
        "gists_url": "https://api.github.com/users/Dynastray/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Dynastray",
        "id": 81412931,
        "login": "Dynastray",
        "node_id": "MDQ6VXNlcjgxNDEyOTMx",
        "organizations_url": "https://api.github.com/users/Dynastray/orgs",
        "received_events_url": "https://api.github.com/users/Dynastray/received_events",
        "repos_url": "https://api.github.com/users/Dynastray/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Dynastray/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Dynastray/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Dynastray"
    }
}