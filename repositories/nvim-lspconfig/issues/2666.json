{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Description\n\nThe manual says (https://neovim.io/doc/user/insert.html#ins-completion-menu):\r\n\r\n> Only part of a match has been inserted and characters were typed or the\r\n   backspace key was used.  The list of matches was then adjusted for what is\r\n   in front of the cursor.\r\n\r\nI tested this with `<C-x><C-n>`: backspacing adjust the completion options.\r\n\r\nHowever, when I use nvim-lspconfig completion (`vim.lsp.omnifunc`) and use the backspace, the completion menu disappears and I have to trigger it manually again. I would expect the menu to adjust the shown completions instead of disappearing. \n\n### Neovim version\n\nNVIM v0.9.1\r\nBuild type: Release\r\nLuaJIT 2.1.0-beta3\n\n### Nvim-lspconfig version\n\n1028360e0f2f724d93e876df3d22f63c1acd6ff9\n\n### Operating system and version\n\nmacOS 13.4\n\n### Affected language servers\n\ngo\n\n### Steps to reproduce\n\n1. install lsp-config\r\n2. open omnifunc completion (<C-x><C-o>)\r\n3. use backspace\n\n### Actual behavior\n\npopup closes\n\n### Expected behavior\n\nNumber of suggestions would adjust.\n\n### Minimal config\n\n```Lua\nlocal on_windows = vim.loop.os_uname().version:match 'Windows'\r\n\r\nlocal function join_paths(...)\r\n  local path_sep = on_windows and '\\\\' or '/'\r\n  local result = table.concat({ ... }, path_sep)\r\n  return result\r\nend\r\n\r\nvim.cmd [[set runtimepath=$VIMRUNTIME]]\r\n\r\nlocal temp_dir = vim.loop.os_getenv 'TEMP' or '/tmp'\r\n\r\nvim.cmd('set packpath=' .. join_paths(temp_dir, 'nvim', 'site'))\r\n\r\nlocal package_root = join_paths(temp_dir, 'nvim', 'site', 'pack')\r\nlocal lspconfig_path = join_paths(package_root, 'test', 'start', 'nvim-lspconfig')\r\n\r\nif vim.fn.isdirectory(lspconfig_path) ~= 1 then\r\n  vim.fn.system { 'git', 'clone', 'https://github.com/neovim/nvim-lspconfig', lspconfig_path }\r\nend\r\n\r\nvim.lsp.set_log_level 'trace'\r\nrequire('vim.lsp.log').set_format_func(vim.inspect)\r\nlocal nvim_lsp = require 'lspconfig'\r\nlocal on_attach = function(_, bufnr)\r\n  local function buf_set_option(...)\r\n    vim.api.nvim_buf_set_option(bufnr, ...)\r\n  end\r\n\r\n  buf_set_option('omnifunc', 'v:lua.vim.lsp.omnifunc')\r\n\r\n  -- Mappings.\r\n  local opts = { buffer = bufnr, noremap = true, silent = true }\r\n  vim.keymap.set('n', 'gD', vim.lsp.buf.declaration, opts)\r\n  vim.keymap.set('n', 'gd', vim.lsp.buf.definition, opts)\r\n  vim.keymap.set('n', 'K', vim.lsp.buf.hover, opts)\r\n  vim.keymap.set('n', 'gi', vim.lsp.buf.implementation, opts)\r\n  vim.keymap.set('n', '<C-k>', vim.lsp.buf.signature_help, opts)\r\n  vim.keymap.set('n', '<space>wa', vim.lsp.buf.add_workspace_folder, opts)\r\n  vim.keymap.set('n', '<space>wr', vim.lsp.buf.remove_workspace_folder, opts)\r\n  vim.keymap.set('n', '<space>wl', function()\r\n    print(vim.inspect(vim.lsp.buf.list_workspace_folders()))\r\n  end, opts)\r\n  vim.keymap.set('n', '<space>D', vim.lsp.buf.type_definition, opts)\r\n  vim.keymap.set('n', '<space>rn', vim.lsp.buf.rename, opts)\r\n  vim.keymap.set('n', 'gr', vim.lsp.buf.references, opts)\r\n  vim.keymap.set('n', '<space>e', vim.diagnostic.open_float, opts)\r\n  vim.keymap.set('n', '[d', vim.diagnostic.goto_prev, opts)\r\n  vim.keymap.set('n', ']d', vim.diagnostic.goto_next, opts)\r\n  vim.keymap.set('n', '<space>q', vim.diagnostic.setloclist, opts)\r\nend\r\n\r\n-- Add the server that troubles you here\r\nlocal name = 'pyright'\r\nlocal cmd = { 'pyright-langserver', '--stdio' } -- needed for elixirls, lua_ls, omnisharp\r\nif not name then\r\n  print 'You have not defined a server name, please edit minimal_init.lua'\r\nend\r\nif not nvim_lsp[name].document_config.default_config.cmd and not cmd then\r\n  print [[You have not defined a server default cmd for a server\r\n    that requires it please edit minimal_init.lua]]\r\nend\r\n\r\nnvim_lsp[name].setup {\r\n  cmd = cmd,\r\n  on_attach = on_attach,\r\n}\r\n\r\nprint [[You can find your log at $HOME/.cache/nvim/lsp.log. Please paste in a github issue under a details tag as described in the issue template.]]\n```\n\n\n### LSP log\n\n-",
    "closed_at": "2023-06-11T23:01:57Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "This repo is just a collection of configs, it's not a place to report issues with Nvim.\r\n\r\nTry https://vi.stackexchange.com for questions about usage and configuration.\r\n",
            "created_at": "2023-06-11T23:01:57Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2666#issuecomment-1586367759",
            "id": 1586367759,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2666",
            "node_id": "IC_kwDODTQC185ejg0P",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1586367759/reactions"
            },
            "updated_at": "2023-06-11T23:01:57Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1586367759",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        }
    ],
    "comments": 1,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2666/comments",
    "created_at": "2023-06-10T21:59:54Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2666/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2666",
    "id": 1751134332,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "Something isn't working",
            "id": 1674892761,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxNjc0ODkyNzYx",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2666/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDODTQC185oYDB8",
    "number": 2666,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2666/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2666/timeline",
    "title": "Backspace + popupmenu-completion doesn't work as neovim help states",
    "updated_at": "2023-06-11T23:01:57Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2666",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/3979?v=4",
        "events_url": "https://api.github.com/users/LeonB/events{/privacy}",
        "followers_url": "https://api.github.com/users/LeonB/followers",
        "following_url": "https://api.github.com/users/LeonB/following{/other_user}",
        "gists_url": "https://api.github.com/users/LeonB/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/LeonB",
        "id": 3979,
        "login": "LeonB",
        "node_id": "MDQ6VXNlcjM5Nzk=",
        "organizations_url": "https://api.github.com/users/LeonB/orgs",
        "received_events_url": "https://api.github.com/users/LeonB/received_events",
        "repos_url": "https://api.github.com/users/LeonB/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/LeonB/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/LeonB/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/LeonB"
    }
}