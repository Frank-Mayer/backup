{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Description\n\nMy vue files aren't being formatted and :LSPLog produces the following warnings:\r\n\r\n[START][2023-11-28 10:41:09] LSP logging initiated\r\n**[WARN][2023-11-28 10:41:09] ...lsp/handlers.lua:537\t\"No typescript found, vue-language-server will not work.\"**\r\n[WARN][2023-11-28 10:41:09] ...lsp/handlers.lua:137\t\"The language server volar triggers a registerCapability handler despite dynamicRegistration set to false. Report upstream, this warning is harmless\"\r\n\r\nI'm posting this here because I can't find documentation on this error anywhere so I'm not sure whether it's a configuration issue, lsp-client problem or something to do with vue-language-server itself. \n\n### Neovim version\n\nNVIM v0.9.2\r\nBuild type: Release\r\nLuaJIT 2.1.1692716794\r\n\n\n### Nvim-lspconfig version\n\n_No response_\n\n### Operating system and version\n\npython:3.11.5-bookworm (docker image)\n\n### Affected language servers\n\nvolar\n\n### Steps to reproduce\n\nI installed @vue/language-server@1.8.22 globally using\r\n\r\n`npm -g install @vue/language-server@1.8.22\r\n`\r\n\r\nThen I opened a simple test file `nvim test.js` with some formatting issues:\r\n```\r\nexport const foo = {\r\n   bar : 2\r\n\r\n   ,asd : 3\r\n}\r\n\r\n```\n\n### Actual behavior\n\nNo text is formatted when opening and saving simple javascript or vue files. I see the following in the logs:\r\n\r\n[START][2023-11-28 11:20:18] LSP logging initiated                                                                                                                                                                                                                                                                          [WARN][2023-11-28 11:20:18] ...lsp/handlers.lua:537     \"No typescript found, vue-language-server will not work.\"                                                                                                                                                                                                           [WARN][2023-11-28 11:20:18] ...lsp/handlers.lua:137     \"The language server volar triggers a registerCapability handler despite dynamicRegistration set to false. Report upstream, this warning is harmless\"\n\n### Expected behavior\n\nI'd expect neovim to format the file when I save it.\n\n### Minimal config\n\n```Lua\nvim.opt.rtp:prepend(\"/root/.config/lazy/lazy.nvim\")\r\n\r\nrequire(\"lazy\").setup({\r\n    {\r\n        'neovim/nvim-lspconfig',\r\n        dependencies = { \"hrsh7th/cmp-nvim-lsp\", \"hrsh7th/nvim-cmp\" },\r\n        tag = 'v0.1.6',\r\n        config = function()\r\n            local capabilities = vim.lsp.protocol.make_client_capabilities()\r\n            capabilities.textDocument.completion.completionItem.snippetSupport = true\r\n            local config = require('lspconfig')\r\n\r\n            local cmp_capabilities = require(\"cmp_nvim_lsp\").default_capabilities(capabilities)\r\n\r\n            local setup = {\r\n                -- pylsp = {\r\n                --     settings = {\r\n                --         pylsp = {\r\n                --             plugins = {\r\n                --                 pycodestyle = { maxLineLength = 88 },\r\n                --                 black = { enabled = true, line_length = 88 }\r\n                --             }\r\n                --         }\r\n                --     }\r\n                -- },\r\n                -- lua_ls = { settings = { Lua = { diagnostics = { globals = { 'vim' } } } } },\r\n                -- bashls = {},\r\n                -- html = {},\r\n                volar = {\r\n                    settings = {\r\n                        html = {\r\n                            format = {\r\n                                wrapAttributes = 'force-expand-multiline'\r\n                            }\r\n                        }\r\n                    },\r\n                    filetypes = { 'typescript', 'javascript', 'javascriptreact', 'typescriptreact', 'vue', 'json' },\r\n                    init_options = {\r\n                    }\r\n                },\r\n            }\r\n\r\n            for k, v in pairs(setup) do\r\n                v['init_options'] = v['init_options'] or { usePlaceholders = true }\r\n                v['root_dir'] = config.util.find_git_ancestor\r\n                v['capabilities'] = cmp_capabilities\r\n                config[k].setup(v)\r\n            end\r\n\r\n            vim.cmd [[autocmd BufWritePre * lua vim.lsp.buf.format({timeout_ms=10000})]]\r\n        end\r\n    },\r\n})\n```\n\n\n### LSP log\n\nhttps://gist.github.com/armanschwarz/35a3363c2884ab7382128db7e11f5447",
    "closed_at": "2023-11-28T01:05:50Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "Did you install typescript?\r\n\r\n    npm -g install typescript",
            "created_at": "2023-11-28T00:52:51Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2917#issuecomment-1828887551",
            "id": 1828887551,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2917",
            "node_id": "IC_kwDODTQC185tApv_",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1828887551/reactions"
            },
            "updated_at": "2023-11-28T00:52:51Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1828887551",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "> Did you install typescript?\r\n> \r\n> ```\r\n> npm -g install typescript\r\n> ```\r\n\r\nNo I hadn't. This fixed the issue, although in my case I also needed to point volar to the typescript path:\r\n\r\n```\r\n                    init_options = {\r\n                        typescript = {\r\n                            tsdk = '/usr/local/lib/node_modules/typescript/lib/'\r\n                        }\r\n                    }\r\n```\r\n\r\nThanks for that :)",
            "created_at": "2023-11-28T01:05:50Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2917#issuecomment-1828897751",
            "id": 1828897751,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2917",
            "node_id": "IC_kwDODTQC185tAsPX",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 1,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1828897751/reactions"
            },
            "updated_at": "2023-11-28T01:05:50Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1828897751",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/8016089?v=4",
                "events_url": "https://api.github.com/users/armanschwarz/events{/privacy}",
                "followers_url": "https://api.github.com/users/armanschwarz/followers",
                "following_url": "https://api.github.com/users/armanschwarz/following{/other_user}",
                "gists_url": "https://api.github.com/users/armanschwarz/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/armanschwarz",
                "id": 8016089,
                "login": "armanschwarz",
                "node_id": "MDQ6VXNlcjgwMTYwODk=",
                "organizations_url": "https://api.github.com/users/armanschwarz/orgs",
                "received_events_url": "https://api.github.com/users/armanschwarz/received_events",
                "repos_url": "https://api.github.com/users/armanschwarz/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/armanschwarz/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/armanschwarz/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/armanschwarz"
            }
        }
    ],
    "comments": 2,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2917/comments",
    "created_at": "2023-11-28T00:44:19Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2917/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/2917",
    "id": 2013382720,
    "labels": [
        {
            "color": "e6e6e6",
            "default": true,
            "description": "Further information is requested",
            "id": 1674892775,
            "name": "question",
            "node_id": "MDU6TGFiZWwxNjc0ODkyNzc1",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels/question"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2917/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDODTQC1854AchA",
    "number": 2917,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2917/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2917/timeline",
    "title": "\"No typescript found, vue-language-server will not work.\"",
    "updated_at": "2023-11-28T01:13:42Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/2917",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/8016089?v=4",
        "events_url": "https://api.github.com/users/armanschwarz/events{/privacy}",
        "followers_url": "https://api.github.com/users/armanschwarz/followers",
        "following_url": "https://api.github.com/users/armanschwarz/following{/other_user}",
        "gists_url": "https://api.github.com/users/armanschwarz/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/armanschwarz",
        "id": 8016089,
        "login": "armanschwarz",
        "node_id": "MDQ6VXNlcjgwMTYwODk=",
        "organizations_url": "https://api.github.com/users/armanschwarz/orgs",
        "received_events_url": "https://api.github.com/users/armanschwarz/received_events",
        "repos_url": "https://api.github.com/users/armanschwarz/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/armanschwarz/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/armanschwarz/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/armanschwarz"
    }
}