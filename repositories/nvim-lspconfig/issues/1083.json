{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "body": "Some initial discussion at #1059.\r\n\r\nCurrently the plan is to create a new repo under `nvim-lua` that will be a place to put per-config tests to test basic LSP integration of that language, at least as far as implemented by its `lua/lspconfig/*.lua` file.\r\n\r\n@mjlbach WIP prototype at [rish987/nvim-lspconfig-test](https://github.com/rish987/nvim-lspconfig-test). At the moment, what the workflow does is, for each language server in the `tests/` directory:\r\n\r\n1. runs the `test.sh` file\r\n2. if: \r\n  -- error and no existing issue, automatically creates one titled for that specific language server\r\n  -- error and existing issue, does nothing\r\n  -- no error and existing issue, automatically closes it\r\n  -- no error and no existing issue, does nothing\r\n\r\nWill make a few more improvements add ACTUAL tests for `leanls`/`lean3ls` soon (likely tommorrow, in fact)! ",
    "closed_at": "2024-09-20T11:49:01Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
        "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
        "followers_url": "https://api.github.com/users/justinmk/followers",
        "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
        "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/justinmk",
        "id": 1359421,
        "login": "justinmk",
        "node_id": "MDQ6VXNlcjEzNTk0MjE=",
        "organizations_url": "https://api.github.com/users/justinmk/orgs",
        "received_events_url": "https://api.github.com/users/justinmk/received_events",
        "repos_url": "https://api.github.com/users/justinmk/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/justinmk"
    },
    "comment_data": [
        {
            "author_association": "CONTRIBUTOR",
            "body": "(CC: @Julian)",
            "created_at": "2021-07-17T03:02:07Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1083#issuecomment-881806303",
            "id": 881806303,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083",
            "node_id": "IC_kwDODTQC1840j0vf",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/881806303/reactions"
            },
            "updated_at": "2021-07-17T03:02:07Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/881806303",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/14950617?v=4",
                "events_url": "https://api.github.com/users/rish987/events{/privacy}",
                "followers_url": "https://api.github.com/users/rish987/followers",
                "following_url": "https://api.github.com/users/rish987/following{/other_user}",
                "gists_url": "https://api.github.com/users/rish987/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rish987",
                "id": 14950617,
                "login": "rish987",
                "node_id": "MDQ6VXNlcjE0OTUwNjE3",
                "organizations_url": "https://api.github.com/users/rish987/orgs",
                "received_events_url": "https://api.github.com/users/rish987/received_events",
                "repos_url": "https://api.github.com/users/rish987/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rish987/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rish987/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rish987"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Alright it should be ready for a detailed review at this point! @ [rish987/nvim-lspconfig-test](https://github.com/rish987/nvim-lspconfig-test). I've added you both as collaborators, feel free to leave comments/make any changes as you see fit. Also feel free to test out the automatic issue creation/closing by causing/fixing errors (e.g. rish987/nvim-lspconfig-test@7646a40).",
            "created_at": "2021-07-20T23:29:57Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1083#issuecomment-883771544",
            "id": 883771544,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083",
            "node_id": "IC_kwDODTQC1840rUiY",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/883771544/reactions"
            },
            "updated_at": "2021-07-21T02:25:43Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/883771544",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/14950617?v=4",
                "events_url": "https://api.github.com/users/rish987/events{/privacy}",
                "followers_url": "https://api.github.com/users/rish987/followers",
                "following_url": "https://api.github.com/users/rish987/following{/other_user}",
                "gists_url": "https://api.github.com/users/rish987/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rish987",
                "id": 14950617,
                "login": "rish987",
                "node_id": "MDQ6VXNlcjE0OTUwNjE3",
                "organizations_url": "https://api.github.com/users/rish987/orgs",
                "received_events_url": "https://api.github.com/users/rish987/received_events",
                "repos_url": "https://api.github.com/users/rish987/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rish987/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rish987/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rish987"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I've really been wanting to get this done for https://github.com/williamboman/nvim-lsp-installer. I think we should join forces on this, where nvim-lsp-installer could fill in the gap and shoulder the responsibility of server installation/management.\r\n\r\nI've thought of either having super rudimentary tests that only uses neovim as a scripting platform to run the downloads, but then the tests would really just check the existence of an executable. I think what would be even better is acceptance tests that would run in a neovim instance end-to-end, and make sure that servers actually start properly and are responding reliably to client requests. I imagine this could either be achieved via a headless neovim instance, or if that's not possible through some containerised instance (through a Puppeteer-like API).",
            "created_at": "2021-11-28T23:14:30Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1083#issuecomment-981171228",
            "id": 981171228,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083",
            "node_id": "IC_kwDODTQC1846e3wc",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/981171228/reactions"
            },
            "updated_at": "2021-11-28T23:20:04Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/981171228",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6705160?v=4",
                "events_url": "https://api.github.com/users/williamboman/events{/privacy}",
                "followers_url": "https://api.github.com/users/williamboman/followers",
                "following_url": "https://api.github.com/users/williamboman/following{/other_user}",
                "gists_url": "https://api.github.com/users/williamboman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/williamboman",
                "id": 6705160,
                "login": "williamboman",
                "node_id": "MDQ6VXNlcjY3MDUxNjA=",
                "organizations_url": "https://api.github.com/users/williamboman/orgs",
                "received_events_url": "https://api.github.com/users/williamboman/received_events",
                "repos_url": "https://api.github.com/users/williamboman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/williamboman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/williamboman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/williamboman"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "The issue is tests might be extremely annoying to maintain,as if we checked for specific responses from the language server this would be heavily tied to the version of the server itself. We could pin the version of the language servers to mitigate this but that semi-defeats the point. I guess I would recommend a pinned + non-pinned tests so we know if the regression is from lspconfig or from the server.",
            "created_at": "2021-11-29T00:13:20Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1083#issuecomment-981183705",
            "id": 981183705,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083",
            "node_id": "IC_kwDODTQC1846e6zZ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/981183705/reactions"
            },
            "updated_at": "2021-11-29T00:13:20Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/981183705",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13316262?v=4",
                "events_url": "https://api.github.com/users/mjlbach/events{/privacy}",
                "followers_url": "https://api.github.com/users/mjlbach/followers",
                "following_url": "https://api.github.com/users/mjlbach/following{/other_user}",
                "gists_url": "https://api.github.com/users/mjlbach/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mjlbach",
                "id": 13316262,
                "login": "mjlbach",
                "node_id": "MDQ6VXNlcjEzMzE2MjYy",
                "organizations_url": "https://api.github.com/users/mjlbach/orgs",
                "received_events_url": "https://api.github.com/users/mjlbach/received_events",
                "repos_url": "https://api.github.com/users/mjlbach/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mjlbach/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mjlbach/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mjlbach"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Ah that's good to know, I'm not very familiar with those details. I was actually thinking testing further out in the stack, like user acceptance testing. The interfaces that would be involved would exclusively be core neovim APIs (like buffer contents, cursor position, etc.). I think if combined with a BDD-approach, it could be a pretty low maintenance effort (mostly a one-time cost initially).\r\n\r\n```gherkin\r\nFeature: tsserver\r\n\r\n  Scenario: Go to a buffer-local definition\r\n    Given a file \"index.ts\" with the contents\r\n        \"\"\"\r\nconst my_number = 5\r\n\r\nconsole.log(my_number)\r\n        \"\"\"\r\n    And a cursor position of \"3:13\"\r\n    When I go to definition\r\n    Then cursor position should be \"1:7\"\r\n```\r\n\r\nThe above could be further parameterized to avoid having to individually write these for each server. Maybe the resolved client capabilities could govern which features should be tested (have to bear in mind dynamic capability registration though). Also, maybe treesitter could be used to construct ASTs that then  are translated into a given source language, to be used as fixture files in tests.\r\n\r\nI think a good start would be to just keep it simple and expand from that. I vaguely know there's the concept of \"initializing a server\" that is part of the spec - maybe that could be the first target to test, that each server successfully initialize?",
            "created_at": "2021-11-29T09:43:11Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1083#issuecomment-981459010",
            "id": 981459010,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083",
            "node_id": "IC_kwDODTQC1846f-BC",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/981459010/reactions"
            },
            "updated_at": "2021-11-29T09:45:13Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/981459010",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6705160?v=4",
                "events_url": "https://api.github.com/users/williamboman/events{/privacy}",
                "followers_url": "https://api.github.com/users/williamboman/followers",
                "following_url": "https://api.github.com/users/williamboman/following{/other_user}",
                "gists_url": "https://api.github.com/users/williamboman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/williamboman",
                "id": 6705160,
                "login": "williamboman",
                "node_id": "MDQ6VXNlcjY3MDUxNjA=",
                "organizations_url": "https://api.github.com/users/williamboman/orgs",
                "received_events_url": "https://api.github.com/users/williamboman/received_events",
                "repos_url": "https://api.github.com/users/williamboman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/williamboman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/williamboman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/williamboman"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I don't understand how that is different than the extensive testing we already do of the built in client in core.",
            "created_at": "2021-11-29T11:54:42Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1083#issuecomment-981564573",
            "id": 981564573,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083",
            "node_id": "IC_kwDODTQC1846gXyd",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/981564573/reactions"
            },
            "updated_at": "2021-11-29T11:54:42Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/981564573",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13316262?v=4",
                "events_url": "https://api.github.com/users/mjlbach/events{/privacy}",
                "followers_url": "https://api.github.com/users/mjlbach/followers",
                "following_url": "https://api.github.com/users/mjlbach/following{/other_user}",
                "gists_url": "https://api.github.com/users/mjlbach/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mjlbach",
                "id": 13316262,
                "login": "mjlbach",
                "node_id": "MDQ6VXNlcjEzMzE2MjYy",
                "organizations_url": "https://api.github.com/users/mjlbach/orgs",
                "received_events_url": "https://api.github.com/users/mjlbach/received_events",
                "repos_url": "https://api.github.com/users/mjlbach/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mjlbach/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mjlbach/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mjlbach"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Well yes and no. I'm not too familiar with what those tests do, but I imagine they're primarily testing the client implementation and spec compliance? What I'm after is testing and verifying that each of the server configurations provided by lspconfig actually work in an acceptable manner, and as a precursor to that that the installation in nvim-lsp-installer is correct. Sort of like system integration tests",
            "created_at": "2021-11-29T17:41:21Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1083#issuecomment-981863695",
            "id": 981863695,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083",
            "node_id": "IC_kwDODTQC1846hg0P",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/981863695/reactions"
            },
            "updated_at": "2021-11-29T17:41:55Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/981863695",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6705160?v=4",
                "events_url": "https://api.github.com/users/williamboman/events{/privacy}",
                "followers_url": "https://api.github.com/users/williamboman/followers",
                "following_url": "https://api.github.com/users/williamboman/following{/other_user}",
                "gists_url": "https://api.github.com/users/williamboman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/williamboman",
                "id": 6705160,
                "login": "williamboman",
                "node_id": "MDQ6VXNlcjY3MDUxNjA=",
                "organizations_url": "https://api.github.com/users/williamboman/orgs",
                "received_events_url": "https://api.github.com/users/williamboman/received_events",
                "repos_url": "https://api.github.com/users/williamboman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/williamboman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/williamboman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/williamboman"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I guess I'm confused because that doesn't avoid the issue of needing to hardcode the expected response per server version regardless of how we parameterize/standardize the request.",
            "created_at": "2021-11-29T17:44:14Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1083#issuecomment-981865934",
            "id": 981865934,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083",
            "node_id": "IC_kwDODTQC1846hhXO",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/981865934/reactions"
            },
            "updated_at": "2021-11-29T17:44:14Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/981865934",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13316262?v=4",
                "events_url": "https://api.github.com/users/mjlbach/events{/privacy}",
                "followers_url": "https://api.github.com/users/mjlbach/followers",
                "following_url": "https://api.github.com/users/mjlbach/following{/other_user}",
                "gists_url": "https://api.github.com/users/mjlbach/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mjlbach",
                "id": 13316262,
                "login": "mjlbach",
                "node_id": "MDQ6VXNlcjEzMzE2MjYy",
                "organizations_url": "https://api.github.com/users/mjlbach/orgs",
                "received_events_url": "https://api.github.com/users/mjlbach/received_events",
                "repos_url": "https://api.github.com/users/mjlbach/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mjlbach/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mjlbach/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mjlbach"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I'd say that depends on what you're inspecting and asserting on. If you take the perspective of an end-user, you have (rightfully) no idea what the server is responding to the neovim client in the background, or perhaps even that there even is an LSP server running. All you know is whether go to definition, rename, find references, etc. is working. Those are all user actions that have a pretty clear motive and an expected result. Building out a test scenario that performs those user actions and observes that expected behavior takes place could prove pretty useful I think, for many reasons.",
            "created_at": "2021-11-29T17:51:05Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1083#issuecomment-981871112",
            "id": 981871112,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083",
            "node_id": "IC_kwDODTQC1846hioI",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/981871112/reactions"
            },
            "updated_at": "2021-11-29T17:57:36Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/981871112",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6705160?v=4",
                "events_url": "https://api.github.com/users/williamboman/events{/privacy}",
                "followers_url": "https://api.github.com/users/williamboman/followers",
                "following_url": "https://api.github.com/users/williamboman/following{/other_user}",
                "gists_url": "https://api.github.com/users/williamboman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/williamboman",
                "id": 6705160,
                "login": "williamboman",
                "node_id": "MDQ6VXNlcjY3MDUxNjA=",
                "organizations_url": "https://api.github.com/users/williamboman/orgs",
                "received_events_url": "https://api.github.com/users/williamboman/received_events",
                "repos_url": "https://api.github.com/users/williamboman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/williamboman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/williamboman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/williamboman"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "Hi there, thanks for your interest! I've just recently started to get back into testing. In the experimental repo [rish987/nvim-lspconfig-test](https://github.com/rish987/nvim-lspconfig-test) I have the requirement to \"formalize\" the install steps of `nvim-lspconfig` for each server in the form of a BASH script, but your plugin seems to be much more in the right spirit of neovim. So we can start by replacing that layer with `nvim-lsp-installer`.\r\n\r\n> I think what would be even better is acceptance tests that would run in a neovim instance end-to-end, and make sure that servers actually start properly and are responding reliably to client requests.\r\n\r\nI've already added these for Lean 3 and 4 servers in that repo, see for example [tests/leanls/tests/lsp_spec.lua](https://github.com/rish987/nvim-lspconfig-test/blob/master/tests/leanls/tests/lsp_spec.lua). It tests that hover and definition requests and client creation work as they should on Lean files in the different kind of project structures we're supposed to support. \r\n\r\n> The issue is tests might be extremely annoying to maintain,as if we checked for specific responses from the language server this would be heavily tied to the version of the server itself.\r\n\r\nThis problem could be minimized if we're careful about how much we're testing. For example it that test file above I just check for a small portion of the hover response that I would expect never to change between versions.\r\n\r\n>  I guess I would recommend a pinned + non-pinned tests so we know if the regression is from lspconfig or from the server.\r\n\r\nYes I think this is something that will be necessary as well. When a PR comes in for new tests for a server we could also require that they provide an `nvim-lsp-installer` script for a fixed version, and test both in CI.\r\n\r\n> Maybe the resolved client capabilities could govern which features should be tested (have to bear in mind dynamic capability registration though). \r\n\r\nWe could separate tests by file (e.g. definition, hover, etc.) and have a helper that errors if the capability corresponding to that file isn't supported by the server. But to start I think we should keep it simple and assume fixed capabilities across server versions.\r\n\r\n> Also, maybe treesitter could be used to construct ASTs that then are translated into a given source language, to be used as fixture files in tests.\r\n\r\nThis sounds very interesting and ambitious -- has it been done before? I'd imagine we'd need to unify parts of treesitter grammars between languages to make this happen. And to do so we'd probably initially need to have some protocol/standard that everyone can agree on. (I don't know enough about treesitter yet to know whether this has already been done...) But I think we'll have to start out by just writing tests manually.",
            "created_at": "2021-11-30T04:35:47Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1083#issuecomment-982277918",
            "id": 982277918,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083",
            "node_id": "IC_kwDODTQC1846jF8e",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 1,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/982277918/reactions"
            },
            "updated_at": "2021-11-30T04:43:49Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/982277918",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/14950617?v=4",
                "events_url": "https://api.github.com/users/rish987/events{/privacy}",
                "followers_url": "https://api.github.com/users/rish987/followers",
                "following_url": "https://api.github.com/users/rish987/following{/other_user}",
                "gists_url": "https://api.github.com/users/rish987/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/rish987",
                "id": 14950617,
                "login": "rish987",
                "node_id": "MDQ6VXNlcjE0OTUwNjE3",
                "organizations_url": "https://api.github.com/users/rish987/orgs",
                "received_events_url": "https://api.github.com/users/rish987/received_events",
                "repos_url": "https://api.github.com/users/rish987/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/rish987/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/rish987/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/rish987"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "I'd probably rather just write a dockerfile per server than rely on nvim-lsp-installer as we can pin the system packages as well (and we need to set up system dependencies anyways). I kinda started this in https://github.com/nvim-lsp/try.nvim. We could share the rest of the testing infrastructure though.",
            "created_at": "2021-11-30T04:38:29Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1083#issuecomment-982278950",
            "id": 982278950,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083",
            "node_id": "IC_kwDODTQC1846jGMm",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/982278950/reactions"
            },
            "updated_at": "2021-11-30T04:38:29Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/982278950",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/13316262?v=4",
                "events_url": "https://api.github.com/users/mjlbach/events{/privacy}",
                "followers_url": "https://api.github.com/users/mjlbach/followers",
                "following_url": "https://api.github.com/users/mjlbach/following{/other_user}",
                "gists_url": "https://api.github.com/users/mjlbach/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/mjlbach",
                "id": 13316262,
                "login": "mjlbach",
                "node_id": "MDQ6VXNlcjEzMzE2MjYy",
                "organizations_url": "https://api.github.com/users/mjlbach/orgs",
                "received_events_url": "https://api.github.com/users/mjlbach/received_events",
                "repos_url": "https://api.github.com/users/mjlbach/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/mjlbach/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mjlbach/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/mjlbach"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "> This sounds very interesting and ambitious -- has it been done before? I'd imagine we'd need to unify parts of treesitter grammars between languages to make this happen. And to do so we'd probably initially need to have some protocol/standard that everyone can agree on. (I don't know enough about treesitter yet to know whether this has already been done...) But I think we'll have to start out by just writing tests manually.\r\n\r\nThis was just a vague idea I came up with with not much forethought to be honest. There probably could be benefits of taking such an approach, but the complexity would skyrocket. Starting small and iterating fast is the way to go for sure :+1:\r\n\r\n> I'd probably rather just write a dockerfile per server than rely on nvim-lsp-installer as we can pin the system packages as well (and we need to set up system dependencies anyways). I kinda started this in https://github.com/nvim-lsp/try.nvim. We could share the rest of the testing infrastructure though.\r\n\r\nWith the risk of me just talking about vague, unmaterialized, ideas - I've had the idea of further decoupling the different components in nvim-lsp-installer, going from having installers represented as composed Lua functions that spawn processes (or other system operations) on the host system to instead providing static descriptions of system requirements and the install steps. That'd allow for a number of different use cases, like translating it to platform-specific jobs that run on the host system, or compiling to a different format such as a Dockerfile. Having access to these static descriptors would also improve the quality and maintainability of certain plugin-specific GUI features (and probably a nicer interop with plugins like distant.nvim).\r\n\r\nI'll see if I can contribute anything to what you've gotten started with @rish987. I might also just start by targeting some of the problems I'd like to solve for nvim-lsp-installer first, and then we can circle back at a later time and re-evaluate",
            "created_at": "2021-11-30T20:13:18Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1083#issuecomment-982983048",
            "id": 982983048,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083",
            "node_id": "IC_kwDODTQC1846lyGI",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 1,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 1,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/982983048/reactions"
            },
            "updated_at": "2021-11-30T20:14:14Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/982983048",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6705160?v=4",
                "events_url": "https://api.github.com/users/williamboman/events{/privacy}",
                "followers_url": "https://api.github.com/users/williamboman/followers",
                "following_url": "https://api.github.com/users/williamboman/following{/other_user}",
                "gists_url": "https://api.github.com/users/williamboman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/williamboman",
                "id": 6705160,
                "login": "williamboman",
                "node_id": "MDQ6VXNlcjY3MDUxNjA=",
                "organizations_url": "https://api.github.com/users/williamboman/orgs",
                "received_events_url": "https://api.github.com/users/williamboman/received_events",
                "repos_url": "https://api.github.com/users/williamboman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/williamboman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/williamboman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/williamboman"
            }
        },
        {
            "author_association": "CONTRIBUTOR",
            "body": "See https://github.com/rish987/nvim-lspconfig-test/pull/57 for a working POC.",
            "created_at": "2021-12-10T10:49:14Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1083#issuecomment-990857781",
            "id": 990857781,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083",
            "node_id": "IC_kwDODTQC1847D0o1",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/990857781/reactions"
            },
            "updated_at": "2021-12-10T10:49:14Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/990857781",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/6705160?v=4",
                "events_url": "https://api.github.com/users/williamboman/events{/privacy}",
                "followers_url": "https://api.github.com/users/williamboman/followers",
                "following_url": "https://api.github.com/users/williamboman/following{/other_user}",
                "gists_url": "https://api.github.com/users/williamboman/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/williamboman",
                "id": 6705160,
                "login": "williamboman",
                "node_id": "MDQ6VXNlcjY3MDUxNjA=",
                "organizations_url": "https://api.github.com/users/williamboman/orgs",
                "received_events_url": "https://api.github.com/users/williamboman/received_events",
                "repos_url": "https://api.github.com/users/williamboman/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/williamboman/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/williamboman/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/williamboman"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "Seems like https://github.com/williamboman/mason.nvim owns this. \r\n\r\nDefinitely out of scope for this repo, which is just a collection of data, not a project that intends to support every random lsp server.",
            "created_at": "2024-09-20T11:49:02Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1083#issuecomment-2363545177",
            "id": 2363545177,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083",
            "node_id": "IC_kwDODTQC186M4NZZ",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2363545177/reactions"
            },
            "updated_at": "2024-09-20T11:49:02Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2363545177",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        }
    ],
    "comments": 14,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083/comments",
    "created_at": "2021-07-17T02:48:16Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1083",
    "id": 946691707,
    "labels": [],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "MDU6SXNzdWU5NDY2OTE3MDc=",
    "number": 1083,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 2,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 2,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "closed",
    "state_reason": "not_planned",
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083/timeline",
    "title": "Per-config LSP tests",
    "updated_at": "2024-09-20T11:49:02Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1083",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/14950617?v=4",
        "events_url": "https://api.github.com/users/rish987/events{/privacy}",
        "followers_url": "https://api.github.com/users/rish987/followers",
        "following_url": "https://api.github.com/users/rish987/following{/other_user}",
        "gists_url": "https://api.github.com/users/rish987/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/rish987",
        "id": 14950617,
        "login": "rish987",
        "node_id": "MDQ6VXNlcjE0OTUwNjE3",
        "organizations_url": "https://api.github.com/users/rish987/orgs",
        "received_events_url": "https://api.github.com/users/rish987/received_events",
        "repos_url": "https://api.github.com/users/rish987/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/rish987/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rish987/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/rish987"
    }
}