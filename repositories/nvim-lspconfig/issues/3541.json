{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Description\n\nI use sourcekit and xcode build server to swift, the diagnostic is very slowly, but the same lsp server(sourcekit) use vscode is very fast. I feel very obviously between nvim-lspconfig and vscode then the video shows.\n\n**nvim lsp** use sourcekit video **(slowly) (update_in_insert = true)**:\n\nhttps://github.com/user-attachments/assets/71812718-ee19-4d0d-b64b-85a8dcb907df\n\n\n**vscode lsp** use sourcekit video **(fast)**:\n\nhttps://github.com/user-attachments/assets/49ed0375-746c-4f48-b04e-eb1bae29362d\n\n\n\nHere is my config:\n```\nreturn {\n\t'neovim/nvim-lspconfig',\n\tconfig = function()\n\t\tvim.diagnostic.config({\n\t\t\tvirtual_text = true,\n\t\t\tsigns = true,\n\t\t\tupdate_in_insert = true,\n\t\t\tunderline = true,\n\t\t\tseverity_sort = false,\n\t\t\tfloat = true,\n\t\t})\n\n\t\tlocal capabilities = require('cmp_nvim_lsp').default_capabilities()\n\t\tlocal lspconfig = require('lspconfig');\n\n                --...\n                -- other language confg\n                -- ...\n\n\t\tlspconfig.sourcekit.setup {\n\t\t\tcapabilities = capabilities,\n\t\t\tcmd = {\n\t\t\t\t\"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/sourcekit-lsp\",\n\t\t\t},\n\t\t\troot_dir = function(filename, _)\n\t\t\t\tlocal util = require(\"lspconfig.util\")\n\t\t\t\treturn util.root_pattern(\"buildServer.json\")(filename)\n\t\t\t\t\t\tor util.root_pattern(\"*.xcodeproj\", \"*.xcworkspace\")(filename)\n\t\t\t\t\t\tor util.find_git_ancestor(filename)\n\t\t\t\t\t\tor util.root_pattern(\"Package.swift\")(filename)\n\t\t\tend,\n\t\t}\n\n\t\tlocal util = require('lspconfig/util')\n\n\t\tlocal path = util.path\n\n\t\tlocal function get_python_path(workspace)\n\t\t\t-- Use activated virtualenv.\n\t\t\tif vim.env.VIRTUAL_ENV then\n\t\t\t\treturn path.join(vim.env.VIRTUAL_ENV, 'bin', 'python')\n\t\t\tend\n\n\t\t\t-- Find and use virtualenv in workspace directory.\n\t\t\tfor _, pattern in ipairs({ '*', '.*' }) do\n\t\t\t\tlocal match = vim.fn.glob(path.join(workspace, pattern, 'pyvenv.cfg'))\n\t\t\t\tif match ~= '' then\n\t\t\t\t\treturn path.join(path.dirname(match), 'bin', 'python')\n\t\t\t\tend\n\t\t\tend\n\n\t\t\t-- Fallback to system Python.\n\t\t\treturn vim.fn.exepath('python3') or vim.fn.exepath('python') or 'python'\n\t\tend\n\n\t\tlspconfig.pyright.setup({\n\t\t\t-- -- ...\n\t\t\t-- before_init = function(_, config)\n\t\t\t--   config.settings.python.pythonPath = get_python_path(config.root_dir)\n\t\t\t-- end,\n\t\t\ton_init = function(client)\n\t\t\t\tlocal p = get_python_path(client.config.root_dir)\n\n\t\t\t\tprint(p)\n\t\t\t\tclient.config.settings.python.pythonPath = get_python_path(client.config.root_dir)\n\t\t\tend\n\t\t})\n\n\t\tlspconfig.rust_analyzer.setup {}\n\tend\n}\n```\n\nHere is my nvim-lspconfig log(:LspLog) :\n![Image](https://github.com/user-attachments/assets/278682e7-1ced-4ddd-9d28-2495149d06fa)\n\nThe nvim-lsp log shows, the last \"didChange\" time is 59:22, but \"publishDiagnostic\"(empty msg) is 59:24, after 2 seconds ...\n\nBut the vscode lsp logs, show the last\b \"didChange\" and the \"publishDiagnostic empty msg(clear)\" at the same second.\n\nBuy the way I tried to close other plugins such as cmp as the logs show ..., only left lspconfg, but is slowly nether.\n\nFull logs:\n\n[nvim_lsp_swift_log.txt](https://github.com/user-attachments/files/18309190/nvim_lsp_swift_log.txt)\n\n",
    "closed_at": "2025-01-05T06:42:48Z",
    "closed_by": {
        "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
        "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
        "followers_url": "https://api.github.com/users/glepnir/followers",
        "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
        "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/glepnir",
        "id": 41671631,
        "login": "glepnir",
        "node_id": "MDQ6VXNlcjQxNjcxNjMx",
        "organizations_url": "https://api.github.com/users/glepnir/orgs",
        "received_events_url": "https://api.github.com/users/glepnir/received_events",
        "repos_url": "https://api.github.com/users/glepnir/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/glepnir",
        "user_view_type": "public"
    },
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "this can report on neovim core",
            "created_at": "2025-01-05T06:42:48Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3541#issuecomment-2571521894",
            "id": 2571521894,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3541",
            "node_id": "IC_kwDODTQC186ZRk9m",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2571521894/reactions"
            },
            "updated_at": "2025-01-05T06:42:48Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2571521894",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "NONE",
            "body": "> this can report on neovim core\n\n...\n\nNeed me copy and paste to neovim core or ?",
            "created_at": "2025-01-05T08:59:46Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3541#issuecomment-2571552582",
            "id": 2571552582,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3541",
            "node_id": "IC_kwDODTQC186ZRsdG",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2571552582/reactions"
            },
            "updated_at": "2025-01-05T08:59:46Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2571552582",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/16489162?v=4",
                "events_url": "https://api.github.com/users/Napoleon-Jm/events{/privacy}",
                "followers_url": "https://api.github.com/users/Napoleon-Jm/followers",
                "following_url": "https://api.github.com/users/Napoleon-Jm/following{/other_user}",
                "gists_url": "https://api.github.com/users/Napoleon-Jm/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Napoleon-Jm",
                "id": 16489162,
                "login": "Napoleon-Jm",
                "node_id": "MDQ6VXNlcjE2NDg5MTYy",
                "organizations_url": "https://api.github.com/users/Napoleon-Jm/orgs",
                "received_events_url": "https://api.github.com/users/Napoleon-Jm/received_events",
                "repos_url": "https://api.github.com/users/Napoleon-Jm/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Napoleon-Jm/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Napoleon-Jm/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Napoleon-Jm",
                "user_view_type": "public"
            }
        },
        {
            "author_association": "MEMBER",
            "body": "`:help vim.lsp.start` using a minimal config for  reproduce . problem is not in lspconfig",
            "created_at": "2025-01-05T09:06:43Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3541#issuecomment-2571554887",
            "id": 2571554887,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3541",
            "node_id": "IC_kwDODTQC186ZRtBH",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2571554887/reactions"
            },
            "updated_at": "2025-01-05T09:06:43Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/2571554887",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/41671631?v=4",
                "events_url": "https://api.github.com/users/glepnir/events{/privacy}",
                "followers_url": "https://api.github.com/users/glepnir/followers",
                "following_url": "https://api.github.com/users/glepnir/following{/other_user}",
                "gists_url": "https://api.github.com/users/glepnir/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/glepnir",
                "id": 41671631,
                "login": "glepnir",
                "node_id": "MDQ6VXNlcjQxNjcxNjMx",
                "organizations_url": "https://api.github.com/users/glepnir/orgs",
                "received_events_url": "https://api.github.com/users/glepnir/received_events",
                "repos_url": "https://api.github.com/users/glepnir/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/glepnir/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/glepnir/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/glepnir",
                "user_view_type": "public"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3541/comments",
    "created_at": "2025-01-05T04:50:29Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3541/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/3541",
    "id": 2769113914,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "Something isn't working",
            "id": 1674892761,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxNjc0ODkyNzYx",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3541/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDODTQC186lDVM6",
    "number": 3541,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3541/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "closed",
    "state_reason": "completed",
    "sub_issues_summary": {
        "completed": 0,
        "percent_completed": 0,
        "total": 0
    },
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3541/timeline",
    "title": "Diagnostics publish is very slowly",
    "updated_at": "2025-01-05T09:06:44Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/3541",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/16489162?v=4",
        "events_url": "https://api.github.com/users/Napoleon-Jm/events{/privacy}",
        "followers_url": "https://api.github.com/users/Napoleon-Jm/followers",
        "following_url": "https://api.github.com/users/Napoleon-Jm/following{/other_user}",
        "gists_url": "https://api.github.com/users/Napoleon-Jm/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/Napoleon-Jm",
        "id": 16489162,
        "login": "Napoleon-Jm",
        "node_id": "MDQ6VXNlcjE2NDg5MTYy",
        "organizations_url": "https://api.github.com/users/Napoleon-Jm/orgs",
        "received_events_url": "https://api.github.com/users/Napoleon-Jm/received_events",
        "repos_url": "https://api.github.com/users/Napoleon-Jm/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/Napoleon-Jm/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Napoleon-Jm/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/Napoleon-Jm",
        "user_view_type": "public"
    }
}