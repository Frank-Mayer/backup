{
    "active_lock_reason": null,
    "assignee": null,
    "assignees": [],
    "author_association": "NONE",
    "body": "### Description\n\nNot sure if this belongs here instead of the main neovim repo, but running `vim.lsp.buf.rename()` doesn't change symbol under cursor on other files\n\n### Neovim version\n\nNVIM v0.8.0-dev\r\nBuild type: RelWithDebInfo\r\nLuaJIT 2.1.0-beta3\n\n### Nvim-lspconfig version\n\nc107a0f33e7af39dd48ad0e681c3d65281b812d1\n\n### Operating system and version\n\nUbuntu 20.04\n\n### Affected language servers\n\npyright\n\n### Steps to reproduce\n\nRun `:lua vim.lsp.buf.rename()` while cursor is under any symbol.\n\n### Actual behavior\n\nSymbol only changes in current file\n\n### Expected behavior\n\nSymbol changes in every relevant file\n\n### Minimal config\n\n```Lua\nlocal on_windows = vim.loop.os_uname().version:match 'Windows'\r\n\r\nlocal function join_paths(...)\r\n  local path_sep = on_windows and '\\\\' or '/'\r\n  local result = table.concat({ ... }, path_sep)\r\n  return result\r\nend\r\n\r\nvim.cmd [[set runtimepath=$VIMRUNTIME]]\r\n\r\nlocal temp_dir = vim.loop.os_getenv 'TEMP' or '/tmp'\r\n\r\nvim.cmd('set packpath=' .. join_paths(temp_dir, 'nvim', 'site'))\r\n\r\nlocal package_root = join_paths(temp_dir, 'nvim', 'site', 'pack')\r\nlocal install_path = join_paths(package_root, 'packer', 'start', 'packer.nvim')\r\nlocal compile_path = join_paths(install_path, 'plugin', 'packer_compiled.lua')\r\n\r\nlocal function load_plugins()\r\n  require('packer').startup {\r\n    {\r\n      'wbthomason/packer.nvim',\r\n      'neovim/nvim-lspconfig',\r\n    },\r\n    config = {\r\n      package_root = package_root,\r\n      compile_path = compile_path,\r\n    },\r\n  }\r\nend\r\n\r\n_G.load_config = function()\r\n  vim.lsp.set_log_level 'trace'\r\n  if vim.fn.has 'nvim-0.5.1' == 1 then\r\n    require('vim.lsp.log').set_format_func(vim.inspect)\r\n  end\r\n  local nvim_lsp = require 'lspconfig'\r\n  local on_attach = function(_, bufnr)\r\n    local function buf_set_option(...)\r\n      vim.api.nvim_buf_set_option(bufnr, ...)\r\n    end\r\n\r\n    buf_set_option('omnifunc', 'v:lua.vim.lsp.omnifunc')\r\n\r\n    -- Mappings.\r\n    local opts = { buffer = bufnr, noremap = true, silent = true }\r\n    vim.keymap.set('n', 'gD', vim.lsp.buf.declaration, opts)\r\n    vim.keymap.set('n', 'gd', vim.lsp.buf.definition, opts)\r\n    vim.keymap.set('n', 'K', vim.lsp.buf.hover, opts)\r\n    vim.keymap.set('n', 'gi', vim.lsp.buf.implementation, opts)\r\n    vim.keymap.set('n', '<C-k>', vim.lsp.buf.signature_help, opts)\r\n    vim.keymap.set('n', '<space>wa', vim.lsp.buf.add_workspace_folder, opts)\r\n    vim.keymap.set('n', '<space>wr', vim.lsp.buf.remove_workspace_folder, opts)\r\n    vim.keymap.set('n', '<space>wl', function()\r\n      print(vim.inspect(vim.lsp.buf.list_workspace_folders()))\r\n    end, opts)\r\n    vim.keymap.set('n', '<space>D', vim.lsp.buf.type_definition, opts)\r\n    vim.keymap.set('n', '<space>rn', vim.lsp.buf.rename, opts)\r\n    vim.keymap.set('n', 'gr', vim.lsp.buf.references, opts)\r\n    vim.keymap.set('n', '<space>e', vim.diagnostic.open_float, opts)\r\n    vim.keymap.set('n', '[d', vim.diagnostic.goto_prev, opts)\r\n    vim.keymap.set('n', ']d', vim.diagnostic.goto_next, opts)\r\n    vim.keymap.set('n', '<space>q', vim.diagnostic.setloclist, opts)\r\n  end\r\n\r\n  -- Add the server that troubles you here\r\n  local name = 'pyright'\r\n  local cmd = { 'pyright-langserver', '--stdio' } -- needed for elixirls, omnisharp, sumneko_lua\r\n  if not name then\r\n    print 'You have not defined a server name, please edit minimal_init.lua'\r\n  end\r\n  if not nvim_lsp[name].document_config.default_config.cmd and not cmd then\r\n    print [[You have not defined a server default cmd for a server\r\n      that requires it please edit minimal_init.lua]]\r\n  end\r\n\r\n  nvim_lsp[name].setup {\r\n    cmd = cmd,\r\n    on_attach = on_attach,\r\n  }\r\n\r\n  print [[You can find your log at $HOME/.cache/nvim/lsp.log. Please paste in a github issue under a details tag as described in the issue template.]]\r\nend\r\n\r\nif vim.fn.isdirectory(install_path) == 0 then\r\n  vim.fn.system { 'git', 'clone', 'https://github.com/wbthomason/packer.nvim', install_path }\r\n  load_plugins()\r\n  require('packer').sync()\r\n  vim.cmd [[autocmd User PackerComplete ++once lua load_config()]]\r\nelse\r\n  load_plugins()\r\n  require('packer').sync()\r\n  _G.load_config()\r\nend\n```\n\n\n### LSP log\n\n[START][2022-07-06 00:31:03] LSP logging initiated [WARN][2022-07-06 00:31:03] ...lsp/handlers.lua:113\t\"The language server pyright triggers a registerCapability handler despite dynamicRegistration set to false. Report upstream, this warning is harmless\" [WARN][2022-07-06 00:31:03] ...lsp/handlers.lua:475\t\"stubPath typings is not a valid directory.\"",
    "closed_at": "2022-07-07T12:40:28Z",
    "comment_data": [
        {
            "author_association": "MEMBER",
            "body": "We cannot debug every random lsp server. If you can demonstrate a bug in `vim.lsp`, send the issue to https://github.com/neovim/neovim\r\n\r\nThe fact the it works with other servers suggests it's not a bug in `vim.lsp`.",
            "created_at": "2022-07-07T12:40:28Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1985#issuecomment-1177548779",
            "id": 1177548779,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1985",
            "node_id": "IC_kwDODTQC185GL_fr",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 2,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 2,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1177548779/reactions"
            },
            "updated_at": "2022-07-07T12:40:47Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1177548779",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/1359421?v=4",
                "events_url": "https://api.github.com/users/justinmk/events{/privacy}",
                "followers_url": "https://api.github.com/users/justinmk/followers",
                "following_url": "https://api.github.com/users/justinmk/following{/other_user}",
                "gists_url": "https://api.github.com/users/justinmk/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/justinmk",
                "id": 1359421,
                "login": "justinmk",
                "node_id": "MDQ6VXNlcjEzNTk0MjE=",
                "organizations_url": "https://api.github.com/users/justinmk/orgs",
                "received_events_url": "https://api.github.com/users/justinmk/received_events",
                "repos_url": "https://api.github.com/users/justinmk/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/justinmk/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/justinmk/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/justinmk"
            }
        },
        {
            "author_association": "NONE",
            "body": "For anyone who encounters this issue in the future, the problem is likely a missing `pyrightconfig.json`. Pyright uses this file in order to keep track of which files to analyze, and when no such file is provided, it'll default to only analyzing the open ones. To confirm that this is the case, you can run `LspInfo`, and if pyright is running in single file mode, then a `pyrightconfig.json` file should be provided. \r\n\r\nRefer to this [link](https://github.com/microsoft/pyright/blob/main/docs/configuration.md#sample-config-file) for an example config file. The key part here is the `include` part, where you'll want to specify which directory/files that pyright should analyze.\r\n\r\nAlso a helpful source: https://github.com/microsoft/pyright/issues/375",
            "created_at": "2023-04-05T15:45:36Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1985#issuecomment-1497710960",
            "id": 1497710960,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1985",
            "node_id": "IC_kwDODTQC185ZRUFw",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1497710960/reactions"
            },
            "updated_at": "2023-04-05T15:45:36Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1497710960",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/30033925?v=4",
                "events_url": "https://api.github.com/users/jyue86/events{/privacy}",
                "followers_url": "https://api.github.com/users/jyue86/followers",
                "following_url": "https://api.github.com/users/jyue86/following{/other_user}",
                "gists_url": "https://api.github.com/users/jyue86/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/jyue86",
                "id": 30033925,
                "login": "jyue86",
                "node_id": "MDQ6VXNlcjMwMDMzOTI1",
                "organizations_url": "https://api.github.com/users/jyue86/orgs",
                "received_events_url": "https://api.github.com/users/jyue86/received_events",
                "repos_url": "https://api.github.com/users/jyue86/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/jyue86/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/jyue86/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/jyue86"
            }
        },
        {
            "author_association": "NONE",
            "body": "> For anyone who encounters this issue in the future, the problem is likely a missing `pyrightconfig.json`. Pyright uses this file in order to keep track of which files to analyze, and when no such file is provided, it'll default to only analyzing the open ones. To confirm that this is the case, you can run `LspInfo`, and if pyright is running in single file mode, then a `pyrightconfig.json` file should be provided.\r\n> \r\n> Refer to this [link](https://github.com/microsoft/pyright/blob/main/docs/configuration.md#sample-config-file) for an example config file. The key part here is the `include` part, where you'll want to specify which directory/files that pyright should analyze.\r\n> \r\n> Also a helpful source: [microsoft/pyright#375](https://github.com/microsoft/pyright/issues/375)\r\n\r\nAny equivalent of this for `pylsp`?",
            "created_at": "2023-07-11T19:28:50Z",
            "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1985#issuecomment-1631395411",
            "id": 1631395411,
            "issue_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1985",
            "node_id": "IC_kwDODTQC185hPR5T",
            "performed_via_github_app": null,
            "reactions": {
                "+1": 0,
                "-1": 0,
                "confused": 0,
                "eyes": 0,
                "heart": 0,
                "hooray": 0,
                "laugh": 0,
                "rocket": 0,
                "total_count": 0,
                "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1631395411/reactions"
            },
            "updated_at": "2023-07-11T19:28:50Z",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/comments/1631395411",
            "user": {
                "avatar_url": "https://avatars.githubusercontent.com/u/35111165?v=4",
                "events_url": "https://api.github.com/users/Lamby777/events{/privacy}",
                "followers_url": "https://api.github.com/users/Lamby777/followers",
                "following_url": "https://api.github.com/users/Lamby777/following{/other_user}",
                "gists_url": "https://api.github.com/users/Lamby777/gists{/gist_id}",
                "gravatar_id": "",
                "html_url": "https://github.com/Lamby777",
                "id": 35111165,
                "login": "Lamby777",
                "node_id": "MDQ6VXNlcjM1MTExMTY1",
                "organizations_url": "https://api.github.com/users/Lamby777/orgs",
                "received_events_url": "https://api.github.com/users/Lamby777/received_events",
                "repos_url": "https://api.github.com/users/Lamby777/repos",
                "site_admin": false,
                "starred_url": "https://api.github.com/users/Lamby777/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Lamby777/subscriptions",
                "type": "User",
                "url": "https://api.github.com/users/Lamby777"
            }
        }
    ],
    "comments": 3,
    "comments_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1985/comments",
    "created_at": "2022-07-06T05:31:24Z",
    "events_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1985/events",
    "html_url": "https://github.com/neovim/nvim-lspconfig/issues/1985",
    "id": 1295171926,
    "labels": [
        {
            "color": "f9d0c4",
            "default": true,
            "description": "Something isn't working",
            "id": 1674892761,
            "name": "bug",
            "node_id": "MDU6TGFiZWwxNjc0ODkyNzYx",
            "url": "https://api.github.com/repos/neovim/nvim-lspconfig/labels/bug"
        }
    ],
    "labels_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1985/labels{/name}",
    "locked": false,
    "milestone": null,
    "node_id": "I_kwDODTQC185NMsFW",
    "number": 1985,
    "performed_via_github_app": null,
    "reactions": {
        "+1": 0,
        "-1": 0,
        "confused": 0,
        "eyes": 0,
        "heart": 0,
        "hooray": 0,
        "laugh": 0,
        "rocket": 0,
        "total_count": 0,
        "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1985/reactions"
    },
    "repository_url": "https://api.github.com/repos/neovim/nvim-lspconfig",
    "state": "closed",
    "state_reason": "completed",
    "timeline_url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1985/timeline",
    "title": "LSP rename doesn't change symbol on other files. (Only in pyright)",
    "updated_at": "2023-07-11T19:28:51Z",
    "url": "https://api.github.com/repos/neovim/nvim-lspconfig/issues/1985",
    "user": {
        "avatar_url": "https://avatars.githubusercontent.com/u/58958492?v=4",
        "events_url": "https://api.github.com/users/danielgarzaf/events{/privacy}",
        "followers_url": "https://api.github.com/users/danielgarzaf/followers",
        "following_url": "https://api.github.com/users/danielgarzaf/following{/other_user}",
        "gists_url": "https://api.github.com/users/danielgarzaf/gists{/gist_id}",
        "gravatar_id": "",
        "html_url": "https://github.com/danielgarzaf",
        "id": 58958492,
        "login": "danielgarzaf",
        "node_id": "MDQ6VXNlcjU4OTU4NDky",
        "organizations_url": "https://api.github.com/users/danielgarzaf/orgs",
        "received_events_url": "https://api.github.com/users/danielgarzaf/received_events",
        "repos_url": "https://api.github.com/users/danielgarzaf/repos",
        "site_admin": false,
        "starred_url": "https://api.github.com/users/danielgarzaf/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/danielgarzaf/subscriptions",
        "type": "User",
        "url": "https://api.github.com/users/danielgarzaf"
    }
}